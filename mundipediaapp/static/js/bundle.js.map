{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/Utils.es6.js","../../../node_modules/stem-core/src/base/Dispatcher.es6.js","../../../node_modules/stem-core/src/ui/NodeAttributes.es6.js","../../../node_modules/stem-core/src/ui/UIBase.es6.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.es6.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.es6.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.es6.js","../../../node_modules/stem-core/src/decorators/Style.es6.js","../../../node_modules/stem-core/src/ui/Style.es6.js","../../../node_modules/stem-core/src/base/Device.es6.js","../../../node_modules/stem-core/src/decorators/LazyCSS.es6.js","../../../node_modules/stem-core/src/decorators/Decorators.es6.js","../../../node_modules/stem-core/src/ui/Draggable.es6.js","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.es6.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.es6.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.es6.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.es6.js","../../../node_modules/stem-core/src/ui/svg/SVGText.es6.js","../../../node_modules/stem-core/src/math.es6.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.es6.js","../../../node_modules/stem-core/src/ui/Transition.es6.js","../../../node_modules/stem-core/src/ui/Color.es6.js","../../../node_modules/stem-core/src/ui/svg/Animations.es6.js","../../../node_modules/stem-core/src/ui/GlobalStyle.es6.js","../../../node_modules/stem-core/src/data-structures/MultiMap.es6.js","../../../node_modules/stem-core/src/polyfill/Headers.es6.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.es6.js","../../../node_modules/stem-core/src/polyfill/Body.es6.js","../../../node_modules/stem-core/src/polyfill/Request.es6.js","../../../node_modules/stem-core/src/polyfill/Response.es6.js","../../../node_modules/stem-core/src/base/Fetch.es6.js","../../../node_modules/stem-core/src/base/Ajax.es6.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/base/PageTitleManager.es6.js","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.es6.js","../../../node_modules/stem-core/src/ui/style/Theme.es6.js","../../../node_modules/stem-core/src/ui/tabs/Style.es6.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.es6.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.es6.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.es6.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.es6.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.es6.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.es6.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.es6.js","../../../node_modules/stem-core/src/time/Date.es6.js","../../../node_modules/stem-core/src/time/Time.es6.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../../node_modules/stem-core/src/base/Require.es6.js","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../node_modules/stem-core/src/state/State.es6.js","../../js/AppConfig.js","../../js/CardStyle.js","../../js/Card.jsx","../../js/IndexPageStyle.js","../../../node_modules/d3-geo/src/adder.js","../../../node_modules/d3-geo/src/math.js","../../../node_modules/d3-geo/src/noop.js","../../../node_modules/d3-geo/src/stream.js","../../../node_modules/d3-geo/src/area.js","../../../node_modules/d3-geo/src/cartesian.js","../../../node_modules/d3-geo/src/bounds.js","../../../node_modules/d3-geo/src/centroid.js","../../../node_modules/d3-geo/src/compose.js","../../../node_modules/d3-geo/src/rotation.js","../../../node_modules/d3-geo/src/circle.js","../../../node_modules/d3-geo/src/clip/buffer.js","../../../node_modules/d3-geo/src/clip/line.js","../../../node_modules/d3-geo/src/pointEqual.js","../../../node_modules/d3-geo/src/clip/polygon.js","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/pairs.js","../../../node_modules/d3-array/src/number.js","../../../node_modules/d3-array/src/extent.js","../../../node_modules/d3-array/src/identity.js","../../../node_modules/d3-array/src/range.js","../../../node_modules/d3-array/src/ticks.js","../../../node_modules/d3-array/src/threshold/sturges.js","../../../node_modules/d3-array/src/quantile.js","../../../node_modules/d3-array/src/merge.js","../../../node_modules/d3-array/src/min.js","../../../node_modules/d3-array/src/transpose.js","../../../node_modules/d3-geo/src/clip/extent.js","../../../node_modules/d3-geo/src/polygonContains.js","../../../node_modules/d3-geo/src/length.js","../../../node_modules/d3-geo/src/distance.js","../../../node_modules/d3-geo/src/contains.js","../../../node_modules/d3-geo/src/identity.js","../../../node_modules/d3-geo/src/path/area.js","../../../node_modules/d3-geo/src/path/bounds.js","../../../node_modules/d3-geo/src/path/centroid.js","../../../node_modules/d3-geo/src/path/measure.js","../../../node_modules/d3-geo/src/clip/index.js","../../../node_modules/d3-geo/src/clip/antimeridian.js","../../../node_modules/d3-geo/src/clip/circle.js","../../../node_modules/d3-geo/src/transform.js","../../../node_modules/d3-geo/src/projection/fit.js","../../../node_modules/d3-geo/src/projection/resample.js","../../../node_modules/d3-geo/src/projection/index.js","../../../node_modules/d3-geo/src/projection/azimuthal.js","../../../node_modules/d3-geo/src/projection/azimuthalEqualArea.js","../../../node_modules/d3-geo/src/projection/azimuthalEquidistant.js","../../../node_modules/d3-geo/src/projection/orthographic.js","../../../node_modules/d3-collection/src/map.js","../../../node_modules/d3-collection/src/set.js","../../../node_modules/d3-voronoi/src/constant.js","../../../node_modules/d3-voronoi/src/point.js","../../../node_modules/d3-voronoi/src/RedBlackTree.js","../../../node_modules/d3-voronoi/src/Edge.js","../../../node_modules/d3-voronoi/src/Cell.js","../../../node_modules/d3-voronoi/src/Circle.js","../../../node_modules/d3-voronoi/src/Beach.js","../../../node_modules/d3-voronoi/src/Diagram.js","../../../node_modules/d3-voronoi/src/voronoi.js","../../../node_modules/d3-geo-voronoi/lpetrich/delaunayTriangles.js","../../../node_modules/d3-geo-voronoi/src/geoVoronoi.js","../../js/MundipediaLogo.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/state/Store.es6.js","../../../node_modules/stem-core/src/state/StoreMixins.es6.js","../../../establishment/localization/static/js/state/LanguageStore.es6.js","../../../establishment/content/static/js/state/ArticleStore.es6.js","../../../establishment/blog/js/state/BlogStore.js","../../../node_modules/stem-core/src/markup/MarkupParser.es6.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.es6.js","../../../establishment/content/static/js/markup/MarkupEditor.jsx","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/content/static/js/ArticleRenderer.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/content/static/js/ArticleManager.jsx","../../../establishment/content/static/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../establishment/content/static/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../establishment/localization/static/js/state/TranslationStore.es6.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/localization/static/js/state/CountryStore.es6.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../node_modules/stem-core/src/base/Plugin.es6.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../node_modules/stem-core/src/ui/DelayedElement.es6.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/static/js/state/ForumStore.es6.js","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../establishment/forum/static/js/EditThreadReplyButton.jsx","../../../establishment/forum/static/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/static/js/ForumStyle.es6.js","../../../establishment/forum/static/js/CreateThreadReplyButton.jsx","../../../establishment/forum/static/js/ForumThread.jsx","../../../establishment/forum/static/js/ForumWidget.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/ui/navmanager/NavStyle.es6.js","../../../node_modules/stem-core/src/base/StorageMap.es6.js","../../../node_modules/stem-core/src/ui/navmanager/NavElement.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavIcon.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavSwipeDetection.es6.js","../../../node_modules/stem-core/src/ui/navmanager/NavManager.jsx","../../js/AppNavManager.jsx","../../../node_modules/stem-core/src/app/StemApp.jsx","../../js/App.jsx"],"sourcesContent":["// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => {};\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {setObjectPrototype} from \"../base/Utils\";\n\n// TODO: this method should be made static in NodeAttributes probably\nfunction CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\nclass ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nclass NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        if (this.className) {\n            node.className = String(this.className);\n            // TODO: find out which solution is best\n            // This solution works for svg nodes as well\n            // for (let cls of this.getClassNameSet()) {\n            //    node.classList.add(cls);\n            // }\n        } else {\n            node.removeAttribute(\"class\");\n        }\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                let value = this.style[key];\n                if (typeof value === \"function\") {\n                    value = value();\n                }\n                node.style[key] = value;\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n\nexport {CreateNodeAttributesMap, NodeAttributes};\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node.remove();\n        this.node = undefined; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.render());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n    DARK: \"dark\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: -1\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","// TODO: not sure is this needs to actually be *.jsx\nimport {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            // TODO: on some attributes, do we want to automatically add a px suffix?\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        return this.getStyleInstances(\".\" + this.getClassName(), this.options.style || {});\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {decorate} from \"./Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","// This file may be deprecated in time by CSSNativeStyleSheet, but the API will be backwards compatible\nimport {UI} from \"./UIBase\";\nimport {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\n// TODO: should probably be renamed to StyleSheet?\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            updateOnResize: false,\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (this.options.updateOnResize) {\n            this.attachEventListener(window, \"resize\", () => {\n                this.update();\n            });\n        }\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    let result = {};\n    result[context] = style;\n    return result;\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\n// TODO: deprecate this global css method, or at least rewrite it\nfunction css(style) {\n    if (arguments.length > 1) {\n        style = Object.assign({}, ...arguments);\n    }\n    // If using the exact same object, return the same class\n    let styleWrapper = styleMap.get(style);\n    if (!styleWrapper) {\n        styleWrapper = DynamicStyleElement.create(document.body, {style: style});\n        styleMap.set(style, styleWrapper);\n    }\n    return styleWrapper;\n}\n\nexport {css, StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport const StyleSet = StyleSheet;\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventCoord(event, axis) {\n        let pageName = \"page\" + axis;\n        if (this.isTouchDevice()) {\n            if (event.targetTouches) {\n                return event.targetTouches[0][pageName];\n            }\n            if (event.originalEvent && event.originalEvent.targetTouches) {\n                return event.originalEvent.targetTouches[0][pageName];\n            }\n        }\n        return event[pageName];\n    }\n\n    static getEventX(event) {\n        return this.getEventCoord(event, \"X\");\n    }\n\n    static getEventY(event) {\n        return this.getEventCoord(event, \"Y\");\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","// TODO: this file should be refactored\n// consider lazyCSS -> styleRule/styleRule(styleRule.INHERIT)\nimport {decorate, createDefaultSetter} from './Utils';\nimport {lazyInitialize} from './LazyInitialize'\n\nfunction evaluateInitializer(target, initializer, value) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    return result;\n}\n\nfunction handleDescriptor(target, key, descriptor) {\n    const {initializer, value} = descriptor;\n\n    // Change the prototype of this object to keep the old initializer\n    target[\"__style__\" + key] = {initializer, value};\n\n    descriptor.initializer = function () {\n        let style = evaluateInitializer(this, initializer, value);\n        return this.css(style);\n    };\n    delete descriptor.value;\n\n    return lazyInitialize(target, key, descriptor);\n}\n\nexport function lazyCSS(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nfunction handleInheritDescriptor(target, key, descriptor) {\n    const {initializer, value} = descriptor;\n    descriptor.initializer = function () {\n        // Get the value we set in the prototype of the parent object\n        let parentDesc = Object.getPrototypeOf(this.__proto__)[\"__style__\" + key];\n        let parentStyle = evaluateInitializer(this, parentDesc.initializer, parentDesc.value);\n\n        let style = evaluateInitializer(this, initializer, value);\n        style = Object.assign(parentStyle, style);\n\n        return style;\n    };\n    delete descriptor.value;\n\n    return lazyCSS(target, key, descriptor);\n}\n\nexport function lazyInheritCSS(...args) {\n    return decorate(handleInheritDescriptor, args);\n}\n","// TODO: add bind decorator\nexport * from \"./Deprecate\";\nexport * from \"./LazyCSS\";\nexport * from \"./LazyInitialize\";\nexport * from \"./ReadOnly\";\n","import {lazyInit} from \"../decorators/Decorators\";\n\nlet Draggable = (BaseClass) => class Draggable extends BaseClass {\n    @lazyInit\n    _clickCallbacks = new Map();\n\n    @lazyInit\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            let deltaX = event.clientX - listenerWrapper._lastX;\n            listenerWrapper._lastX = event.clientX;\n\n            let deltaY = event.clientY - listenerWrapper._lastY;\n            listenerWrapper._lastY = event.clientY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = event.clientX;\n            listenerWrapper._lastY = event.clientY;\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event)\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            let touch = event.targetTouches[0];\n            let deltaX = touch.pageX - listenerWrapper._lastX;\n            listenerWrapper._lastX = touch.pageX;\n\n            let deltaY = touch.pageY - listenerWrapper._lastY;\n            listenerWrapper._lastY = touch.pageY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            let touch = event.targetTouches[0];\n            listenerWrapper._lastX = touch.pageX;\n            listenerWrapper._lastY = touch.pageY;\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n\nexport {Draggable};","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            value: 0,\n        });\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <UI.ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n// TODO: deprecate this, to use lazyInit decorators\nexport function ConstructorInitMixin(BaseClass) {\n    class ConstructorInitMixin extends BaseClass {\n        static ensureInit() {\n            if (!this._haveInit) {\n                this._haveInit = true;\n                if (typeof this.init === \"function\") {\n                    this.init();\n                }\n            }\n        }\n\n        createNode() {\n            this.constructor.ensureInit();\n            return super.createNode();\n        }\n    };\n\n    return ConstructorInitMixin;\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\n\nclass InputableElement extends UI.Element {\n    static styleSet = InputStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.getStyleSet().inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n};\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n};\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n};\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n};\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n};\n\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.getStyleSet().checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.value) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.getStyleSet().select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, TextArea, Select};\n","import {StyleSet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\n\nclass Form extends UI.Primitive(\"form\") {\n    static styleSet = FormStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n\nclass FormGroup extends UI.Element {\n    static styleSet = FormStyle.getInstance();\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.getStyleSet().hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.getStyleSet().hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    render() {\n        return [this.getGivenChildren(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().formField);\n        if (this.inline()) {\n            attr.addClass(this.getStyleSet().sameLine);\n        } else {\n            attr.addClass(this.getStyleSet().separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    getGivenChildren() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.getGivenChildren(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.getGivenChildren()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nclass SVGNodeAttributes extends NodeAttributes {\n    constructor(obj) {\n        super(obj);\n        this.className = null;\n    }\n\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n\nexport {SVGNodeAttributes};","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {deepCopy, uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    getDefaultOptions() {\n        return {};\n    }\n\n    setOptions(options) {\n        if (typeof this.getDefaultOptions === \"function\") {\n            let defaultOptions = this.getDefaultOptions();\n            // TODO: consider this deep copy, seems really shady!\n            const goodRef = options.ref;\n            options = deepCopy({}, defaultOptions, options);\n            if (goodRef) {\n                options.ref = goodRef;\n            }\n        }\n        super.setOptions(options);\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}]\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nclass Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\nfunction lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n};\n\nfunction darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n};\n\nfunction buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\nexport {Color, lighten, darken, buildColors};\n","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"UI\";\nimport {StyleSet} from \"Style\";\nimport {styleRule, styleRuleInherit} from \"../decorators/Style\";\nimport {buildColors} from \"Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\n\nlet GlobalStyle = {\n};\n\nconst COLOR = {\n    PLAIN: \"#ffffff\",\n    GRAY: \"#777\",\n    PRIMARY: \"#337ab7\",\n    SUCCESS: \"#5cb85c\",\n    INFO: \"#5bc0de\",\n    WARNING: \"#f0ad4e\",\n    DANGER: \"#d9534f\",\n    GOOGLE: \"#de4b39\",\n    FACEBOOK: \"#3b5998\",\n    DARK: \"#202e3e\",\n};\n\nclass ButtonGroupStyle extends StyleSet {\n    @styleRule\n    HORIZONTAL = {\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass RadioButtonGroupStyle extends StyleSet {\n    @styleRule\n    DEFAULT = {\n        \">*\": {\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n\nfunction BasicLevelStyleSet(colorClassFunction) {\n    class BasicLevelStyleClass extends StyleSet {\n        colorClassBuilder = colorClassFunction;\n\n        @styleRule\n        PLAIN = {};\n\n        @styleRule\n        GRAY = {};\n\n        @styleRule\n        PRIMARY = this.colorClassBuilder(buildColors(COLOR.PRIMARY));\n\n        @styleRule\n        SUCCESS = this.colorClassBuilder(buildColors(COLOR.SUCCESS));\n\n        @styleRule\n        INFO = this.colorClassBuilder(buildColors(COLOR.INFO));\n\n        @styleRule\n        WARNING = this.colorClassBuilder(buildColors(COLOR.WARNING));\n\n        @styleRule\n        DANGER = this.colorClassBuilder(buildColors(COLOR.DANGER));\n\n        @styleRule\n        GOOGLE = this.colorClassBuilder(buildColors(COLOR.GOOGLE));\n\n        @styleRule\n        FACEBOOK = this.colorClassBuilder(buildColors(COLOR.FACEBOOK));\n\n        @styleRule\n        DARK = this.colorClassBuilder(buildColors(COLOR.DARK, false));\n\n        Level(level) {\n            if (this[level]) {\n                return this[level];\n            }\n            for (let type of Object.keys(Level)) {\n                if (level == Level[type]) {\n                    return this[type];\n                }\n            }\n        }\n    }\n\n    return BasicLevelStyleClass;\n};\n\nlet buttonColorClassBuilder = (colors) => {\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": regular,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nclass ButtonStyle extends BasicLevelStyleSet(buttonColorClassBuilder) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        fontSize: \"14px\",\n    }, this.colorClassBuilder(buildColors(COLOR.PLAIN))];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nlet labelColorClassBuilder = (colors) => {\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nclass LabelStyle extends BasicLevelStyleSet(labelColorClassBuilder) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorClassBuilder(buildColors(COLOR.GRAY))];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nlet badgeColorClassBuilder = (colors) => {\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nclass BadgeStyle extends BasicLevelStyleSet(labelColorClassBuilder) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorClassBuilder(buildColors(COLOR.GRAY))];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nfunction cardPanelColorClassBuilder(color) {\n    let colors = buildColors(color);\n    class CardPanelLevelStyle extends StyleSet {\n        @styleRule\n        heading = {\n            color: colors[6],\n            backgroundColor: colors[0],\n            borderBottomColor: colors[4],\n        };\n\n        @styleRule\n        panel = {\n            borderColor: colors[4],\n        };\n    }\n\n    return CardPanelLevelStyle;\n};\n\nfunction cardPanelSizeClassBuilder(fontSize) {\n    let panelStyle = {};\n    if (fontSize) {\n        panelStyle.fontSize = fontSize;\n    }\n    class CardPanelSizeStyle extends StyleSet {\n        @styleRule\n        panel = panelStyle;\n    };\n\n    return CardPanelSizeStyle;\n};\n\nclass CardPanelStyle {\n    defaultClassBuilder = function() {\n        class DefaultCardPanelStyle extends cardPanelColorClassBuilder(COLOR.PLAIN) {\n            @styleRuleInherit\n            heading = {\n                padding: \"0.8em 1.2em\",\n                borderBottomWidth: \"0.08em\",\n                borderBottomStyle: \"solid\",\n            };\n\n            @styleRule\n            body = {\n                // padding: \"0.35em\",\n            };\n\n            @styleRuleInherit\n            panel = {\n                borderWidth: \"0.08em\",\n                borderRadius: \"0.3em\",\n                borderStyle: \"solid\",\n                backgroundColor: \"#ffffff\",\n            };\n        }\n\n        return DefaultCardPanelStyle;\n    };\n\n    DEFAULT = new (this.defaultClassBuilder())();\n\n    EXTRA_SMALL = new (cardPanelSizeClassBuilder(\"11px\"))();\n\n    SMALL = new (cardPanelSizeClassBuilder(\"12px\"))();\n\n    MEDIUM = new (cardPanelSizeClassBuilder)();\n\n    LARGE = new (cardPanelSizeClassBuilder(\"17px\"))();\n\n    EXTRA_LARGE = new (cardPanelSizeClassBuilder(\"21px\"))();\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n\n    PRIMARY = new (cardPanelColorClassBuilder(COLOR.PRIMARY))();\n\n    SUCCESS = new (cardPanelColorClassBuilder(COLOR.SUCCESS))();\n\n    INFO = new (cardPanelColorClassBuilder(COLOR.INFO))();\n\n    WARNING = new (cardPanelColorClassBuilder(COLOR.WARNING))();\n\n    DANGER = new (cardPanelColorClassBuilder(COLOR.DANGER))();\n\n    GOOGLE = new (cardPanelColorClassBuilder(COLOR.GOOGLE))();\n\n    FACEBOOK = new (cardPanelColorClassBuilder(COLOR.FACEBOOK))();\n\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nlet progressBarColorClassBuilder = (colors) => {\n    return {\n        backgroundColor: colors[1],\n    };\n}\n\nclass ProgressBarStyle extends BasicLevelStyleSet(progressBarColorClassBuilder) {\n    @styleRule\n    CONTAINER = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    }\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorClassBuilder(buildColors(COLOR.PRIMARY))];\n\n    @styleRule\n    STRIPED = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    ACTIVE = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass FlexContainerStyle extends StyleSet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSet {\n    @styleRule\n    EXTRA_SMALL = {\n        margin: Device.isMobileDevice() ? \"0 6px\" : \"0% 15%\",\n    };\n\n    @styleRule\n    SMALL = {\n        margin: Device.isMobileDevice() ? \"0 4px\" : \"0% 10%\",\n    };\n\n    @styleRule\n    MEDIUM = {\n        margin: Device.isMobileDevice() ? \"0 4px\" : \"0% 6%\",\n    };\n\n    @styleRule\n    LARGE = {\n        margin: Device.isMobileDevice() ? \"0 2px\" : \"0% 3%\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        margin: Device.isMobileDevice() ? \"0 2px\" : \"0% 1%\",\n    };\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSet {\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    }\n}\n\n\nGlobalStyle.Button = ButtonStyle.getInstance();\nGlobalStyle.RadioButtonGroup = RadioButtonGroupStyle.getInstance();\nGlobalStyle.ButtonGroup = ButtonGroupStyle.getInstance();\nGlobalStyle.Label = LabelStyle.getInstance();\nGlobalStyle.Badge = BadgeStyle.getInstance();\nGlobalStyle.CardPanel = new CardPanelStyle();\nGlobalStyle.ProgressBar = ProgressBarStyle.getInstance();\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    let rawHeader = xhr.getAllResponseHeaders() || \"\";\n    let headers = new Headers();\n    for (let line of rawHeader.split(/\\r?\\n/)) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = parseHeaders(xhr);\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n\n        this.request = request;\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    resolve(payload) {\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            this.promiseReject(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then() {\n        return this.getPromise().then(...arguments);\n    }\n\n    catch() {\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nlet Ajax = {\n    fetch: fetch,\n    request: fetch,\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return Ajax.fetch(...arguments, {method: \"GET\"});\n    },\n    getJSON(url, data) {\n        return Ajax.get(url, {dataType: \"json\", data: data});\n    },\n    post(url, options) {\n        return Ajax.fetch(...arguments, {method: \"POST\"});\n    },\n    postJSON(url, data) {\n        return Ajax.post(url, {dataType: \"json\", data: data});\n    },\n    addDefaultPreprocessor(preprocessor) {\n        Ajax.fetch.defaultPreprocessors.push(preprocessor);\n    },\n};\n\nexport {Ajax};\n","import {UI} from \"./UIBase\";\nimport {StyleSet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {GlobalStyle} from \"./GlobalStyle\";\nimport {Ajax} from \"../base/Ajax\";\nimport {Orientation} from \"./Constants\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\n\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.Label.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(GlobalStyle.Label.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(GlobalStyle.Label.Level(this.getLevel()));\n        }\n    }\n}\n\n\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.Badge.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(GlobalStyle.Badge.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(GlobalStyle.Badge.Level(this.getLevel()));\n        }\n    }\n}\n\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.ProgressBar.CONTAINER);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: GlobalStyle.ProgressBar.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + GlobalStyle.ProgressBar.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + GlobalStyle.ProgressBar.STRIPED;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + GlobalStyle.ProgressBar.ACTIVE;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: need to have Switcher properly work with a redraw\nimport {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements);\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n\n        // TODO: disable this listener\n        Dispatcher.Global.addListener(\"changeURL\", (href, event) => {\n            Router.changeURL(href);\n            if (event) {\n                event.preventDefault();\n            }\n        });\n\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet || obj.styleSet;\n    return getInstance(styleSheet);\n}\n\n// TODO: the Theme class still need considering\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls, styleSheet);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\n// We're going to add some methods to UI.Element, to be able to access their style sheets\nfunction styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n}\n\n// TODO: should fixate on a single nomenclature, just use StyleSheet everywhere\nUI.Element.prototype.getStyleSheet = UI.Element.prototype.getStyleSet = styleSheetGetter;\n\n// TODO: not sure if I like the getter pattern\nObject.defineProperty(UI.Element.prototype, \"styleSheet\", {\n    get: function() {\n        return this.getStyleSheet();\n    },\n    set: function (value) {\n        throw Error(\"Don't change the styleSheet of a UI Element, change this attribute in this.options\");\n    }\n});\n\nfunction registerStyle(styleClass) {\n    return (target) => {\n        Theme.register(target, styleClass);\n    }\n}\n\nexport {Theme, registerStyle};\n","import {StyleSet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass BaseTabAreaStyle extends StyleSet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle} from \"./Style\";\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n};\n\nclass TabTitleArea extends UI.Element {\n};\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        return <TabTitleArea ref=\"titleArea\" className={this.styleSheet.nav}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        return <Switcher className={this.styleSheet.switcher} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    render() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (let panel of this.getGivenChildren()) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (tabTitle.options.active) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n};\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","import {Ajax} from \"../../base/Ajax\";\nimport {GlobalStyle} from \"../GlobalStyle\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\n\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.Button.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(GlobalStyle.Button.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(GlobalStyle.Button.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    ajaxCall(data) {\n        this.setState(ActionStatus.RUNNING);\n        Ajax.fetch(Object.assign({}, data, {\n            success: (successData) => {\n                data.success(successData);\n                if (successData.error) {\n                    this.setState(ActionStatus.FAILED);\n                } else {\n                    this.setState(ActionStatus.SUCCESS);\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                data.error(xhr, errmsg, err);\n                this.setState(ActionStatus.FAILED);\n            },\n            complete: () => {\n                setTimeout(() => {\n                    this.setState(ActionStatus.DEFAULT);\n                }, this.options.onCompete || 1000);\n            }\n        }));\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {Button} from \"./Button\";\nimport {GlobalStyle} from \"../GlobalStyle\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {Orientation} from \"../Constants\";\n\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.ButtonGroup.Orientation(this.options.orientation));\n    }\n}\n\n\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.RadioButtonGroup.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(GlobalStyle.CardPanel.DEFAULT.panel);\n        if (this.getLevel()) {\n            attr.addClass(GlobalStyle.CardPanel.Level(this.getLevel()).panel);\n        }\n        if (this.getSize()) {\n            attr.addClass(GlobalStyle.CardPanel.Size(this.getSize()).panel);\n        }\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    render() {\n        let headingLevel = (this.getLevel() ? GlobalStyle.CardPanel.Level(this.getLevel()).heading : \"\");\n\n        return [\n            <div className={`${GlobalStyle.CardPanel.DEFAULT.heading} ${headingLevel}`}>{this.getTitle()}</div>,\n            <div className={GlobalStyle.CardPanel.DEFAULT.body} style={this.options.bodyStyle}>{this.getGivenChildren()}</div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {StyleSet, styleRule} from \"../Style\";\n\nclass CollapsibleStyle extends StyleSet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends StyleSet {\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#f5f5f5\",\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSet = new CollapsibleClass();\n\n        getCollapsibleStyleSet() {\n            return this.options.collapsibleStyleSet || this.constructor.collapsibleStyleSet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            const collapsibleStyle = this.getCollapsibleStyleSet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            const collapsibleStyle = this.getCollapsibleStyleSet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\n\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    static styleSet = new CollapsiblePanelStyle();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.getStyleSet().collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(this.getStyleSet().collapsedButton);\n        }, this.getCollapsibleStyleSet().transitionDuration * 700);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    render() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.getStyleSet().collapsedButton;\n            collapsedPanelClass = this.getCollapsibleStyleSet().collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.getStyleSet().heading}>\n                    <a ref=\"toggleButton\"  className={`${this.getStyleSet().button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </a>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.getGivenChildren()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.getGivenChildren();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    getGivenChildren() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\n\nclass FloatingWindow extends UI.Element {\n    static styleSet = FloatingWindowStyle.getInstance();\n\n    getDefaultOptions() {\n        return {\n            transitionTime: 0\n        };\n    }\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"z-index\", \"2016\");\n    }\n\n    fadeOut() {\n        this.removeClass(this.getStyleSet().visibleAnimated);\n        this.addClass(this.getStyleSet().hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.getStyleSet().hiddenAnimated);\n        this.addClass(this.getStyleSet().visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    unbindWindowListeners() {\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            this.unbindWindowListeners();\n            super.hide();\n        }\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    render() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.getGivenChildren()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    hide() {\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    getGivenChildren() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()} onClick={() => this.action()}/>;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\n\nclass GlobalContainerStyle extends StyleSet {\n    static NAVBAR_HEIGHT = 50;\n\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop: `${this.constructor.NAVBAR_HEIGHT + (Device.isMobileDevice() ? 3 : 10)}px`,\n            paddingBottom: `${Device.isMobileDevice() ? 25 : 10}px`,\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSet, styleRule} from \"../Style\";\n\nclass DividerStyle extends StyleSet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n\n    @styleRule\n    horizontalDivider = {\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        paddingLeft: this.barThickness + \"px !important\",\n        background: \"#DDD\",\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barPadding}px`,\n    };\n\n    @styleRule\n    verticalDivider = {\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        paddingTop: this.barThickness + \"px !important\",\n        background: \"#DDD\",\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginTop: `${-this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n            paddingLeft: \"2px\",\n            paddingRight: \"2px\",\n            boxSizing: \"border-box\",\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: \"2px\",\n            paddingBottom: \"2px\",\n            boxSizing: \"border-box\",\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n// options.orientation is the orientation of the divided elements\nclass DividerBar extends Divider {\n    static styleSet = SectionDividerStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.getStyleSet().noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.getStyleSet().noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.getStyleSet().verticalDivider);\n        } else {\n            attr.addClass(this.getStyleSet().horizontalDivider);\n        }\n    }\n};\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\nclass SectionDivider extends UI.Element {\n    static styleSet = SectionDividerStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.getStyleSet().verticalSection);\n        } else {\n            attr.addClass(this.getStyleSet().horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    toggleChild(index) {\n        let size = this.getDimension(this.children[index * 2]);\n        if (!size) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                    return;\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n\n                nextPanel.dispatch(\"resize\");\n                previousPanel.dispatch(\"resize\");\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n            });\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    render() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n\n        for (let child of this.getGivenChildren()) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBar className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}\n\nexport {SectionDivider}\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {getComputedStyle} from \"../Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\nclass AccordionDivider extends Divider {\n    static styleSet = AccordionStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.getStyleSet().noTextSelection);\n        this.addClass(this.getStyleSet().grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.getStyleSet().noTextSelection);\n        this.removeClass(this.getStyleSet().grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.getStyleSet().grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.getStyleSet().collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\nclass Accordion extends UI.Element {\n    static styleSet = AccordionStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().accordion);\n    }\n\n    render() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of this.getGivenChildren()) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI, getComputedStyle} from \"./UI\";\nimport {StyleSet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    getStyleSet() {\n        return this.options.styleSet || this.parent.getStyleSet();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.getStyleSet().navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.getStyleSet().navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\nclass Carousel extends UI.Element {\n    static styleSet = CarouselStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"} styleSet={this.getStyleSet()}/>,\n            <div className={this.getStyleSet().container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI, UIElement, NumberInput, Button} from \"./UI\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        static rangePanelStyleSet = RangePanelStyle.getInstance();\n\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.constructor.rangePanelStyleSet.rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.constructor.rangePanelStyleSet.default);\n        }\n\n        render() {\n            const rangePanelStyleSet = this.constructor.rangePanelStyleSet;\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSet.tableContainer} style={{paddingTop: headHeight + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.getStyleSet().table} ${rangePanelStyleSet.table}`}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSet.footer}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1} ➞ ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // styleset.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\nclass Table extends UI.Primitive(\"table\") {\n    static styleSet = TableStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id || index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSet().collapsed} hidden`}>\n                            {this.renderCollapsible(this.options.entry)}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return UI.CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    return class SortableTable extends BaseTableClass {\n        static styleSet = SortableTableStyle.getInstance();\n\n        getStyleSet() {\n            return this.options.styleSet || this.constructor.styleSet;\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.getStyleSet().table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.getStyleSet().sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.getStyleSet().sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.getStyleSet().sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    };\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (timeUnit.isAbsolute() && diff > +timeUnit) {\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI, TextInput, VolatileFloatingWindow, getOffset, VerticalSlideBar} from \"./UI\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n// import {Button} from \"./button/Button\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\n\nexport function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\nconst EnqueuedMethodsClass = (BaseClass) => class AsyncClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n\nclass CodeEditor extends EnqueuedMethodsClass(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n}\n\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    constructor(streamName, options={}) {\n        super();\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let firstSpace = packet.indexOf(\" \");\n        let type, payload;\n        if (firstSpace > 0) {\n            type = packet.substr(0, firstSpace).trim();\n            payload = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nWebsocketStreamHandler.MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    constructor(url=self.WEBSOCKET_URL) {\n        super();\n        this.url = url;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.streamStatus = new Map();\n        //TODO: should probably try to connect right now!\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    connect() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + this.url + \" ...\");\n            this.websocket = new WebSocket(this.url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", this.url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    // Stream options:\n    // rawMessage = true means we won't try to decode a json object from the message\n    // parseMayFail = true means that we'll pass the raw message if JSON.parse fails\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        // Check if the websocket connection is open\n        if (this.websocket && this.websocket.readyState === 1) {\n            this.sendSubscribe(streamName);\n        }   //TODO: no else?\n\n        let streamHandler = new WebsocketStreamHandler(streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n        return streamHandler;\n    }\n\n    canSendSubscribe(streamName) {\n        if (this.streamStatus.has(streamName)) {\n            let streamStatus = this.streamStatus.get(streamName);\n            return streamStatus.status == WebsocketSubscriber.StreamStatus.UNSUBSCRIBED ||\n                    streamStatus.status == WebsocketSubscriber.StreamStatus.NONE;\n        }\n        return true;\n    }\n\n    updateStreamStatus(streamName, index) {\n        let streamStatus = null;\n        if (!this.streamStatus.has(streamName)) {\n            streamStatus = {\n                index: index,\n                status: WebsocketSubscriber.StreamStatus.SUBSCRIBING,\n                checkTimeout: null,\n                tryCount: 0,\n            };\n        } else {\n            streamStatus = this.streamStatus.get(streamName);\n            streamStatus.status = WebsocketSubscriber.StreamStatus.SUBSCRIBING;\n        }\n        if (streamStatus.checkTimeout != null) {\n            clearTimeout(streamStatus.checkTimeout);\n            streamStatus.checkTimeout = null;\n        }\n        streamStatus.tryCount ++;\n        let streamTimeout = Math.min(WebsocketSubscriber.STREAM_SUBSCRIBE_TIMEOUT * streamStatus.tryCount,\n                                     WebsocketSubscriber.STREAM_SUBSCRIBE_MAX_TIMEOUT);\n        streamStatus.checkTimeout = setTimeout(() => {\n            this.subscribeTimeout(streamName);\n        }, streamTimeout);\n        this.streamStatus.set(streamName, streamStatus);\n    }\n\n    subscribeTimeout(streamName) {\n        console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName +\n                    \" reached! Trying to resubscribe again!\");\n        let streamStatus = this.streamStatus.get(streamName);\n        streamStatus.checkTimeout = null;\n        streamStatus.status = WebsocketSubscriber.StreamStatus.NONE;\n        if (streamStatus.index) {\n            this.sendResubscribe(streamName, streamStatus.index);\n        } else {\n            this.sendSubscribe(streamName);\n        }\n    }\n\n    sendSubscribe(streamName) {\n        if (this.canSendSubscribe(streamName)) {\n            this.send(\"s \" + streamName);\n            this.updateStreamStatus(streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.canSendSubscribe(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n            this.updateStreamStatus(streamName, index);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let key of this.streamHandlers.keys()) {\n            if (this.streamHandlers.get(key).haveIndex()) {\n                let index = this.streamHandlers.get(key).getLastIndex();\n                console.log(\"WebsocketSubscriber: Sending (re)subscribe to indexed stream \", key, \" from index \", index);\n                this.sendResubscribe(key, index);\n            } else {\n                console.log(\"WebsocketSubscriber: Sending (re)subscribe to stream \", key);\n                this.sendSubscribe(key);\n            }\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        if (!this.streamStatus.has(streamName)) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" +\n                          streamName);\n        }\n        let streamStatus = this.streamStatus.get(streamName);\n        if (streamStatus.checkTimeout) {\n            clearTimeout(streamStatus.checkTimeout);\n            streamStatus.checkTimeout = null;\n        }\n        streamStatus.status = WebsocketSubscriber.StreamStatus.SUBSCRIBED;\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamStatus = this.streamStatus.get(streamName);\n                    if (streamStatus && streamStatus.checkTimeout != null) {\n                        clearTimeout(streamStatus.checkTimeout);\n                        streamStatus.checkTimeout = null;\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamStatus of this.streamStatus) {\n            if (streamStatus.checkTimeout) {\n                clearTimeout(streamStatus.checkTimeout);\n            }\n        }\n        this.streamStatus.clear();\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n}\n\nWebsocketSubscriber.ConnectionStatus = {\n    NONE: 0,\n    CONNECTING: 1,\n    CONNECTED: 2,\n    DISCONNECTED: 3\n};\n\nWebsocketSubscriber.StreamStatus = {\n    NONE: 0,\n    SUBSCRIBING: 1,\n    SUBSCRIBED: 2,\n    UNSUBSCRIBED: 3\n};\n\nWebsocketSubscriber.STREAM_SUBSCRIBE_TIMEOUT = 1000;\nWebsocketSubscriber.STREAM_SUBSCRIBE_MAX_TIMEOUT = 10000;\n\nWebsocketSubscriber.CONNECT_RETRY_TIMEOUT = 1500;\nWebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT = 15000;\n\nWebsocketSubscriber.HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nWebsocketSubscriber.addListener = function (streamName, callback) {\n    return this.Global.addStreamListener(streamName, callback);\n};\n\nexport {WebsocketSubscriber};\n","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {UI, CodeEditor} from \"UI\";\n\nimport {Ajax} from \"base/Ajax\";\nimport {ensure} from \"base/Require\";\nimport {getCookie} from \"base/Utils\";\nimport {PageTitleManager} from \"base/PageTitleManager\";\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\n\nimport {GlobalState} from \"state/State\";\n\nPageTitleManager.setDefaultTitle(\"\");\n\n// Add an ajax preprocessor to always have the csfr token\nAjax.addDefaultPreprocessor((options) => {\n    options.credentials = options.credentials || \"include\";\n    options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n});\n\nCodeEditor.requireAce = function (callback) {\n    ensure([\"/static/js/ext/ace/ace.js\"], callback);\n};\n\nGlobalState.registerStream = function (streamName) {\n    WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n};\n\n//Register on the global event stream\nGlobalState.registerStream(\"global-events\");\n\n//Register on the user event stream\nif (self.USER && self.USER.id) {\n    GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n}","import {UI} from \"UI\";\nimport {StyleSheet, styleRule} from \"UI\";\n\nexport class CardStyle extends StyleSheet {\n    @styleRule\n    container = {\n        width: \"450px\",\n        maxHeight: \"100%\",\n        maxWidth: \"100%\",\n\n        backgroundColor: \"#fff\",\n        boxShadow: \"#a05100 0px 0px 10px\",\n    };\n\n    @styleRule\n    header = {\n        height: \"100px\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontSize: \"28px\",\n    };\n\n    @styleRule\n    body = {\n        paddingLeft: \"20px\",\n        paddingRight: \"20px\",\n        paddingBottom: \"40px\",\n        textAlign: \"center\",\n        fontSize: \"17px\",\n        \">p\": {\n            margin: \"0px\",\n        }\n    };\n}","import {UI, registerStyle} from \"UI\";\nimport {CardStyle} from \"./CardStyle\";\n\n\n@registerStyle(CardStyle)\nexport class Card extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let {headerText, bodyText} = this.options;\n\n        return [\n            <div className={this.styleSheet.header}>\n                {headerText}\n            </div>,\n            <div className={this.styleSheet.body}>\n                {\n                    bodyText.map((line) => {\n                        return <p>{line}</p>;\n                    })\n                }\n            </div>\n        ];\n    }\n}","import {UI} from \"UI\";\nimport {StyleSheet, styleRule} from \"UI\";\n\nexport class IndexPageStyle extends StyleSheet {\n    @styleRule\n    container = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n    };\n\n    @styleRule\n    topContainer = {\n        flexGrow: \"1.5\",\n        width: \"100%\",\n        backgroundColor: \"#f0a150\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    bottomContainer = {\n        flexGrow: \"2\",\n        width: \"100%\",\n        fontSize: \"18px\",\n        paddingTop: \"20px\",\n        textAlign: \"center\",\n    };\n}\n\nexport class QuoteStyle extends StyleSheet {\n    @styleRule\n    quote = {\n        color: \"#aaa\",\n        fontStyle: \"italic\",\n        fontSize: \"17px\",\n        marginTop: \"10px\",\n    };\n}\n\nexport class CodeStyle extends StyleSheet {\n    @styleRule\n    code = {\n        backgroundColor: \"#eee\",\n        fontSize: \"15px\",\n        padding: \"2px 8px\",\n        borderRadius: \"5px\",\n        fontFamily: '\"Fira Mono\", \"DejaVu Sans Mono\", Menlo, Consolas, \"Liberation Mono\", Monaco, \"Lucida Console\", monospace',\n    };\n}","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305–363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import adder from \"./adder\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nexport var areaRingSum = adder();\n\nvar areaSum = adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import adder from \"./adder\";\nimport {areaStream, areaRingSum} from \"./area\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport {abs, degrees, epsilon, radians} from \"./math\";\nimport stream from \"./stream\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum = adder(),\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360°) % 360°, except that we want\n// the distance between ±180° to be 360°.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import {asin, atan2, cos, degrees, epsilon, epsilon2, radians, sin, sqrt} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nvar W0, W1,\n    X0, Y0, Z0,\n    X1, Y1, Z1,\n    X2, Y2, Z2,\n    lambda00, phi00, // first point\n    x0, y0, z0; // previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00, phi00);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = sqrt(cx * cx + cy * cy + cz * cz),\n      w = asin(m), // line weight = angle\n      v = m && -w / m; // area weight multiplier\n  X2 += v * cx;\n  Y2 += v * cy;\n  Z2 += v * cz;\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nexport default function(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 =\n  X2 = Y2 = Z2 = 0;\n  stream(object, centroidStream);\n\n  var x = X2,\n      y = Y2,\n      z = Z2,\n      m = x * x + y * y + z * z;\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = x * x + y * y + z * z;\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / sqrt(m)) * degrees];\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose\";\nimport {asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport constant from \"./constant\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math\";\nimport {rotateRadians} from \"./rotation\";\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y) {\n      line.push([x, y]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import {abs, epsilon} from \"./math\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    // If the first and last points of a segment are coincident, then treat as a\n    // closed ring. TODO if all rings are closed, then the winding order of the\n    // exterior ring should be checked.\n    if (pointEqual(p0, p1)) {\n      stream.lineStart();\n      for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n      stream.lineEnd();\n      return;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(array, f) {\n  if (f == null) f = pair;\n  var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n  while (i < n) pairs[i] = f(p, p = array[++i]);\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","export default function(x) {\n  return x;\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse = stop < start,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  if (reverse) n = start, start = stop, stop = n;\n\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export default function(arrays) {\n  var n = arrays.length,\n      m,\n      i = -1,\n      j = 0,\n      merged,\n      array;\n\n  while (++i < n) j += arrays[i].length;\n  merged = new Array(j);\n\n  while (--n >= 0) {\n    array = arrays[n];\n    m = array.length;\n    while (--m >= 0) {\n      merged[--j] = array[m];\n    }\n  }\n\n  return merged;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}\n","import min from \"./min\";\n\nexport default function(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","import {abs, epsilon} from \"../math\";\nimport clipBuffer from \"./buffer\";\nimport clipLine from \"./line\";\nimport clipPolygon from \"./polygon\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport function clipExtent(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipPolygon(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 960,\n      y1 = 500,\n      cache,\n      cacheStream,\n      clip;\n\n  return clip = {\n    stream: function(stream) {\n      return cache && cacheStream === stream ? cache : cache = clipExtent(x0, y0, x1, y1)(cacheStream = stream);\n    },\n    extent: function(_) {\n      return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], cache = cacheStream = null, clip) : [[x0, y0], [x1, y1]];\n    }\n  };\n}\n","import adder from \"./adder\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian\";\nimport {asin, atan2, cos, epsilon, pi, quarterPi, sin, tau} from \"./math\";\n\nvar sum = adder();\n\nexport default function(polygon, point) {\n  var lambda = point[0],\n      phi = point[1],\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = point0[0],\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = point1[0],\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n","import adder from \"./adder\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nvar lengthSum = adder(),\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum.reset();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","import length from \"./length\";\n\nvar coordinates = [null, null],\n    object = {type: \"LineString\", coordinates: coordinates};\n\nexport default function(a, b) {\n  coordinates[0] = a;\n  coordinates[1] = b;\n  return length(object);\n}\n","import {default as polygonContains} from \"./polygonContains\";\nimport {default as distance} from \"./distance\";\nimport {epsilon, radians} from \"./math\";\n\nvar containsObjectType = {\n  Feature: function(object, point) {\n    return containsGeometry(object.geometry, point);\n  },\n  FeatureCollection: function(object, point) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) if (containsGeometry(features[i].geometry, point)) return true;\n    return false;\n  }\n};\n\nvar containsGeometryType = {\n  Sphere: function() {\n    return true;\n  },\n  Point: function(object, point) {\n    return containsPoint(object.coordinates, point);\n  },\n  MultiPoint: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPoint(coordinates[i], point)) return true;\n    return false;\n  },\n  LineString: function(object, point) {\n    return containsLine(object.coordinates, point);\n  },\n  MultiLineString: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsLine(coordinates[i], point)) return true;\n    return false;\n  },\n  Polygon: function(object, point) {\n    return containsPolygon(object.coordinates, point);\n  },\n  MultiPolygon: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPolygon(coordinates[i], point)) return true;\n    return false;\n  },\n  GeometryCollection: function(object, point) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) if (containsGeometry(geometries[i], point)) return true;\n    return false;\n  }\n};\n\nfunction containsGeometry(geometry, point) {\n  return geometry && containsGeometryType.hasOwnProperty(geometry.type)\n      ? containsGeometryType[geometry.type](geometry, point)\n      : false;\n}\n\nfunction containsPoint(coordinates, point) {\n  return distance(coordinates, point) === 0;\n}\n\nfunction containsLine(coordinates, point) {\n  var ab = distance(coordinates[0], coordinates[1]),\n      ao = distance(coordinates[0], point),\n      ob = distance(point, coordinates[1]);\n  return ao + ob <= ab + epsilon;\n}\n\nfunction containsPolygon(coordinates, point) {\n  return !!polygonContains(coordinates.map(ringRadians), pointRadians(point));\n}\n\nfunction ringRadians(ring) {\n  return ring = ring.map(pointRadians), ring.pop(), ring;\n}\n\nfunction pointRadians(point) {\n  return [point[0] * radians, point[1] * radians];\n}\n\nexport default function(object, point) {\n  return (object && containsObjectType.hasOwnProperty(object.type)\n      ? containsObjectType[object.type]\n      : containsGeometry)(object, point);\n}\n","export default function(x) {\n  return x;\n}\n","import adder from \"../adder\";\nimport {abs} from \"../math\";\nimport noop from \"../noop\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import adder from \"../adder\";\nimport {sqrt} from \"../math\";\nimport noop from \"../noop\";\n\nvar lengthSum = adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum.reset();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","import clipBuffer from \"./buffer\";\nimport clipPolygon from \"./polygon\";\nimport {epsilon, halfPi} from \"../math\";\nimport polygonContains from \"../polygonContains\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(rotate, sink) {\n    var line = clipLine(sink),\n        rotatedStart = rotate.invert(start[0], start[1]),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, rotatedStart);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipPolygon(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      var point = rotate(lambda, phi);\n      if (pointVisible(lambda = point[0], phi = point[1])) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      var point = rotate(lambda, phi);\n      line.point(point[0], point[1]);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      var point = rotate(lambda, phi);\n      ringSink.point(point[0], point[1]);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian\";\nimport {circleStream} from \"../circle\";\nimport {abs, cos, epsilon, pi, sqrt} from \"../math\";\nimport pointEqual from \"../pointEqual\";\nimport clip from \"./index\";\n\nexport default function(radius, delta) {\n  var cr = cos(radius),\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        // Handle degeneracies.\n        // TODO ignore if not clipping polygons.\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2)) {\n            point1[0] += epsilon;\n            point1[1] += epsilon;\n            v = visible(point1[0], point1[1]);\n          }\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1]);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream\";\nimport boundsStream from \"../path/bounds\";\n\nexport function fitExtent(projection, extent, object) {\n  var w = extent[1][0] - extent[0][0],\n      h = extent[1][1] - extent[0][1],\n      clip = projection.clipExtent && projection.clipExtent();\n\n  projection\n      .scale(150)\n      .translate([0, 0]);\n\n  if (clip != null) projection.clipExtent(null);\n\n  geoStream(object, projection.stream(boundsStream));\n\n  var b = boundsStream.result(),\n      k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n      x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n      y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n\n  if (clip != null) projection.clipExtent(clip);\n\n  return projection\n      .scale(k * 150)\n      .translate([x, y]);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n","import {cartesian} from \"../cartesian\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math\";\nimport {transformer} from \"../transform\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian\";\nimport clipCircle from \"../clip/circle\";\nimport {clipExtent} from \"../clip/extent\";\nimport compose from \"../compose\";\nimport identity from \"../identity\";\nimport {degrees, radians, sqrt} from \"../math\";\nimport {rotateRadians} from \"../rotation\";\nimport {transformer} from \"../transform\";\nimport {fitExtent, fitSize} from \"./fit\";\nimport resample from \"./resample\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      dx, dy, lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, projectRotate, // rotate\n      theta = null, preclip = clipAntimeridian, // clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // clip extent\n      delta2 = 0.5, projectResample = resample(projectTransform, delta2), // precision\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    point = projectRotate(point[0] * radians, point[1] * radians);\n    return [point[0] * k + dx, dy - point[1] * k];\n  }\n\n  function invert(point) {\n    point = projectRotate.invert((point[0] - dx) / k, (dy - point[1]) / k);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  function projectTransform(x, y) {\n    return x = project(x, y), [x[0] * k + dx, dy - x[1] * k];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(preclip(rotate, projectResample(postclip(cacheStream = stream))));\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians, 6 * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  function recenter() {\n    projectRotate = compose(rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma), project);\n    var center = project(lambda, phi);\n    dx = x - center[0] * k;\n    dy = y + center[1] * k;\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {asin, atan2, cos, sin, sqrt} from \"../math\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n","import {asin, sqrt} from \"../math\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal\";\nimport projection from \"./index\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n","import {acos, sin} from \"../math\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal\";\nimport projection from \"./index\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n","import {asin, cos, epsilon, sin} from \"../math\";\nimport {azimuthalInvert} from \"./azimuthal\";\nimport projection from \"./index\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export function x(d) {\n  return d[0];\n}\n\nexport function y(d) {\n  return d[1];\n}\n","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\n\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n\n  insert: function(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n      if (after.R) {\n        after = after.R;\n        while (after.L) after = after.L;\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n\n    after = node;\n    while (parent && parent.C) {\n      grandpa = parent.U;\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n      parent = after.U;\n    }\n    this._.C = false;\n  },\n\n  remove: function(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n\n    if (!left) next = right;\n    else if (!right) next = left;\n    else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;\n      else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n    if (node && node.C) { node.C = false; return; }\n\n    do {\n      if (node === this._) break;\n      if (node === parent.L) {\n        sibling = parent.R;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n        if ((sibling.L && sibling.L.C)\n            || (sibling.R && sibling.R.C)) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n        if ((sibling.L && sibling.L.C)\n          || (sibling.R && sibling.R.C)) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) node = node.L;\n  return node;\n}\n\nexport default RedBlackTree;\n","import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// Liang–Barsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n","import {createBorderEdge} from \"./Edge\";\nimport {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];\n  else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\n\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\n\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      index.sort(function(i, j) { return array[j] - array[i]; });\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\n    }\n  }\n}\n\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length;\n\n      // Remove any dangling clipped edges.\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      }\n\n      // Insert any border edges as necessary.\n      iHalfedge = 0, nHalfedges = halfedges.length;\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\n              : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  }\n\n  // If there weren’t any edges, have the closest site cover the extent.\n  // It doesn’t matter which corner of the extent we measure!\n  if (cover) {\n    var dx, dy, d2, dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\n      cover.halfedges.push(\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\n        edges.push(createBorderEdge(site, v10, v00)) - 1\n      );\n    }\n  }\n\n  // Lastly delete any cells with no edges; these were entirely clipped.\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {circles, epsilon2} from \"./Diagram\";\n\nvar circlePool = [];\n\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x =\n  this.y =\n  this.arc =\n  this.site =\n  this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n\n  if (!lArc || !rArc) return;\n\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n\n  if (lSite === rSite) return;\n\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n\n  var circle = circlePool.pop() || new Circle;\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\n      if (node.L) node = node.L;\n      else { before = node.P; break; }\n    } else {\n      if (node.R) node = node.R;\n      else { before = node; break; }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\n\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {createCell} from \"./Cell\";\nimport {attachCircle, detachCircle} from \"./Circle\";\nimport {createEdge, setEdgeEnd} from \"./Edge\";\nimport {beaches, epsilon} from \"./Diagram\";\n\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge =\n  this.site =\n  this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach;\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n\n  detachBeach(beach);\n\n  var lArc = previous;\n  while (lArc.circle\n      && Math.abs(x - lArc.circle.x) < epsilon\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n\n  var rArc = next;\n  while (rArc.circle\n      && Math.abs(x - rArc.circle.x) < epsilon\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n\n  var nArcs = disappearing.length,\n      iArc;\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L; else {\n      dxr = x - rightBreakPoint(node, directrix);\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) { // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  }\n\n  // else lArc !== rArc\n  detachCircle(lArc);\n  detachCircle(rArc);\n\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n\n  if (!pby2) return rfocx;\n\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n\n  if (!plby2) return lfocx;\n\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}\n","import {addBeach, removeBeach} from \"./Beach\";\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\nimport {firstCircle} from \"./Circle\";\nimport {clipEdges} from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1]\n      || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree;\n  circles = new RedBlackTree;\n\n  while (true) {\n    circle = firstCircle;\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n\n  beaches =\n  circles =\n  edges =\n  cells = null;\n}\n\nDiagram.prototype = {\n  constructor: Diagram,\n\n  polygons: function() {\n    var edges = this.edges;\n\n    return this.cells.map(function(cell) {\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n\n  triangles: function() {\n    var triangles = [],\n        edges = this.edges;\n\n    this.cells.forEach(function(cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n\n    return triangles;\n  },\n\n  links: function() {\n    return this.edges.filter(function(edge) {\n      return edge.right;\n    }).map(function(edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n\n  find: function(x, y, radius) {\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\n\n    // Use the previously-found cell, or start with an arbitrary one.\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\n\n    // Traverse the half-edges to find a closer cell, if any.\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function(e) {\n        var edge = that.edges[e], v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n}\n","import constant from \"./constant\";\nimport {x as pointX, y as pointY} from \"./point\";\nimport Diagram, {epsilon} from \"./Diagram\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      extent = null;\n\n  function voronoi(data) {\n    return new Diagram(data.map(function(d, i) {\n      var s = [Math.round(x(d, i, data) / epsilon) * epsilon, Math.round(y(d, i, data) / epsilon) * epsilon];\n      s.index = i;\n      s.data = d;\n      return s;\n    }), extent);\n  }\n\n  voronoi.polygons = function(data) {\n    return voronoi(data).polygons();\n  };\n\n  voronoi.links = function(data) {\n    return voronoi(data).links();\n  };\n\n  voronoi.triangles = function(data) {\n    return voronoi(data).triangles();\n  };\n\n  voronoi.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), voronoi) : x;\n  };\n\n  voronoi.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), voronoi) : y;\n  };\n\n  voronoi.extent = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]], voronoi) : extent && [[extent[0][0], extent[0][1]], [extent[1][0], extent[1][1]]];\n  };\n\n  voronoi.size = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[0, 0], [+_[0], +_[1]]], voronoi) : extent && [extent[1][0] - extent[0][0], extent[1][1] - extent[0][1]];\n  };\n\n  return voronoi;\n}\n","//\n//  Copyright (c) 2016, by Loren Petrich\n//\n// Distributed under the terms of the MIT License\n//\n//  http://lpetrich.org/\n//\n\n// Calculates the spherical Delaunay triangulation of a set of points\n// These points are entered as an array of arrays of coordinates: 0, 1, 2\n// Any extra members are ignored\n\n// FindDelaunayTriangulation(Positions) and\n// FindDelaunayTriangulationIndexed(Positions, Indices)\n// work from an array of points as specified above,\n// the second one working from a set of indices into the array,\n// and return an object with these members:\n\n// positions -- vectors on a unit sphere\n// indices -- of all the vertices\n// triangles -- array of TriangleObject\n// edges -- array of EdgeObject\n// hull -- array of vertex indices -- the convex hull\n// vor_positions -- positions of triangles' circumcircle centers (Voronoi vertices)\n// vor_edges -- pair of indices in vor_positions (empty one: [-1,-1])\n// vor_polygons -- object indexed by vertex index,\n//    and containing edges (EdgeObject), triangles (TriangleObject),\n//    and boundary (vertices in vor_positions)\n//    Open ones have a -1 at each end.\n\n// Warning: ImproveTriangulation() is mysteriously buggy\n// and is effectively disabled for now\n\nfunction dotprd(x,y)\n{\n\tvar sum = 0.0;\n\tfor (var ic=0; ic<3; ic++)\n\t\tsum += x[ic]*y[ic];\n\treturn sum;\n}\n\nfunction crsprd(x,y)\n{\n\tvar prod = new Array(3);\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar ic1 = ic + 1;\n\t\tif (ic1 >= 3) ic1 -= 3;\n\t\tvar ic2 = ic + 2;\n\t\tif (ic2 >= 3) ic2 -= 3;\n\t\tprod[ic] = x[ic1]*y[ic2] - x[ic2]*y[ic1];\n\t}\n\treturn prod;\n}\n\nfunction triple_prd(x,y,z)\n{\n\treturn dotprd(crsprd(x,y),z);\n}\n\n// This distance formula has some nice properties:\n// distance and not square of distance;\n// the square roots give better numerical resolution\n// distance of antipode(p) to p' = - (distance of p to p')\n// Range: -2 to +2\nfunction ptdist(x,y)\n{\n\tvar dst1 = 0.0;\n\tvar dst2 = 0.0;\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar diff1 = y[ic] - x[ic];\n\t\tdst1 += diff1*diff1;\n\t\tvar diff2 = y[ic] + x[ic];\n\t\tdst2 += diff2*diff2\n\t}\n\treturn Math.sqrt(dst1) - Math.sqrt(dst2);\n}\n\nfunction Normalize(vec)\n{\n\tvar vecres = new Array(3);\n\tvar sum = 0.0, nrmult;\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar val = vec[ic];\n\t\tsum += val*val;\n\t}\n\tif (sum > 0)\n\t\tnrmult = 1/Math.sqrt(sum);\n\telse\n\t\tnrmult = 0;\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvecres[ic] = nrmult*vec[ic];\n\t}\n\treturn vecres;\n}\n\n// Indexed versions\n\nfunction dotprd_ix(Positions,ix,iy)\n{\n\treturn dotprd(Positions[ix],Positions[iy]);\n}\n\nfunction crsprd_ix(Positions,ix,iy)\n{\n\treturn crsprd(Positions[ix],Positions[iy]);\n}\n\nfunction triple_prd_ix(Positions,ix,iy,iz)\n{\n\treturn triple_prd(Positions[ix],Positions[iy],Positions[iz]);\n}\n\nfunction ptdist_ix(Positions,ix,iy)\n{\n\treturn ptdist(Positions[ix],Positions[iy]);\n}\n\n// Returns a zero 3-vector\nfunction zerovec()\n{\n\tvar vec = new Array(3);\n\tfor (var ic=0; ic<3; ic++)\n\t\tvec[ic] = 0.0;\n\treturn vec;\n}\n\n// Implements copying\nfunction vec_copy(x)\n{\n\tvar vec = new Array(3);\n\tfor (var ic=0; ic<3; ic++)\n\t\tvec[ic] = x[ic];\n\treturn vec;\n}\n\n// Implements x += y\nfunction vec_add_to(x,y)\n{\n\tfor (var ic=0; ic<3; ic++)\n\t\tx[ic] += y[ic];\n}\n\n// Implements x *= y\nfunction vec_mult_scalar_to(x,y)\n{\n\tfor (var ic=0; ic<3; ic++)\n\t\tx[ic] *= y;\n}\n\n// Implements x - y\nfunction vec_difference(x,y)\n{\n\tvar diff = zerovec();\n\tfor (var ic=0; ic<3; ic++)\n\t\tdiff[ic] = x[ic] - y[ic];\n\treturn diff;\n}\n\n// JavaScript's counterpart of \"null\" / \"None\":\nfunction IsNull(x)\n{\n\treturn (typeof(x) == 'undefined');\n}\n\nfunction TrianglesEqual(tr1, tr2)\n{\n\tif (IsNull(tr1)) return false;\n\tif (IsNull(tr2)) return false;\n\t\n\tfor (var iv=0; iv<3; iv++)\n\t\tif (tr1.verts[iv] != tr2.verts[iv])\n\t\t\treturn false;\n\t\n\treturn true;\n}\n\nfunction EdgesEqual(ed1, ed2)\n{\n\tif (IsNull(ed1)) return false;\n\tif (IsNull(ed2)) return false;\n\t\n\tfor (var iv=0; iv<2; iv++)\n\t\tif (ed1.verts[iv] != ed2.verts[iv])\n\t\t\treturn false;\n\t\n\treturn true;\n}\n\nfunction min(x,y)\n{\n\treturn (y < x) ? y : x;\n}\n\nfunction max(x,y)\n{\n\treturn (y > x) ? y : x;\n}\n\nfunction TriangleObject(Positions, verts)\n{\n\tthis.verts = verts;\n\tthis.edges = new Array(3);\n\t\n\t// Find directions for testing whether a point is inside\n\tthis.dirs = new Array(3);\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar ic1 = ic + 1;\n\t\tif (ic1 >= 3) ic1 -= 3;\n\t\tvar ic2 = ic + 2;\n\t\tif (ic2 >= 3) ic2 -= 3;\n\t\tthis.dirs[ic] = crsprd_ix(Positions,verts[ic1],verts[ic2]);\n\t}\n\t\n\t// Tetrahedral volume factor\n\tthis.vol = triple_prd_ix(Positions,verts[0],verts[1],verts[2]);\n\t\n\t// Adjust to get the signs correct for the point-inside test;\n\t// the vertex opposite the edges' vertices ought to give a dot product of 1\n\tfor (var ic=0; ic<3; ic++)\n\t\tvec_mult_scalar_to(this.dirs[ic],1/this.vol);\n\t\n\t// Circumcircle test\n\tvar ccdir = zerovec();\n\tfor (var ic=0; ic<3; ic++)\n\t\tvec_add_to(ccdir,this.dirs[ic]);\n\tthis.ccdir = Normalize(ccdir);\n\t\n\tvar ccdsq = 0;\n\tfor (var ic=0; ic<3; ic++)\n\t\tccdsq += ptdist(this.ccdir,Positions[verts[ic]]);\n\tccdsq /= 3;\n\tthis.ccdsq = ccdsq;\n}\n\n// For copying in vertex info from another triangle\nTriangleObject.prototype.copy_vert_info = function(src)\n{\n\tthis.verts = src.verts;\n\tthis.dirs = src.dirs;\n\tthis.vol = src.vol;\n\tthis.ccdir = src.ccdir;\n\tthis.ccdsq = src.ccdsq;\n}\n\nTriangleObject.prototype.IsVertexOrderCorrect = function()\n{\n\treturn this.vol >= 0;\n}\n\nTriangleObject.prototype.IsPointInside = function(p)\n{\n\t for (var ic=0; ic<3; ic++)\n\t \tif (dotprd(p,this.dirs[ic]) < 0) return false;\n\t \n\t return true;\n}\n\nTriangleObject.prototype.IsPointInCircumcircle = function(p)\n{\n\treturn (ptdist(this.ccdir,p) < this.ccdsq);\n}\n\nTriangleObject.prototype.IsVertex = function(ix)\n{\n\tfor (var ic=0; ic<3; ic++)\n\t\tif (ix == this.verts[ic]) return true;\n\treturn false;\n}\n\nTriangleObject.prototype.VertexIndexIn = function(ix)\n{\n\tfor (var ic=0; ic<3; ic++)\n\t\tif (ix == this.verts[ic]) return ic;\n\treturn -1;\n}\n\nTriangleObject.prototype.EdgeIndexIn = function(ed)\n{\n\tfor (var ic=0; ic<3; ic++)\n\t\tif (EdgesEqual(this.edges[ic], ed)) return ic;\n\treturn -1;\n}\n\nfunction EdgeObject(verts)\n{\n\tthis.verts = verts;\n\tthis.polys = new Array(2);\n}\n\nEdgeObject.prototype.IsVertex = function(ix)\n{\n\tfor (var ic=0; ic<2; ic++)\n\t\tif (ix == this.verts[ic]) return true;\n\treturn false;\n}\n\nEdgeObject.prototype.VertexIndexIn = function(ix)\n{\n\tfor (var ic=0; ic<2; ic++)\n\t\tif (ix == this.verts[ic]) return ic;\n\treturn -1;\n}\n\nEdgeObject.prototype.PolyIndexIn = function(pl)\n{\n\tfor (var ic=0; ic<2; ic++)\n\t\tif (TrianglesEqual(this.polys[ic],pl)) return ic;\n\treturn -1;\n}\n\nfunction EdgeCheckObject(Positions,verts)\n{\n\tthis.verts = verts;\n\tthis.pdst = ptdist_ix(Positions,verts[0],verts[1]);\n\tthis.direc = Normalize(crsprd_ix(Positions,verts[0],verts[1]));\n\tvar midpnt = zerovec();\n\tvec_add_to(midpnt,Positions[verts[0]]);\n\tvec_add_to(midpnt,Positions[verts[1]]);\n\tthis.midpnt = Normalize(midpnt);\n}\n\n// Check on the possible intersection with another edge-check object\n// return a boolean of whether or not it does\nEdgeCheckObject.prototype.intersects = function(Positions,other)\n{\n\t// Assume that sharing a vertex means non-intersecting\n\tfor (var ic=0; ic<2; ic++)\n\t\tfor (var ict=0; ict<2; ict++)\n\t\t\tif (this.verts[ic] == other.verts[ict]) return false;\n\t\n\t// Find intersection point; will test it and its antipode\n\tvar itsc = Normalize(crsprd(this.direc, other.direc));\n\t\n\t// Find dot product with midpoints to test if the intersection\n\t// is in the near hemispheres of the lines' midpoints.\n\t// If it is in both near hemispheres or both far hemispheres, it's OK\n\t// In both far hemispheres: antipode is in both near hemispheres\n\tvar near0 = dotprd(itsc,this.midpnt) > 0;\n\tvar near1 = dotprd(itsc,other.midpnt) > 0;\n\tif (near1 != near0) return false;\n\t\n\tvar pd0 = [];\n\tfor (var ic=0; ic<2; ic++)\n\t{\n\t\tvar pd = ptdist(itsc, Positions[this.verts[ic]]);\n\t\tpd0.push(pd);\n\t}\n\tvar pd1 = [];\n\tfor (var ic=0; ic<2; ic++)\n\t{\n\t\tvar pd = ptdist(itsc, Positions[other.verts[ic]]);\n\t\tpd1.push(pd);\n\t}\n\tvar mxpd0 = max(pd0[0],pd0[1]);\n\tvar mxpd1 = max(pd1[0],pd1[1]);\n\tif ((mxpd0 <= this.pdst) && (mxpd1 <= other.pdst) && near0) return true;\n\t\n\t// Handle its antipode; use antipode-related shortcuts\n\t// like reversing the distance value and the hemisphere-presence value\n\tvec_mult_scalar_to(itsc, -1);\n\tnear0 = !near0;\n\tfor (var ic=0; ic<2; ic++)\n\t{\n\t\tpd0[ic] = - pd0[ic];\n\t\tpd1[ic] = - pd1[ic];\n\t}\n\tmxpd0 = max(pd0[0],pd0[1]);\n\tmxpd1 = max(pd1[0],pd1[1]);\n\tif ((mxpd0 <= this.pdst) && (mxpd1 <= other.pdst) && near0) return true;\n\t\n\treturn false;\n}\n\n// Adds to an array if it was not already present;\n// Must resort to this kludge because JavaScript doesn't have sets\nfunction AddUnique(arr, x)\n{\n\tfor (var i=0; i<arr.length; i++)\n\t\tif (x == arr[i]) return;\n\tarr.push(x);\n}\n\n// Version for edges, since testing equality of objects\n// doesn't work that well in JavaScript\nfunction AddUniqueEdge(arr, ed)\n{\n\tfor (var i=0; i<arr.length; i++)\n\t\tif (EdgesEqual(arr[i],ed)) return;\n\tarr.push(ed);\n}\n\n// Find the set intersection\nfunction FindShared(arr1, arr2)\n{\n\tvar resarr = [];\n\tfor (var i1=0; i1<arr1.length; i1++)\n\t{\n\t\tvar x1 = arr1[i1];\n\t\tfor (var i2=0; i2<arr2.length; i2++)\n\t\t{\n\t\t\tvar x2 = arr2[i2];\n\t\t\tif (x1 == x2)\n\t\t\t{\n\t\t\t\tresarr.push(x1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn resarr;\n}\n\n// Version for edges\nfunction FindSharedEdges(arr1, arr2)\n{\n\tvar resarr = [];\n\tfor (var i1=0; i1<arr1.length; i1++)\n\t{\n\t\tvar x1 = arr1[i1];\n\t\tfor (var i2=0; i2<arr2.length; i2++)\n\t\t{\n\t\t\tvar x2 = arr2[i2];\n\t\t\tif (EdgesEqual(x1,x2))\n\t\t\t{\n\t\t\t\tresarr.push(x1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn resarr;\n}\n\n// Takes all the members of of arr2 out of arr1\n// and ignores the arr2 members not present in arr1\nfunction FindSetDifference(arr1, arr2)\n{\n\tif (arr2.length == 0) return;\n\tvar diffarr = [];\n\tfor (var i1=0; i1<arr1.length; i1++)\n\t{\n\t\tvar x1 = arr1[i1];\n\t\tvar AddThisOne = true;\n\t\tfor (var i2=0; i2<arr2.length; i2++)\n\t\t{\n\t\t\tvar x2 = arr2[i2];\n\t\t\tif (x2 == x1)\n\t\t\t{\n\t\t\t\tAddThisOne = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (AddThisOne) diffarr.push(x1);\n\t}\n\t\n\t// Clear the array\n\tarr1.splice(0,arr1.length);\n\t\n\tfor (var i=0; i<diffarr.length; i++)\n\t\tarr1.push(diffarr[i]);\n}\n\n// Version for edges\nfunction FindSetDifferenceEdges(arr1, arr2)\n{\n\tif (arr2.length == 0) return;\n\tvar diffarr = [];\n\tfor (var i1=0; i1<arr1.length; i1++)\n\t{\n\t\tvar x1 = arr1[i1];\n\t\tvar AddThisOne = true;\n\t\tfor (var i2=0; i2<arr2.length; i2++)\n\t\t{\n\t\t\tvar x2 = arr2[i2];\n\t\t\tif (EdgesEqual(x1,x2))\n\t\t\t{\n\t\t\t\tAddThisOne = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (AddThisOne) diffarr.push(x1);\n\t}\n\t\n\t// Clear the array\n\tarr1.splice(0,arr1.length);\n\t\n\tfor (var i=0; i<diffarr.length; i++)\n\t\tarr1.push(diffarr[i]);\n}\n\n\n// Is the graph (in the mathematical sense) self-consistent?\nfunction TestConsistency(TriSet)\n{\n\t// Test self-consistency:\n\tvar IsConsistent = true;\n\tfor (var i=0; i<TriSet.triangles.length; i++)\n\t{\n\t\tvar tri = TriSet.triangles[i];\n\t\tfor (var ic=0; ic<3; ic++)\n\t\t{\n\t\t\tvar edge = tri.edges[ic];\n\t\t\tvar NumVerts = 0;\n\t\t\tfor (var iv=0; iv<3; iv++)\n\t\t\t\tif (edge.IsVertex(tri.verts[iv]))\n\t\t\t\t\tNumVerts++;\n\t\t\tif (NumVerts != 2) IsConsistent = false;\n\t\t\tif (edge.PolyIndexIn(tri) < 0) IsConsistent = false;\n\t\t}\n\t}\n\tfor (var i=0; i<TriSet.edges.length; i++)\n\t{\n\t\tvar edge = TriSet.edges[i];\n\t\tvar NumOutside = 0;\n\t\tfor (var ic=0; ic<2; ic++)\n\t\t{\n\t\t\tvar tri = edge.polys[ic];\n\t\t\tif (IsNull(tri))\n\t\t\t{\n\t\t\t\tNumOutside++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar NumVerts = 0;\n\t\t\tfor (var iv=0; iv<2; iv++)\n\t\t\t\tif (tri.IsVertex(edge.verts[iv]))\n\t\t\t\t\tNumVerts++;\n\t\t\tif (NumVerts != 2) IsConsistent = false;\n\t\t\tif (tri.EdgeIndexIn(edge) < 0) IsConsistent = false;\n\t\t}\n\t\tif (NumOutside > 1) IsConsistent = false;\n\t}\n\treturn IsConsistent;\n}\n\n// Specified by index ix; returns whether it was possible to do so\nfunction AddPointInside(TriSet, ix)\n{\n\tvar Positions = TriSet.positions;\n\tvar p = Positions[ix];\n\t\n\tvar NumTris = TriSet.triangles.length;\n\tfor (var j=0; j<NumTris; j++)\n\t{\n\t\tvar tri = TriSet.triangles[j];\n\t\tif (tri.IsPointInside(p))\n\t\t{\n\t\t\t// Create three new triangles and their edges\n\t\t\tvar eds = tri.edges;\n\t\t\tvar trixs = [];\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t\ttrixs.push(eds[ic].PolyIndexIn(tri));\n\t\t\t\n\t\t\tvar newtris = Array(3);\n\t\t\tvar neweds = Array(3);\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ic1 = ic + 1;\n\t\t\t\tif (ic1 >= 3) ic1 -= 3;\n\t\t\t\tnewtris[ic] = new TriangleObject(Positions,[tri.verts[ic],tri.verts[ic1],ix]);\n\t\t\t\tneweds[ic] = new EdgeObject([tri.verts[ic],ix]);\n\t\t\t}\n\t\t\t\n\t\t\t// Connect those triangles and edges\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ic1 = ic + 1;\n\t\t\t\tif (ic1 >= 3) ic1 -= 3;\n\t\t\t\tnewtris[ic].edges[0] = neweds[ic1];\n\t\t\t\tnewtris[ic].edges[1] = neweds[ic];\n\t\t\t\tneweds[ic].polys[0] = newtris[ic];\n\t\t\t\tneweds[ic1].polys[1] = newtris[ic];\n\t\t\t}\n\t\t\n\t\t\t// Find which external edges go with which triangles\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ed = eds[ic];\n\t\t\t\tvar trix = trixs[ic];\n\t\t\t\tfor (var ict=0; ict<3; ict++)\n\t\t\t\t{\n\t\t\t\t\tvar newtri = newtris[ict];\n\t\t\t\t\tvar numverts = 0;\n\t\t\t\t\tfor (var iv=0; iv<2; iv++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (newtri.IsVertex(ed.verts[iv]))\n\t\t\t\t\t\t\tnumverts++;\n\t\t\t\t\t\tif (numverts == 2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ted.polys[trix] = newtri;\n\t\t\t\t\t\t\tnewtri.edges[2] = ed;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Insert those triangles and edges into the lists\n\t\t\tTriSet.triangles[j] = newtris[0];\n\t\t\tfor (var ic=1; ic<3; ic++)\n\t\t\t\tTriSet.triangles.push(newtris[ic]);\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t\tTriSet.edges.push(neweds[ic]);\n\t\t\t\n\t\t\t// All done; indicate that the point was added\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\t// The point was inside no triangle, and thus was not added\n\treturn false;\n}\n\nfunction ImproveTriangulation(TriSet)\n{\n\tvar Positions = TriSet.positions;\n\tvar quad_verts = new Array(4);\n\tfor (var itr=0; itr<100; itr++)\n\t{\n\t\tvar numflips = 0;\n\t\tfor (var i=0; i<TriSet.edges.length; i++)\n\t\t{\n\t\t\tvar edge = TriSet.edges[i];\n\t\t\tvar tris = edge.polys;\n\t\t\t\n\t\t\t// Skip over external edges\n\t\t\tif (IsNull(tris[0])) continue;\n\t\t\tif (IsNull(tris[1])) continue;\n\t\t\t\n\t\t\t// Find the containing quadrangle's vertices\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ix = tris[0].verts[ic];\n\t\t\t\tif (!edge.IsVertex(ix)) break;\n\t\t\t}\n\t\t\tvar ic1 = ic + 1;\n\t\t\tif (ic1 >= 3) ic1 -= 3;\n\t\t\tvar ic2 = ic + 2;\n\t\t\tif (ic2 >= 3) ic2 -= 3;\n\t\t\tquad_verts[0] = ix;\n\t\t\tquad_verts[1] = tris[0].verts[ic1];\n\t\t\tquad_verts[3] = tris[0].verts[ic2];\n\t\t\t\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ix = tris[1].verts[ic];\n\t\t\t\tif (!edge.IsVertex(ix)) break;\n\t\t\t}\n\t\t\tquad_verts[2] = ix;\n\t\t\t\n\t\t\t// Are the non-edge points in the other triangles' circumcircles?\n\t\t\tvar incc0 = tris[0].IsPointInCircumcircle(Positions[quad_verts[2]]);\n\t\t\tvar incc1 = tris[1].IsPointInCircumcircle(Positions[quad_verts[0]]);\n\t\t\tif ((!incc0) && (!incc1)) continue;\n\t\t\t\n\t\t\t// Are the would-be triangles properly oriented?\n\t\t\tvar newtri0 = new TriangleObject(Positions, [quad_verts[0],quad_verts[1],quad_verts[2]]);\n\t\t\tif (!newtri0.IsVertexOrderCorrect()) continue;\n\t\t\tvar newtri1 = new TriangleObject(Positions, [quad_verts[0],quad_verts[2],quad_verts[3]]);\n\t\t\tif (!newtri1.IsVertexOrderCorrect()) continue;\n\t\t\t\n\t\t\t// If so, then flip\n\t\t\tnumflips++;\n\t\t\t\n\t\t\t// Adjust the edge and triangle memberships:\n\t\t\t// 0-3 goes from 0 to 1, 1-2 goes from 1 to 0\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ed = tris[0].edges[ic];\n\t\t\t\tif (EdgesEqual(ed,edge)) continue;\n\t\t\t\telse if (ed.IsVertex(quad_verts[3]))\n\t\t\t\t{\n\t\t\t\t\tvar ed03 = ed;\n\t\t\t\t\tvar edix03 = ic;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar ed = tris[1].edges[ic];\n\t\t\t\tif (EdgesEqual(ed,edge)) continue;\n\t\t\t\telse if (ed.IsVertex(quad_verts[1]))\n\t\t\t\t{\n\t\t\t\t\tvar ed12 = ed;\n\t\t\t\t\tvar edix12 = ic;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tvar trix0 = ed03.PolyIndexIn(tris[0]);\n\t\t\tvar trix1 = ed12.PolyIndexIn(tris[1]);\n\t\t\t\n\t\t\ted03.polys[trix0] = tris[1];\n\t\t\ted12.polys[trix1] = tris[0];\n\t\t\ttris[0].edges[edix03] = ed12;\n\t\t\ttris[1].edges[edix12] = ed03;\n\t\t\t\n\t\t\t// Add the vertices\n\t\t\ttris[0].copy_vert_info(newtri0);\n\t\t\ttris[1].copy_vert_info(newtri1);\n\t\t\tedge.verts = [quad_verts[0], quad_verts[2]];\n\t\t}\n\t\tif (numflips == 0) break;\n\t}\n}\n\n\nfunction FindConvexHull(TriSet)\n{\n\t// var Positions = TriSet.positions;\n\t\n\t// Find boundary loop -- use as convex hull\n\tvar NextVertex = new Object;\n\tvar VtxStart = -1;\n\tfor (var i=0; i<TriSet.edges.length; i++)\n\t{\n\t\tvar edge = TriSet.edges[i];\n\t\t\n\t\t// Find a boundary one -- look for the triangle that it contains\n\t\tif (IsNull(edge.polys[0]))\n\t\t{\n\t\t\tif (IsNull(edge.polys[1]))\n\t\t\t\tcontinue;\n\t\t\telse\n\t\t\t\tvar tri = edge.polys[1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (IsNull(edge.polys[1]))\n\t\t\t\tvar tri = edge.polys[0];\n\t\t\telse\n\t\t\t\tcontinue;\n\t\t}\n\t\t\n\t\t// Ensure that the hull is in the same direction as the triangles\n\t\tvar ix0 = edge.verts[0];\n\t\tvar ix1 = edge.verts[1];\n\t\tvar posdiff = tri.VertexIndexIn(ix1) - tri.VertexIndexIn(ix0);\n\t\tif (posdiff < 0) posdiff += 3;\n\t\tif (posdiff != 1)\n\t\t{\n\t\t\tvar ixs = ix0;\n\t\t\tix0 = ix1;\n\t\t\tix1 = ixs;\n\t\t}\n\t\t\n\t\tNextVertex[ix0] = ix1;\n\t\tVtxStart = ix0;\n\t}\n\t\n\tif (VtxStart >= 0)\n\t{\n\t\tvar ix = VtxStart;\n\t\tvar hull = [ix];\n\t\twhile(true)\n\t\t{\n\t\t\tvar ixnext = NextVertex[ix];\n\t\t\tif (ixnext == VtxStart) break;\n\t\t\thull.push(ixnext);\n\t\t\tix = ixnext;\n\t\t}\n\t\t\n\t\tTriSet.hull = hull;\n\t}\n}\n\n\n// Finds the dual of the Delaunay triangulation\n// Won't bother to do the sort of connectivity\n// that was necessary for the Delaunay triangulation\nfunction FindVoronoiDiagram(TriSet)\n{\n\t// Special cases: 3 or fewer points\n\tif (TriSet.triangles.length == 1)\n\t{\n\t\t// A single triangle\n\t\tif (TriSet.hull.length == 3)\n\t\t{\n\t\t\tvar tri = TriSet.triangles[0];\n\t\t\tTriSet.vor_positions.push(tri.ccdir);\n\t\t\tfor (var k=0; k<3; k++)\n\t\t\t{\n\t\t\t\tvar kx = k + 1;\n\t\t\t\tif (kx >= 3) kx = 0;\n\t\t\t\tvar ky = k - 1;\n\t\t\t\tif (ky < 0) ky = 2;\n\t\t\t\t\n\t\t\t\tvar v1 = TriSet.positions[TriSet.hull[k]];\n\t\t\t\tvar v2 = TriSet.positions[TriSet.hull[kx]];\n\t\t\t\tvar posdiff = vec_difference(v2,v1);\n\t\t\t\tTriSet.vor_positions.push(Normalize(crsprd(posdiff,tri.ccdir)));\n\t\t\t\tTriSet.vor_edges.push([0, k+1, 4]);\n\t\t\t\t\n\t\t\t\tvar ix = TriSet.hull[k];\n\t\t\t\tTriSet.vor_polygons[ix] = new Object;\n\t\t\t\tvar vor_poly = \tTriSet.vor_polygons[ix];\n\t\t\t\tvar iy = TriSet.hull[ky];\n\t\t\t\tfor (var l=0; l<3; l++)\n\t\t\t\t{\n\t\t\t\t\tvar edge = TriSet.edges[l];\n\t\t\t\t\tvar shrd = FindShared([iy,ix],edge.verts);\n\t\t\t\t\tif (shrd.length == 2) break;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvor_poly.edges = [edge];\n\t\t\t\tvor_poly.triangles = [tri];\n\t\t\t\tvor_poly.boundary = [0, ky+1, 4, k+1];\n\t\t\t}\n\t\t\tvar ept = vec_copy(tri.ccdir);\n\t\t\tvec_mult_scalar_to(ept,-1);\n\t\t\tTriSet.vor_positions.push(ept);\n\t\t}\n\t\treturn;\n\t}\n\telse if (TriSet.triangles.length == 0)\n\t{\n\t\t// A biangle\n\t\tif (TriSet.hull.length == 2)\n\t\t{\n\t\t\tvar v0 = TriSet.positions[TriSet.hull[0]];\n\t\t\tvar v1 = TriSet.positions[TriSet.hull[1]];\n\t\t\t\n\t\t\tvar vt0 = zerovec();\n\t\t\tvec_add_to(vt0,v0);\n\t\t\tvec_add_to(vt0,v1);\n\t\t\tvt0 = Normalize(vt0);\n\t\t\tTriSet.vor_positions.push(vt0);\n\t\t\t\n\t\t\tvar vt1 = Normalize(crsprd(v0,v1));\n\t\t\tTriSet.vor_positions.push(vt1);\n\t\t\t\n\t\t\tvar vt2 = vec_copy(vt0);\n\t\t\tvec_mult_scalar_to(vt2,-1);\n\t\t\tTriSet.vor_positions.push(vt2);\n\t\t\t\n\t\t\tvar vt3 = vec_copy(vt1);\n\t\t\tvec_mult_scalar_to(vt3,-1);\n\t\t\tTriSet.vor_positions.push(vt3);\n\t\t\t\n\t\t\tTriSet.vor_edges.push([0, 1, 2, 3, 0]);\n\t\t\t\n\t\t\tedge = TriSet.edges[0];\n\t\t\tfor (var k=0; k<2; k++)\n\t\t\t{\n\t\t\t\tvar ix = TriSet.hull[k];\n\t\t\t\tTriSet.vor_polygons[ix] = new Object;\n\t\t\t\tvar vor_poly = \tTriSet.vor_polygons[ix];\n\t\t\t\tvor_poly.edges = [edge];\n\t\t\t\tvor_poly.triangles = [0];\n\t\t\t\tif (k == 0)\n\t\t\t\t\tvor_poly.boundary = [0, 1, 2, 3];\n\t\t\t\telse if (k == 1)\n\t\t\t\t\tvor_poly.boundary = [0, 3, 2, 1];\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\t\n\t// Create the array of Voronoi-vertex positions:\n\t// Add indices to the triangle objects for convenience\n\tfor (var i=0; i<TriSet.triangles.length; i++)\n\t{\n\t\tvar tri = TriSet.triangles[i];\n\t\ttri.index = i;\n\t\tTriSet.vor_positions.push(tri.ccdir);\n\t}\n\t\n\t// Voronoi edges: a cinch\n\t// Voronoi edges parallel original edges\n\tfor (var i=0; i<TriSet.edges.length; i++)\n\t{\n\t\tvar edge = TriSet.edges[i];\n\t\tif (!IsNull(edge.polys[0]) && !IsNull(edge.polys[1]))\n\t\t{\n\t\t\tvar vor_edge = [edge.polys[0].index, edge.polys[1].index];\n\t\t\tTriSet.vor_edges.push(vor_edge);\n\t\t}\n\t}\n\t\n\t// Voronoi polygons: -1 at ends means an open one\n\t\n\t// First, collect the edges and triangles at each vertex\n\t// Put them into vor_polygons, because each one\n\t// is for each original vertex\n\tfor (var i=0; i<TriSet.indices.length; i++)\n\t{\n\t\tvar ix = TriSet.indices[i];\n\t\tTriSet.vor_polygons[ix] = new Object;\n\t\t\n\t\tvar vor_poly = \tTriSet.vor_polygons[ix];\n\t\tvor_poly.edges = [];\n\t\tvor_poly.triangles = [];\n\t\tvor_poly.boundary = [];\n\t}\n\t\n\tfor (var i=0; i<TriSet.edges.length; i++)\n\t{\n\t\tvar edge = TriSet.edges[i];\n\t\tfor (var ic=0; ic<2; ic++)\n\t\t\tTriSet.vor_polygons[edge.verts[ic]].edges.push(edge);\n\t}\n\t\n\tfor (var i=0; i<TriSet.triangles.length; i++)\n\t{\n\t\tvar tri = TriSet.triangles[i];\n\t\tfor (var ic=0; ic<3; ic++)\n\t\t\tTriSet.vor_polygons[tri.verts[ic]].triangles.push(tri);\n\t}\n\t\n\tfor (var i=0; i<TriSet.indices.length; i++)\n\t{\n\t\tvar ix = TriSet.indices[i];\n\t\tvar vor_poly = \tTriSet.vor_polygons[ix];\n\t\t\n\t\t// First triangle\n\t\tvar init_tri = vor_poly.triangles[0];\n\t\tvar tri = init_tri;\n\t\tvor_poly.boundary.push(tri.index);\n\t\t\n\t\t// First edge\n\t\tfor (var ic=0; ic<3; ic++)\n\t\t{\n\t\t\tvar edge = tri.edges[ic];\n\t\t\tif (edge.IsVertex(ix))\n\t\t\t\tbreak;\n\t\t}\n\t\tvar init_edge = edge;\n\t\t\n\t\t// The next triangle and edge\n\t\tvar IsInside = false;\n\t\twhile(true)\n\t\t{\n\t\t\tvar iv = edge.PolyIndexIn(tri);\n\t\t\ttri = edge.polys[1-iv];\n\t\t\tif (IsNull(tri)) break;\n\t\t\tif (TrianglesEqual(tri,init_tri))\n\t\t\t{\n\t\t\t\tIsInside = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tvor_poly.boundary.push(tri.index);\n\t\t\t\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tvar next_edge = tri.edges[ic];\n\t\t\t\tif (EdgesEqual(next_edge,edge)) continue;\n\t\t\t\tif (next_edge.IsVertex(ix))\n\t\t\t\t{\n\t\t\t\t\tedge = next_edge;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!IsInside)\n\t\t{\n\t\t\tvor_poly.boundary.reverse();\n\t\t\ttri = init_tri;\n\t\t\t\n\t\t\t// First edge the other way\n\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t{\n\t\t\t\tedge = tri.edges[ic];\n\t\t\t\tif (EdgesEqual(edge,init_edge)) continue;\n\t\t\t\tif (edge.IsVertex(ix))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\twhile(true)\n\t\t\t{\n\t\t\t\tvar iv = edge.PolyIndexIn(tri);\n\t\t\t\ttri = edge.polys[1-iv];\n\t\t\t\tif (IsNull(tri)) break;\n\t\t\t\t\n\t\t\t\tvor_poly.boundary.push(tri.index);\n\t\t\t\t\n\t\t\t\tfor (var ic=0; ic<3; ic++)\n\t\t\t\t{\n\t\t\t\t\tvar next_edge = tri.edges[ic];\n\t\t\t\t\tif (EdgesEqual(next_edge,edge)) continue;\n\t\t\t\t\tif (next_edge.IsVertex(ix))\n\t\t\t\t\t{\n\t\t\t\t\t\tedge = next_edge;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Add -1 on ends for open polygon:\n\t\tif (!IsInside)\n\t\t{\n\t\t\tvor_poly.boundary.reverse();\n\t\t\tvor_poly.boundary.push(-1);\n\t\t\tvor_poly.boundary.reverse();\n\t\t\tvor_poly.boundary.push(-1);\n\t\t}\n\t}\n\t\n\t// Handle the area outside of the convex hull\n\tif (TriSet.hull.length >= 3)\n\t{\n\t\t// Set up the initial boundary lines\n\t\t// The boundary lines contain:\n\t\t// Index of Voronoi vertex / triangle center / intersection (in VorPos)\n\t\t// Indices of original vertices on each side of the line\n\t\tvar VorBdLns = new Array();\n\t\tvar Positions = TriSet.positions;\n\t\tvar hlen = TriSet.hull.length;\n\t\tfor (var ic=0; ic<hlen; ic++)\n\t\t{\n\t\t\tvar ix = TriSet.hull[ic];\n\t\t\tvar icx = ic + 1;\n\t\t\tif (icx >= hlen) icx = 0;\n\t\t\tvar ixa = TriSet.hull[icx];\n\t\t\tvar edset1 = TriSet.vor_polygons[ix].edges;\n\t\t\tvar edset2 = TriSet.vor_polygons[ixa].edges;\n\t\t\tvar edsetshr = FindSharedEdges(edset1,edset2);\n\t\t\tvar edge = edsetshr[0];\n\t\t\tvar tvrt = edge.polys[0].index;\n\t\t\tvar vt0 = Positions[ix];\n\t\t\tvar vt1 = Positions[ixa];\n\t\t\tvar vtdf = vec_difference(vt1,vt0);\n\t\t\t// Contains: triangle index (Voronoi vertex),\n\t\t\t// vertex index 1 (Voronoi region), position\n\t\t\t// vertex index 2 (Voronoi region), position,\n\t\t\t// great-circle normal\n\t\t\tvar VorBdLn = [tvrt, TriSet.vor_positions[tvrt], ix, vt0, ixa, vt1, vtdf];\n\t\t\tVorBdLns.push(VorBdLn);\n\t\t}\n\t\t\n\t\t// Find intersections\n\t\t\n\t\twhile (VorBdLns.length > 3)\n\t\t{\n\t\t\t// Check all combinations of neighbors\n\t\t\tvar n = VorBdLns.length;\n\t\t\tvar itscpts = new Array();\n\t\t\tvar ptitscs = new Array();\n\t\t\tfor (var k=0; k<n; k++)\n\t\t\t\tptitscs.push(new Array());\n\t\t\tfor (var k=0; k<n; k++)\n\t\t\t{\n\t\t\t\t// Find the intersection point; use the convex hull's direction\n\t\t\t\tvar kx = k + 1;\n\t\t\t\tif (kx >= n) kx = 0;\n\t\t\t\tvar itscpt = Normalize(crsprd(VorBdLns[k][6],VorBdLns[kx][6]));\n\t\t\t\tvec_mult_scalar_to(itscpt,-1);\n\t\t\t\tptitscs[k].push(itscpts.length)\n\t\t\t\tptitscs[kx].push(itscpts.length)\n\t\t\t\titscpts.push(itscpt)\n\t\t\t}\n\t\t\t// Find the intersection points that are the closest to their parent points\n\t\t\tfor (var k=0; k<n; k++)\n\t\t\t{\n\t\t\t\tvar ptitsc = ptitscs[k];\n\t\t\t\tif (ptitsc.length >= 2)\n\t\t\t\t{\n\t\t\t\t\tvar dists = new Array();\n\t\t\t\t\tfor (var kp=0; kp<ptitsc.length; kp++)\n\t\t\t\t\t\tdists.push(ptdist(itscpts[ptitsc[kp]],VorBdLns[k][1]));\n\t\t\t\t\tvar dx = 0;\n\t\t\t\t\tvar dmin = dists[dx];\n\t\t\t\t\tfor (var dxi=0; dxi<dists.length; dxi++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar dst = dists[dxi];\n\t\t\t\t\t\tif (dst < dmin)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdx = dxi; dmin = dst;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar ptitscrd = ptitsc[dx];\n\t\t\t\t}\n\t\t\t\telse if (ptitsc.length == 1)\n\t\t\t\t\tvar ptitscrd = ptitsc[0];\n\t\t\t\telse\n\t\t\t\t\tvar ptitscrd = -1;\n\t\t\t\tptitscs[k] = ptitscrd;\n\t\t\t}\n\t\t\t\n\t\t\tvar NewVorBdLns = new Array();\n\t\t\tfor (var k=0; k<n; k++)\n\t\t\t{\n\t\t\t\t// Find all matched intersection points and add them\n\t\t\t\tvar kx = k + 1;\n\t\t\t\tif (kx >= n) kx = 0;\n\t\t\t\tvar ky = k - 1;\n\t\t\t\tif (ky < 0) ky = n - 1;\n\t\t\t\t// 0 is lone, 1 is leading, 2 is trailing\n\t\t\t\t// vorvtidx is the index of the Voronoi vertex\n\t\t\t\tvar pstat = 0\n\t\t\t\tvar ptitsc = ptitscs[k], ptitsc_next;\n\t\t\t\tif (ptitsc != -1)\n\t\t\t\t{\n\t\t\t\t\tvar ptitsc_prev = ptitscs[ky];\n\t\t\t\t\tif (ptitsc == ptitsc_prev)\n\t\t\t\t\t\tpstat = 2;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tptitsc_next = ptitscs[kx];\n\t\t\t\t\t\tif (ptitsc == ptitsc_next)\n\t\t\t\t\t\t\tpstat = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (pstat == 0)\n\t\t\t\t{\n\t\t\t\t\t// Keep the Voronoi line without merging\n\t\t\t\t\tNewVorBdLns.push(VorBdLns[k]);\n\t\t\t\t}\n\t\t\t\telse if (pstat == 1)\n\t\t\t\t{\n\t\t\t\t\t// Merge the Voronoi lines and create a new one\n\t\t\t\t\tvar VorBdLn0 = VorBdLns[k];\n\t\t\t\t\tvar VorBdLn1 = VorBdLns[kx];\n\t\t\t\t\tvar itscpt = itscpts[k];\n\t\t\t\t\tvar tvrt0 = VorBdLn0[0];\n\t\t\t\t\tvar tvrt1 = VorBdLn1[0];\n\t\t\t\t\tvar PointOK = (tvrt1 != tvrt0);\n\t\t\t\t\tif (PointOK)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar nitx = TriSet.vor_positions.length;\n\t\t\t\t\t\tvar ix0 = VorBdLn0[2];\n\t\t\t\t\t\tvar vt0 = VorBdLn0[3];\n\t\t\t\t\t\tvar ix1 = VorBdLn1[4];\n\t\t\t\t\t\tvar vt1 = VorBdLn1[5];\n\t\t\t\t\t\tvar dst_in = undefined;\n\t\t\t\t\t\tvar dst_out = undefined;\n\t\t\t\t\t\tfor (var m=0; m<n; m++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar ptstm = ptdist(VorBdLns[m][3],itscpt);\n\t\t\t\t\t\t\tvar mrl = m - k;\n\t\t\t\t\t\t\twhile (mrl < 0) mrl += n;\n\t\t\t\t\t\t\twhile (mrl >= n) mrl -= n;\n\t\t\t\t\t\t\tif (mrl <= 2)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (dst_in == undefined)\n\t\t\t\t\t\t\t\t\tdst_in = ptstm;\n\t\t\t\t\t\t\t\telse if (ptstm < dst_in)\n\t\t\t\t\t\t\t\t\tdst_in = ptstm;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (dst_out == undefined)\n\t\t\t\t\t\t\t\t\tdst_out = ptstm;\n\t\t\t\t\t\t\t\telse if (ptstm < dst_out)\n\t\t\t\t\t\t\t\t\tdst_out = ptstm;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tPointOK = (dst_in < dst_out);\n\t\t\t\t\t}\n\t\t\t\t\tif (PointOK)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar vtdf = vec_difference(vt1,vt0);\n\t\t\t\t\t\tvar VorBdLn = [nitx, itscpt, ix0, vt0, ix1, vt1, vtdf];\n\t\t\t\t\t\tNewVorBdLns.push(VorBdLn);\n\t\t\t\t\t\tTriSet.vor_positions.push(itscpt);\n\t\t\t\t\t\tvar ixi = VorBdLn0[4];\n\t\t\t\t\t\t// Should be equal:\n\t\t\t\t\t\t// ixi = VorBdLn2[2];\n\t\t\t\t\t\tTriSet.vor_edges.push([tvrt0, nitx]);\n\t\t\t\t\t\tTriSet.vor_edges.push([tvrt1, nitx]);\n\t\t\t\t\t\t// Add the point to the center Voronoi region and close it\n\t\t\t\t\t\tTriSet.vor_polygons[ixi].boundary.shift();\n\t\t\t\t\t\tvar vpln = TriSet.vor_polygons[ixi].boundary.length;\n\t\t\t\t\t\tTriSet.vor_polygons[ixi].boundary[vpln-1] = nitx;\n\t\t\t\t\t\t// Add the point to the left Voronoi region\n\t\t\t\t\t\tif (TriSet.vor_polygons[ix0].boundary[1] == tvrt0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tTriSet.vor_polygons[ix0].boundary.unshift(-1);\n\t\t\t\t\t\t\tTriSet.vor_polygons[ix0].boundary[1] = nitx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvpln = TriSet.vor_polygons[ix0].boundary.length;\n\t\t\t\t\t\t\tif (TriSet.vor_polygons[ix0].boundary[vpln-2] == tvrt0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tTriSet.vor_polygons[ix0].boundary.push(-1);\n\t\t\t\t\t\t\t\tvpln = TriSet.vor_polygons[ix0].boundary.length;\n\t\t\t\t\t\t\t\tTriSet.vor_polygons[ix0].boundary[vpln-2] = nitx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Add the point to the right Voronoi region\n\t\t\t\t\t\tif (TriSet.vor_polygons[ix1].boundary[1] == tvrt1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tTriSet.vor_polygons[ix1].boundary.unshift(-1);\n\t\t\t\t\t\t\tTriSet.vor_polygons[ix1].boundary[1] = nitx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvpln = TriSet.vor_polygons[ix1].boundary.length;\n\t\t\t\t\t\t\tif (TriSet.vor_polygons[ix1].boundary[vpln-2] == tvrt1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tTriSet.vor_polygons[ix1].boundary.push(-1);\n\t\t\t\t\t\t\t\tvpln = TriSet.vor_polygons[ix1].boundary.length;\n\t\t\t\t\t\t\t\tTriSet.vor_polygons[ix1].boundary[vpln-2] = nitx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tNewVorBdLns.push(VorBdLn0);\n\t\t\t\t\t\tNewVorBdLns.push(VorBdLn1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\telse if (pstat == 2)\n\t\t\t\t{\n\t\t\t\t\t// Do nothing\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}\n\t\t\t\n\t\t\tif (NewVorBdLns.length == VorBdLns.length) break;\n\t\t\tVorBdLns = NewVorBdLns;\n\t\t}\n\t\t\n\t\t// Special cases: only two or three points left\n\t\tif (VorBdLns.length == 2)\n\t\t{\n\t\t\tif (VorBdLns[0][0] != VorBdLns[1][0])\n\t\t\t{\n\t\t\t\tvar VorLn = [];\n\t\t\t\tfor (var k=0; k<2; k++)\n\t\t\t\t{\n\t\t\t\t\t// Connecting line\n\t\t\t\t\tvar kx = VorBdLns[k][0];\n\t\t\t\t\tVorLn.push(kx);\n\t\t\t\t\t// Close the Voronoi region by deleting the end -1's\n\t\t\t\t\tkx = VorBdLns[k][2];\n\t\t\t\t\tTriSet.vor_polygons[kx].boundary.shift();\n\t\t\t\t\tTriSet.vor_polygons[kx].boundary.pop();\n\t\t\t\t}\n\t\t\t\tTriSet.vor_edges.push(VorLn);\n\t\t\t}\n\t\t}\n\t\telse if (VorBdLns.length == 3)\n\t\t{\n\t\t\tvar ic0 = VorBdLns[0][0];\n\t\t\tvar ic1 = VorBdLns[1][0];\n\t\t\tvar ic2 = VorBdLns[2][0];\n\t\t\tif (ic0 != ic1 && ic0 != ic2 && ic1 != ic2)\n\t\t\t{\n\t\t\t\tvar nitx = TriSet.vor_positions.length;\n\t\t\t\tvar v0 = VorBdLns[0][3];\n\t\t\t\tvar v1 = VorBdLns[1][3];\n\t\t\t\tvar v2 = VorBdLns[2][3];\n\t\t\t\tvar itscpt = zerovec();\n\t\t\t\tvec_add_to(itscpt,crsprd(v0,v1));\n\t\t\t\tvec_add_to(itscpt,crsprd(v1,v2));\n\t\t\t\tvec_add_to(itscpt,crsprd(v2,v0));\n\t\t\t\titscpt = Normalize(itscpt);\n\t\t\t\tvec_mult_scalar_to(itscpt,-1);\n\t\t\t\tTriSet.vor_positions.push(itscpt);\n\t\t\t\tfor (var k=0; k<3; k++)\n\t\t\t\t{\n\t\t\t\t\t// Connecting line\n\t\t\t\t\tvar VorBdLn = VorBdLns[k];\n\t\t\t\t\tTriSet.vor_edges.push([VorBdLn[0], nitx]);\n\t\t\t\t\t// Add the point to the Voronoi region and close it\n\t\t\t\t\tvar ix = VorBdLn[2];\n\t\t\t\t\tTriSet.vor_polygons[ix].boundary.shift();\n\t\t\t\t\tvar vpln = TriSet.vor_polygons[ix].boundary.length;\n\t\t\t\t\tTriSet.vor_polygons[ix].boundary[vpln-1] = nitx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Adjust the orientations\n\tfor (var k=0; k<TriSet.vor_polygons.length; k++)\n\t{\n\t\tvor_poly = TriSet.vor_polygons[k];\n\t\tif (vor_poly.boundary.length >= 3 && vor_poly.boundary[0] >= 0)\n\t\t{\n\t\t\ttri = new TriangleObject(TriSet.vor_positions,vor_poly.boundary.slice(0,3));\n\t\t\tif (!tri.IsVertexOrderCorrect())\n\t\t\t\tvor_poly.boundary.reverse();\n\t\t}\n\t}\n}\n\n\nfunction FindDelaunayTriangulationIndexed(Positions, Indices)\n{\n\t// Create the triangle-set object\n\tvar TriSet = new Object;\n\tTriSet.positions = Positions;\n\tTriSet.indices = Indices;\n\tTriSet.triangles = [];\n\tTriSet.edges = [];\n\tTriSet.hull = [];\n\tTriSet.vor_positions = [];\n\tTriSet.vor_edges = [];\n\tTriSet.vor_polygons = new Object;\n\t\t\n\t// Create the first triangle, if it is possible to create any\n\tif (Indices.length < 3)\n\t{\n\t\tif (Indices.length == 2)\n\t\t{\n\t\t\tTriSet.edges.push(new EdgeObject(Indices));\n\t\t\tTriSet.hull = Indices;\n\t\t}\n\t\tFindVoronoiDiagram(TriSet);\n\t\treturn TriSet;\n\t}\n\t\n\tvar tri = new TriangleObject(Positions, Indices.slice(0,3));\n\tif (!tri.IsVertexOrderCorrect())\n\t\ttri = new TriangleObject(Positions, [Indices[0],Indices[2],Indices[1]]);\n\tTriSet.triangles.push(tri);\n\t\n\tvar echs = new Array(3);\n\t\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar ic1 = ic + 1;\n\t\tif (ic1 >= 3) ic1 -= 3;\n\t\tvar ix = Indices[ic];\n\t\tvar ix1 = Indices[ic1];\n\t\tvar vts = [ix, ix1];\n\t\tvar edge = new EdgeObject(vts);\n\t\tvar echeck = new EdgeCheckObject(Positions,vts);\n\t\techeck.edge = edge;\n\t\techs[ic] = echeck;\n\t\ttri.edges[ic] = edge;\n\t\tedge.polys[0] = tri;\n\t\tTriSet.edges.push(edge);\n\t}\n\t\n\t// Place those crossing checkers in a boundary object;\n\t// will have to use various kludges since JavaScript doesn't have sets\n\tvar BoundaryVerts = Indices.slice(0,3);\n\tvar BoundaryEdges = echs;\n\tvar Verts = Object;\n\tfor (var ic=0; ic<3; ic++)\n\t{\n\t\tvar ic1 = ic + 2;\n\t\tif (ic1 >= 3) ic1 -= 3;\n\t\tvar ix = Indices[ic];\n\t\tVerts[ix] = [echs[ic],echs[ic+1]];\n\t}\n\t\n\t// Add points until it is no longer possible\n\tfor (var i=3; i<Indices.length; i++)\n\t{\n\t\tvar ix = Indices[i];\n\t\t\n\t\t// If possible, add the point inside\n\t\tif (AddPointInside(TriSet, ix)) continue;\n\t\t\n\t\t// Point was not inside\n\t\tVerts[ix] = [];\n\t\tvar NewEdges = [];\n\t\tvar VertsAddedTo = [];\n\t\tvar EdgesToDelete = [];\n\t\t\n\t\t// Find all the non-intersecting edges\n\t\tfor (var j=0; j<BoundaryVerts.length; j++)\n\t\t{\n\t\t\tvar ix1 = BoundaryVerts[j];\n\t\t\tvar echk = new EdgeCheckObject(Positions, [ix, ix1]);\n\t\t\tvar DoesIntersect = false;\n\t\t\tfor (var k=0; k<BoundaryEdges.length; k++)\n\t\t\t{\n\t\t\t\tvar echk1 = BoundaryEdges[k];\n\t\t\t\tDoesIntersect = echk.intersects(Positions,echk1);\n\t\t\t\tif (DoesIntersect) break;\n\t\t\t}\n\t\t\tif (DoesIntersect) continue;\n\t\t\t\n\t\t\tvar edge = new EdgeObject(echk.verts);\n\t\t\techk.edge = edge;\n\t\t\tAddUniqueEdge(NewEdges,echk);\n\t\t\tAddUniqueEdge(Verts[ix],echk);\n\t\t\tAddUnique(VertsAddedTo,ix);\n\t\t\tAddUniqueEdge(Verts[ix1],echk);\n\t\t\tAddUnique(VertsAddedTo,ix1);\n\t\t}\n\t\t\n\t\t// Add the new vertex itself\n\t\tAddUnique(BoundaryVerts,ix);\n\t\t\n\t\t// Find all the triangles\n\t\tfor (var j=0; j<BoundaryEdges.length; j++)\n\t\t{\n\t\t\tvar echk = BoundaryEdges[j];\n\t\t\tvar echks = [];\n\t\t\t\n\t\t\tfor (var iv=0; iv<2; iv++)\n\t\t\t{\n\t\t\t\tvar vset = FindSharedEdges(Verts[ix],Verts[echk.verts[iv]]);\n\t\t\t\tif (vset.length == 0) continue;\n\t\t\t\techks.push(vset[0]);\n\t\t\t}\n\t\t\tif (echks.length < 2) continue;\n\t\t\t\n\t\t\tvar empt_indx = -1;\n\t\t\tfor (var iv=0; iv<2; iv++)\n\t\t\t{\n\t\t\t\tif (IsNull(echk.edge.polys[iv]))\n\t\t\t\t{\n\t\t\t\t\tempt_indx = iv;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (empt_indx < 0) continue;\n\t\t\t\n\t\t\tvar oldtri = echk.edge.polys[1-empt_indx];\n\t\t\tvar v0 = echk.verts[0];\n\t\t\tvar i0 = oldtri.VertexIndexIn(v0);\n\t\t\tvar v1 = echk.verts[1];\n\t\t\tvar i1 = oldtri.VertexIndexIn(v1);\n\t\t\tvar i01 = i1 - i0;\n\t\t\tif (i01 < 0) i01 += 3;\n\t\t\tif (i01 == 1)\n\t\t\t{\n\t\t\t\t// Order in original: other, v0, v1\n\t\t\t\tvar NewTriVerts = [ix, v1, v0];\n\t\t\t}\n\t\t\telse if (i01 == 2)\n\t\t\t{\n\t\t\t\t// Order in original: other, v1, v0\n\t\t\t\tvar NewTriVerts = [ix, v0, v1];\n\t\t\t}\n\t\t\tvar tri = new TriangleObject(Positions, NewTriVerts);\n\t\t\tif (!tri.IsVertexOrderCorrect()) continue;\n\t\t\t\n\t\t\t// Add the new triangle\n\t\t\t// Also, add the new edges,\n\t\t\t// or remove them from the lists if necessary\n\t\t\tTriSet.triangles.push(tri);\n\t\t\techk.edge.polys[empt_indx] = tri;\n\t\t\ttri.edges[0] = echk.edge;\n\t\t\ttri.edges[1] = echks[0].edge;\n\t\t\ttri.edges[2] = echks[1].edge;\n\t\t\tAddUniqueEdge(EdgesToDelete, echk);\n\t\t\t\n\t\t\tfor (var iv=0; iv<2; iv++)\n\t\t\t{\n\t\t\t\tvar echki = echks[iv];\n\t\t\t\tif (IsNull(echki.edge.polys[0]))\n\t\t\t\t{\n\t\t\t\t\techki.edge.polys[0] = tri;\n\t\t\t\t\tTriSet.edges.push(echki.edge);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\techki.edge.polys[1] = tri;\n\t\t\t\t\tAddUniqueEdge(EdgesToDelete,echki);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Add the new edges and remove the edges and vertices\n\t\t// that are now in the interior\n\t\tfor (var j=0; j<NewEdges.length; j++)\n\t\t\tAddUniqueEdge(BoundaryEdges,NewEdges[j]);\n\t\tFindSetDifferenceEdges(BoundaryEdges, EdgesToDelete);\n\t\t\n\t\tvar BoundaryVertsToRemove = [];\n\t\tfor (var j=0; j<VertsAddedTo.length; j++)\n\t\t{\n\t\t\tvar ixa = VertsAddedTo[j];\n\t\t\tFindSetDifferenceEdges(Verts[ixa],EdgesToDelete);\n\t\t\tif (Verts[ixa].length == 0)\n\t\t\t\tBoundaryVertsToRemove.push(ixa);\n\t\t}\n\t\tFindSetDifference(BoundaryVerts, BoundaryVertsToRemove);\n\t}\n\t\n\t// Improve it iteratively\n\tImproveTriangulation(TriSet);\n\t\n\t// Find the boundary line of this region\n\tFindConvexHull(TriSet);\n\t\n\t// Find the regions around each point:\n\tFindVoronoiDiagram(TriSet);\n\t\n\treturn TriSet;\n}\n\nexport function FindDelaunayTriangulation(Positions)\n{\n\tvar Indices = new Array(Positions.length);\n\tfor (var i=0; i<Indices.length; i++)\n\t\tIndices[i] = i;\n\t\n\treturn FindDelaunayTriangulationIndexed(Positions, Indices); \n}\n","//\n// (c) 2016 Philippe Riviere\n//\n// https://github.com/Fil/\n//\n// This software is distributed under the terms of the MIT License\n\nimport { ascending, extent } from \"d3-array\";\nimport { map } from \"d3-collection\";\nimport { geoArea, geoCentroid, geoDistance } from \"d3-geo\";\nimport { voronoi } from \"d3-voronoi\";\nimport { FindDelaunayTriangulation } from \"../lpetrich/delaunayTriangles\";\n\nexport default function () {\n    var radians = Math.PI / 180;\n\n    var cartesian = function (spherical) {\n        var lambda = spherical[0] * radians,\n            phi = spherical[1] * radians,\n            cosphi = Math.cos(phi);\n        return [\n            cosphi * Math.cos(lambda),\n            cosphi * Math.sin(lambda),\n            Math.sin(phi)\n        ];\n    }\n\n    var spherical = function (cartesian) {\n        var r = Math.sqrt(cartesian[0] * cartesian[0] + cartesian[1] * cartesian[1]),\n            lat = Math.atan2(cartesian[2], r),\n            lng = Math.atan2(cartesian[1], cartesian[0]);\n        return [lng / radians, lat / radians];\n    }\n\n    var mapline = function (Positions, Verts) {\n        return Verts\n            .map(function (v) {\n                return spherical(Positions[v]);\n            });\n    }\n\n\n    var diagram = voronoi()([]);\n\n    var DT = diagram.DT = null,\n        sites = diagram.sites = [],\n        pos = diagram.pos = [],\n        x = function (d) {\n            if (typeof d == 'object' && 'type' in d) {\n                return geoCentroid(d)[0];\n            }\n            if (0 in d) return d[0];\n        },\n        y = function (d) {\n            if (typeof d == 'object' && 'type' in d) {\n                return geoCentroid(d)[1];\n            }\n            if (0 in d) return d[1];\n        };\n\n\n    var voro = function (data) {\n        diagram._hull = diagram._polygons = diagram._links = diagram._triangles = null;\n\n        if (typeof data == 'object' && data.type == 'FeatureCollection') {\n            data = data.features;\n        }\n        sites = data.map(function (site, i) {\n            site.index = i;\n            return site;\n        });\n        pos = data.map(function (site) {\n            return [x(site), y(site)];\n        });\n        DT = FindDelaunayTriangulation(pos.map(cartesian));\n        return diagram;\n    }\n\n    diagram.links = voro.links = function (s) {\n        if (s) voro(s);\n        if (diagram._links) return diagram._links;\n\n        var _index = map();\n\n        var features = DT.edges.map(function (i, n) {\n\n            _index.set(extent(i.verts), n);\n\n            var properties = {\n                source: sites[i.verts[0]],\n                target: sites[i.verts[1]],\n                urquhart: true, // will be changed to false later\n                length: geoDistance(pos[i.verts[0]], pos[i.verts[1]])\n            }\n\n            // add left and right sites (?)\n\n            // make GeoJSON\n            return {\n                type: \"Feature\",\n                geometry: {\n                    type: 'LineString',\n                    coordinates: [spherical(DT.positions[i.verts[0]]), spherical(DT.positions[i.verts[1]])]\n                },\n                properties: properties\n            };\n        });\n\n        // Urquhart Graph? tag longer link from each triangle\n        DT.triangles.forEach(function (t) {\n            var l = 0,\n                length = 0,\n                remove, v;\n            for (var j = 0; j < 3; j++) {\n                v = extent([t.verts[j], t.verts[(j + 1) % 3]]);\n                var n = _index.get(v);\n                length = features[n].properties.length;\n                if (length > l) {\n                    l = length;\n                    remove = n;\n                }\n            }\n            features[remove].properties.urquhart = false;\n        });\n\n        return diagram._links = {\n            type: \"FeatureCollection\",\n            features: features\n        };\n    };\n\n    diagram.triangles = voro.triangles = function (s) {\n        if (s) voro(s);\n        if (diagram._triangles) return diagram._triangles;\n\n        var features = DT.triangles\n            .map(function (t) {\n                t.spherical = t.verts.map(function (v) {\n                    return DT.positions[v];\n                })\n                    .map(spherical);\n\n                // correct winding order\n                if (t.ccdsq < 0) {\n                    t.spherical = t.spherical.reverse();\n                    t.ccdsq *= -1;\n                }\n\n                return t;\n            })\n\n            // make geojson\n            .map(function (t) {\n                return {\n                    type: \"Feature\",\n                    geometry: {\n                        type: \"Polygon\",\n                        coordinates: [t.spherical.concat([t.spherical[0]])]\n                    },\n                    properties: {\n                        sites: t.verts.map(function (i) {\n                            return sites[i];\n                        }),\n                        area: t.vol, // steradians\n                        circumcenter: spherical(t.ccdir),\n                        // ccdsq is *not* the geodesic distance\n                        /* circumradius: (2-t.ccdsq) * 53 */\n                    }\n                }\n            });\n\n        return diagram._triangles = {\n            type: \"FeatureCollection\",\n            features: features\n        };\n\n    };\n\n    diagram.polygons = voro.polygons = function (s) {\n        if (s) voro(s);\n        if (diagram._polygons) return diagram._polygons;\n\n        var features = DT.indices.map(function (i, n) {\n            var vor_poly = DT.vor_polygons[DT.indices[i]];\n            var geometry = {}\n\n            if (vor_poly == undefined) {\n                geometry.type = \"Sphere\";\n            } else {\n                var line = mapline(DT.vor_positions,\n                    vor_poly.boundary.concat([vor_poly.boundary[0]])\n                );\n\n                // correct winding order\n                var b = {\n                    type: \"Polygon\",\n                    coordinates: [[pos[i], line[0], line[1], pos[i]]]\n                };\n                if (geoArea(b) > 2 * Math.PI + 1e-10) {\n                    line = line.reverse();\n                }\n\n                geometry.type = \"Polygon\";\n                geometry.coordinates = [line];\n            }\n\n            return {\n                type: \"Feature\",\n                geometry: geometry,\n                properties: {\n                    site: sites[i],\n                    sitecoordinates: pos[i],\n                    neighbours: vor_poly.edges.map(function (e) {\n                        return e.verts.filter(function (j) {\n                            return j !== i;\n                        })[0];\n                    })\n                }\n            };\n        });\n\n        return diagram._polygons = {\n            type: \"FeatureCollection\",\n            features: features\n        };\n    };\n\n    diagram.hull = voro.hull = function (s) {\n        if (s) voro(s);\n        if (diagram._hull) return diagram._hull;\n\n        if (!DT.hull.length) {\n            return null; // What is a null GeoJSON?\n        }\n\n        // seems that DT.hull is always clockwise\n        var hull = DT.hull.reverse();\n\n        // make GeoJSON\n        return diagram._hull = {\n            type: \"Feature\",\n            geometry: {\n                type: \"Polygon\",\n                coordinates: [hull.concat([hull[0]]).map(function (i) {\n                    return pos[i];\n                })]\n            },\n            properties: {\n                sites: hull.map(function (i) {\n                    return sites[i];\n                })\n            }\n        };\n    }\n\n\n    diagram.find = function (x, y, radius) {\n        var features = diagram.polygons().features;\n\n        // optimization: start from most recent result\n        var i, next = diagram.find.found || 0;\n        var cell = features[next] || features[next = 0];\n\n        var dist = geoDistance([x, y], cell.properties.sitecoordinates);\n        do {\n            cell = features[i = next];\n            next = null;\n            cell.properties.neighbours.forEach(function (e) {\n                var ndist = geoDistance([x, y], features[e].properties.sitecoordinates);\n                if (ndist < dist) {\n                    dist = ndist;\n                    next = e;\n                    return;\n                }\n            });\n\n        } while (next !== null);\n        diagram.find.found = i;\n        if (!radius || dist < radius * radius) return cell.properties.site;\n    }\n\n    voro.x = function (f) {\n        if (!f) return x;\n        x = f;\n        return voro;\n    }\n    voro.y = function (f) {\n        if (!f) return y;\n        y = f;\n        return voro;\n    }\n    voro.extent = function (f) {\n        if (!f) return null;\n        return voro;\n    }\n    voro.size = function (f) {\n        if (!f) return null;\n        return voro;\n    }\n\n    return voro;\n\n}","import {UI, SVG} from \"ui/UI\";\nimport {geoPath, geoOrthographic} from \"d3-geo/index\";\nimport {geoVoronoi} from \"d3-geo-voronoi/index\";\n\n\nexport function getPoints(nrPoints=42) {\n    let increm = [];\n    for (let i = 0; i < nrPoints; i++) {\n        increm.push([(Math.PI * i) % 1, (Math.E * i) % 1]);\n        increm[i][0] = 2.0 * (increm[i][0] - 0.5);\n        increm[i][1] = (2.0 * (increm[i][1] - 0.5)) / 2.0;\n    }\n\n    function randomPoint(time, speedU, speedV) {\n        var u = Math.abs(time * speedU) % 360;\n        var v = Math.abs(time * speedV / 180) % 1;\n        return [u, 180 * Math.asin(2.0 * v - 1.0)]\n    }\n\n    const timeSeed = Date.now() / 333;\n    return increm.map(deltas => randomPoint(timeSeed, deltas[0], deltas[1]))\n}\n\nconst d3geovoro = geoVoronoi();\n\nexport function getVoronoi(points) {\n    return d3geovoro(points).polygons();\n}\n\nclass ProjectionPath extends SVG.Path {\n    getProjection() {\n        return this.options.projection;\n    }\n\n    getPath() {\n\n    }\n}\n\nexport class MundipediaLogo extends UI.Element {\n    render() {\n        const points = getPoints();\n        const voro = getVoronoi(points);\n        console.log(\"Voro=\", voro);\n\n        const SIZE = 300;\n        const projection = geoOrthographic().scale(0.5 * SIZE).clipAngle(90).translate([SIZE / 2, SIZE / 2]).precision(0.1);\n\n        for (const feature of voro.features) {\n            \n        }\n\n        return [\n            <SVG.SVGRoot height=\"300\" width=\"300\">\n            </SVG.SVGRoot>\n        ]\n    }\n}\n\n\n// Mundipedia.Logo = function(element) {\n//     var SIZE = 500;\n//     var obj = {element: element};\n//\n//     obj.size = obj.element.attr(\"size\") || \"100%\";\n//     obj.redrawInterval = obj.element.attr(\"refresh\") || 300;\n//\n//     if (obj.element.attr(\"size\") === \"auto-height\") {\n//         obj.size = obj.element.node().getBoundingClientRect().height;\n//     }\n//\n//     console.log(\"Size = \" + obj.size);\n//\n//     obj.svg = obj.element.append(\"svg\")\n//         .attr(\"width\", obj.size)\n//         .attr(\"height\", obj.size)\n//         .attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n//         .attr(\"viewBox\", \"0 0 \" + SIZE + \" \" + SIZE);\n//\n//     obj.projection = d3.geo.orthographic().scale(0.5 * SIZE).clipAngle(90).translate([SIZE / 2, SIZE / 2]).precision(0.1);\n//     obj.path = d3.geo.path().projection(obj.projection);\n//\n//     obj.nrPoints = 42;\n//     obj.increm = [];\n//     for (var i = 1; i <= obj.nrPoints; i++) {\n//         obj.increm.push([(Math.PI * i) % 1, (Math.E * i) % 1]);\n//     }\n//     for (var i = 0; i < obj.nrPoints; i++) {\n//         obj.increm[i][0] = 2.0 * (obj.increm[i][0] - 0.5);\n//         obj.increm[i][1] = 2.0 * (obj.increm[i][1] - 0.5);\n//     }\n//\n//     obj.randomPoint = function(seed, index) {\n//         var x = seed / 333;\n//         var u = Math.abs(x * obj.increm[index][0]) % 360;\n//         var v = Math.abs(x * obj.increm[index][1] / 180) % 1;\n//         return [u, 180 * Math.asin(2.0 * v - 1.0)]\n//     }\n//\n//     obj.regeneratePoints = function() {\n//         obj.points = [];\n//         for (var i = 0; i < obj.nrPoints; i++) {\n//             obj.points.push(obj.randomPoint(obj.seed, i));\n//         }\n//         obj.voronoi = d3.geo.voronoi(obj.points);\n//     }\n//\n//     obj.redraw = function(seed) {\n//         obj.seed = seed || Date.now();\n//         obj.regeneratePoints();\n//         if (!obj.hasOwnProperty(\"svgPaths\")) {\n//             obj.svgPaths = [];\n//             for (var i = 0; i < obj.voronoi.geometries.length; i++) {\n//                 obj.svgPaths.push(obj.svg.append(\"path\")\n//                 .datum(obj.voronoi.geometries[i])\n//                 .style(\"stroke-width\", 12)\n//                 .style(\"stroke\", \"white\")\n//                 .style(\"fill\", \"cornflowerblue\")\n//                 .attr(\"d\", obj.path));\n//             }\n//         }\n//         for (var i = 0; i < obj.voronoi.geometries.length; i++) {\n//             obj.svgPaths[i].datum(obj.voronoi.geometries[i]).attr(\"d\", obj.path);\n//         }\n//     }\n//\n//     obj.redraw();\n//\n//     return obj;\n// }\n","import {UI, Link, registerStyle} from \"UI\";\nimport {Card} from \"./Card\";\nimport {IndexPageStyle, QuoteStyle, CodeStyle} from \"./IndexPageStyle\";\nimport {MundipediaLogo} from \"./MundipediaLogo\";\n\n@registerStyle(QuoteStyle)\nclass Quote extends UI.Element {\n    render() {\n        let {text, hasQuotes} = this.options,\n            message = text;\n        if (hasQuotes) {\n            message = \"\\\"\" + message + \"\\\"\";\n        }\n\n        return <div className={this.styleSheet.quote}>\n            {message}\n        </div>;\n    }\n}\n\n@registerStyle(CodeStyle)\nclass Code extends UI.Primitive(\"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.code);\n    }\n}\n\n@registerStyle(IndexPageStyle)\nexport class IndexPage extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let headerText = \"Welcome Mihai!\";\n        let bodyText = [\n            \"This is the beginning of your stem project.\",\n            <Quote text=\"mundipedia\" />,\n            <Quote text=\"Mapping a changing world\" hasQuotes={true} />,\n        ];\n\n        return [\n            <div className={this.styleSheet.topContainer}>\n                <Card headerText={headerText} bodyText={bodyText} />\n            </div>,\n            <MundipediaLogo/>,\n            <div className={this.styleSheet.bottomContainer}>\n                <p>\n                    Get started by editing <Code>mundipediaapp/js/IndexPage.jsx</Code>\n                </p>\n                <p>\n                    Save the code and just refresh the page.\n                </p>\n                <p>\n                    You can also use Stem components, for example - <Code>TabArea</Code>, <Code>Panel</Code>, <Code>Button</Code>\n                </p>\n                <p>\n                    Check the docs <Link href=\"https://stemjs.org/docs/\">here</Link>.\n                </p>\n            </div>\n        ];\n    }\n}","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n    };\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        let obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\n\nfunction AjaxFetchMixin(BaseStoreClass) {\n    return class AjaxFetchMixin extends BaseStoreClass {\n        fetch(id, successCallback, errorCallback, forceFetch=false) {\n            if (!forceFetch) {\n                let obj = this.get(id);\n                if (obj) {\n                    successCallback(obj);\n                    return;\n                }\n            }\n            if (!this.fetchJobs) {\n                this.fetchJobs = [];\n            }\n            this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n            if (!this.fetchTimeout) {\n                this.fetchTimeout = setTimeout(() => {\n                    this.executeAjaxFetch();\n                }, this.options.fetchTimeoutDuration || 0);\n            }\n        };\n\n        getFetchRequestData(ids, fetchJobs) {\n            return {\n                ids: ids,\n            };\n        }\n\n        getFetchRequestObject(ids, fetchJobs) {\n            let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n            // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n            return {\n                url: this.options.fetchURL,\n                type: this.options.fetchType || \"GET\",\n                dataType: \"json\",\n                data: requestData,\n                cache: false,\n                success: (data) => {\n                    if (data.error) {\n                        console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", data.error);\n                        for (let fetchJob of fetchJobs) {\n                            if (fetchJob.error) {\n                                fetchJob.error(data.error);\n                            }\n                        }\n                        return;\n                    }\n                    GlobalState.importState(data.state || {});\n                    for (let fetchJob of fetchJobs) {\n                        let obj = this.get(fetchJob.id);\n                        if (obj) {\n                            fetchJob.success(obj);\n                        } else {\n                            console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                            if (fetchJob.error) {\n                                fetchJob.error();\n                            }\n                        }\n                    }\n                },\n                error: (xhr, errmsg, err) => {\n                    console.error(\"Error in fetching objects:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                    for (let fetchJob of fetchJobs) {\n                        if (fetchJob.error) {\n                            fetchJob.error(\"Network error\");\n                        }\n                    }\n                }\n            }\n        }\n\n        //returns an array of ajax requests that have to be executed\n        getFetchRequests(fetchJobs) {\n            let idFetchJobs = new Map();\n\n            for (let fetchJob of fetchJobs) {\n                let objectId = fetchJob.id;\n                if (!idFetchJobs.has(objectId)) {\n                    idFetchJobs.set(objectId, new Array());\n                }\n                idFetchJobs.get(objectId).push(fetchJob);\n            }\n\n            let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n            let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n            let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n            let requests = [];\n            for (let i = 0; i < idChunks.length; i += 1) {\n                requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n            }\n\n            return requests;\n        }\n\n        executeAjaxFetch() {\n            let fetchJobs = this.fetchJobs;\n            this.fetchJobs = null;\n\n            let requests = this.getFetchRequests(fetchJobs);\n\n            for (let requestObject of requests) {\n                Ajax.fetch(requestObject);\n            }\n\n            clearTimeout(this.fetchTimeout);\n            this.fetchTimeout = null;\n        };\n\n    }\n}\n\nfunction VirtualStoreObjectMixin(BaseStoreObjectClass) {\n    return class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n        // TOOD: both of these methods should probaly be implemented in a mixin class (in StoreMixins.js)\n        hasTemporaryId() {\n            return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n        }\n\n        // Meant for updating temporary objects that need to exist before being properly created\n        updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n    }\n}\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nfunction VirtualStoreMixin(BaseStoreClass) {\n    return class VirtualStoreMixin extends BaseStoreClass {\n        static generateVirtualId() {\n            if (!this.virtualIdCounter) {\n                this.virtualIdCounter = 0;\n            }\n            this.virtualIdCounter += 1;\n            return this.virtualIdCounter;\n        }\n\n        generateVirtualId() {\n            return this.constructor.generateVirtualId();\n        }\n\n        // TODO: we probably shouldn't have getVirtualObject take in an event\n        getVirtualObject(event) {\n            return this.objects.get(\"temp-\" + event.virtualId);\n        }\n\n        get(id) {\n            return this.objects.get(id);\n        }\n\n        applyUpdateObjectId(object, id) {\n            if (object.id === id) {\n                return;\n            }\n            let oldId = object.id;\n            object.updateId(id);\n            this.objects.delete(oldId);\n            this.objects.set(object.id, object);\n            this.dispatch(\"updateObjectId\", object, oldId);\n        }\n\n        applyCreateEvent(event, sendDispatch=true) {\n            if (event.virtualId) {\n                let existingVirtualObject = this.getVirtualObject(event);\n                if (existingVirtualObject) {\n                    this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n                }\n            }\n\n            return super.applyCreateEvent(...arguments);\n        }\n    }\n}\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {Language} from \"LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {ArticleStore} from \"ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry, ...args) {\n        super(objectType, ObjectWrapper, ...args);\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nvar BlogEntryStore = new BlogEntryStoreClass();\n\nexport {BlogEntryStore};\n","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nclass CodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = {\n            tag: \"CodeSnippet\",\n            value: content,\n        };\n\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, CodeModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new CodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\nMarkupClassMap.addClass(\"Link\", Link);\nMarkupClassMap.addClass(\"Image\", Image);\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {UI, Panel, Button, CodeEditor, SectionDivider, ButtonGroup} from \"UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\nimport {Orientation, Level} from \"ui/Constants\";\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <CodeEditor ref=\"codeEditor\" lineWrapping style={{height:\"100%\"}} value={this.options.value} aceMode=\"text\" />;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.codeEditor.setIndentedSoftWrap(false);\n        this.codeEditor.addAceSessionChangeListener((event) => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {Ajax} from \"Ajax\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(\n                (data) => {\n                    console.log(\"Profile changed\", data);\n                    if (data.error) {\n                    } else {\n                    }\n                },\n                (error) => {\n                    console.log(\"Error in updating user profile:\\n\" + error.message);\n                }\n            );\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"UI\";\nimport {PublicUserStore} from \"UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","import {UI, SVG, Switcher, Button} from \"UI\";\nimport {MarkupRenderer, MarkupClassMap} from \"MarkupRenderer\";\nimport {Article, ArticleStore} from \"ArticleStore\";\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.options.article = article;\n        this.setOptions(this.options);\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        super.setValue(this.options.article.markup);\n        return super.getValue();\n    }\n\n    redraw() {\n        if (!this.options.article.dependency) {\n            super.redraw();\n            return;\n        }\n\n        let dependencyArray = this.options.article.dependency.split(\",\");\n        let requireAndRedraw = (dependencies) => {\n            this.registerDependencies(dependencies);\n            super.redraw();\n        };\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencyArray, function () {\n            // this needs to be inside of an anonymous function to preserve arguments\n            requireAndRedraw(Array.from(arguments));\n        });\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => {\n                this.options.article = article;\n                this.setOptions(this.options);\n                this.redraw();\n            })\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap.addClass(\"Article\", RecursiveArticleRenderer);\nArticleRenderer.markupClassMap.addClass(\"RawSVG\", SVG.RawSVG);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        fontFamily: this.fontFamily,\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"font-size\": this.fontFamily,\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontFamily: this.fontFamily,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontFamily: \"lato\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {UI, registerStyle} from \"UI\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {MarkupClassMap} from \"MarkupRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Modal,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    UI,\n} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {Ajax} from \"Ajax\";\nimport {StemDate} from \"Time\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Language} from \"LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {GlobalStyle} from \"GlobalStyle\";\nimport {Level} from \"ui/Constants\";\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value=\"\"/>\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => {this.action()}}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    setArticle(article) {\n        this.article = article;\n        this.text.setValue(\"Set owner for \" + this.article.name + \":\");\n        this.ownerFormInput.setValue(this.article.userCreatedId);\n    }\n\n    action() {\n        let table = this.options.parent.table;\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.ajaxCall({\n            url: \"/article/\" + this.article.id + \"/set_owner/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    this.messageArea.showMessage(data.error.message, \"red\");\n                } else {\n                    console.log(\"Successfully changed owner\", data);\n                    this.messageArea.showMessage(\"Author successfully changed\");\n                    GlobalState.importState(data.state);\n                    console.log(data.state);\n                    table.redraw();\n                    this.hide();\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in changing owner:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                this.messageArea.showMessage(\"Error in changing owner\", \"red\");\n            }\n        });\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete article?\"}/>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    setArticle(article) {\n        this.article = article;\n        this.text.setValue(\"Delete \" + this.article.name + \"?\");\n    }\n\n    deleteArticle() {\n        let table = this.options.parent.table;\n        let request = {};\n        this.deleteArticleButton.ajaxCall({\n            url: \"/article/\" + this.article.id + \"/delete/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    this.messageArea.showMessage(data.error.message, \"red\");\n                } else {\n                    table.options.articles.splice(table.getArticleIndex(this.article.id), 1);\n                    table.redraw();\n                    this.hide();\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in deleting article:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n            }\n        });\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.ajaxCall({\n            url: \"/create_article/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    this.messageArea.showMessage(data.error.message, \"red\");\n                } else {\n                    console.log(\"Successfully created article\", data);\n                    GlobalState.importState(data.state);\n                    this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                    this.hide();\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in creating article:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n            }\n        });\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <UserHandle id={article.userCreatedId}/>,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => (article.isPublic ? <span className=\"fa fa-check fa-lg\" style={{color: \"green\"}}/>\n                : <span className=\"fa fa-times fa-lg\" style={{color: \"red\"}}/>),\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                                 onClick={() => {\n                                                     this.options.parent.transferOwnershipModal.show();\n                                                     this.options.parent.transferOwnershipModal.setArticle(article);\n                                                 }}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 this.options.parent.deleteArticleModal.show();\n                                                 this.options.parent.deleteArticleModal.setArticle(article);\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => this.createArticleModal.show()}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getArticles();\n\n        if (this.options.readOnly === true)\n            return;\n\n        this.createArticleModal = <CreateArticleModal parent={this}/>;\n\n        if (USER.isSuperUser) {\n            this.transferOwnershipModal = <TransferOwnershipModal parent={this}/>;\n        }\n\n        this.deleteArticleModal = <DeleteArticleModal parent={this}/>;\n    }\n\n    getArticles() {\n        if (this.options.articles && this.options.articles.length > 0) {\n            return;\n        }\n\n        let request = {};\n        Ajax.getJSON(\"/get_available_articles/\", request).then(\n            (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                } else {\n                    GlobalState.importState(data.state);\n                    this.table.options.articles = ArticleStore.all();\n                    this.table.redraw();\n                }\n            },\n            (error) => {\n                console.log(\"Error in fetching articles\");\n                console.log(error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n}\n\nclass TranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly)\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                               onClick={() => this.addTranslationModal.show()}\n                                                               style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getTranslations();\n\n        if (this.options.readOnly === true)\n            return;\n\n        this.addTranslationModal = <AddTranslationModal parent={this} baseArticle={this.options.baseArticle}/>;\n\n        if (USER.isSuperUser) {\n            this.transferOwnershipModal = <TransferOwnershipModal parent={this}/>;\n        }\n\n        this.deleteArticleModal = <DeleteArticleModal parent={this}/>;\n    }\n\n    getTranslations() {\n        if (!this.options.baseArticle)\n            return;\n        let request = {};\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", request).then(\n            (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                } else {\n                    GlobalState.importState(data.state);\n                    for (let article of ArticleStore.all()) {\n                        if (article.baseArticleId == this.options.baseArticle.id) {\n                            this.table.options.articles.push(article);\n                        }\n                    }\n                    this.table.redraw();\n                }\n            },\n            (error) => {\n                console.log(\"Error in fetching articles\");\n                console.log(error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n}\n\nexport {ArticleManager, TranslationManager};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    SectionDivider,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextArea,\n    TextInput,\n    UI,\n} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {Ajax} from \"Ajax\";\nimport {MarkupEditor} from \"MarkupEditor\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {Language} from \"LanguageStore\";\nimport {TranslationManager} from \"ArticleManager\";\nimport {Router} from \"Router\";\nimport {Level} from \"ui/Constants\";\nconst deleteRedirectLink = \"/\";\n\n//TODO (@kira) : 4. fix line wrapping 5.Fix diffing svg gutter bug 7.Collapse button in section Divider maybe?\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n                                            width:\"100%\",\n                                            fontFamily: \"monospace\",\n                                            height: \"calc(100% - 3px)\",\n                                            resize: \"none\",\n                                            backgroundColor: \"#F9F9F9\"\n                    }} value={this.options.value}/>\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref=\"articleRenderer\" article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        this.articleRenderer.setValue(markup);\n        this.articleRenderer.redraw();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        let request = {};\n        this.deleteArticleButton.ajaxCall({\n            url: \"/article/\" + this.options.article.id + \"/delete/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                    this.messageArea.showMessage(data.error, \"red\");\n                } else {\n                    console.log(\"Successfully deleted article\", data);\n                    if (this.options.article.baseArticleId)\n                        window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                    else\n                        window.location.replace(deleteRedirectLink);\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in deleting article:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                this.messageArea.showMessage(\"Error in deleting article\", \"red\");\n            }\n        });\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <TranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.ajaxCall({\n            url: \"/article/\" + this.options.articleId + \"/edit/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                console.log(\"Successfully saved article\", data);\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in saving article:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                this.saveMarkupMessageArea.showMessage(\"Error in saving the article\", \"red\");\n            }\n        });\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.ajaxCall({\n            url: \"/article/\" + this.options.articleId + \"/edit/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                    this.saveOptionsMessageArea.showMessage(data.error, \"red\");\n                } else {\n                    console.log(\"Successfully saved article\", data);\n                    this.saveOptionsMessageArea.showMessage(\"Successfully saved article\");\n                    window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\");\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in saving article:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                this.saveOptionsMessageArea.showMessage(\"Error in saving the article\", \"red\");\n            }\n        });\n    }\n\n    setOwner(newOwner) {\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.setOwnerButton.ajaxCall({\n            url: \"/article/\" + this.options.articleId + \"/set_owner/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                    this.setOwnerMessageArea.showMessage(data.error, \"red\");\n                } else {\n                    console.log(\"Successfully changed owner\", data);\n                    this.setOwnerMessageArea.showMessage(\"Author successfully changed\");\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in changing owner:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                this.setOwnerMessageArea.showMessage(\"Error in changing owner\", \"red\");\n            }\n        });\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"StoreMixins\";\nimport {PublicUserStore} from \"UserStore\";\nimport {UserReactionCollectionStore} from \"UserReactionStore\";\nimport {MarkupParser} from \"MarkupParser\";\nimport {ServerTime, StemDate} from \"Time\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess, onError) {\n        //TODO: send a message to the server to edit this message with the new content\n        let request = {\n            messageId: this.id,\n            message: content,\n        };\n\n        Ajax.postJSON(\"/chat/edit_message/\", request).then(\n            (data) => {\n                if (data.error) {\n                    console.log(\"error saving message edit\", data);\n                    if (onError) {\n                        onError(data);\n                    }\n                } else {\n                    if (onSuccess) {\n                        onSuccess(data);\n                    }\n                }\n            },\n            (error) => {\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                if (onError) {\n                    onError(xhr, errmsg, err);\n                }\n            }\n        );\n    }\n\n    react(reaction, onSuccess, onError) {\n        let request = {\n            messageId: this.id,\n            reaction: reaction,\n        };\n\n        Ajax.postJSON(\"/chat/edit_message/\", request).then(\n            (data) => {\n                if (data.error) {\n                    console.log(\"error saving reaction\", data);\n                    if (onError) {\n                        onError(data);\n                    }\n                } else {\n                    if (onSuccess) {\n                        onSuccess(data);\n                    }\n                }\n            },\n            (error) => {\n                console.log(\"Error in saving reaction:\\n\" + error.message);\n                console.log(error.stack);\n                if (onError) {\n                    onError(error);\n                }\n            }\n        );\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        // send a message to the server to delete this message\n        let request = {\n            messageId: this.id,\n            hidden: true,\n        };\n\n        Ajax.postJSON(\"/chat/edit_message/\", request).then(\n            (data) => {\n                if (onSuccess) {\n                    onSuccess(data);\n                }\n            },\n            (error) => {\n                console.log(\"Error in sending delete message:\\n\" + error.message);\n                console.log(error.stack);\n                if (onError) {\n                    onError(error);\n                }\n            }\n        );\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"online\") {\n            this.online = new Set(event.data.online);\n            this.online.delete(0);\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (this.online == null) {\n                this.online = new Set();\n            }\n\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (this.online == null) {\n                return;\n            }\n\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    let request = {\n        userId: userId,\n    };\n\n    Ajax.postJSON(\"/chat/private_chat_state/\", request).then(\n        (data) => {\n            if (data.error) {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", data.error);\n                if (onError) {\n                    onError(data.error);\n                }\n                return;\n            }\n            GlobalState.importState(data.state || {});\n            onSuccess(PrivateChatStore.get(data.privateChatId));\n        },\n        (error) => {\n            console.error(\"Error in fetching objects:\\n\" + error.message);\n            console.error(error.stack);\n            if (onError) {\n                onError(error.message);\n            }\n        }\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","import {UI, Button, Link, Modal} from \"UI\";\nimport {MarkupEditor} from \"MarkupEditor\";\nimport {Level, Size} from \"ui/Constants\";\n// import {Emoji as EmojiMini} from \"EmojiMini\";\n// import \"EmojiUI\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return UI.BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: UI.Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    getGivenChildren() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {UI} from \"UI\";\nimport {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {Language} from \"LanguageStore\";\n\nclass TranslationKey extends StoreObject {\n}\n\nvar TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nvar TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n\nexport {TranslationKeyStore, TranslationEntryStore};\n","import {GenericObjectStore, StoreObject} from \"Store\";\nimport {TranslationKeyStore} from \"TranslationStore\";\n\nclass ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nlet ErrorMessageStore = new ErrorMessageStoreClass();\n\nexport {ErrorMessageStore, ErrorMessage};\n","import {UI, ErrorModal} from \"UI\";\nimport {StoreObject} from \"Store\";\nimport {ErrorMessageStore, ErrorMessage} from \"ErrorMessageStore\";\n\nvar ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.SHOW_ERROR_ALERT = (error) => {\n    error = ErrorHandlers.wrapError(error);\n    ErrorModal.show({error: error});\n};\n\nexport {ErrorHandlers};\n","import {Ajax} from \"Ajax\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\n\nclass GoogleManager {\n    constructor() {\n        this.options = Object.assign({\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        }, window.GOOGLE_MANAGER_OPTIONS || {});\n        this.ensureGoogleScriptNodeExists();\n    }\n\n    static Global() {\n        if (!this._Global) {\n            this._Global = new GoogleManager();\n        }\n        return this._Global;\n    }\n\n    ensureGoogleScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {this.init()};\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    init() {\n        gapi.load(\"auth2\", () => {\n            gapi.auth2.init({\n                client_id: this.options.clientId,\n            }).then(() => {\n                // Listen for sign-in state changes.\n                // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                // Handle the initial sign-in state.\n                // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n            });\n        })\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"google user is signed in\");\n        }\n    }\n\n    handleAuthClick(nextUrl, process, onSuccess) {\n        this.getGoogleAuth().grantOfflineAccess({\"redirect_uri\": \"postmessage\"}).then((data) => {\n            Object.assign(data, {\n                next: nextUrl || \"\",\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, onSuccess);\n        });\n    }\n\n    sendData(url, data, onSuccess) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.error) {\n                    ErrorHandlers.SHOW_ERROR_ALERT(data.error);\n                } else {\n                    if (onSuccess) {\n                        onSuccess(data);\n                    }\n                }\n            },\n            (error) => {\n                console.log(\"Error :\\n\" + error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\n\n// TODO: this class should only include Facebook SDK only when absolutely needed,\n// so the user is not being tracked by those corporate assholes\nclass FacebookManager extends Dispatchable {\n    constructor() {\n        super();\n        let options = Object.assign({\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        }, window.FACEBOOK_MANAGER_OPTIONS || {});\n        this.init(options);\n    }\n\n    static Global() {\n        if (!this._Global) {\n            this._Global = new FacebookManager();\n        }\n        return this._Global;\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (dataJSON) => {\n                if (dataJSON.error) {\n                    this.dispatch(\"loginError\", dataJSON.error);\n                } else if (dataJSON.next) {\n                    window.location.href = dataJSON.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                console.log(\"Error :\\n\" + error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n\n    init(options) {\n        this.options = options;\n\n        window.fbAsyncInit = () => {\n            FB.init({\n                appId: this.options.appId,\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n            this.onAsyncInit();\n        };\n\n        this.ensureFacebookSDKScriptNodeExists();\n    }\n\n    ensureFacebookSDKScriptNodeExists() {\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onAsyncInit() {\n    }\n\n    login(nextUrl, action, process) {\n        if (!window.FB) {\n            console.error(\"Can't process this request just yet\");\n            // TODO: should enqueue a request for onInit here\n            return;\n        }\n        if (action == \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        var data = {\n            next: nextUrl || '',\n            process: process,\n            access_token: response.authResponse.accessToken,\n            expires_in: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout(nextUrl) {\n        if (!window.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response, nextUrl) {\n        var data = {\n            next: nextUrl || ''\n        };\n\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n}\n\nexport {FacebookManager};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StyleSheet, styleRule} from \"UI\";\nimport {Device} from \"Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#d80000\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        fontFamily: this.fontFamily,\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        width: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        fontFamily: this.fontFamily,\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        fontFamily: \"lato, open sans\",\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea\n} from \"UI\";\n\nimport {ensure} from \"Require\";\nimport {Ajax} from \"Ajax\";\nimport {GoogleManager} from \"GoogleManager\";\nimport {FacebookManager} from \"FacebookManager\";\nimport {CountryStore} from \"CountryStore\";\n\nimport {FAIcon} from \"FontAwesome\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    setOptions(options) {\n        super.setOptions(options);\n        FacebookManager.Global();\n        GoogleManager.Global();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div style={this.styleSheet.connectIcons}>\n                <FAIcon icon=\"facebook\"\n                        className={this.styleSheet.faLogo}\n                        style={{\n                            backgroundColor: \"#3b5998\",\n                            cursor: \"pointer\",\n                            display: \"flex\",\n                            justifyContent: \"center\",\n                            alignItems: \"center\",\n                            fontWeight: \"bold\",\n                        }}\n                        ref=\"facebookButton\">\n                    <span className={this.styleSheet.connectWithButtonsSpan}>\n                        facebook\n                    </span>\n                </FAIcon>\n                <FAIcon icon=\"google-plus\"\n                        className={this.styleSheet.faLogo}\n                        style={{\n                            backgroundColor: \"#DE4B39\",\n                            cursor: \"pointer\",\n                            display: \"flex\",\n                            justifyContent: \"center\",\n                            alignItems: \"center\",\n                            fontWeight: \"bold\",\n                        }}\n                        ref=\"googleButton\">\n                    <span className={this.styleSheet.connectWithButtonsSpan}>\n                        google\n                    </span>\n                </FAIcon>\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n\n    onMount() {\n        this.googleButton.addClickListener(() => {\n            GoogleManager.Global().handleAuthClick(window.location.pathname, \"login\", () => {\n                window.location.reload();\n            });\n        });\n        this.facebookButton.addClickListener(() => {\n            FacebookManager.Global().login(window.location.pathname, 'authenticate', 'login');\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\"\n                              style={{\n                                  \"float\": \"left\",\n                              }}\n            />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getBadLogin() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInButton() {\n        return <div style={{width: \"100%\", height: \"50px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\",}}>\n            <SubmitInput className={this.styleSheet.signInButton} value=\"Sign In\"/>\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    render() {\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                <div style={{clear: \"both\", height: \"20px\"}}/>\n                {this.getBadLogin()}\n            </form>,\n            this.getHorizontalLine(),\n            <ThirdPartyLogin/>,\n        ];\n    }\n\n    sendLogin() {\n        var data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.request({\n            url: \"/accounts/login/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: data,\n            success: (data) => {\n                if (data.error) {\n                    this.loginErrorMessage.showMessage(data.error.message || data.error, \"red\", ERROR_TIMEOUT);\n                } else {\n                    location.reload();\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error logging in:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n        FacebookManager.Global().addListener(\"loginError\", (error) => {\n            this.loginErrorMessage.showMessage(error.message || error, \"red\", ERROR_TIMEOUT);\n        });\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    <RecaptchaWidget ref=\"recaptchaWidget\" />\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            (data) => {\n                if (data.error) {\n                    this.errorArea.showMessage(\"Error in registration: \" + (data.error.message || data.error), \"red\", 4000);\n                    this.submitButton.updateOptions({value: \"Sign Up\"});\n                    this.recaptchaWidget.redraw();\n                } else {\n                    this.recaptchaWidget.hide();\n                    this.submitButton.hide();\n                    this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n                }\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registraion: \" + error, \"red\", 4000);\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            this.sendRegistration();\n            event.preventDefault();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    getGivenChildren() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\nimport {Orientation} from \"ui/Constants\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"UserReactionStore\";\nimport {Orientation} from \"ui/Constants\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nconst VoteStatus = {\n    DISLIKE: 0,\n    LIKE: 1,\n};\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: UI.VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\n\nclass ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    fontFamily = \"lato, open sans\";\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        fontFamily: this.fontFamily,\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        fontFamily: this.fontFamily,\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        fontFamily: this.fontFamily,\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        fontFamily: this.fontFamily,\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontFamily: this.fontFamily,\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        fontFamily: this.fontFamily,\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n\nexport {ChatStyle};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {MessageThreadStore, MessageThread, MessageInstance, MessageInstanceStore, GroupChatStore} from \"MessageThreadStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {MarkupEditorModal} from \"MarkupEditorModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {isDifferentDay} from \"Time\";\nimport {RunOnce} from \"Dispatcher\";\nimport {Ajax} from \"Ajax\";\nimport {ChatStyle} from \"ChatStyle\";\nimport {Pluginable} from \"Plugin\";\nimport {Level, Size} from \"ui/Constants\";\n\n// TODO: fix this hack\nimport {GlobalStyle} from \"ui/GlobalStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nGlobalStyle.Button.ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        //if (this.message.userId === USER.id || USER.isSuperUser) {\n        if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions() {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.messageThread = options.messageThread;\n\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    success: (data) => {\n                        if (!data.state || !data.state.MessageInstance || data.state.MessageInstance.length < 20) {\n                            if (this.loadMoreButton) {\n                                this.loadMoreButton.hide();\n                            }\n                            this.showLoadMoreButton = false;\n                        }\n                        let scrollPosition = this.messageWindow.getExcessTop();\n                        let oldHeight = this.messageWindow.node.scrollHeight;\n                        GlobalState.importState(data.state || {});\n\n                        let scrollDelta = 0;\n                        if (!topMessage.shouldShowDayTimestamp()) {\n                            scrollDelta += topMessage.dayTimestamp.getHeight();\n                            topMessage.dayTimestamp.addClass(\"hidden\");\n                        }\n                        this.messageWindow.scrollToHeight(scrollPosition + this.messageWindow.node.scrollHeight - oldHeight - scrollDelta);\n\n                        this.outstandingRequest = false;\n                    },\n                    error: (xhr, errmsg, err) => {\n                        console.log(\"Error loading more messages:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n                    },\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || [])) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        fontFamily: \"lato\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        fontFamily: \"lato\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {GroupChatStore, MessageThreadStore, MessageThread, MessageInstance} from \"MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {isDifferentDay, StemDate} from \"Time\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {Level} from \"ui/Constants\";\nimport {MarkupRenderer} from \"MarkupRenderer\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\", fontFamily: \"lato\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontFamily: \"lato\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontFamily: \"lato\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        // TODO: remove old message thread, if any\n        this.messageThread = options.messageThread;\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                fontFamily: \"lato\",\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    fontFamily: \"lato\",\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontFamily: \"lato\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {UI} from \"./UI\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\n\nfunction StateDependentElement(BaseClass) {\n    class StateDependentElementClass extends DelayedElement(BaseClass) {\n        importState(data) {\n            GlobalState.importState(data.state || {});\n            for (let key of Object.keys(data)) {\n                if (key !== \"state\") {\n                    this.options[key] = data[key];\n                }\n            }\n        }\n\n        getAjaxUrl() {\n            let url = location.pathname;\n            if (!url.endsWith(\"/\")) {\n                url += \"/\";\n            }\n            return url;\n        }\n\n        getAjaxRequest() {\n            return {};\n        }\n\n        renderNotLoaded() {\n            if (typeof window.loadingAnimation === \"function\") {\n                return window.loadingAnimation();\n            }\n            return \"Loading...\";\n        }\n\n        beforeRedrawNotLoaded() {\n            Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n                (data) => {\n                    this.importState(data);\n                    this.setLoaded();\n                },\n                (error) => {\n                    console.error(error);\n                }\n            );\n        }\n    }\n    return StateDependentElementClass;\n}\n\nexport {StateDependentElement};","import {Ajax} from \"Ajax\";\nimport {UI, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {BlogEntryStore} from \"BlogStore\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {MarkupEditor} from \"MarkupEditor\";\nimport {UserHandle} from \"UserHandle\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {slugify} from \"Utils\";\nimport {FAIcon} from \"FontAwesome\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Route, Router} from \"Router\";\nimport {Dispatcher} from \"Dispatcher\";\n\nimport {Theme} from \"ui/style/Theme\";\nimport {Level} from \"ui/Constants\";\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    getGivenChildren() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                console.log(\"Changed entry settings!\", data);\n\n                if (data.urlName) {\n                    Dispatcher.Global.dispatch(\"changeURL\", \"/blog/\" + data.urlName + \"/\");\n                }\n                this.hide();\n            },\n            (error) => {\n                console.log(\"Error in changing entry settings!\");\n                console.log(error.message);\n                console.log(error.stack);\n                this.messageArea.showMessage(\"Error in changing entry settings!\", \"red\");\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            (data) => {\n                console.log(\"Created discussion!\", data);\n                GlobalState.importState(data.state);\n                this.hide();\n            },\n            (error) => {\n                console.log(\"Error in creating discussion!\");\n                console.log(error.message);\n                console.log(error.stack);\n                this.messageArea.showMessage(\"Error in creating discussion!\", \"red\");\n            }\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    getGivenChildren() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                if (data.error) {\n                    ErrorHandlers.SHOW_ERROR_ALERT(data.error);\n                } else {\n                    GlobalState.importState(data.state);\n                    let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                    Router.changeURL([\"blog\", blogEntry.urlName]);\n                    this.hide();\n                }\n            },\n            (error) => {\n                console.log(\"Error in adding blog post!\");\n                console.log(error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                           level={Level.DEFAULT}\n                           onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}></div>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        if (data.error) {\n                            console.log(data.error);\n                        } else {\n                            GlobalState.importState(data.state || {});\n                            this.options.finishedLoading = data.finishedLoading;\n                            if (this.options.finishedLoading) {\n                                this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                                this.loadMoreButton.redraw();\n                                this.loadMoreButton.disable();\n                            }\n                            this.redraw();\n                        }\n                    },\n                    (error) => {\n                        console.log(error);\n                    });\n            }\n        })\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Ajax} from \"Ajax\";\n\n\nclass Forum extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.forumThreads = new Map();\n        GlobalState.registerStream(\"forum-\" + this.id);\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess, onError) {\n        let request = {\n            forumThreadId: this.id,\n            hidden: true,\n        };\n\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", request).then(\n            (data) => {\n                if (onSuccess) {\n                    onSuccess(data);\n                }\n            },\n            (error) => {\n                console.log(\"Error in sending delete message:\\n\" + error.message);\n                console.log(error.stack);\n                if (onError) {\n                    onError(xhr, errmsg, err);\n                }\n            }\n        );\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI} from \"UI\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", \"loading-screen-rotate-clockwise\", \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", \"loading-screen-rotate-reverse-clockwise\", \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", \"loading-screen-rotate-clockwise\", \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", \"loading-screen-rotate-reverse-clockwise\", \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {UI, Button} from \"UI\";\nimport {MarkupEditorModal} from \"MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {Level} from \"ui/Constants\";\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n//import {CSAStyle} from \"CSAStyle\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        fontFamily: this.fontFamily,\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontFamily: \"lato\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    fontFamily = \"lato, open sans\";\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        fontFamily: this.fontFamily,\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    fontFamily = \"lato, open sans\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        fontFamily: this.fontFamily,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontFamily = \"lato, open sans\";\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontFamily: this.fontFamily,\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontFamily: this.fontFamily,\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        fontFamily: this.fontFamily,\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {MarkupEditorModal} from \"MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        let request = {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.request({\n            url: \"/forum/forum_thread_post/\",\n            type: \"POST\",\n            dataType: \"json\",\n            data: request,\n            success: (data) => {\n                if (data.error) {\n                    console.log(data.error);\n                } else {\n                    GlobalState.importState(data.state);\n                    // TODO: should be a dispatch: it should jump and highlight your post\n                }\n            },\n            error: (xhr, errmsg, err) => {\n                console.log(\"Error in posting forum thread message:\\n\" + xhr.status + \":\\n\" + xhr.responseText);\n            }\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n} from \"UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\nimport {MarkupEditorModal} from \"MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle, ForumThreadReplyStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nlet buttonStyle = ButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    getGivenChildren() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.getGivenChildren(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                if (data.error) {\n                    ErrorHandlers.SHOW_ERROR_ALERT(data.error);\n                } else {\n                    GlobalState.importState(data.state);\n                    this.routeToThread(data.forumThreadId);\n                    this.titleInput.setValue(\"\");\n                    this.markupEditor.setValue(\"\");\n                    this.markupEditor.redraw();\n                }\n            },\n            (error) => {\n                console.log(\"Error in creating forum thread\");\n                console.log(error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            (data) => {\n                if (data.error) {\n                    this.returnToMainForum();\n                } else {\n                    GlobalState.importState(data.state);\n                    if (callback) {\n                        callback();\n                    }\n                }\n            },\n            (error) => {\n                console.log(\"Error in getting forum thread:\");\n                console.log(error.message);\n                console.log(error.stack);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {UI, Panel, Link, Route, Router, TimePassedSpan, registerStyle} from \"UI\";\nimport {Dispatcher} from \"base/Dispatcher\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"State\";\nimport {ForumStore, ForumThreadStore} from \"ForumStore\";\nimport {PreviewMarkupButton} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"ForumThread\";\nimport {slugify} from \"base/Utils\"; // TODO: import the individual methods\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"ForumStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Size} from \"ui/Constants\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nclass ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nclass ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nclass ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nclass ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nclass ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nclass DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nclass DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                console.error(error);\n            }\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nclass ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {ForumRoute};\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumWidget\";\n\nexport const MAIN_ROUTE = new Route(null, IndexPage, [\n    new BlogRoute(),\n    new ForumRoute(),\n]);","import {StyleSet, styleRule} from \"../Style\";\n\n\nclass NavStyle extends StyleSet {\n    // Custom variables\n    colors = {\n        boxShadow: \"#353535\",\n        sidepanelBackground: \"#202e3e\",\n        sidepanelHover: \"#364251\",\n        navbarBackground: \"#1c2937\",\n        navbarHover: \"#323e4b\",\n        hr: \"#364251\",\n        text: \"#eee\",\n    };\n\n    dimensions = {\n        collapseArrowWidth: \"20px\",\n        navbarHeight: \"50px\",\n        sidepanelElementHeight: \"30px\",\n        sidepanelWidthLeft: \"250px\",\n        sidepanelWidth: \"330px\",\n        sidepanelHideWidth: \"335px\",\n        sidepanelTransitionDuration: \".15s\",\n        boxShadowWidth: \"5px\",\n        backgroundTransitionDuration: \".2s\",\n    };\n\n\n    // Icons\n    icon = {\n        color: () => this.colors.text,\n        lineHeight: () => this.dimensions.navbarHeight,\n        height: () => this.dimensions.navbarHeight,\n        width: () => this.dimensions.navbarHeight,\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        textAlign: \"center\",\n        \":hover\": {\n            backgroundColor: () => this.colors.navbarHover,\n        }\n    };\n\n    sideIcon = Object.assign({}, this.icon, {\n        fontSize: \"120%\",\n    });\n\n    wrappedIcon = Object.assign({}, this.icon, {\n        fontSize: \"100%\",\n        flex: \"1\",\n    });\n\n\n    // Nav manager elements\n    navElement = {\n        transition: `background-color ${this.dimensions.backgroundTransitionDuration}`,\n    };\n\n    @styleRule\n    navLinkElement = {\n        display: \"block\",\n        color: this.colors.text,\n        textDecoration: \"none\",\n        listStyleType: \"none\",\n        \":hover\": {\n            backgroundColor: this.colors.sidepanelHover,\n            color: this.colors.text,\n            textDecoration: \"none\",\n        },\n        \":focus\": {\n            color: this.colors.text,\n            textDecoration: \"none\",\n        },\n        \":active\": {\n            color: this.colors.text,\n            textDecoration: \"none\",\n        },\n        \":visited\": {\n            color: this.colors.text,\n            textDecoration: \"none\",\n        },\n    };\n\n\n    // Navbar\n    @styleRule\n    navManager = {\n        display: \"flex\",\n        height: this.dimensions.navbarHeight,\n        lineHeight: this.dimensions.navbarHeight,\n        width: \"100%\",\n        backgroundColor: this.colors.navbarBackground,\n        boxShadow: \"0px 0px 10px #000\",\n        zIndex: \"9999\",\n        position: \"fixed\",\n    };\n\n\n    // Navbar elements\n    @styleRule\n    navElementHorizontal = {\n        color: this.colors.text,\n        backgroundColor: this.colors.navbarBackground,\n        listStyleType: \"none\",\n        cursor: \"pointer\",\n        \">:nth-child(2)\": {\n            position: \"absolute\",\n        }\n    };\n\n    @styleRule\n    navElementHorizontalArrow = {\n        paddingLeft: \".1em\",\n        verticalAlign: \"middle\",\n    };\n\n    @styleRule\n    navElementValueHorizontal = [\n        this.navElement, {\n            padding: \"0 0.7em\",\n            color: this.colors.text,\n            width: \"100%\",\n            \":hover\": {\n                backgroundColor: this.colors.navbarHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionHorizontal = {\n        display: \"inline-block\",\n        paddingLeft: \"0\",\n        height: this.dimensions.navbarHeight,\n        marginBottom: \"0\",\n    };\n\n\n    // Sidepanel\n    sidePanel = {\n        top: \"0\",\n        bottom: \"0\",\n        height: \"100%\",\n        backgroundColor: () => this.colors.sidepanelBackground,\n        overflow: \"hidden\",\n        position: \"fixed\",\n        zIndex: \"3000\",\n        boxShadow: () => \"0px 0px 10px \" + this.colors.boxShadow,\n        width: () => this.dimensions.sidepanelWidth,\n        transitionDuration: () => this.dimensions.sidepanelTransitionDuration,\n    };\n\n    @styleRule\n    leftSidePanel = [\n        this.sidePanel, {\n            overflowY: \"scroll\",\n            width: this.dimensions.sidepanelWidthLeft,\n            \"-ms-overflow-style\": \"none\",\n            overflow: \"-moz-scrollbars-none\",\n            \"::-webkit-scrollbar\": {\n                display: \"none\"\n            }\n        }\n    ];\n\n    @styleRule\n    rightSidePanel = this.sidePanel;\n\n\n    // Sidepanel elements\n    @styleRule\n    navElementVertical = {\n        color: this.colors.text,\n        cursor: \"pointer\",\n        listStyleType: \"none\",\n        minHeight: this.dimensions.sidepanelElementHeight,\n        overflow: \"hidden\",\n        position: \"relative\",\n        \">*\": {\n            paddingLeft: this.dimensions.collapseArrowWidth,\n        },\n    };\n\n    @styleRule\n    navElementVerticalArrow = {\n        width: this.dimensions.collapseArrowWidth,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    navElementValueVertical = [\n        this.navElement, {\n            color: this.colors.text,\n            zIndex: \"1\",\n            position: \"relative\",\n            width: \"100%\",\n            height: this.dimensions.sidepanelElementHeight,\n            lineHeight: this.dimensions.sidepanelElementHeight,\n            \":hover\": {\n                backgroundColor: this.colors.sidepanelHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionVertical = {\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    navCollapseElement = {\n        color: this.colors.text,\n        textAlign: \"initial\",\n        lineHeight: this.dimensions.sidepanelElementHeight,\n    };\n\n    @styleRule\n    sidePanelGroup = {\n        paddingTop: this.dimensions.navbarHeight,\n        height: \"inherit\",\n        width: this.dimensions.sidepanelWidth,\n        position: \"absolute\",\n        zIndex: \"3\",\n    };\n\n    @styleRule\n    hrStyle = {\n        margin: \"10px 5%\",\n        borderTop: () => \"2px solid \" + this.colors.hr,\n    };\n\n\n    // Sidepanel transitions\n    @styleRule\n    navVerticalLeftHide = {\n        marginLeft: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    navVerticalRightHide = {\n        marginRight: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n}\n\n\nexport {NavStyle};\n","import {Dispatchable} from \"./Dispatcher\";\n\n// Class for working with the Window.localStorage and Window.sessionStorage objects\n// All keys are prefixed with our custom name, so we don't have to worry about polluting the global storage namespace\n// Keys must be strings, and values are modified by the serialize/deserialize methods,\n// which by default involve JSON conversion\nclass StorageMap extends Dispatchable {\n    static SEPARATOR = \"-@#%-\";\n\n    constructor(storage, name=\"\") {\n        super();\n        this.storage = storage;\n        this.name = name;\n        this.prefix = name + this.constructor.SEPARATOR;\n    }\n\n    getPrefix() {\n        return this.prefix;\n    }\n\n    getRawKey(key) {\n        return this.getPrefix() + key;\n    }\n\n    // Method to serialize the values\n    serialize(value) {\n        return JSON.stringify(value);\n    }\n\n    // Method to deserialize the value (which can be null if there is no value)\n    deserialize(value) {\n        return value && JSON.parse(value);\n    }\n\n    set(key, value) {\n        try {\n            this.storage.setItem(this.getRawKey(key), this.serialize(value));\n        }\n        catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    delete(key) {\n        this.storage.removeItem(this.getRawKey(key));\n    }\n\n    getRaw(key) {\n        return this.storage.getItem(this.getRawKey(key));\n    }\n\n    get(key, defaultValue = null) {\n        const value = this.getRaw(key);\n        if (value == null) {\n            return defaultValue;\n        }\n        return this.deserialize(value);\n    }\n\n    has(key) {\n        return (this.getRaw(key) != null);\n    }\n\n    keys() {\n        let result = [];\n        const totalStorageKeys = this.storage.length;\n        const prefixLenth = this.getPrefix().length;\n        for (let i = 0; i < totalStorageKeys; i++) {\n            const key = this.storage.key(i);\n            if (key.startsWith(this.getPrefix())) {\n                result.push(key.substr(prefixLenth));\n            }\n        }\n        return result;\n    }\n\n    values() {\n        return this.keys().map(key => this.get(key));\n    }\n\n    entries() {\n        return this.keys().map(key => [key, this.get(key)]);\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n\n    // Remove all of the keys that start with out prefix\n    clear() {\n        for (let key of this.keys()) {\n            this.delete(key);\n        }\n    }\n}\n\n// SessionStorageMap can be used to preserve data on tab refreshes\nexport class SessionStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.sessionStorage, name);\n    }\n}\n\n// LocalStorageMap can be used to store data across all our tabs\nexport class LocalStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.localStorage, name);\n    }\n\n    // Since we don't want a listener attached to window storage event for each map, we create a global one\n    // Any raw key that contains our separator has its original map identified and gets dispatched only for that map\n    static getChangeDispatchable() {\n        if (!this.CHANGE_DISPATCHABLE) {\n            this.CHANGE_DISPATCHABLE = new Dispatchable();\n            window.addEventListener(\"storage\", (event) => {\n                let separatorIndex = event.key.indexOf(this.SEPARATOR);\n                if (separatorIndex === -1) {\n                    // This is not an event associated with a storage map\n                    return;\n                }\n                const name = event.key.substr(0, separatorIndex);\n                const actualKey = event.key.substr(separatorIndex + this.SEPARATOR.length);\n                let newEvent = {\n                    originalEvent: event,\n                    key: actualKey,\n                    oldValue: event.oldValue,\n                    newValue: event.newValue,\n                };\n                this.CHANGE_DISPATCHABLE.dispatch(name, newEvent);\n            });\n        }\n        return this.CHANGE_DISPATCHABLE;\n    }\n\n    // Add a listener for all change event on the current map\n    // Only works if we're being backed by Window.localStorage and only received events from other tabs (not the current tab)\n    // The event has the following fields: key, oldValue, newValue, url, storageArea, originalEvent\n    // The key is modified to be the same the one you used in the map\n    addChangeListener(callback, doDeserialization=true) {\n        let realCallback = callback;\n        if (doDeserialization) {\n            realCallback = (event) => {\n                event.oldValue = this.deserialize(event.oldValue);\n                event.newValue = this.deserialize(event.newValue);\n                callback(event);\n            }\n        }\n\n        return this.constructor.getChangeDispatchable().addListener(this.name, realCallback);\n    }\n}\n","import {UI, Link} from \"../UI\";\nimport {FACollapseIcon} from \"../FontAwesome\"; //TODO: more flexibility, do not require FAIcons in NavElements\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\nlet navSessionManager = new SessionStorageMap(\"navManager\");\n\nconst BasicOrientedElementInterface = (BaseClass) => class BasicOrientedElement extends BaseClass {\n    getStyleSet() {\n        return this.options.styleSet || this.parent.getStyleSet();\n    }\n\n    getOrientation() {\n        if (this.options.orientation) {\n            return this.options.orientation;\n        }\n        if (this.parent && typeof this.parent.getOrientation === \"function\") {\n            return this.parent.getOrientation();\n        }\n        return Orientation.HORIZONTAL;\n    }\n};\n\nconst BasicOrientedElement = BasicOrientedElementInterface(UI.Element);\nconst BasicOrientedLinkElement = BasicOrientedElementInterface(Link);\n\n\n// NavElements should know if they are in vertical or horizontal mode, so they can behave differently\nconst NavElementInterface = (BaseClass) => class NavElement extends BaseClass {\n    constructor() {\n        super(...arguments);\n        this.isToggled = this.getToggledState();\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.getStyleSet().navElementHorizontal);\n\n            if (this.parent instanceof NavSection) {\n                attr.setStyle(\"float\", \"left\");\n            } else {\n                // it is an element in a dropdown\n                attr.addClass(this.getStyleSet().navCollapseElement);\n            }\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.getStyleSet().navElementVertical);\n        }\n    }\n\n    getSelf() {\n        const style = (this.getOrientation() === Orientation.HORIZONTAL ?\n                        this.getStyleSet().navElementValueHorizontal : this.getStyleSet().navElementValueVertical);\n        const marginLeft = this.getOrientation() === Orientation.VERTICAL && this.getGivenChildren().length ? \"-20px\" : \"0\";\n\n        return <BasicOrientedElement className={style} style={{marginLeft: marginLeft}}>\n            {this.getValue()}\n        </BasicOrientedElement>;\n    }\n\n    getSubElements() {\n        let childrenToRender = this.getGivenChildren();\n        if (childrenToRender.length) {\n            let subElementsClass;\n            if (!this.isToggled) {\n                subElementsClass = \"hidden\";\n            }\n            return <BasicOrientedElement ref=\"contentArea\" className={subElementsClass}>\n                {childrenToRender}\n            </BasicOrientedElement>;\n        }\n        return null;\n    }\n\n    getValue() {\n        let result;\n        if (this.getGivenChildren().length) {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                // is in the sidebar\n                result = [\n                    <FACollapseIcon ref=\"collapseIcon\" collapsed={!this.isToggled} className={this.getStyleSet().navElementVerticalArrow} />,\n                    this.options.value\n                ];\n            } else if (this.getOrientation() === Orientation.HORIZONTAL) {\n                // is in the navbar\n                result = [\n                    this.options.value,\n                    <FACollapseIcon collapsed={false} className={this.getStyleSet().navElementHorizontalArrow} />,\n                ];\n            }\n        } else {\n            result = this.options.value;\n        }\n        return result;\n    }\n\n    render() {\n        return [\n            this.getSelf(),\n            this.getSubElements(),\n        ];\n    }\n\n    showChildren() {\n        this.contentArea.removeClass(\"hidden\");\n    }\n\n    hideChildren() {\n        this.contentArea.addClass(\"hidden\");\n    }\n\n    toggleChildren() {\n        if (!this.getGivenChildren().length) {\n            return;\n        }\n\n        if (!this.isToggled) {\n            this.showChildren();\n        } else {\n            this.hideChildren();\n        }\n\n        if (this.collapseIcon) {\n            this.collapseIcon.setCollapsed(this.isToggled);\n        }\n        this.isToggled = !this.isToggled;\n\n        this.saveToggledState();\n    }\n\n    getSessionKeyName() {\n        let sessionKeyName = this.options.sessionKey || this.options.href;\n        if (!sessionKeyName) {\n            throw Error(\"Persistent nav element needs a unique session key!\");\n        }\n        return sessionKeyName;\n    }\n\n    getLocalToggledState() {\n        if (this.hasOwnProperty(\"isToggled\")) {\n            return !!this.isToggled;\n        }\n        return !!this.options.defaultToggled;\n    }\n\n    getToggledState() {\n        if (!this.options.persistent) {\n            return this.getLocalToggledState();\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        return navSessionManager.get(sessionKeyName, this.getLocalToggledState());\n    }\n\n    saveToggledState() {\n        if (!this.options.persistent) {\n            return;\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        navSessionManager.set(sessionKeyName, this.getLocalToggledState());\n    }\n\n    onMount() {\n        super.onMount();\n        this.addNodeListener(\"mouseenter\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && this.getGivenChildren().length) {\n                this.showChildren();\n            }\n        });\n        this.addNodeListener(\"mouseleave\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && this.getGivenChildren().length) {\n                this.hideChildren();\n            }\n        });\n        this.addClickListener((event) => {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                event.stopPropagation();\n                this.toggleChildren();\n            }\n        });\n    }\n};\n\nconst NavElement = NavElementInterface(UI.Primitive(BasicOrientedElement, \"li\"));\nclass NavLinkElement extends NavElementInterface(BasicOrientedLinkElement) {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.getStyleSet().navLinkElement);\n    }\n}\n\n\nclass NavSection extends UI.Primitive(\"ul\") {\n    getStyleSet() {\n        return this.options.styleSet || this.parent.getStyleSet();\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.getStyleSet().navSectionHorizontal);\n            // this is functionality, I really want this to be isolated from the actual design\n            // TODO: anchor might not be defined\n            attr.setStyle(\"float\", this.options.anchor);\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.getStyleSet().navSectionVertical);\n        }\n    }\n\n    getAnchor() {\n        return this.options.anchor || Direction.LEFT;\n    }\n\n    getOrientation() {\n        return this.parent.getOrientation();\n    }\n}\n\n\nclass NavAnchoredNotifications extends NavSection {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            position: \"relative\",\n        });\n    }\n\n    getSwitcherStyle() {\n        return {\n            position: \"absolute\",\n            maxWidth: \"calc(100vw - 76px)\",\n            top: \"50px\",\n            right: \"0\",\n            height: \"300px\",\n            width: \"400px\",\n            boxShadow: \"0px 0px 10px #666\",\n            zIndex: \"-1\",\n        };\n    }\n\n    render() {\n        return [\n            this.options.children,\n            <UI.Switcher ref=\"switcher\" style={this.getSwitcherStyle()} className=\"hidden\">\n            </UI.Switcher>\n        ];\n    }\n\n    show(content, child) {\n        this.activeChild = child;\n        this.switcher.removeClass(\"hidden\");\n        this.switcher.setActive(content, child);\n        this.bodyListener = document.body.addEventListener(\"click\", () => this.hide());\n    }\n\n    hide() {\n        this.switcher.addClass(\"hidden\");\n        this.activeChild = null;\n        document.body.removeEventListener(\"click\", this.bodyListener);\n    }\n\n    onMount() {\n        this.addListener(\"changeSwitcher\", (content, child) => {\n            if (this.activeChild == child) {\n                this.hide();\n            } else {\n                this.show(content, child);\n            }\n        });\n\n        this.switcher.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport {BasicOrientedElement, NavElement, NavLinkElement, NavSection, NavAnchoredNotifications, navSessionManager};\n","import {UI} from \"UI\";\nimport {NavElement} from \"NavElement\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {Size} from \"../Constants\";\n\nclass NavIcon extends NavElement {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(this.getStyleSet().icon);\n    }\n\n    getValue() {\n        return [\n            this.getIcon(),\n            this.getContent()\n        ];\n    }\n\n    getContent() {\n        return null;\n    }\n\n    getIcon() {\n        return null;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nclass LeftSideIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(this.getStyleSet().sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"bars\" size={Size.LARGE}/>;\n    }\n}\n\n\nclass RightSideIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(this.getStyleSet().sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-v\" size={Size.LARGE}/>;\n    }\n}\n\n\nclass WrappedIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(this.getStyleSet().wrappedIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-h\" size={Size.LARGE}/>;\n    }\n}\n\nexport {NavIcon, LeftSideIcon, RightSideIcon, WrappedIcon};\n","import {Device} from \"../../base/Device\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {StemDate} from \"../../time/Time\";\n\nlet maxDistanceFromSide = 25; // Pixels\nlet minSwipeDistance = 60;    // Pixels\nlet minSwipeSpeed = 0.5;      // Pixels per millisecond\n\nfunction touchEventHandler(ignoreCondition, successCondition, onSuccess, xType=\"client\") {\n    return (event) => {\n        if (ignoreCondition(event.targetTouches[0][xType + \"X\"])) {\n            return;\n        }\n        let startX = event.targetTouches[0][xType + \"X\"];\n        let panelToggler = new Dispatcher();\n        let startTime = StemDate.now();\n\n        let touchCallback = (event) => {\n            if (successCondition(event.targetTouches[0][xType + \"X\"], startX, StemDate.now() - startTime)) {\n                panelToggler.dispatch(true);\n            }\n        };\n        let touchendCallback = () => {\n            panelToggler.dispatch(false);\n        };\n        document.addEventListener(\"touchmove\", touchCallback);\n        document.addEventListener(\"touchend\", touchendCallback);\n\n        panelToggler.addListener((success) => {\n            if (success) {\n                onSuccess();\n            }\n            document.removeEventListener(\"touchmove\", touchCallback);\n            document.removeEventListener(\"touchend\", touchendCallback);\n        });\n    }\n}\n\nfunction initializeSwipeRight(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.leftSidePanel.visible ||\n                        window.pageXOffset !== 0 ||\n                            touchX > maxDistance),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n    navManager.leftSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.leftSidePanel.visible),\n        (touchX, startX) => (startX - touchX >= minDistance && (startX - touchX) >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n}\n\nfunction initializeSwipeLeft(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.rightSidePanel.visible || window.innerWidth - touchX > maxDistance),\n        (touchX, startX, duration) => (startX - touchX >= minDistance && (startX - touchX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n    navManager.rightSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.rightSidePanel.visible),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n}\n\nfunction initializeSwipeEvents(navManager, maxDistanceFromSide=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    if (!Device.isTouchDevice()) {\n        return;\n    }\n    if (navManager.leftSidePanel) {\n        initializeSwipeRight(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n    if (navManager.rightSidePanel) {\n        initializeSwipeLeft(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n}\n\nexport {maxDistanceFromSide, initializeSwipeRight, initializeSwipeLeft, initializeSwipeEvents};","import {UI, changeParent} from \"../UI\";\nimport {NavStyle} from \"NavStyle\";\nimport {Carousel, CarouselStyle} from \"../Carousel\";\nimport {LeftSideIcon, RightSideIcon, WrappedIcon} from \"./NavIcon\";\nimport {BasicOrientedElement, NavSection} from \"./NavElement\";\nimport {initializeSwipeEvents} from \"./NavSwipeDetection\";\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\n\nclass SidePanelGroup extends UI.Element {\n    getStyleSet() {\n        return this.options.styleSet || this.parent.getStyleSet();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().sidePanelGroup);\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.setStyle(\"right\", 0);\n        } else {\n            attr.setStyle(\"width\", \"250px\");\n        }\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n}\n\n\nclass SidePanel extends UI.Element {\n    static styleSet = NavStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    constructor() {\n        super(...arguments);\n\n        if (!this.node) {\n            this.mount(document.body);\n        }\n\n        if (this.options.name) {\n            this.storageSerializer = new SessionStorageMap(\"sidePanel\" + this.options.name);\n            this.visible = this.storageSerializer.get(\"visible\");\n        }\n\n        if (this.visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.addClass(this.getStyleSet().rightSidePanel);\n            attr.setStyle(\"right\", \"0\");\n        } else {\n            attr.addClass(this.getStyleSet().leftSidePanel);\n        }\n    }\n\n    setVisible(value) {\n        this.visible = value;\n        if (this.storageSerializer) {\n            this.storageSerializer.set(\"visible\", value);\n        }\n    }\n\n    show() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.removeClass(this.getStyleSet().navVerticalRightHide);\n        } else {\n            this.removeClass(this.getStyleSet().navVerticalLeftHide);\n        }\n\n        this.setVisible(true);\n    }\n\n    hide() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.addClass(this.getStyleSet().navVerticalRightHide);\n        } else {\n            this.addClass(this.getStyleSet().navVerticalLeftHide);\n        }\n\n        this.setVisible(false);\n    }\n\n    toggle() {\n        if (this.visible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    render() {\n        return <SidePanelGroup ref=\"this.wrappedPanel\" anchor={this.options.anchor}>\n            {this.getGivenChildren()}\n        </SidePanelGroup>;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nclass NavCarouselStyle extends CarouselStyle {\n    hoverColor = NavStyle.getInstance().colors.sidepanelHover;\n    textColor = NavStyle.getInstance().colors.text;\n    navigatorTransitionTime = NavStyle.getInstance().dimensions.backgroundTransitionDuration;\n}\n\n\nclass NavManager extends UI.Primitive(\"nav\") {\n    static styleSet = NavStyle.getInstance();\n\n    static carouselStyleSet = NavCarouselStyle.getInstance();\n\n    getStyleSet() {\n        return this.options.styleSet || this.constructor.styleSet;\n    }\n\n    getCarouselStyleSet() {\n        return this.options.carouselStyleSet || this.constructor.carouselStyleSet;\n    }\n\n    getDefaultOptions() {\n        return {\n            persistentLeftSidePanel: true,\n            persistentRightSidePanel: true,\n        };\n    }\n\n    constructor(options) {\n        super(options);\n\n        this.leftSidePanel = <SidePanel anchor={Direction.LEFT} name=\"left\" persistent={this.options.persistentLeftSidePanel}\n                                        styleSet={this.getStyleSet()}>\n            <Carousel ref={this.refLink(\"carousel\")} styleSet={this.getCarouselStyleSet()}>\n                <BasicOrientedElement orientation={Orientation.VERTICAL} ref={this.refLink(\"navigationPanel\")}\n                                      styleSet={this.getStyleSet()}>\n                    {this.getLeftSidePanelChildren()}\n                </BasicOrientedElement>\n            </Carousel>\n        </SidePanel>;\n\n        this.rightSidePanel = <SidePanel anchor={Direction.RIGHT} name=\"right\" persistent={this.options.persistentRightSidePanel}\n                                         styleSet={this.getStyleSet()}>\n            {this.getRightSidePanelChildren()}\n        </SidePanel>;\n    }\n\n    getLeftSidePanelChildren() {\n        return [];\n    }\n\n    getRightSidePanelChildren() {\n        return [];\n    }\n\n    getLeftConditionedChildren() {\n        return [];\n    }\n\n    getRightConditionedChildren() {\n        return [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSet().navManager);\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    leftSideIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.navigationPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.navigationPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    // TODO: lots of duplicate code here, with left/right stuff\n    getLeftSideIcon() {\n        if (!this.leftSidePanel) {\n            return null;\n        }\n\n        if (!this.leftPanelToggler) {\n            this.leftPanelToggler = <LeftSideIcon onClick={() => this.leftSideIconAction()} />;\n        }\n        return this.leftPanelToggler;\n    }\n\n    rightSideIconAction() {\n        this.toggleRightSidePanel();\n    }\n\n    getRightSideIcon() {\n        if (!this.rightSidePanel) {\n            return null;\n        }\n        if (!this.rightPanelToggler) {\n            this.rightPanelToggler = <RightSideIcon onClick={() => this.rightSideIconAction()} />;\n        }\n        return this.rightPanelToggler;\n    }\n\n    getFixedWidth() {\n        let width = 10;\n        for (let child of this.children) {\n            width += child.getWidth();\n        }\n        width -= this.getLeftConditioned().getWidth();\n        width -= this.getRightConditioned().getWidth();\n        return width;\n    }\n\n    wrappedIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.wrappedPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.wrappedPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    getWrappedIcon() {\n        if (!this.wrappedToggler) {\n            this.wrappedToggler = <WrappedIcon onClick={() => this.wrappedIconAction()}\n                                               className={this.wrapped ? \"\" : \"hidden\"} />;\n        }\n        return this.wrappedToggler;\n    }\n\n    getLeftFixed() {\n        return [];\n    }\n\n    getRightFixed() {\n        return [];\n    }\n\n    getLeftConditionedWrapper() {\n        if (!this.leftConditionedWrapper) {\n            this.leftConditionedWrapper = <NavSection anchor={Direction.LEFT}>\n                {this.getLeftConditioned()}\n            </NavSection>;\n        }\n        return this.leftConditionedWrapper;\n    }\n\n    getRightConditionedWrapper() {\n        if (!this.rightConditionedWrapper) {\n            this.rightConditionedWrapper = <NavSection anchor={Direction.RIGHT}>\n                {this.getRightConditioned()}\n            </NavSection>;\n        }\n        return this.rightConditionedWrapper;\n    }\n\n    getLeftConditioned() {\n        if (!this.leftConditioned) {\n            this.leftConditioned = <NavSection>{this.getLeftConditionedChildren()}</NavSection>;\n        }\n        return this.leftConditioned;\n    }\n\n    getRightConditioned() {\n        if (!this.rightConditioned) {\n            this.rightConditioned =  <NavSection>{this.getRightConditionedChildren()}</NavSection>;\n        }\n        return this.rightConditioned;\n    }\n\n    toggleSidePanel(mainPanel, toggleEvent) {\n        let secondaryPanel = (mainPanel == this.leftSidePanel ? this.rightSidePanel : this.leftSidePanel);\n        mainPanel.toggle();\n        this.dispatch(toggleEvent, mainPanel.visible);\n        if (secondaryPanel && mainPanel.visible && secondaryPanel.visible) {\n            mainPanel.setStyle(\"z-index\", 3001);\n            secondaryPanel.setStyle(\"z-index\", 3000);\n        }\n    }\n\n    toggleLeftSidePanel() {\n        this.toggleSidePanel(this.leftSidePanel, \"toggledLeftSide\");\n    }\n\n    toggleRightSidePanel() {\n        this.toggleSidePanel(this.rightSidePanel, \"toggledRightSide\");\n    }\n\n    render() {\n        return [\n            this.getLeftSideIcon(),\n            this.getLeftFixed(),\n            this.getLeftConditionedWrapper(),\n            this.getWrappedIcon(),\n            <NavSection style={{marginLeft: \"auto\"}}>\n              {this.getRightConditionedWrapper()}\n            </NavSection>,\n            this.getRightFixed(),\n            this.getRightSideIcon(),\n        ];\n    }\n\n    bindToNode() {\n        super.bindToNode(...arguments);\n        this.onMount();\n    }\n\n    checkForWrap() {\n        const wrapNavElements = () => {\n            this.wrapped = true;\n            this.wrappedPanel = <BasicOrientedElement orientation={Orientation.VERTICAL} styleSet={this.getStyleSet()}/>;\n            this.carousel.appendChild(this.wrappedPanel);\n\n            changeParent(this.getRightConditioned(), this.wrappedPanel);\n            changeParent(this.getLeftConditioned(), this.wrappedPanel);\n            this.getRightConditioned().redraw();\n            this.getLeftConditioned().redraw();\n            this.getWrappedIcon().removeClass(\"hidden\");\n        };\n\n        const unwrapNavElements = () => {\n            this.wrapped = false;\n            this.getWrappedIcon().addClass(\"hidden\");\n            changeParent(this.getLeftConditioned(), this.getLeftConditionedWrapper());\n            changeParent(this.getRightConditioned(), this.getRightConditionedWrapper());\n            this.carousel.eraseChild(this.wrappedPanel);\n            this.getLeftConditioned().redraw();\n            this.getRightConditioned().redraw();\n        };\n\n        if (this.getLeftConditioned().children.length || this.getRightConditioned().children.length) {\n            if (!this.wrapped) {\n                this.unwrappedTotalWidth = 10;\n                for (let child of this.children) {\n                    this.unwrappedTotalWidth += child.getWidth();\n                }\n            }\n            if (window.innerWidth < this.unwrappedTotalWidth && !this.wrapped) {\n                wrapNavElements();\n                this.dispatch(\"wrapped\", true);\n            } else if (window.innerWidth >= this.unwrappedTotalWidth && this.wrapped) {\n                unwrapNavElements();\n                this.dispatch(\"wrapped\", false);\n            }\n        } else if (this.wrapped) {\n            unwrapNavElements();\n        }\n    }\n\n    onMount() {\n        NavManager.Global = this;\n        initializeSwipeEvents(this);\n        setTimeout(() => this.checkForWrap());\n        window.addEventListener(\"resize\", () => this.checkForWrap());\n        this.addListener(\"maybeWrap\", () => this.checkForWrap());\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nlet initializeNavbar = () => {\n    NavManager.Global = NavManager.Global || new NavManager();\n    return NavManager.Global;\n};\n\n\nexport {NavManager, initializeNavbar, NavCarouselStyle}\n","// UI components\nimport {UI} from \"UI\";\nimport {NavManager} from \"navmanager/NavManager\";\nimport {\n    BasicOrientedElement,\n    NavAnchoredNotifications,\n    NavElement,\n    NavLinkElement,\n    NavSection,\n    navSessionManager,\n} from \"navmanager/NavElement\";\nimport {Direction, Orientation} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\n\n/*\n * This is the NavManager file of your app.\n *\n * Note that the whole app is a single page app.\n * Follow the instructions below in order to customize your application.\n *\n * Enjoy coding!\n */\n\nclass AppNavManager extends NavManager {\n    constructor(props) {\n        super(props);\n\n        this.leftSidePanel = null;\n        this.rightSidePanel = null;\n    }\n\n    getLeftFixed() {\n        return [\n            <NavSection\n                anchor={Direction.LEFT}\n                style={{\n                    margin: \"0\",\n                    // paddingLeft: this.leftSidePanel ? \"0px\" : \"50px\",\n                }}>\n                <NavLinkElement value=\"Home\" href=\"/\" />\n                <NavLinkElement value=\"Blog\" href=\"/blog\" />\n            </NavSection>\n        ];\n    }\n\n    getRightFixed() {\n        return [\n            <NavSection\n                anchor={Direction.RIGHT}\n                style={{\n                    margin: \"0\",\n                    // paddingRight: this.rightSidePanel ? \"0px\" : \"50px\",\n                }}>\n                {\n                    /*!USER.isAuthenticated &&*/\n                    <NavElement value=\"Login/Signup\" onClick={() => LoginModal.show()} />\n                }\n            </NavSection>\n        ];\n    }\n}\n\n\nexport {AppNavManager};","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !isLocalUrl(this.options.href)) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {UI, ViewportMeta} from \"UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {AppNavManager} from \"./AppNavManager.jsx\";\nimport {StemApp} from \"app/StemApp\";\n\nexport class AppClass extends StemApp {\n    getBeforeContainer() {\n        return <AppNavManager ref=\"navManager\"/>;\n    }\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","Error","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","document","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","iter","func","DispatcherHandle","dispatcher","callback","warn","removeListener","undefined","remove","Dispatcher","options","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","setTimeout","jobs","job","index","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","Set","NodeAttributes","assign","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","UI","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","STEM_DEBUG","stemElement","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","renderingStack","render","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","Direction","Level","Size","ActionStatus","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","changeParent","newParent","currentParent","eraseChild","appendChild","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","descriptor","configurable","enumerable","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","updateOnResize","update","_firstUpdate","styleElementOptions","styleElement","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","keyframes","styleElements","singletonInstance","elementNameCounter","ExclusiveClassSet","classInstance","StyleSet","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","axis","pageName","isTouchDevice","targetTouches","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","callbackWrapper","_okForClick","_clickDragListeners","clickDragListener","dragForClickStarted","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","deltaX","clientX","_lastX","deltaY","clientY","_lastY","onDrag","onWrapperStart","onStart","onWrapperEnd","onEnd","touch","pageX","pageY","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","Panel","title","SlideBar","size","barSize","getOrientation","getProgressBarStyle","getSliderStyle","max","min","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","width","barWidth","HORIZONTAL","setValue","getEventX","VerticalSlideBar","height","barHeight","VERTICAL","getEventY","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","getDesiredScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","scale","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","margin","textElement","color","message","displayDuration","setColor","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollToHeight","InfiniteScrollable","id","staticTop","entry","renderEntry","entryRenderer","insertEntry","entryComparator","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeNow","Date","now","timeDelta","parseInt","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","InputableElement","styleSet","getStyleSet","inputElement","getInstance","Input","type","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","float","getGivenChildren","getErrorField","FormField","inline","formField","sameLine","separatedLine","label","contentFirst","getLabel","MozStyleElements","SVGNodeAttributes","values","transform","translate","fixMozAttributes","SVG","createElementNS","goodRef","state","y","scrollLeft","pos","getBoundingClientRect","bottom","right","getBBox","newOpacity","opacity","getSvg","Text","selectable","text","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","getPath","d","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","log","p3","atan2","PI","Circle","center","cx","cy","pathString","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","x1","y1","x2","y2","Polygon","getPolygonPath","points","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","t","transition","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","requestAnimationFrame","COLORS_BY_NAME","Color","parseColor","rgba","getRgba","hex3","match","hex6","substr","rgb","firstColor","secondColor","firstColorArray","secondColorArray","convertToRgba","lighten","amount","interpolate","darken","root","pow","buildColors","dark","colors","darkenPercents","isLight","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","interval","executeLastStep","times","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","GlobalStyle","COLOR","ButtonGroupStyle","orientation","RadioButtonGroupStyle","BasicLevelStyleSet","colorClassFunction","BasicLevelStyleClass","colorClassBuilder","level","PRIMARY","SUCCESS","INFO","WARNING","DANGER","GOOGLE","FACEBOOK","DARK","buttonColorClassBuilder","darker1","darker2","darker3","regular","ButtonStyle","PLAIN","labelColorClassBuilder","darker","LabelStyle","GRAY","BadgeStyle","cardPanelColorClassBuilder","CardPanelLevelStyle","cardPanelSizeClassBuilder","fontSize","panelStyle","CardPanelSizeStyle","CardPanelStyle","defaultClassBuilder","DefaultCardPanelStyle","DEFAULT","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","progressBarColorClassBuilder","ProgressBarStyle","FlexContainerStyle","ContainerStyle","isMobileDevice","Utils","Button","RadioButtonGroup","ButtonGroup","Label","Badge","CardPanel","ProgressBar","FlexContainer","Container","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","cache","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","onSuccess","onComplete","onError","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","fetch","preprocessors","defaultPreprocessors","preprocessor","success","complete","Ajax","post","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","faIcon","getFaIcon","iconOptions","CONTAINER","valueInPercent","barStyle","barOptions","disableTransition","striped","STRIPED","active","ACTIVE","backgroundColor","Switcher","childMap","numRedraws","fullHeight","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","redrawIndex","doMount","setActive","childProperties","isMounted","preserveScroll","deactivateChild","activateChild","isInDocument","PageTitleManager","prefix","updatePageTitle","defaultTitle","getPrefix","getTitle","getFullPageTitle","Router","routes","pageTitle","urlParts","page","getRoutes","getPage","getPageNotFound","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","href","changeURL","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","subroute","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","styleSheet","getInstanceForObject","theme","Theme","styleSheetSymbol","classSet","register","styleSheetGetter","getStyleSheet","registerStyle","styleClass","BaseTabAreaStyle","DefaultTabAreaStyle","MinimalistTabAreaStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcher","autoActive","getTitleArea","getSwitcher","onSetActive","disabled","enabled","StateButton","statusOptions","statusLabel","enable","RUNNING","disable","FAILED","stateOptions","AjaxButton","setState","successData","errmsg","err","onCompete","buttons","headingLevel","heading","bodyStyle","CollapsibleStyle","transitionDuration","CollapsiblePanelStyle","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSet","collapsed","collapsibleStyle","getCollapsibleStyleSet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","button","toggle","overflow","DelayedCollapsiblePanel","_haveExpanded","delayedMount","getDelayedChildren","FloatingWindowStyle","ModalStyle","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","transitionTime","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","unbindWindowListeners","notVisible","stopPropagation","Modal","visible","container","background","getModalWindow","closeButton","zIndex","border","getModalWindowStyle","fillScreen","display","maxHeight","modalWindow","behindPanel","modalContainer","destroyOnHide","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","GlobalContainerStyle","NAVBAR_HEIGHT","innerHeight","GlobalContainer","default","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","SectionDividerStyle","barThickness","barPadding","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","uncollapsedSizes","verticalSection","horizontalSection","getWidth","getHeight","setWidth","setHeight","minWidth","minHeight","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","dividerMouseDownFunction","leftChildVisible","FAIcon","icon","getIcon","FACollapseIcon","setCollapsed","FASortIcon","direction","UP","DOWN","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","flex","CarouselStyle","navigatorHeight","hoverColor","textColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","marginLeft","pusher","RangePanelStyle","rowHeight","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","rows","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","padding","renderCollapsible","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","columnSortingOrder","sortByColumn","sortBy","sortDescending","visibility","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","SortableTable","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isAbsolute","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","estimatedLatency","serverPageLoad","performance","timing","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","marginRight","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueuedMethodsClass","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","aceKeyboardHandler","setAceTheme","aceTheme","setAceFontSize","setAceTabSize","tabSize","setAceLineNumberVisible","showLineNumber","setAcePrintMarginVisible","showPrintMargin","setAcePrintMarginSize","printMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","lineHeight","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","StaticCodeHighlighter","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","all","WebsocketStreamHandler","streamName","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","exception","parseMayFail","WebsocketSubscriber","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","NONE","websocket","failedReconnectAttempts","streamStatus","setConnectionStatus","CONNECTING","WebSocket","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","e","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","connect","warning","readyState","sendSubscribe","streamHandler","StreamStatus","UNSUBSCRIBED","SUBSCRIBING","checkTimeout","tryCount","streamTimeout","STREAM_SUBSCRIBE_TIMEOUT","STREAM_SUBSCRIBE_MAX_TIMEOUT","subscribeTimeout","sendResubscribe","canSendSubscribe","updateStreamStatus","haveIndex","getLastIndex","SUBSCRIBED","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","subscribe","getStreamHandler","addStreamListener","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","dependency","importStateFromTempMap","next","GlobalState","DefaultState","setDefaultTitle","addDefaultPreprocessor","registerStream","USER","CardStyle","Card","headerText","bodyText","IndexPageStyle","QuoteStyle","CodeStyle","Adder","s","temp","adder","bv","av","epsilon2","pi","halfPi","quarterPi","tau","degrees","radians","atan","sqrt","acos","asin","noop","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","object","features","n","sphere","coordinates","point","geometries","streamLine","closed","coordinate","lineStart","lineEnd","streamPolygon","polygonStart","polygonEnd","areaRingSum","areaSum","lambda00","phi00","lambda0","cosPhi0","sinPhi0","areaStream","areaRingStart","areaRingEnd","areaRing","areaPointFirst","lambda","phi","areaPoint","dLambda","sdLambda","adLambda","cosPhi","sinPhi","k","u","v","spherical","cartesian","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","l","phi0","lambda1","phi1","lambda2","deltaSum","ranges","range","W0","W1","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","x0","y0","z0","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroidPointCartesian","z","centroidLinePointFirst","centroidLinePoint","w","centroidRingPointFirst","centroidRingPoint","cz","m","NaN","compose","invert","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","circleStream","t0","t1","cosRadius","sinRadius","step","circleRadius","lines","ax","ay","bx","by","dx","dy","Intersection","other","o","p","segments","compareIntersection","startInside","subject","clip","segment","pointEqual","start","current","isSubject","link","compare","ascendingComparator","lo","hi","mid","f","ascending","ascendingBisect","bisector","bisectRight","pair","valueof","ceil","e10","e5","e2","tickIncrement","power","LN10","tickStep","step0","step1","LN2","i0","value0","value1","arrays","merged","clipMax","clipMin","clipExtent","to","a1","corner","comparePoint","ca","cb","activeStream","bufferStream","clipBuffer","polygon","ring","x__","y__","v__","y_","v_","clean","clipStream","polygonInside","winding","a0","b0","b1","cleanInside","merge","linePoint","rejoin","first","x_","clipLine","sum","normal","point0","sinPhi1","cosPhi1","point1","absDelta","antimeridian","arc","intersection","phiArc","lengthSum","lengthStream","lengthLineStart","lengthPointFirst","lengthLineEnd","lengthPoint","cosDelta","sinDelta","containsGeometryType","containsPoint","containsLine","containsPolygon","containsGeometry","distance","ab","ao","ob","polygonContains","ringRadians","pointRadians","x00","y00","boundsStream","boundsPoint","bounds","lengthRing","pointVisible","rotate","sink","rotatedStart","ringBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","pointLine","ringSegments","validSegment","clipAntimeridianLine","clipAntimeridianInterpolate","sign0","sign1","clipAntimeridianIntersect","sinLambda0Lambda1","cr","smallRadius","notHemisphere","v0","point2","c","code","v00","intersect","c0","two","pa","pb","n1","n2n2","n2","n1n2","determinant","c1","c2","n1xn2","A","B","uu","t2","q","polar","meridian","q1","transformer","TransformStream","fitExtent","projection","extent","h","fitSize","maxDepth","cosMinDistance","project","delta2","resample","resampleNone","resampleLineTo","depth","d2","phi2","dx2","dy2","dz","a00","b00","c00","resampleStream","ringPoint","transformRadians","projectionMutator","projectAt","projectRotate","preclip","clipAntimeridian","postclip","identity","projectResample","projectTransform","cacheStream","clipAngle","_","clipCircle","theta","recenter","precision","azimuthalRaw","azimuthalInvert","sc","cc","azimuthalEqualAreaRaw","cxcy","azimuthalEquidistantRaw","orthographicRaw","each","proto","empty","RedBlackTree","RedBlackNode","U","C","L","R","P","N","after","grandpa","uncle","RedBlackFirst","sibling","red","RedBlackRotateLeft","tree","RedBlackRotateRight","createEdge","v1","edge","edges","setEdgeEnd","halfedges","createBorderEdge","vertex","clipEdge","connectEdge","lx","ly","rx","ry","fx","fy","fm","fb","clipEdges","createCell","site","cells","cellHalfedgeAngle","cell","va","vb","cellHalfedgeStart","cellHalfedgeEnd","sortCellHalfedges","clipCells","nCells","iCell","iHalfedge","nHalfedges","startX","startY","end","endX","endY","cover","dc","v01","v11","v10","circlePool","firstCircle","attachCircle","lArc","rArc","lSite","cSite","rSite","ha","hc","circle","before","circles","detachCircle","beachPool","Beach","createBeach","beach","detachBeach","removeBeach","previous","disappearing","nArcs","iArc","addBeach","directrix","dxl","dxr","beaches","leftBreakPoint","rightBreakPoint","newArc","hb","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","triangleArea","lexicographic","Diagram","sites","triangles","s0","e1","s1","that","i1","_found","vx","vy","v2","pointX","pointY","voronoi","round","polygons","links","constant","dotprd","ic","crsprd","prod","ic1","ic2","triple_prd","ptdist","dst1","dst2","diff1","diff2","Normalize","vec","vecres","nrmult","crsprd_ix","Positions","ix","iy","triple_prd_ix","iz","ptdist_ix","zerovec","vec_copy","vec_add_to","vec_mult_scalar_to","vec_difference","IsNull","TrianglesEqual","tr1","tr2","iv","verts","EdgesEqual","ed1","ed2","TriangleObject","dirs","vol","ccdir","ccdsq","copy_vert_info","IsVertexOrderCorrect","IsPointInside","IsPointInCircumcircle","IsVertex","VertexIndexIn","EdgeIndexIn","ed","EdgeObject","polys","PolyIndexIn","pl","EdgeCheckObject","pdst","direc","midpnt","intersects","ict","itsc","near0","near1","pd0","pd","pd1","mxpd0","mxpd1","AddUnique","arr","AddUniqueEdge","FindShared","arr1","arr2","resarr","i2","FindSharedEdges","FindSetDifference","diffarr","AddThisOne","FindSetDifferenceEdges","AddPointInside","TriSet","positions","NumTris","tri","eds","trixs","newtris","neweds","trix","newtri","numverts","ImproveTriangulation","quad_verts","itr","numflips","tris","incc0","incc1","newtri0","newtri1","ed03","edix03","ed12","edix12","trix0","trix1","FindConvexHull","NextVertex","VtxStart","ix0","ix1","posdiff","ixs","hull","ixnext","FindVoronoiDiagram","vor_positions","kx","ky","vor_edges","vor_polygons","vor_poly","shrd","boundary","ept","vt0","vt1","vt2","vt3","vor_edge","indices","init_tri","init_edge","IsInside","next_edge","reverse","VorBdLns","hlen","icx","ixa","edset1","edset2","edsetshr","tvrt","vtdf","VorBdLn","itscpts","ptitscs","itscpt","ptitsc","dists","kp","dmin","dxi","dst","ptitscrd","NewVorBdLns","pstat","ptitsc_next","ptitsc_prev","VorBdLn0","VorBdLn1","tvrt0","tvrt1","PointOK","nitx","dst_in","dst_out","ptstm","mrl","ixi","vpln","VorLn","ic0","FindDelaunayTriangulationIndexed","Indices","echs","vts","echeck","BoundaryVerts","BoundaryEdges","Verts","NewEdges","VertsAddedTo","EdgesToDelete","echk","DoesIntersect","echk1","echks","vset","empt_indx","oldtri","i01","NewTriVerts","echki","BoundaryVertsToRemove","FindDelaunayTriangulation","cosphi","lat","lng","mapline","diagram","DT","geoCentroid","voro","_hull","_polygons","_links","_triangles","_index","properties","geoDistance","urquhart","geoArea","find","found","dist","sitecoordinates","neighbours","ndist","getPoints","nrPoints","E","randomPoint","speedU","speedV","timeSeed","deltas","d3geovoro","geoVoronoi","getVoronoi","ProjectionPath","MundipediaLogo","SIZE","geoOrthographic","feature","Quote","hasQuotes","quote","Code","IndexPage","topContainer","bottomContainer","StoreSymbol","StoreObject","handlers","_eventDispatcher","addUpdateListener","BaseStore","ObjectWrapper","attachToState","getState","addStore","dependencies","GenericObjectStore","objects","getObjectIdForEvent","asIterable","setStore","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","SingletonStore","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","LanguageObject","localName","LanguageStoreClass","isoCode","language","Locale","Language","Article","edits","user","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","wrap","processChildren","processChild","isDummy","isString","content","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","CodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","trimProtocol","modifiers","uiElements","parseUIElements","modifier","modify","el","textStart","elementStart","parseUIElement","optionsEnd","lastModifier","capturedEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","escapee","renderChar","chr","SyntaxError","lineNumber","columnNumber","stringify","identifier","base","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","white","source","reviver","walk","holder","MarkupClassMap","fallback","classMap","classObject","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","MarkupEditor","rendererOptions","refLink","showButtons","textAlign","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","codeEditor","setIndentedSoftWrap","addAceSessionChangeListener","toggleLeftButton","editorPanel","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","User","defaultValue","keyChain","currentDict","customSettings","getCustomSetting","lastKey","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","handle","cursor","getProfileUrl","getDisplayHandle","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","dependencyArray","requireAndRedraw","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","CSAStyle","BlogStyle","fontFamily","titleFontSize","writtenBy","blogArticleRenderer","BLUE","HOVER_BLUE","BlogArticleRendererStyle","hStyle","BlogArticleRenderer","BlogQuote","TransferOwnershipModal","marginTop","ownerFormInput","newOwner","messageArea","showMessage","transferOwnershipButton","ajaxCall","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","transferOwnershipModal","setArticle","deleteArticleModal","ArticleManager","addButton","createArticleModal","marginBottom","getArticles","getJSON","stack","TranslationManager","addTranslationModal","getTranslations","deleteRedirectLink","ArticleMarkupEditor","articleRenderer","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","flexDirection","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","getReactionCollection","upvotesCount","downvotesCount","getNumLikes","getNumDislikes","getCurrentUserReactionType","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","deleteMessageInstance","messageThread","messages","postError","MessageThread","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","BasePopup","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","SHOW_ERROR_ALERT","GoogleManager","GOOGLE_MANAGER_OPTIONS","ensureGoogleScriptNodeExists","getElementById","init","load","auth2","clientId","getGoogleAuth","isSignedIn","listen","updateSigninStatus","gapi","getAuthInstance","getGoogleUser","getAuthResponse","nextUrl","process","grantOfflineAccess","sendData","loginByTokenUrl","_Global","FacebookManager","FACEBOOK_MANAGER_OPTIONS","dataJSON","reload","fbAsyncInit","appId","version","onAsyncInit","ensureFacebookSDKScriptNodeExists","FB","loginOptions","auth_type","login","authResponse","onLoginSuccess","onLoginCanceled","onLoginError","accessToken","expiresIn","logout","onLogoutSuccess","logoutUrl","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","ERROR_TIMEOUT","accountsConfig","ThirdPartyLogin","faLogo","connectWithButtonsSpan","getConnectWith","getConnectWithButtons","googleButton","handleAuthClick","facebookButton","LoginWidget","loginWidget","emailIcon","passwordInputOptions","rememberMe","forgotPassword","badLogin","alignItems","justifyContent","signInButton","horizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getBadLogin","getHorizontalLine","emailInput","passwordInput","rememberInput","loginErrorMessage","sendLogin","RecaptchaWidget","random","grecaptcha","captchaId","GOOGLE_RECAPTCHA_PUBLIC_KEY","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","signInButtonContainer","allWithNone","countrySelect","formFields","getUsernameInput","country","getCountryInput","recaptchaContainer","getSignUpButton","submitButton","recaptchaWidget","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VoteStatus","VotingWidget","buttonsStyle","likeButtonStyle","getUserVote","LIKE","dislikeButtonStyle","DISLIKE","getVotesBalance","votesBalance","userVote","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","fontWeight","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","PreviewMarkupButton","EditableMessage","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deletable","deleteMessage","contentSwitcher","hasChild","contentContainer","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","flexGrow","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","messageWindow","scrollToBottom","getPostURL","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","renderMessage","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","getGetURL","getGetType","oldHeight","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","chatId","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","textTransform","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","dateTimestamps","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","StateDependentElement","StateDependentElementClass","endsWith","loadingAnimation","getAjaxUrl","getAjaxRequest","setLoaded","BlogEntryEditModal","entryId","discussionButton","discussionId","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","NewBlogEntryModal","addEntry","onKeyUp","isVisible","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","BlogRoute","getSubroutes","Forum","forumThreads","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","numMessages","hidden","getNumReplies","ForumThreadStore","getCircleStyle","borderSize","animationName","animationDuration","createCircle","ConcentricCirclesLoadingScreen","centerConstant","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","borderTopColor","baseStyleObject","innerWidth","ForumThreadPreviewStyle","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","markupEditorModal","forumThreadId","CreateThreadReplyModal","createThreadReply","forumThreadPanelStyle","buttonStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","maxWidth","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","paddingTop","threadTitleAndPreview","threadTitle","paddingBottom","getHref","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","NavStyle","dimensions","navbarHover","sideIcon","wrappedIcon","navElement","backgroundTransitionDuration","sidePanel","sidepanelBackground","boxShadow","sidepanelWidth","sidepanelTransitionDuration","sidepanelHover","navbarBackground","sidepanelWidthLeft","sidepanelElementHeight","collapseArrowWidth","hr","sidepanelHideWidth","StorageMap","storage","SEPARATOR","setItem","getRawKey","serialize","removeItem","getItem","getRaw","deserialize","totalStorageKeys","prefixLenth","SessionStorageMap","sessionStorage","LocalStorageMap","localStorage","doDeserialization","realCallback","oldValue","getChangeDispatchable","CHANGE_DISPATCHABLE","separatorIndex","actualKey","newEvent","navSessionManager","BasicOrientedElementInterface","BasicOrientedElement","BasicOrientedLinkElement","NavElementInterface","isToggled","getToggledState","navElementHorizontal","NavSection","navCollapseElement","navElementVertical","navElementValueHorizontal","navElementValueVertical","childrenToRender","subElementsClass","navElementVerticalArrow","navElementHorizontalArrow","getSelf","getSubElements","showChildren","hideChildren","saveToggledState","sessionKeyName","sessionKey","defaultToggled","persistent","getLocalToggledState","getSessionKeyName","toggleChildren","NavElement","NavLinkElement","navLinkElement","navSectionHorizontal","anchor","navSectionVertical","LEFT","NavAnchoredNotifications","getSwitcherStyle","bodyListener","NavIcon","LeftSideIcon","RightSideIcon","WrappedIcon","maxDistanceFromSide","minSwipeDistance","minSwipeSpeed","touchEventHandler","ignoreCondition","successCondition","xType","panelToggler","touchCallback","touchendCallback","initializeSwipeRight","navManager","maxDistance","minDistance","minSpeed","touchX","leftSidePanel","pageXOffset","toggleLeftSidePanel","initializeSwipeLeft","rightSidePanel","toggleRightSidePanel","initializeSwipeEvents","SidePanelGroup","sidePanelGroup","RIGHT","SidePanel","storageSerializer","navVerticalRightHide","navVerticalLeftHide","setVisible","NavCarouselStyle","NavManager","carouselStyleSet","persistentLeftSidePanel","getCarouselStyleSet","getLeftSidePanelChildren","persistentRightSidePanel","getRightSidePanelChildren","wrapped","navigationPanel","leftPanelToggler","leftSideIconAction","rightPanelToggler","rightSideIconAction","getLeftConditioned","getRightConditioned","wrappedPanel","wrappedToggler","wrappedIconAction","leftConditionedWrapper","rightConditionedWrapper","leftConditioned","getLeftConditionedChildren","rightConditioned","getRightConditionedChildren","mainPanel","toggleEvent","secondaryPanel","toggleSidePanel","getLeftSideIcon","getLeftFixed","getLeftConditionedWrapper","getWrappedIcon","getRightConditionedWrapper","getRightFixed","getRightSideIcon","wrapNavElements","unwrapNavElements","unwrappedTotalWidth","checkForWrap","AppNavManager","props","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","AppClass"],"mappings":"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"}