var Bundle=function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t,e,n){return l=a()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=Function.bind.apply(t,i),o=new r;return n&&s(o,n.prototype),o},l.apply(null,arguments)}function u(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){function n(){return l(t,arguments,o(this).constructor)}if(null===t||!u(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function d(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function f(t){if(!t)return[];if(!Array.isArray(t))return t[Symbol.iterator]?f(Array.from(t)):[t];for(var e=!0,n=0;n<t.length;n++)if(Array.isArray(t[n])||null==t[n]){e=!1;break}if(e)return t;for(var i=[],r=0;r<t.length;r++)if(Array.isArray(t[r]))for(var o=f(t[r]),s=0;s<o.length;s+=1)i.push(o[s]);else null!=t[r]&&i.push(t[r]);return i}function g(t,e,n){return void 0===e&&(e=self.location.host),void 0===n&&(n=self.location.origin),!t||(t.startsWith("//")?t.startsWith("//"+e):!new RegExp("^(?:[a-z]+:)?//","i").test(t)||t.startsWith(n))}function m(t,e,n){if(void 0===e&&(e=self.location.host),void 0===n&&(n=self.location.origin),!g(t,e,n))throw Error("Trying to trim non-local url!");return t?t.startsWith("//"+e)?t.slice(("//"+e).length):t.startsWith(n)?t.slice(n.length):t:t}function y(t,e){for(var n=[];t.length>0;)n.push(t.splice(0,e));return n}function b(t,e){if(null==t&&null==e)return 0;if(null==e)return 1;if(null==t)return-1;if(A(t)&&A(e))return t-e;var n=t.toString(),i=e.toString();return n===i?0:n<i?-1:1}function v(t){return t=t.trim(),t=t.replace(/[^a-zA-Z0-9-\s]/g,""),t=t.replace(/\s+/g,"-"),t=t.replace(/-{2,}/g,"-"),t=t.toLowerCase()}function S(t,e){return"number"==typeof t||t instanceof Number?t+e:t}function w(t,e){return t.__proto__=e.prototype,t}function A(t){return"number"==typeof t||t instanceof Number}function E(t){return!(!t||"object"!=typeof t||t.nodeType)&&(!t.constructor||t.constructor==Object)}function x(){var t=arguments[0]||{};"object"!=typeof t&&"function"!=typeof t&&(t={});for(var e=1;e<arguments.length;e+=1){var n=arguments[e];if(null!=n)for(var i=0,r=Object.entries(n);i<r.length;i++){var o=r[i],s=o[0],a=o[1];if(a&&E(a)||Array.isArray(a)){var l=void 0,u=t[s];l=Array.isArray(a)?u&&Array.isArray(u)?u:[]:u&&E(u)?u:{},t[s]=x(l,a)}else t[s]=a}}return t}function C(t){for(var e="",n=0;n<t.length;n++)"A"<=t[n]&&t[n]<="Z"?(n>0&&(e+="-"),e+=t[n].toLowerCase()):e+=t[n];return e==t?t:e}function T(t){for(var e=(document.cookie||"").split(";"),n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;if(s=s.trim(),s.startsWith(t+"="))return decodeURIComponent(s.substring(t.length+1))}return null}function L(t){L.objectWeakMap||(L.objectWeakMap=new WeakMap,L.constructorWeakMap=new WeakMap,L.totalObjectCount=0);var e=L.objectWeakMap,n=L.constructorWeakMap;if(!e.has(t)){var i=t.constructor||t.__proto__||Object,r=(n.get(i)||0)+1;n.set(i,r);var o=r+"-"+ ++L.totalObjectCount;e.set(t,o)}return e.get(t)}function O(t,e){for(var n=String(t);n.length<e;)n="0"+n;return n}function R(t){var e=["th","st","nd","rd"],n=t%10;return!(Math.floor(t/10)%10==1)&&e[n]||e[0]}function N(t){return t+R(t)}function I(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=l(t,i);return o.__proto__=e.prototype,o}function k(t,e){var n,i,r,o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();case 1:if(!i){a.next=7;break}if(!(r>=n.length)){a.next=4;break}return a.abrupt("break",16);case 4:o=n[r++],a.next=11;break;case 7:if(r=n.next(),!r.done){a.next=10;break}return a.abrupt("break",16);case 10:o=r.value;case 11:return s=o,a.next=14,e(s);case 14:a.next=1;break;case 16:case"end":return a.stop()}},ai)}function M(t){return function(e){var n=Array.prototype.slice.call(arguments,1),i=e[t].apply(e,n);return this.addCleanupJob(i),i}}function P(t,e){for(var n=new Map(t),i=e||[],r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;a&&(Array.isArray(a)||(a=[a]),n.set(a[0],a[1]||{}))}n.reverseNameMap=new Map;for(var l=n,u=Array.isArray(l),c=0,l=u?l:l[Symbol.iterator]();;){var h;if(u){if(c>=l.length)break;h=l[c++]}else{if(c=l.next(),c.done)break;h=c.value}var p=h,d=p[0],f=p[1];f=f||{},f.domName=f.domName||d,n.reverseNameMap.set(f.domName,d),n.set(d,f)}return n}function D(t){document.STEM_DEBUG&&(t.node.stemElement=t,setTimeout(function(){t.node&&t.node.setAttribute&&"UIElement"!==t.constructor.name&&t.node.setAttribute("_",t.constructor.name)},0))}function z(t,e){t instanceof wi.Element&&(t=t.node);var n=window.getComputedStyle(t,null);return e?n.getPropertyValue(e):n}function _(t,e){t.parent.eraseChild(t,!1),e.appendChild(t)}function B(t){if(!t||!t.hasOwnProperty)return!1;for(var e=["value","initializer","get","set"],n=0,i=e;n<i.length;n++){var r=i[n];if(t.hasOwnProperty(r))return!0}return!1}function H(t,e){return B(e[e.length-1])?t.apply(void 0,e.concat([[]])):function(){return t.apply(void 0,Array.prototype.slice.call(arguments).concat([e]))}}function F(t){return function(e){return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e}),e}}function U(t,e,n){var i=n.configurable,r=n.enumerable,o=n.initializer,s=n.value;return{configurable:i,enumerable:r,get:function(){if(this!==t){var n=o?o.call(this):s;return Object.defineProperty(this,e,{configurable:i,enumerable:r,writable:!0,value:n}),n}},set:F(e)}}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return H(U,e)}function V(t,e,n,i){var r=e?e.call(t):n;return"function"==typeof r&&(r=r()),Array.isArray(r)&&(r=Object.assign.apply(Object,[{}].concat(r))),r}function j(t){return"__style__"+t}function G(t){return"__keyframes__"+t}function Y(){function t(t,i,r){var o=r.initializer,s=r.value;return r.objInitializer=function(){var n=V(this,o,s,e);if(n.prefferedClassName=i,e.selector&&(n.selectorName=e.selector),e.inherit){var r=Object.getPrototypeOf(t)[j(i)];r||console.error("You're trying to inherit a rule that isn't implemented in the parent: "+i);return n=x({},V(this,r.objInitializer,r.value,e),n)}return n},t[e.getKey(i)]=Object.assign({},r),r.initializer=function(){var t=r.objInitializer.call(this);return this[n](t)},delete r.value,zi(t,i,r)}var e=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments)));e.targetMethodName||console.error('WARNING: targetMethodName not specified in the options (default is "css")');var n=e.targetMethodName||"css";return t}function K(t){return Y(Object.assign({targetMethodName:"css",getKey:j,inherit:!1},t))}function X(t,e){return e>=0?ji.interpolate(t,"#fff",e):q(t,-e)}function q(t,e){if(e>=0){for(var n=ji.parseColor(ji.interpolate(t,"#000",e)),i=0;i<3;i+=1){var r=Math.pow(255-n[i],.7);n[i]=parseInt(n[i]-r*e),n[i]<0&&(n[i]=0)}return ji.convertToRgba(n)}return X(t,-e)}function J(t,e){return ji.isLight(t)?q(t,e):X(t,e)}function Z(t,e){void 0===e&&(e=!0);var n,i=[];n=e?ji.isLight(t)?[.05,0,.05,.1,.15,.3,.8]:[-.3,0,.1,.2,.23,.1,-1]:[.1,0,-.2,-.3,-.35,-.2,-1];for(var r=0;r<n.length;r+=1)i.push(q(t,n[r]));return i}function $(t){return"function"==typeof t&&(t="function"==typeof t.getInstance?t.getInstance():t()),t}function Q(t){return t?$(t.theme&&t.theme.get(t)||t.styleSheet):null}function tt(t,e){return void 0===e&&(e=Gi.Global),function(n){e.register(n,t)}}function et(t){return J(t,1)}function nt(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function it(t){var e=new FileReader,n=nt(e);return e.readAsArrayBuffer(t),n}function rt(t){var e=new FileReader,n=nt(e);return e.readAsText(t),n}function ot(t){for(var e=t.getAllResponseHeaders()||"",n=e.split(/\r?\n/),i=new Headers,r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a,u=l.split(":"),c=u.shift().trim();if(c){var h=u.join(":").trim();i.append(c,h)}}return i}function st(t){if(!E(t))return t;for(var e=new URLSearchParams,n=0,i=Object.keys(t);n<i.length;n++){var r=i[n],o=t[r];if(Array.isArray(o))for(var s=o,a=Array.isArray(s),l=0,s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}var c=u;e.append(r+"[]",c)}else e.set(r,o)}return e}function at(t,e){return t.url&&(t=t.url),e&&(t+="?"+st(e)),t}function lt(t){if(t.type&&(t.method=t.type.toUpperCase()),t.contentType&&t.headers.set("Content-Type",t.contentType),t.headers.set("X-Requested-With","XMLHttpRequest"),E(t.data)){var e=t.method.toUpperCase();if("GET"===e||"HEAD"===e)t.urlParams=t.urlParams||t.data,!1===t.cache&&(t.urlParams=st(t.urlParams),t.urlParams.set("_",Date.now()));else{for(var n=new FormData,i=0,r=Object.keys(t.data);i<r.length;i++){var o=r[i],s=t.data[o];if(Array.isArray(s))for(var a=s,l=Array.isArray(a),u=0,a=l?a:a[Symbol.iterator]();;){var c;if(l){if(u>=a.length)break;c=a[u++]}else{if(u=a.next(),u.done)break;c=u.value}var h=c;n.append(o+"[]",h)}else n.append(o,s)}t.body=n}}else t.body=t.body||t.data;return t}function ut(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(E(t))return ut.apply(void 0,[t.url].concat(Array.prototype.slice.call(arguments)));var r=Object.assign.apply(Object,[{}].concat(n));r.headers=new Headers(r.headers||{});for(var o=r.preprocessors||ut.defaultPreprocessors||[],s=o,a=Array.isArray(s),l=0,s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}r=u(r)||r}r.onSuccess=r.onSuccess||r.success,r.onError=r.onError||r.error,r.onComplete=r.onComplete||r.complete,"boolean"==typeof r.cache&&(r.cache=r.cache?"force-cache":"reload"),r.method=r.method||"GET";var c=r.urlParams||r.urlSearchParams;return c&&(t=t instanceof Request?new Request(at(t.url,c),t):new Request(at(t,c),{})),new ha(t,r)}function ct(t){return{borderColor:Z(t)[4]}}function ht(t){var e=Z(t);return{color:e[6],backgroundColor:e[1],borderBottomColor:e[4]}}function pt(t,e){void 0===e&&(e=hc);var n=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{collapsed:!0}},n.getCollapsibleStyleSheet=function(){return this.options.collapsibleStyleSheet||this.constructor.collapsibleStyleSheet},n.expand=function(t){this.options.collapsed=!1,this.dispatch("expand");var e=this.getCollapsibleStyleSheet();t.addClass(e.collapsing),t.removeClass("hidden"),setTimeout(function(){t.removeClass(e.collapsed)},100)},n.collapse=function(t){var e=this;this.options.collapsed=!0,this.dispatch("collapse");var n=this.getCollapsibleStyleSheet();t.addClass(n.collapsing),t.addClass(n.collapsed);var i=function(){e.options.collapsed&&t.addClass("hidden")};t.addNodeListener("transitionend",i)},e}(t);return n.collapsibleStyleSheet=new e,n}function dt(t,e){var n;Wc.ALL.push(e),e.isVariable()?Wc.VARIABLE_DURATION.push(e):Wc.FIXED_DURATION.push(e),Wc.CANONICAL[e.name]=e,e.pluralName&&(Wc.CANONICAL[e.pluralName]=e);var i=e.pluralName;Vc[t]=new Vc((n={},n[i]=1,n))}function ft(t,e){return t=Kc(t),e=Kc(e),t.diff(e)>+Wc.DAY||t.getDate()!==e.getDate()}function gt(t,e,n){var i=n.value;return Object.assign({},n,{value:function(){return this.isLoaded()?i.call.apply(i,[this].concat(Array.prototype.slice.call(arguments))):(this.enqueueMethodCall(i,arguments),null)}})}function mt(){return new yt}function yt(){this.reset()}function bt(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}function vt(t){return t>1?0:t<-1?yh:Math.acos(t)}function St(t){return t>1?bh:t<-1?-bh:Math.asin(t)}function wt(t){return(t=Oh(t/2))*t}function At(){}function Et(t,e){t&&kh.hasOwnProperty(t.type)&&kh[t.type](t,e)}function xt(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Ct(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)xt(t[n],e,1);e.polygonEnd()}function Tt(t,e){t&&Ih.hasOwnProperty(t.type)?Ih[t.type](t,e):Et(t,e)}function Lt(t){return[Ch(t[1],t[0]),St(t[2])]}function Ot(t){var e=t[0],n=t[1],i=Th(n);return[i*Th(e),i*Oh(e),Oh(n)]}function Rt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Nt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function It(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function kt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Mt(t){var e=Nh(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Pt(t){return function(){return t}}function Dt(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function zt(t,e){return[Eh(t)>yh?t+Math.round(-t/Sh)*Sh:t,e]}function _t(t,e,n){return(t%=Sh)?e||n?Dt(Ht(t),Ft(e,n)):Ht(t):e||n?Ft(e,n):zt}function Bt(t){return function(e,n){return e+=t,[e>yh?e-Sh:e<-yh?e+Sh:e,n]}}function Ht(t){var e=Bt(t);return e.invert=Bt(-t),e}function Ft(t,e){function n(t,e){var n=Th(e),a=Th(t)*n,l=Oh(t)*n,u=Oh(e),c=u*i+a*r;return[Ch(l*o-c*s,a*i-u*r),St(c*o+l*s)]}var i=Th(t),r=Oh(t),o=Th(e),s=Oh(e);return n.invert=function(t,e){var n=Th(e),a=Th(t)*n,l=Oh(t)*n,u=Oh(e),c=u*o-l*s;return[Ch(l*o+u*s,a*i+c*r),St(c*i-a*r)]},n}function Ut(t,e,n,i,r,o){if(n){var s=Th(e),a=Oh(e),l=i*n;null==r?(r=e+i*Sh,o=e-l/2):(r=Wt(s,r),o=Wt(s,o),(i>0?r<o:r>o)&&(r+=i*Sh));for(var u,c=r;i>0?c>o:c<o;c-=l)u=Lt([s,-a*Th(c),-a*Oh(c)]),t.point(u[0],u[1])}}function Wt(t,e){e=Ot(e),e[0]-=t,Mt(e);var n=vt(-e[1]);return((-e[2]<0?-n:n)+Sh-mh)%Sh}function Vt(){function t(t,e){n.push(t=i(t,e)),t[0]*=wh,t[1]*=wh}function e(){var t=r.apply(this,arguments),e=o.apply(this,arguments)*Ah,l=s.apply(this,arguments)*Ah;return n=[],i=_t(-t[0]*Ah,-t[1]*Ah,0).invert,Ut(a,e,l,1),t={type:"Polygon",coordinates:[n]},n=i=null,t}var n,i,r=Pt([0,0]),o=Pt(90),s=Pt(6),a={point:t};return e.center=function(t){return arguments.length?(r="function"==typeof t?t:Pt([+t[0],+t[1]]),e):r},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Pt(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Pt(+t),e):s},e}function jt(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:At,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Gt(t,e){return Eh(t[0]-e[0])<mh&&Eh(t[1]-e[1])<mh}function Yt(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Kt(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Gt(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}a.push(n=new Yt(i,t,null,!0)),l.push(n.o=new Yt(i,null,n,!1)),a.push(n=new Yt(s,t,null,!1)),l.push(n.o=new Yt(s,null,n,!0))}}),a.length){for(l.sort(e),Xt(a),Xt(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var u,c,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(o=0,s=u.length;o<s;++o)r.point((c=u[o])[0],c[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(d)for(u=p.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,u=p.z,d=!d}while(!p.v);r.lineEnd()}}}function Xt(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function qt(t,e){var n=e[0],i=e[1],r=Oh(i),o=[Oh(n),-Th(n),0],s=0,a=0;Uh.reset(),1===r?i=bh+mh:-1===r&&(i=-bh-mh);for(var l=0,u=t.length;l<u;++l)if(h=(c=t[l]).length)for(var c,h,p=c[h-1],d=p[0],f=p[1]/2+vh,g=Oh(f),m=Th(f),y=0;y<h;++y,d=v,g=w,m=A,p=b){var b=c[y],v=b[0],S=b[1]/2+vh,w=Oh(S),A=Th(S),E=v-d,x=E>=0?1:-1,C=x*E,T=C>yh,L=g*w;if(Uh.add(Ch(L*x*Oh(C),m*A+L*Th(C))),s+=T?E+x*Sh:E,T^d>=n^v>=n){var O=Nt(Ot(p),Ot(b));Mt(O);var R=Nt(o,O);Mt(R);var N=(T^E>=0?-1:1)*St(R[2]);(i>N||i===N&&(O[0]||O[1]))&&(a+=T^E>=0?1:-1)}}return(s<-mh||s<mh&&Uh<-mh)^1&a}function Jt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zt(t){return function(e,n){return Jt(t(e),n)}}function $t(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Qt(t){var e,n,i,r,o;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();case 1:if(!n){s.next=7;break}if(!(i>=e.length)){s.next=4;break}return s.abrupt("break",15);case 4:r=e[i++],s.next=11;break;case 7:if(i=e.next(),!i.done){s.next=10;break}return s.abrupt("break",15);case 10:r=i.value;case 11:return o=r,s.delegateYield(o,"t0",13);case 13:s.next=1;break;case 15:case"end":return s.stop()}},Wh)}function te(t){return Array.from(Qt(t))}function ee(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);for(var i,r,o=n-(e=+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t}function ne(t,e,n,i){return function(r){function o(e,n){t(e,n)&&r.point(e,n)}function s(t,e){g.point(t,e)}function a(){v.point=s,g.lineStart()}function l(){v.point=o,g.lineEnd()}function u(t,e){f.push([t,e]),y.point(t,e)}function c(){y.lineStart(),f=[]}function h(){u(f[0][0],f[0][1]),y.lineEnd();var t,e,n,i,o=y.clean(),s=m.result(),a=s.length;if(f.pop(),p.push(f),f=null,a)if(1&o){if(n=s[0],(e=n.length-1)>0){for(b||(r.polygonStart(),b=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else a>1&&2&o&&s.push(s.pop().concat(s.shift())),d.push(s.filter(ie))}var p,d,f,g=e(r),m=jt(),y=e(m),b=!1,v={point:o,lineStart:a,lineEnd:l,polygonStart:function(){v.point=u,v.lineStart=c,v.lineEnd=h,d=[],p=[]},polygonEnd:function(){v.point=o,v.lineStart=a,v.lineEnd=l,d=te(d);var t=qt(p,i);d.length?(b||(r.polygonStart(),b=!0),Kt(d,re,t,n,r)):t&&(b||(r.polygonStart(),b=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),b&&(r.polygonEnd(),b=!1),d=p=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};return v}}function ie(t){return t.length>1}function re(t,e){return((t=t.x)[0]<0?t[1]-bh-mh:bh-t[1])-((e=e.x)[0]<0?e[1]-bh-mh:bh-e[1])}function oe(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?yh:-yh,l=Eh(o-n);Eh(l-yh)<mh?(t.point(n,i=(i+s)/2>0?bh:-bh),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=yh&&(Eh(n-r)<mh&&(n-=r*mh),Eh(o-a)<mh&&(o-=a*mh),i=se(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function se(t,e,n,i){var r,o,s=Oh(t-n);return Eh(s)>mh?xh((Oh(e)*(o=Th(i))*Oh(n)-Oh(i)*(r=Th(e))*Oh(t))/(r*o*s)):(e+i)/2}function ae(t,e,n,i){var r;if(null==t)r=n*bh,i.point(-yh,r),i.point(0,r),i.point(yh,r),i.point(yh,0),i.point(yh,-r),i.point(0,-r),i.point(-yh,-r),i.point(-yh,0),i.point(-yh,r);else if(Eh(t[0]-e[0])>mh){var o=t[0]<e[0]?yh:-yh;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function le(t){function e(e,n,i,r){Ut(r,t,a,i,e,n)}function n(t,e){return Th(t)*Th(e)>s}function i(t){var e,i,s,a,c;return{lineStart:function(){a=s=!1,c=1},point:function(h,p){var d,f=[h,p],g=n(h,p),m=l?g?0:o(h,p):g?o(h+(h<0?yh:-yh),p):0;if(!e&&(a=s=g)&&t.lineStart(),g!==s&&(!(d=r(e,f))||Gt(e,d)||Gt(f,d))&&(f[0]+=mh,f[1]+=mh,g=n(f[0],f[1])),g!==s)c=0,g?(t.lineStart(),d=r(f,e),t.point(d[0],d[1])):(d=r(e,f),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(u&&e&&l^g){var y;m&i||!(y=r(f,e,!0))||(c=0,l?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&Gt(e,f)||t.point(f[0],f[1]),e=f,s=g,i=m},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(a&&s)<<1}}}function r(t,e,n){var i=Ot(t),r=Ot(e),o=[1,0,0],a=Nt(i,r),l=Rt(a,a),u=a[0],c=l-u*u;if(!c)return!n&&t;var h=s*l/c,p=-s*u/c,d=Nt(o,a),f=kt(o,h);It(f,kt(a,p));var g=d,m=Rt(f,g),y=Rt(g,g),b=m*m-y*(Rt(f,f)-1);if(!(b<0)){var v=Nh(b),S=kt(g,(-m-v)/y);if(It(S,f),S=Lt(S),!n)return S;var w,A=t[0],E=e[0],x=t[1],C=e[1];E<A&&(w=A,A=E,E=w);var T=E-A,L=Eh(T-yh)<mh,O=L||T<mh;if(!L&&C<x&&(w=x,x=C,C=w),O?L?x+C>0^S[1]<(Eh(S[0]-A)<mh?x:C):x<=S[1]&&S[1]<=C:T>yh^(A<=S[0]&&S[0]<=E)){var R=kt(g,(-m+v)/y);return It(R,f),[S,Lt(R)]}}}function o(e,n){var i=l?t:yh-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var s=Th(t),a=6*Ah,l=s>0,u=Eh(s)>mh;return ne(n,i,e,l?[0,-t]:[-yh,t-yh])}function ue(t,e,n,i,r,o){var s,a=t[0],l=t[1],u=e[0],c=e[1],h=0,p=1,d=u-a,f=c-l;if(s=n-a,d||!(s>0)){if(s/=d,d<0){if(s<h)return;s<p&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=r-a,d||!(s<0)){if(s/=d,d<0){if(s>p)return;s>h&&(h=s)}else if(d>0){if(s<h)return;s<p&&(p=s)}if(s=i-l,f||!(s>0)){if(s/=f,f<0){if(s<h)return;s<p&&(p=s)}else if(f>0){if(s>p)return;s>h&&(h=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(s>p)return;s>h&&(h=s)}else if(f>0){if(s<h)return;s<p&&(p=s)}return h>0&&(t[0]=a+h*d,t[1]=l+h*f),p<1&&(e[0]=a+p*d,e[1]=l+p*f),!0}}}}}function ce(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,u){var c=0,h=0;if(null==r||(c=s(r,a))!==(h=s(o,a))||l(r,o)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(i,r){return Eh(i[0]-t)<mh?r>0?0:3:Eh(i[0]-n)<mh?r>0?2:1:Eh(i[1]-e)<mh?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t,e){r(t,e)&&T.point(t,e)}function u(){for(var e=0,n=0,r=m.length;n<r;++n)for(var o,s,a=m[n],l=1,u=a.length,c=a[0],h=c[0],p=c[1];l<u;++l)o=h,s=p,c=a[l],h=c[0],p=c[1],s<=i?p>i&&(h-o)*(i-s)>(p-s)*(t-o)&&++e:p<=i&&(h-o)*(i-s)<(p-s)*(t-o)&&--e;return e}function c(){T=L,g=[],m=[],C=!0}function h(){var t=u(),e=C&&t,n=(g=te(g)).length;(e||n)&&(s.polygonStart(),e&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),n&&Kt(g,a,t,o,s),s.polygonEnd()),T=s,g=m=y=null}function p(){O.point=f,m&&m.push(y=[]),x=!0,E=!1,w=A=NaN}function d(){g&&(f(b,v),S&&E&&L.rejoin(),g.push(L.result())),O.point=l,E&&T.lineEnd()}function f(o,s){var a=r(o,s);if(m&&y.push([o,s]),x)b=o,v=s,S=a,x=!1,a&&(T.lineStart(),T.point(o,s));else if(a&&E)T.point(o,s);else{var l=[w=Math.max(Gh,Math.min(jh,w)),A=Math.max(Gh,Math.min(jh,A))],u=[o=Math.max(Gh,Math.min(jh,o)),s=Math.max(Gh,Math.min(jh,s))];ue(l,u,t,e,n,i)?(E||(T.lineStart(),T.point(l[0],l[1])),T.point(u[0],u[1]),a||T.lineEnd(),C=!1):a&&(T.lineStart(),T.point(o,s),C=!1)}w=o,A=s,E=a}var g,m,y,b,v,S,w,A,E,x,C,T=s,L=jt(),O={point:l,lineStart:p,lineEnd:d,polygonStart:c,polygonEnd:h};return O}}function he(t,e,n){var i=$t(t,e-mh,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function pe(t,e,n){var i=$t(t,e-mh,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function de(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return $t(Lh(o/m)*m,r,m).map(p).concat($t(Lh(u/y)*y,l,y).map(d)).concat($t(Lh(i/f)*f,n,f).filter(function(t){return Eh(t%m)>mh}).map(c)).concat($t(Lh(a/g)*g,s,g).filter(function(t){return Eh(t%y)>mh}).map(h))}var n,i,r,o,s,a,l,u,c,h,p,d,f=10,g=f,m=90,y=360,b=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(d(l).slice(1),p(r).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(b)):[[o,u],[r,l]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(b)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(b=+e,c=he(a,s,90),h=pe(i,n,b),p=he(u,l,90),d=pe(o,r,b),t):b},t.extentMajor([[-180,-90+mh],[180,90-mh]]).extentMinor([[-180,-80-mh],[180,80+mh]])}function fe(t,e){var n=t[0]*Ah,i=t[1]*Ah,r=e[0]*Ah,o=e[1]*Ah,s=Th(i),a=Oh(i),l=Th(o),u=Oh(o),c=s*Th(n),h=s*Oh(n),p=l*Th(r),d=l*Oh(r),f=2*St(Nh(wt(o-i)+s*l*wt(r-n))),g=Oh(f),m=f?function(t){var e=Oh(t*=f)/g,n=Oh(f-t)/g,i=n*c+e*p,r=n*h+e*d,o=n*a+e*u;return[Ch(r,i)*wh,Ch(o,Nh(i*i+r*r))*wh]}:function(){return[n*wh,i*wh]};return m.distance=f,m}function ge(t){return t}function me(){Xh.point=ye}function ye(t,e){Xh.point=be,Mh=Dh=t,Ph=zh=e}function be(t,e){Kh.add(zh*t-Dh*e),Dh=t,zh=e}function ve(){be(Mh,Ph)}function Se(t,e){t<qh&&(qh=t),t>Zh&&(Zh=t),e<Jh&&(Jh=e),e>$h&&($h=e)}function we(t,e){tp+=t,ep+=e,++np}function Ae(){up.point=Ee}function Ee(t,e){up.point=xe,we(Hh=t,Fh=e)}function xe(t,e){var n=t-Hh,i=e-Fh,r=Nh(n*n+i*i);ip+=r*(Hh+t)/2,rp+=r*(Fh+e)/2,op+=r,we(Hh=t,Fh=e)}function Ce(){up.point=we}function Te(){up.point=Oe}function Le(){Re(_h,Bh)}function Oe(t,e){up.point=Re,we(_h=Hh=t,Bh=Fh=e)}function Re(t,e){var n=t-Hh,i=e-Fh,r=Nh(n*n+i*i);ip+=r*(Hh+t)/2,rp+=r*(Fh+e)/2,op+=r,r=Fh*t-Hh*e,sp+=r*(Hh+t),ap+=r*(Fh+e),lp+=3*r,we(Hh=t,Fh=e)}function Ne(t){this._context=t}function Ie(t,e){mp.point=ke,hp=dp=t,pp=fp=e}function ke(t,e){dp-=t,fp-=e,gp.add(Nh(dp*dp+fp*fp)),dp=t,fp=e}function Me(){this._string=[]}function Pe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function De(t,e){function n(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Tt(t,i(r))),r.result()}var i,r,o=4.5;return n.area=function(t){return Tt(t,i(Xh)),Xh.result()},n.measure=function(t){return Tt(t,i(mp)),mp.result()},n.bounds=function(t){return Tt(t,i(Qh)),Qh.result()},n.centroid=function(t){return Tt(t,i(up)),up.result()},n.projection=function(e){return arguments.length?(i=null==e?(t=null,ge):(t=e).stream,n):t},n.context=function(t){return arguments.length?(r=null==t?(e=null,new Me):new Ne(e=t),"function"!=typeof o&&r.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),n):o},n.projection(t).context(e)}function ze(t){return function(e){var n=new _e;for(var i in t)n[i]=t[i];return n.stream=e,n}}function _e(){}function Be(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Tt(n,t.stream(Qh)),e(Qh.result()),null!=i&&t.clipExtent(i),t}function He(t,e,n){return Be(t,function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),s=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])},n)}function Fe(t,e,n){return He(t,[[0,0],e],n)}function Ue(t,e,n){return Be(t,function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,s=-r*n[0][1];t.scale(150*r).translate([o,s])},n)}function We(t,e,n){return Be(t,function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],s=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,s])},n)}function Ve(t,e){return+e?Ge(t,e):je(t)}function je(t){return ze({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ge(t,e){function n(i,r,o,s,a,l,u,c,h,p,d,f,g,m){var y=u-i,b=c-r,v=y*y+b*b;if(v>4*e&&g--){var S=s+p,w=a+d,A=l+f,E=Nh(S*S+w*w+A*A),x=St(A/=E),C=Eh(Eh(A)-1)<mh||Eh(o-h)<mh?(o+h)/2:Ch(w,S),T=t(C,x),L=T[0],O=T[1],R=L-i,N=O-r,I=b*R-y*N;(I*I/v>e||Eh((y*R+b*N)/v-.5)>.3||s*p+a*d+l*f<bp)&&(n(i,r,o,s,a,l,L,O,C,S/=E,w/=E,A,g,m),m.point(L,O),n(L,O,C,S,w,A,u,c,h,p,d,f,g,m))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){y=NaN,A.point=o,e.lineStart()}function o(i,r){var o=Ot([i,r]),s=t(i,r);n(y,b,m,v,S,w,y=s[0],b=s[1],m=i,v=o[0],S=o[1],w=o[2],yp,e),e.point(y,b)}function s(){A.point=i,e.lineEnd()}function a(){r(),A.point=l,A.lineEnd=u}function l(t,e){o(c=t,e),h=y,p=b,d=v,f=S,g=w,A.point=o}function u(){n(y,b,m,v,S,w,h,p,c,d,f,g,yp,e),A.lineEnd=s,s()}var c,h,p,d,f,g,m,y,b,v,S,w,A={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),A.lineStart=a},polygonEnd:function(){e.polygonEnd(),A.lineStart=r}};return A}}function Ye(t){return ze({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function Ke(t,e,n){function i(i,r){return[e+t*i,n-t*r]}return i.invert=function(i,r){return[(i-e)/t,(n-r)/t]},i}function Xe(t,e,n,i){function r(t,i){return[a*t-l*i+e,n-l*t-a*i]}var o=Th(i),s=Oh(i),a=o*t,l=s*t,u=o/t,c=s/t,h=(s*n-o*e)/t,p=(s*e+o*n)/t;return r.invert=function(t,e){return[u*t-c*e+h,p-c*t-u*e]},r}function qe(t){return Je(function(){return t})()}function Je(t){function e(t){return p(t[0]*Ah,t[1]*Ah)}function n(t){return(t=p.invert(t[0],t[1]))&&[t[0]*wh,t[1]*wh]}function i(){var t=Xe(g,0,0,E).apply(null,o(b,v)),e=(E?Xe:Ke)(g,m-t[0],y-t[1],E);return s=_t(S,w,A),h=Dt(o,e),p=Dt(s,h),c=Ve(h,O),r()}function r(){return d=f=null,e}var o,s,a,l,u,c,h,p,d,f,g=150,m=480,y=250,b=0,v=0,S=0,w=0,A=0,E=0,x=null,C=Vh,T=null,L=ge,O=.5;return e.stream=function(t){return d&&f===t?d:d=vp(Ye(s)(C(c(L(f=t)))))},e.preclip=function(t){return arguments.length?(C=t,x=void 0,r()):C},e.postclip=function(t){return arguments.length?(L=t,T=a=l=u=null,r()):L},e.clipAngle=function(t){return arguments.length?(C=+t?le(x=t*Ah):(x=null,Vh),r()):x*wh},e.clipExtent=function(t){return arguments.length?(L=null==t?(T=a=l=u=null,ge):ce(T=+t[0][0],a=+t[0][1],l=+t[1][0],u=+t[1][1]),r()):null==T?null:[[T,a],[l,u]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(b=t[0]%360*Ah,v=t[1]%360*Ah,i()):[b*wh,v*wh]},e.rotate=function(t){return arguments.length?(S=t[0]%360*Ah,w=t[1]%360*Ah,A=t.length>2?t[2]%360*Ah:0,i()):[S*wh,w*wh,A*wh]},e.angle=function(t){return arguments.length?(E=t%360*Ah,i()):E*wh},e.precision=function(t){return arguments.length?(c=Ve(h,O=t*t),r()):Nh(O)},e.fitExtent=function(t,n){
return He(e,t,n)},e.fitSize=function(t,n){return Fe(e,t,n)},e.fitWidth=function(t,n){return Ue(e,t,n)},e.fitHeight=function(t,n){return We(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function Ze(t){var e=0,n=yh/3,i=Je(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ah,n=t[1]*Ah):[e*wh,n*wh]},r}function $e(t){return function(e,n){var i=Nh(e*e+n*n),r=t(i),o=Oh(r),s=Th(r);return[Ch(e*o,i*s),St(i&&n*o/i)]}}function Qe(){return qe(Sp).scale(124.75).clipAngle(179.999)}function tn(t,e){return[t,e]}function en(t,e){function n(t,e){var n=o-e,i=r*t;return[n*Oh(i),o-n*Th(i)]}var i=Th(t),r=t===e?Oh(t):(i-Th(e))/(e-t),o=i/r+t;return Eh(r)<mh?tn:(n.invert=function(t,e){var n=o-e;return[Ch(t,Eh(n))/r*Rh(n),o-Rh(r)*Nh(t*t+n*n)]},n)}function nn(){return Ze(en).scale(131.154).center([0,13.9389])}function rn(t,e){return[Th(e)*Oh(t),Oh(e)]}function on(){return qe(rn).scale(249.5).clipAngle(90+mh)}function sn(t){return t>1?Tp:t<-1?-Tp:Math.asin(t)}function an(t){return t>0?Math.sqrt(t):0}function ln(t,e){function n(n,i){var r=Sp(n/e,i);return r[0]*=t,r}return arguments.length<2&&(e=t),1===e?Sp:e===1/0?un:(n.invert=function(n,i){var r=Sp.invert(n/t,i);return r[0]*=e,r},n)}function un(t,e){return[t*Ap(e)/Ap(e/=2),2*Ep(e)]}function cn(){var t=2,e=Je(ln),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)}function hn(t,e){var n=(2+Tp)*Ep(e);e/=2;for(var i=0,r=1/0;i<10&&wp(r)>xp;i++){var o=Ap(e);e-=r=(e+Ep(e)*(o+2)-n)/(2*o*(1+o))}return[2/an(Cp*(4+Cp))*t*(1+Ap(e)),2*an(Cp/(4+Cp))*Ep(e)]}function pn(){return qe(hn).scale(180.739)}function dn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fn(t,e){for(var n=0,i=0;t.length>n;++n)i+=t[n]*e[n];return i}function gn(t){var e=t[0]*dd,n=t[1]*dd;return[Math.cos(n)*Math.cos(e),Math.cos(n)*Math.sin(e),Math.sin(n)]}function mn(t,e){if(t&&e){var n=dn(t,e),i=Math.sqrt(fn(n,n));if(0==i)return;var r=.5*Math.acos(Math.max(-1,Math.min(1,fn(t,e)))),o=n[2]*Math.sin(r)/i,s=-n[1]*Math.sin(r)/i,a=n[0]*Math.sin(r)/i,l=Math.cos(r);return r&&[l,o,s,a]}}function yn(t){if(t){var e=.5*t[0]*dd,n=.5*t[1]*dd,i=.5*t[2]*dd,r=Math.sin(e),o=Math.cos(e),s=Math.sin(n),a=Math.cos(n),l=Math.sin(i),u=Math.cos(i);return[o*a*u+r*s*l,r*a*u-o*s*l,o*s*u+r*a*l,o*a*l-r*s*u]}}function bn(t,e){if(t&&e){var n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],l=e[2],u=e[3];return[n*s-i*a-r*l-o*u,i*s+n*a+r*u-o*l,n*l-i*u+r*s+o*a,n*u+i*l-r*a+o*s]}}function vn(t){if(t)return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*fd,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*fd,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*fd]}function Sn(t,e,n){return vn(bn(yn(n),mn(gn(t),gn(e))))}function wn(t,e,n){return void 0===n&&(n=200),{x:Ui.getEventX(t),y:Ui.getEventY(t),zoomFactor:e<=0?1-e/n:1/(1+e/n),rawEvent:t}}function An(t){t=String(t||Math.random());for(var e="56789ABC".split(""),n="#",i=0;i<3;i++){n+=e[function(t,e){void 0===e&&(e=0),e^=431;for(var n=0,i=t.length;n<i;n++)e=e+(e<<5^e>>20)+t.charCodeAt(n),e|=0;return e=Math.abs(e)}(t,100*i)%e.length]}return n}function En(){var t=Gi.Global.getProperties();return{height:window.innerHeight-(t.NAV_MANAGER_NAVBAR_HEIGHT+t.GLOBAL_YEAR_SELECT_HEIGHT+25),width:window.innerWidth}}function xn(t){if(0===t.length)return[];for(var e=[0],n=0,i=1;i<t.length;i+=1){for(;n>0&&t[i]!==t[n];)n=e[n];t[i]===t[n]&&(n+=1),e.push(n)}return e}function Cn(t){return function(t){function e(e){var n;return n=t.call(this,e)||this,n.captureContent=!0,n}return r(e,t),e.prototype.wrap=function(t){if(t.length>0){t[0]=t[0].substring(t[0].indexOf(this.pattern)+this.pattern.length);var e=t.pop();return e=e.substring(0,e.lastIndexOf(this.endPattern)),t.push(e),{tag:this.tag,children:t}}},e}(t)}function Tn(t){return function(t){function e(e){var n;return n=t.call(this,e)||this,n.groupConsecutive=!1,n}r(e,t);var n=e.prototype;return n.isValidElement=function(t){return t.content&&"p"===t.content.tag&&t.content.children.length>0&&!t.content.children[0].tag&&t.content.children[0].startsWith(this.pattern)},n.modify=function(t,e){for(var n=[],i=0;i<t.length;i+=1){var r=t[i];if(this.isValidElement(r))if(this.groupConsecutive){var o=[],s=void 0,a=void 0;for(s=t[i].start;i<t.length&&this.isValidElement(t[i]);)o.push(this.wrapItem(t[i].content.children)),i+=1;i-=1,a=t[i].end,n.push({start:s,end:a,content:this.wrap(o)})}else{var l=Object.assign({},r,{content:this.wrap(r.content.children)});n.push(l)}else n.push(r)}return n},n.wrapItem=function(t){var e=t[0],n=e.indexOf(this.pattern),i=n+this.pattern.length;return t[0]=e.substring(i),{tag:this.itemTag,children:t}},n.wrap=function(t){return{tag:this.tag,children:t}},e}(t)}function Ln(t){return function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.processChildren=function(t,e){return 0===t.length?[]:[e.substring(t[0].start,t[t.length-1].end)]},e}(t)}function On(t,e,n,i,r){return{position:"absolute",height:t+"px",width:t+"px",border:e+"px solid "+n,borderRadius:t+"px",borderRight:e+"px transparent",borderBottom:e+"px transparent",rotate:"0deg",transform:"rotate(45deg)",animationName:i,animationDuration:r,animationIterationCount:"infinite",animationTimingFunction:"linear"}}function Rn(t,e,n,i,r){return wi.createElement("div",{style:On(t,e,n,i,r)})}function Nn(t){var e=ef.get(t);return e||(e=new tf(t),ef.set(t,e)),new Promise(function(t,n){e.resolve(t,n)})}function In(t,e){Array.isArray(t)||(t=[t]);var n=t.map(function(t){return Nn(t)});Promise.all(n).then(function(){e.apply(void 0,arguments)})}function kn(t,e){var n=fe(t,e)(.5),i=Bn(Bn(Gn(t),Gn(e)),Gn(n)),r=1/zn(i);i[0]*=r,i[1]*=r,i[2]*=r;var o=Vt().origin(jn(i))().coordinates[0];return[{type:"Polygon",coordinates:[o]},{type:"Polygon",coordinates:[o.slice().reverse()]}]}function Mn(t,e){var n=t.pop();e<t.length&&((t[e]=n).index=e)}function Pn(t){var e=t.a.p,n=t.b.p,i=t.c.p,r=Bn(Fn(t.c.p,t.a.p),Fn(t.b.p,t.a.p)),o=1/Dn(r),s=Math.sqrt(o),a=Hn(.5*s*zn(Fn(e,n))*zn(Fn(n,i))*zn(Fn(i,e))),l=.5*o*Dn(Fn(n,i))*_n(Fn(e,n),Fn(e,i)),u=.5*o*Dn(Fn(e,i))*_n(Fn(n,e),Fn(n,i)),c=.5*o*Dn(Fn(e,n))*_n(Fn(i,e),Fn(i,n)),h=[l*e[0]+u*n[0]+c*i[0],l*e[1]+u*n[1]+c*i[1],l*e[2]+u*n[2]+c*i[2]],p=Dn(h);return p>sS?(h[0]*=p=1/Math.sqrt(p),h[1]*=p,h[2]*=p):h=t.n,Un(t,h)||(h[0]*=-1,h[1]*=-1,h[2]*=-1,a=iS-a,h.negative=!0),h.radius=a,h}function Dn(t){return _n(t,t)}function zn(t){return Math.sqrt(Dn(t))}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Hn(t){return Math.asin(Math.max(-1,Math.min(1,t)))}function Fn(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function Un(t,e){return _n(t.n,e)-_n(t.n,t.a.p)>sS}function Wn(t,e){return Math.abs(_n(t.n,e)-_n(t.n,t.a.p))<=sS}function Vn(t){var e=1/zn(t);return t[0]*=e,t[1]*=e,t[2]*=e,t}function jn(t){return[Math.atan2(t[1],t[0])*rS,Hn(t[2])*rS]}function Gn(t){var e=t[0]*oS,n=t[1]*oS,i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Yn(t,e,n){var i;this.t=t,this.v=e,this.i=n,this.prevF=null,(i=this.nextF=e.visible)&&(i.prevF=this),e.visible=this}function Kn(t,e,n){Un(t,e)&&t.visible.push(new Yn(t,e,n))}function Xn(t,e,n){for(var i=e.visible,r=n.visible,o=i.length,s=r.length,a=0,l=0;a<o||l<s;)if(a<o){var u=i[a];if(l<s){var c=r[l];if(u.i>c.i){Kn(t,c.v,c.i),++l;continue}u.i===c.i&&++l}Kn(t,u.v,u.i),++a}else{var h=r[l];Kn(t,h.v,h.i),++l}}function qn(t,e,n,i){this.visible=[],this.marked=!1,this.n=Vn(Bn(Fn(n,t),Fn(e,t))),(((this.a=new Jn(this,t)).next=this.b=new Jn(this,e)).next=this.c=new Jn(this,n)).next=this.a,this.index=i}function Jn(t,e){this.triangle=t,this.p=e,this.neighbor=this.next=null}function Zn(t){return!t.triangle.marked&&t.neighbor.triangle.marked}function $n(t){if(!(t=t.neighbor).triangle.marked)for(var e=[t],n=t;;)if(Zn(t=t.next)){if(t===n)return e;e.push(t)}else t=t.neighbor}function Qn(t,e){(t.neighbor=e).neighbor=t}function ti(t,e){function n(e,n){var i=Math.abs(t*e)%360,r=Math.abs(t*n/180)%1;return[i,180*Math.asin(2*r-1)]}void 0===e&&(e=42);var i=[];t/=333;for(var r=0;r<e;r++)i.push([Math.PI*r%1,Math.E*r%1]),i[r][0]=2*(i[r][0]-.5),i[r][1]=2*(i[r][1]-.5)/2;return i.map(function(t){return n(t[0],t[1])})}function ei(t,e,n,i){return void 0===i&&(i="client"),function(r){if(!t(r.targetTouches[0][i+"X"])){var o=r.targetTouches[0][i+"X"],s=new di,a=Kc.now(),l=function(t){e(t.targetTouches[0][i+"X"],o,Kc.now()-a)&&s.dispatch(!0)},u=function(){s.dispatch(!1)};document.addEventListener("touchmove",l),document.addEventListener("touchend",u),s.addListener(function(t){t&&n(),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",u)})}}}function ni(t,e,n,i){void 0===e&&(e=lA),void 0===n&&(n=uA),void 0===i&&(i=cA),document.addEventListener("touchstart",ei(function(n){return t.leftSidePanel.visible||0!==window.pageXOffset||n>e},function(t,e,r){return t-e>=n&&(t-e)/r>=i},function(){return t.toggleLeftSidePanel()})),t.leftSidePanel.addNodeListener("touchstart",ei(function(){return!t.leftSidePanel.visible},function(t,e){return e-t>=n&&e-t>=i},function(){return t.toggleLeftSidePanel()}))}function ii(t,e,n,i){void 0===e&&(e=lA),void 0===n&&(n=uA),void 0===i&&(i=cA),document.addEventListener("touchstart",ei(function(n){return t.rightSidePanel.visible||window.innerWidth-n>e},function(t,e,r){return e-t>=n&&(e-t)/r>=i},function(){return t.toggleRightSidePanel()})),t.rightSidePanel.addNodeListener("touchstart",ei(function(){return!t.rightSidePanel.visible},function(t,e,r){return t-e>=n&&(t-e)/r>=i},function(){return t.toggleRightSidePanel()}))}function ri(t,e,n,i){void 0===e&&(e=e),void 0===n&&(n=uA),void 0===i&&(i=cA),Ui.isTouchDevice()&&(t.leftSidePanel&&ni(t,e,n,i),t.rightSidePanel&&ii(t,e,n,i))}function oi(){di.Global.dispatch("logout"),Na.postJSON("/accounts/logout/",{}).then(function(){di.Global.dispatch("logoutSuccess"),location.reload()})}function si(){var t=this;this.addClickListener(function(e){e.shiftKey||e.ctrlKey||e.metaKey||!t.options.href||!g(t.options.href)||t.options.newTab||t.options.target&&"_self"!==t.options.target||(e.preventDefault(),e.stopPropagation(),$o.changeURL(m(t.options.href)))})}var ai=regeneratorRuntime.mark(k),li=function(){},ui=function(){function t(){}var e=t.prototype;return e.wrap=function(t){throw Error("Implement wrap method")},e.call=function(t){return this.wrap(t)()},e.toFunction=function(){var t=this;return function(e){return t.wrap(e)}},t}(),ci=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.index=1,e.lastExecuted=0,e}return r(e,t),e.prototype.wrap=function(t){var e=this,n=this.index++;return function(){if(n>e.lastExecuted)return e.lastExecuted=n,t.apply(void 0,arguments)}},e}(ui),hi=function(t){function e(e){var n;return void 0===e&&(e={}),n=t.call(this)||this,n.lastCallTime=0,n.pendingCall=null,n.pendingCallArgs=[],n.pendingCallExpectedTime=0,n.numCalls=0,n.totalCallDuration=0,Object.assign(h(n),e),n}r(e,t);var n=e.prototype;return n.isThrottleOnAnimationFrame=function(){return this.throttle===this.constructor.ON_ANIMATION_FRAME},n.clearPendingCall=function(){this.pendingCall=null,this.pendingCallArgs=[],this.pendingCallExpectedTime=0},n.cancel=function(){this.pendingCall&&this.pendingCall.cancel(),this.clearPendingCall()},n.flush=function(){this.pendingCall&&this.pendingCall.flush(),this.clearPendingCall()},n.cleanup=function(){this.cancel()},n.computeExecutionDelay=function(t){var e=null;return null!=this.throttle&&(e=Math.max(this.lastCallTime+this.throttle-t,0)),null!=this.debounce&&(e=Math.min(null!=e?e:this.debounce,this.debounce)),e},n.replacePendingCall=function(t,e,n){if(this.cancel(),this.isThrottleOnAnimationFrame()){var i=requestAnimationFrame(e);return void(t.cancel=function(){return cancelAnimationFrame(i)})}var r=Date.now(),o=this.computeExecutionDelay(r);if(this.dropThrottled)return 0==o&&e();var s=setTimeout(e,o);t.cancel=function(){return clearTimeout(s)},this.pendingCall=t,this.pendingCallArgs=n,this.pendingCallExpectedTime=r+o},n.updatePendingCall=function(t){if(this.pendingCallArgs=t,!this.isThrottleOnAnimationFrame()){var e=Date.now();this.pendingCallExpectedTime=e+this.computeExecutionDelay(e)}},n.wrap=function(t){var e=this,n=function n(){var r=Date.now();!e.isThrottleOnAnimationFrame()&&r+1<e.pendingCallExpectedTime?e.replacePendingCall(i,n,e.pendingCallArgs):(e.lastCallTime=r,e.clearPendingCall(),t.apply(void 0,e.pendingCallArgs))},i=function i(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e.pendingCall&&t===e.pendingCall.originalFunc?e.updatePendingCall(o):e.replacePendingCall(i,n,o)};return i.originalFunc=t,i.cancel=li,i.flush=function(){i===e.pendingCall&&(e.cancel(),i())},i},e}(ui);hi.ON_ANIMATION_FRAME=Symbol(),hi.AUTOMATIC=Symbol();var pi=function(){function t(t,e){this.dispatcher=t,this.callback=e}var e=t.prototype;return e.remove=function(){if(!this.dispatcher)return void console.warn("Removing a dispatcher twice");this.dispatcher.removeListener(this.callback),this.dispatcher=void 0,this.callback=void 0},e.cleanup=function(){this.remove()},t}(),di=function(){function t(t){void 0===t&&(t={}),this.options=t,this.listeners=[]}var e=t.prototype;return e.callbackExists=function(t){for(var e=0;e<this.listeners.length;e+=1)if(this.listeners[e]===t)return!0;return!1},e.addListener=function(t){return"function"!=typeof t?void console.error("The listener needs to be a function: ",t):this.callbackExists(t)?void console.error("Can't re-register for the same callback: ",this," ",t):(this.listeners.push(t),new pi(this,t))},e.addListenerOnce=function(t){var e=this.addListener(function(){t.apply(void 0,arguments),e.remove()});return e},e.removeListener=function(t){for(var e=0;e<this.listeners.length;e+=1)if(this.listeners[e]===t)return this.listeners.splice(e,1)[0]},e.removeAllListeners=function(){this.listeners=[]},e.dispatch=function(t){for(var e=0;e<this.listeners.length;){var n=this.listeners[e];n.apply(void 0,arguments),n===this.listeners[e]&&e++}},t}(),fi=Symbol("Dispatchers"),gi=function(){function t(){}var e=t.prototype;return e.getDispatcher=function(t){return this.dispatchers.get(t)},e.dispatch=function(t,e){var n=this.getDispatcher(t);if(n)if(arguments.length<=2)n.dispatch(e);else{var i=Array.prototype.slice.call(arguments,1);n.dispatch.apply(n,i)}},e.addListener=function(t,e){var n=this;if(Array.isArray(t))return new mi(t.map(function(t){return n.addListener(t,e)}));var i=this.getDispatcher(t);return i||(i=new di,this.dispatchers.set(t,i)),i.addListener(e)},e.addListenerOnce=function(t,e){var n=this;if(Array.isArray(t))return new mi(t.map(function(t){return n.addListenerOnce(t,e)}));var i=this.getDispatcher(t);return i||(i=new di,this.dispatchers.set(t,i)),i.addListenerOnce(e)},e.removeListener=function(t,e){var n=this.getDispatcher(t);n&&n.removeListener(e)},e.cleanup=function(){this.runCleanupJobs(),delete this[fi]},e.addCleanupJob=function(t){return this.hasOwnProperty("_cleanupJobs")||(this._cleanupJobs=new mi),this._cleanupJobs.add(t),t},e.runCleanupJobs=function(){this._cleanupJobs&&this._cleanupJobs.cleanup()},e.detachListener=function(t){this._cleanupJobs?this._cleanupJobs.remove(t):t.remove()},n(t,[{key:"dispatchers",get:function(){return this[fi]||(this[fi]=new Map)}}]),t}();gi.prototype.attachListener=M("addListener"),gi.prototype.attachEventListener=M("addEventListener"),gi.prototype.attachCreateListener=M("addCreateListener"),gi.prototype.attachUpdateListener=M("addUpdateListener"),gi.prototype.attachDeleteListener=M("addDeleteListener"),di.Global=new gi;var mi=function(){function t(t){void 0===t&&(t=[]),this.jobs=t}var e=t.prototype;return e.add=function(t){this.jobs.push(t)},e.cleanup=function(){for(var t=this.jobs,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var r=i;"function"==typeof r.cleanup?r.cleanup():"function"==typeof r.remove?r.remove():r()}this.jobs=[]},e.remove=function(t){if(t){var e=this.jobs.indexOf(t);e>=0&&this.jobs.splice(e,1),t.remove()}else this.cleanup()},t}(),yi=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setActive=function(t,e,n){(n||t!==this._active)&&(this._active=t,this.dispatch(t),e&&this.addListenerOnce(function(n){n!=t&&e(n)}))},n.getActive=function(){return this._active},e}(di),bi=new Set(["border-bottom-width","border-left-width","border-right-width","border-top-width","border-width","bottom","font-size","font-stretch","height","layer-grid-char","layer-grid-char-spacing","layer-grid-line","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","outline-width","padding","padding-bottom","padding-left","padding-right","padding-top","right","size","top","width","word-spacing"]),vi=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.create=function(t){return w(new Set(String(t||"").split(" ")),this)},e.prototype.toString=function(){return Array.from(this).join(" ")},e}(c(Set)),Si=function(){function t(t){Object.assign(this,t),this.className instanceof vi&&(this.className=vi.create(String(this.className))),this.style&&(this.style=Object.assign({},this.style))}var e=t.prototype;return e.setAttribute=function(t,e,n,i){void 0===i&&(i=this.constructor.defaultAttributesMap),i.has(t)||(this.whitelistedAttributes=this.whitelistedAttributes||{},this.whitelistedAttributes[t]=!0),this[t]=e,n&&this.applyAttribute(t,n,i)},e.applyStyleToNode=function(t,e,n){"function"==typeof e&&(e=e()),(e instanceof Number||"number"==typeof e)&&0!=e&&bi.has(C(t))&&(e+="px"),n&&n.style[t]!==e&&(n.style[t]=e)},e.setStyle=function(t,e,n){if("string"==typeof t||t instanceof String){if(void 0===e)return void this.removeStyle(t,n);this.style=this.style||{},this.style[t]=e,this.applyStyleToNode(t,e,n)}else for(var i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];this.setStyle(o,t[o],n)}},e.removeStyle=function(t,e){this.style&&delete this.style[t],e&&e.style[t]&&delete e.style[t]},t.getClassArray=function(t){return t?Array.isArray(t)?t.map(function(t){return String(t).trim()}):String(t).trim().split(" "):[]},e.getClassNameSet=function(){return this.className instanceof vi||(this.className=vi.create(this.className||"")),this.className},e.addClass=function(t,e){t=this.constructor.getClassArray(t);for(var n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;this.getClassNameSet().add(s),e&&e.classList.add(s)}},e.removeClass=function(t,e){t=this.constructor.getClassArray(t);for(var n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;this.getClassNameSet().delete(s),e&&e.classList.remove(s)}},e.hasClass=function(t){return this.getClassNameSet().has("string"==typeof t?t:t.className)},e.applyAttribute=function(t,e,n){var i=n.get(t);if(!i){if(!(this.whitelistedAttributes&&t in this.whitelistedAttributes))return;i={domName:t}}var r=this[t];"function"==typeof r&&(r=r()),i.noValue&&(r=r?"":void 0),void 0!==r?e.setAttribute(i.domName,r):e.removeAttribute(i.domName)},e.applyClassName=function(t){if(this.className){var e=String(this.className);t.className!=e&&(t.className=e)}else t.className&&t.removeAttribute("class")},e.apply=function(t,e){for(var n={},i=(this.whitelistedAttributes,t.attributes),r=i.length-1;r>=0;r--){var o=i[r],s=o.name;if("style"!==s&&"class"!==s){var a=e.reverseNameMap.get(s);if(this.hasOwnProperty(a)){var l=this[a],u=e.get(a);u&&u.noValue&&(l=l?"":void 0),null!=l?(t.setAttribute(s,l),n[a]=!0):t.removeAttribute(s)}else t.removeAttribute(s)}}for(var c in this)n[c]||this.applyAttribute(c,t,e);if(this.applyClassName(t),t.removeAttribute("style"),this.style)for(var h in this.style)this.applyStyleToNode(h,this.style[h],t)},t}();Si.defaultAttributesMap=P([["id"],["action"],["colspan"],["default"],["disabled",{noValue:!0}],["fixed"],["forAttr",{domName:"for"}],["hidden"],["href"],["rel"],["minHeight"],["minWidth"],["role"],["target"],["HTMLtitle",{domName:"title"}],["type"],["placeholder"],["src"],["height"],["width"]]);var wi={renderingStack:[]},Ai=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.canOverwrite=function(t){return this.constructor===t.constructor&&this.getNodeType()===t.getNodeType()},n.applyRef=function(){if(this.options&&this.options.ref){this.options.ref.parent[this.options.ref.name]=this}},n.removeRef=function(){if(this.options&&this.options.ref){var t=this.options.ref.parent,e=this.options.ref.name;t[e]===this&&(t[e]=void 0)}},n.onMount=function(){},n.onUnmount=function(){},n.destroyNode=function(){this.onUnmount(),this.cleanup(),this.removeRef(),this.node&&this.node.remove(),delete this.node},e}(gi);wi.TextElement=function(t){function e(e){var n;return void 0===e&&(e=""),n=t.call(this)||this,e&&e.hasOwnProperty("value")?(n.value=e.value,n.options=e):n.value=null!=e?e:"",n}r(e,t);var n=e.prototype;return n.mount=function(t,e){this.parent=t,this.node?this.redraw():(this.createNode(),this.applyRef()),t.node.insertBefore(this.node,e),this.onMount()},n.getNodeType=function(){return Node.TEXT_NODE},n.copyState=function(t){this.value=t.value,this.options=t.options},n.createNode=function(){return this.node=document.createTextNode(this.getValue()),D(this),this.node},n.setValue=function(t){this.value=null!=t?t:"",this.node&&this.redraw()},n.getValue=function(){return String(this.value)},n.redraw=function(){if(this.node){var t=this.getValue();this.node.nodeValue!==t&&(this.node.nodeValue=t)}this.applyRef()},e}(Ai);var Ei=function(t){function e(e){var n;return void 0===e&&(e={}),n=t.call(this)||this,n.children=[],n.options=e,n.setOptions(e),n}r(e,t);var i=e.prototype;return i.getDefaultOptions=function(t){},i.getPreservedOptions=function(){},i.setOptions=function(t){var e=this.getDefaultOptions(t);e&&(t=Object.assign(e,t)),this.options=t},i.updateOptions=function(t){this.setOptions(Object.assign(this.options,t)),this.redraw()},i.setChildren=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.updateOptions({children:f(e)})},i.copyState=function(t){var e=t.options,n=this.getPreservedOptions();n&&(e=Object.assign({},e,n)),this.setOptions(e),this.addListenersFromOptions()},i.getNodeType=function(){return this.options.nodeType||"div"},e.create=function(t,e){var n=new this(e);return n.mount(t,null),n},i.getGivenChildren=function(){return this.options.children||[]},i.render=function(){return this.options.children},i.createNode=function(){return this.node=document.createElement(this.getNodeType()),D(this),this.node},i.cleanup=function(){this.runCleanupJobs();for(var e=this.children,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}r.destroyNode()}this.clearNode(),t.prototype.cleanup.call(this)},i.overwriteChild=function(t,e){return t.copyState(e),t},i.getElementKeyMap=function(t){if(t&&t.length){for(var e=new Map,n=0;n<t.length;n+=1){var i=t[n].options&&t[n].options.key||"autokey"+n;e.set(i,t[n])}return e}},i.getChildrenToRender=function(){return this.render()},i.getChildrenForRedraw=function(){wi.renderingStack.push(this);var t=f(this.getChildrenToRender());return wi.renderingStack.pop(),t},i.redraw=function(){if(!this.node)return console.error("Element not yet mounted. Redraw aborted!",this),!1;var t=this.getChildrenForRedraw();if(t===this.children){for(var e=0;e<t.length;e+=1)t[e].redraw();return this.applyNodeAttributes(),this.applyRef(),!0}for(var n=this.node,i=this.getElementKeyMap(this.children),r=0;r<t.length;r++){var o=t[r],s=r>0?t[r-1].node:null,a=s?s.nextSibling:n.firstChild;o.getNodeType||(o=t[r]=new wi.TextElement(o));var l=o.options&&o.options.key||"autokey"+r,u=i&&i.get(l);u&&t[r].canOverwrite(u)?(u!==t[r]&&(t[r]=this.overwriteChild(u,t[r])),t[r].redraw(),t[r].node!==a&&n.insertBefore(t[r].node,a)):o.mount(this,a)}if(this.children.length)for(var c=new Set(t),h=0;h<this.children.length;h+=1)c.has(this.children[h])||this.children[h].destroyNode();return this.children=t,this.applyNodeAttributes(),this.applyRef(),!0},i.getOptionsAsNodeAttributes=function(){return w(this.options,Si)},i.getNodeAttributes=function(t){return void 0===t&&(t=!0),t?new Si(this.options):this.getOptionsAsNodeAttributes()},i.extraNodeAttributes=function(t){},i.applyNodeAttributes=function(){var t;this.extraNodeAttributes!=li?(t=this.getNodeAttributes(!0),this.extraNodeAttributes(t)):t=this.getNodeAttributes(!1),t.apply(this.node,this.constructor.domAttributesMap)},i.setAttribute=function(t,e){this.getOptionsAsNodeAttributes().setAttribute(t,e,this.node,this.constructor.domAttributesMap)},i.setStyle=function(t,e){this.getOptionsAsNodeAttributes().setStyle(t,e,this.node)},i.removeStyle=function(t){this.getOptionsAsNodeAttributes().removeStyle(t,this.node)},i.addClass=function(t){this.getOptionsAsNodeAttributes().addClass(t,this.node)},i.removeClass=function(t){this.getOptionsAsNodeAttributes().removeClass(t,this.node)},i.hasClass=function(t){return this.getOptionsAsNodeAttributes().hasClass(t)},i.toggleClass=function(t){this.hasClass(t)?this.removeClass(t):this.addClass(t)},i.addListenersFromOptions=function(){var t=this;for(var e in this.options)!function(e){if("string"==typeof e&&e.startsWith("on")&&e.length>2){var n=e.substring(2),i="add"+n+"Listener",r="on"+n+"Handler";"function"!=typeof t[i]||t.hasOwnProperty(r)||(t[r]=function(n){wi.event=n,t.options[e]&&t.options[e](t,n)},t[i](t[r]))}}(e)},i.refLink=function(t){return{parent:this,name:t}},i.refLinkArray=function(t,e){return this.hasOwnProperty(t)||(this[t]=[]),{parent:this[t],name:e}},i.bindToNode=function(t,e){return this.node=t,e&&(this.clearNode(),this.redraw()),this},i.mount=function(t,e){if(t.node||(t=(new wi.Element).bindToNode(t)),this.parent=t,this.node)return t.insertChildNodeBefore(this,e),void this.dispatch("changeParent",this.parent);this.createNode(),this.redraw(),t.insertChildNodeBefore(this,e),this.addListenersFromOptions(),this.onMount()},i.appendChild=function(t){if(this.children!==this.options.children)throw"Can't properly handle appendChild, you need to implement it for "+this.constructor;return this.options.children.push(t),t.mount(this,null),t},i.insertChild=function(t,e){if(this.children!==this.options.children)throw"Can't properly handle insertChild, you need to implement it for "+this.constructor;e=e||0,this.options.children.splice(e,0,t);var n=e+1<this.options.children.length?this.children[e+1].node:null;return t.mount(this,n),t},i.eraseChild=function(t,e){void 0===e&&(e=!0);var n=this.options.children.indexOf(t);return n<0?null:this.eraseChildAtIndex(n,e)},i.eraseChildAtIndex=function(t,e){if(void 0===e&&(e=!0),t<0||t>=this.options.children.length)return void console.error("Erasing child at invalid index ",t,this.options.children.length);if(this.children!==this.options.children)throw"Can't properly handle eraseChild, you need to implement it for "+this.constructor;var n=this.options.children.splice(t,1)[0];return e?n.destroyNode():this.node.removeChild(n.node),n},i.eraseAllChildren=function(){for(;this.children.length>0;)this.eraseChildAtIndex(this.children.length-1)},i.show=function(){this.removeClass("hidden")},i.hide=function(){this.addClass("hidden")},i.insertChildNodeBefore=function(t,e){this.node.insertBefore(t.node,e)},i.clearNode=function(){for(;this.node&&this.node.lastChild;)this.node.removeChild(this.node.lastChild)},i.isInDocument=function(){return document.body.contains(this.node)},i.getWidthOrHeight=function(t){var e=this.node;return e?parseFloat("width"===t?e.offsetWidth:e.offsetHeight)||0:0},i.getHeight=function(){return this.getWidthOrHeight("height")},i.getWidth=function(){return this.getWidthOrHeight("width")},i.setHeight=function(t){this.setStyle("height",S(t,"px")),this.dispatch("resize")},i.setWidth=function(t){this.setStyle("width",S(t,"px")),this.dispatch("resize")},i.addNodeListener=function(t,e){for(var n,i=this,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(n=this.node).addEventListener.apply(n,[t,e].concat(o));var a={remove:function(){i.removeNodeListener.apply(i,[t,e].concat(o))}};return this.addCleanupJob(a),a},i.removeNodeListener=function(t,e){this.node.removeEventListener(t,e)},i.addClickListener=function(t){return this.addNodeListener("click",t)},i.removeClickListener=function(t){this.removeNodeListener("click",t)},i.addDoubleClickListener=function(t){return this.addNodeListener("dblclick",t)},i.removeDoubleClickListener=function(t){this.removeNodeListener("dblclick",t)},i.addChangeListener=function(t){return this.addNodeListener("change",t)},n(e,[{key:"styleSheet",get:function(){return this.getStyleSheet()},set:function(t){this.options.styleSheet=t,this.redraw()}}]),e}(Ai);wi.createElement=function(t,e){if(!t)return void console.error("Create element needs a valid object tag, did you mistype a class name?");e=e||{};for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e.children=f(i),e.ref){if("string"==typeof e.ref){if(!(wi.renderingStack.length>0))throw Error("Failed to automatically link ref, there needs to be an element in the rendering stack");e.ref={parent:wi.renderingStack[wi.renderingStack.length-1],name:e.ref}}e.key&&console.error("Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\nAre you using the options from another object? Shame!",e),e.key="_ref"+e.ref.name}return e.hasOwnProperty("class")&&console.error("Invalid UI Element attribute: class. Did you mean className?"),"string"==typeof t&&(e.nodeType=t,t=Ei),new t(e)},Ei.domAttributesMap=Si.defaultAttributesMap,Ei.prototype.extraNodeAttributes=li,wi.Element=Ei,wi.str=function(t){return new wi.TextElement(t)};var xi=new WeakMap;wi.Primitive=function(t,e){e||(e=t,t=wi.Element);var n=xi.get(t);n||(n=new Map,xi.set(t,n));var i=n.get(e);return i||(i=function(t){function n(){return t.apply(this,arguments)||this}return r(n,t),n.prototype.getNodeType=function(){return e},n}(t),n.set(e,i),i)};var Ci={HORIZONTAL:1,VERTICAL:2},Ti={UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right"},Li={NONE:null,DEFAULT:"default",INFO:"info",PRIMARY:"primary",SECONDARY:"secondary",SUCCESS:"success",WARNING:"warning",DANGER:"danger",ERROR:"danger"},Oi={NONE:null,EXTRA_SMALL:"xs",SMALL:"sm",MEDIUM:"default",DEFAULT:"default",LARGE:"lg",EXTRA_LARGE:"xl"},Ri={NONE:null,LIKE:1,DISLIKE:0},Ni={DEFAULT:1,RUNNING:2,SUCCESS:3,FAILED:4},Ii=function(t){function e(e){var n;return n=t.call(this,e)||this,n.setOptions(e),n}r(e,t);var n=e.prototype;return n.setOptions=function(t){this.options=t,this.options.attributes=this.options.attributes||{},this.attributes=new Map;for(var e in this.options.attributes)this.attributes.set(e,this.options.attributes[e])},n.getValue=function(){for(var t=this.options.selector+"{",e=this.attributes,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r,s=o[0],a=o[1];"function"==typeof a&&(a=a()),null!=a&&(s=C(s),(a instanceof Number||"number"==typeof a)&&0!=a&&bi.has(s)&&(a+="px"),t+=s+":"+a+";")}return t+"}"},n.copyState=function(t){this.setOptions(t.options)},n.setAttribute=function(t,e){this.attributes.set(t,e),this.redraw()},n.deleteAttribute=function(t){this.attributes.delete(t),this.redraw()},e}(wi.TextElement),ki=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeAttributes=function(){var t=new Si({});return this.options.name&&t.setAttribute("name",this.options.name),t},e}(wi.Primitive("style")),Mi=new Set([":",">"," ","+","~","[","."]),Pi=function(t){
function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.toString=function(){return this.getClassName()},n.valueOf=function(){return" "+this.getClassName()},n.getClassName=function(){return this.className?this.className:(this.constructor.instanceCounter=(this.constructor.instanceCounter||0)+1,this.className=(this.options.name||"autocls")+"-"+this.constructor.instanceCounter,this.className)},n.getSelector=function(){return this.options.selectorName||"."+this.getClassName()},n.getStyleInstances=function(t,e){var n=[],i={},r=!1;for(var o in e){var s=e[o];if(null!=s){if("string"==typeof s||s instanceof String||"number"==typeof s||s instanceof Number||"function"==typeof s)i[o]=s,r=!0;else{var a=String(o).charAt(0);if(!Mi.has(a)){console.error("First character of your selector is invalid.");continue}var l=this.getStyleInstances(t+o,s);n.push.apply(n,l)}}}return r&&n.unshift(new Ii({selector:t,key:t,attributes:i})),n},n.render=function(){var t=this.options.style||{};return"function"==typeof t&&(t=t()),t.selectorName&&(this.options.selectorName=t.selectorName,delete t.selectorName),this.getStyleInstances(this.getSelector(),t)},n.setStyle=function(t,e){this.options.style[t]=e,this.children[0].setAttribute(t,e)},n.setSubStyle=function(t,e,n){throw Error("Implement me!")},n.getStyleObject=function(){return this.options.style},e}(ki),Di=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.toString=function(){return this.getKeyframeName()},n.getKeyframeName=function(){return this.keyframeName?this.keyframeName:(this.constructor.instanceCounter=(this.constructor.instanceCounter||0)+1,this.keyframeName=(this.options.name||"autokeyframe")+"-"+this.constructor.instanceCounter,this.keyframeName)},n.getValue=function(t){var e="{";for(var n in t){var i=t[n];"function"==typeof i&&(i=i()),null!=i&&(e+=C(n)+":"+i+";")}return e+"}"},n.getKeyframeInstance=function(t){var e="{";for(var n in t){var i=t[n];e+=n+" "+this.getValue(i)}return e+"}"},n.render=function(){return"@keyframes "+this.getKeyframeName()+this.getKeyframeInstance(this.options.keyframe||{})},e}(ki),zi=W,_i=Y({targetMethodName:"css",getKey:j,inherit:!1}),Bi=Y({targetMethodName:"css",getKey:j,inherit:!0}),Hi=Y({targetMethodName:"keyframes",getKey:G,inherit:!1}),Fi=(Y({targetMethodName:"keyframes",getKey:G,inherit:!0}),function(t){function e(e){var n;return void 0===e&&(e={}),n=t.call(this)||this,n.options=Object.assign({parent:document.head,name:e.name||n.constructor.getElementName()},e),n.elements=new Set,n.options.delayedMount||n.ensureMounted(),n.getTheme().addStyleSheet(h(n)),n}r(e,t);var i=e.prototype;return i.ensureMounted=function(){if(!this.styleElement){var t={children:[],name:this.options.name};this.styleElement=ki.create(this.options.parent,t)}},e.getInstance=function(){return this.hasOwnProperty("singletonInstance")||(this.singletonInstance=new this),this.singletonInstance},e.initialize=function(){var t=this.getInstance();for(var e in this.prototype)t[e]||console.log("This is here to prevent a bundling optimization bug")},e.getElementName=function(){this.elementNameCounter=(this.elementNameCounter||0)+1;var t=this.name;return this.elementNameCounter>1&&(t+="-"+this.elementNameCounter),t},i.getTheme=function(){return this.options.theme||this.constructor.theme},i.setTheme=function(t){this.options.theme=t},i.getThemeProperty=function(t,e){var n=this.getTheme();return n&&n.getProperty(t,e)||e},i.ensureFirstUpdate=function(){this._firstUpdate||(this._firstUpdate=!0,this.ensureMounted(),this.dispatch("beforeUpdate",this))},i.css=function(t){this.ensureFirstUpdate(),arguments.length>1&&(t=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var e={style:t},n="prefferedClassName";t[n]&&(e.name=t[n],delete t[n]);var i=new Pi(e);this.elements.add(i);for(var r=i.render(),o=r,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var u=l;this.styleElement.appendChild(u)}return i},i.keyframes=function(t){this.ensureFirstUpdate(),arguments.length>1&&(t=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var e=new Di({keyframe:t});return this.elements.add(e),this.styleElement.appendChild(e),e},i.addBeforeUpdateListener=function(t){return this.addListener("beforeUpdate",t)},i.update=function(){if(this._firstUpdate){this.dispatch("beforeUpdate",this);for(var t=0,e=Object.keys(this);t<e.length;t++){var n=e[t];if(this[n]instanceof Pi){var i=this["__style__"+n],r=i&&i.objInitializer;r&&(this[n].options.style=r.call(this))}}for(var o=[],s=this.elements,a=Array.isArray(s),l=0,s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}var c=u;if(c instanceof ki){var h=c.render();o.push.apply(o,h)}}this.styleElement.options.children=o,this.styleElement.redraw()}},n(e,[{key:"themeProperties",get:function(){var t=this.getTheme();return t&&t.getProperties()||{}}}]),e}(gi)),Ui=function(){function t(){}return t.isTouchDevice=function(){return this.hasOwnProperty("_isTouchDevice")||(this._isTouchDevice=!!("createTouch"in window.document||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||"ontouchstart"in window)),this._isTouchDevice},t.isMobileDevice=function(){if(!this.hasOwnProperty("_isMobileDevice")){var t=["Android","webOS","iPad","iPhone","iPod","BlackBerry","Windows Phone"];this._isMobileDevice=!1;for(var e=0,n=t;e<n.length;e++){var i=n[e];-1!==navigator.userAgent.indexOf(i)&&(this._isMobileDevice=!0)}}return this._isMobileDevice},t.getEventTouchIdentifier=function(t){return Math.min.apply(Math,[].concat(t.touches).map(function(t){return t.identifier}))},t.getEventTouch=function(t){var e=this.getEventTouchIdentifier(t);return[].concat(t.touches).find(function(t){return t.identifier===e})},t.getEventCoord=function(t,e,n){void 0===n&&(n="client");var i=n+e;return t[i]?t[i]:t.touches?this.getEventTouch(t)[i]:t.originalEvent?this.getEventCoord(t.originalEvent,e,n):void console.warn("Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)")},t.getEventX=function(t,e){return void 0===e&&(e="client"),this.getEventCoord(t,"X",e)},t.getEventY=function(t,e){return void 0===e&&(e="client"),this.getEventCoord(t,"Y",e)},t.getBrowser=function(){return window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"Opera":"undefined"!=typeof InstallTrigger?"Firefox":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"Safari":document.documentMode?"Internet Explorer":window.StyleMedia?"Edge":window.chrome&&window.chrome.webstore?"Chrome":"Unknown"},t.supportsEvent=function(t){if(!this.cachedSupportedValues.has(t)){var e=document.createElement("div"),n="on"+t,i=n in e;i||(e.setAttribute(n,"return;"),i="function"==typeof e[n]),e=null,this.cachedSupportedValues.set(t,i)}return this.cachedSupportedValues.get(t)},t}();Ui.cachedSupportedValues=new Map;var Wi=function(t){return function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e._clickCallbacks=new Map,e._clickDragListeners=new Map,e}r(e,t);var n=e.prototype;return n.addClickListener=function(e){var n=this;if(!this._clickCallbacks.has(e)){var i=function(){n._okForClick&&e()};if(this._clickCallbacks.set(e,i),t.prototype.addClickListener.call(this,i),!this._clickDragListeners.has(e)){var r={onStart:function(){n.dragForClickStarted()},onDrag:function(){n.dragForClick()}};this._clickDragListeners.set(e,r),this.addDragListener(r)}}},n.dragForClickStarted=function(){this._okForClick=!0},n.dragForClick=function(){this._okForClick=!1},n.removeClickListener=function(e){var n=this._clickCallbacks.get(e);if(n&&(this._clickCallbacks.delete(e),t.prototype.removeClickListener.call(this,n)),this._clickDragListeners){var i=this._clickDragListeners.get(e);i&&(this._clickDragListeners.delete(e),this.removeDragListener(i))}},n.createDragGenericListenerWrapper=function(t,e){var n=Object.assign({},t),i=!1;return n.onWrapperDrag=function(e){if(i){var r=Ui.getEventX(e),o=Ui.getEventY(e),s=r-n._lastX;n._lastX=r;var a=o-n._lastY;n._lastY=o,t.onDrag(s,a)}},n.onWrapperStart=function(r){i=!0,n._lastX=Ui.getEventX(r),n._lastY=Ui.getEventY(r),t.onStart&&t.onStart(r),document.body.addEventListener(e,n.onWrapperDrag)},n.onWrapperEnd=function(r){i&&t.onEnd&&t.onEnd(r),i=!1,document.body.removeEventListener(e,n.onWrapperDrag)},n},n.createDragListenerWrapper=function(t){return this.createDragGenericListenerWrapper(t,"mousemove")},n.createTouchDragListenerWrapper=function(t){return this.createDragGenericListenerWrapper(t,"touchmove")},n.addDragListener=function(t){var e=this.createDragListenerWrapper(t),n=this.createTouchDragListenerWrapper(t);this.addNodeListener("touchstart",n.onWrapperStart),Ui.isMobileDevice()||this.addNodeListener("mousedown",e.onWrapperStart),document.body.addEventListener("touchend",n.onWrapperEnd),Ui.isMobileDevice()||document.body.addEventListener("mouseup",e.onWrapperEnd),this.hasOwnProperty("_dragListeners")||(this._dragListeners=[]),this._dragListeners.push(n),this._dragListeners.push(e)},n.removeDragListener=function(t){if(this._dragListeners)for(var e=this._dragListeners.length-1;e>=0;e-=1)this._dragListeners[e].onStart===t.onStart&&this._dragListeners[e].onDrag===t.onDrag&&this._dragListeners[e].onEnd===t.onEnd&&(this.removeNodeListener("touchstart",this._dragListeners[e].onWrapperStart),document.body.removeEventListener("touchmove",this._dragListeners[e].onWrapperDrag),document.body.removeEventListener("touchmove",this._dragListeners[e].onWrapperEnd),this.removeNodeListener("mousedown",this._dragListeners[e].onWrapperStart),document.body.removeEventListener("mousemove",this._dragListeners[e].onWrapperDrag),document.body.removeEventListener("mousemove",this._dragListeners[e].onWrapperEnd),this._dragListeners.splice(e,1))},e}(t)},Vi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ji=function(){function t(t){t&&this.setColor(t)}var e=t.prototype;return e.setColor=function(t){this.color=this.constructor.parseColor(t)},e.getColor=function(){var t=this.getRgba();return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.parseColor=function(e){if(e instanceof t)return e.color;if(e instanceof Array)return 3===e.length&&e.push(1),e;e=e.trim().toLowerCase(),Vi.hasOwnProperty(e)&&(e=Vi[e]);var n=[],i=e.match(/^#([0-9a-f]{3})$/i);i&&(n=[17*parseInt(i[1].charAt(0),16),17*parseInt(i[1].charAt(1),16),17*parseInt(i[1].charAt(2),16),1]);var r=e.match(/^#([0-9a-f]{6})$/i);r&&(n=[parseInt(r[1].substr(0,2),16),parseInt(r[1].substr(2,2),16),parseInt(r[1].substr(4,2),16),1]);var o=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i);o&&(n=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseFloat(o[4])]);var s=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return s&&(n=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),1]),n},t.interpolate=function(e,n,i){void 0===i&&(i=.5);var r=t.parseColor(e),o=t.parseColor(n);return t.convertToRgba([parseInt(r[0]*(1-i)+o[0]*i),parseInt(r[1]*(1-i)+o[1]*i),parseInt(r[2]*(1-i)+o[2]*i),parseInt(r[3]*(1-i)+o[3]*i)])},t.addOpacity=function(e,n){var i=t.parseColor(e);return t.convertToRgba([parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),n])},t.convertToRgba=function(t){return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.isLight=function(e){var n=t.parseColor(e);return.3*n[0]+.59*n[1]+.11*n[2]>188},t}(),Gi=function(t){function e(e){var n;return void 0===e&&(e=""),n=t.call(this)||this,n.styleSheetSymbol=Symbol("Theme"+e),n.classSet=new Set,n.styleSheetSet=new Set,n.properties={},n.updateThrottler=new hi({throttle:50}),n.updateThrottled=n.updateThrottler.wrap(function(){return n.updateStyleSheets()}),window.addEventListener("resize",n.updateThrottled),n}r(e,t);var n=e.prototype;return n.register=function(t,e){t.theme=this,t.styleSheet||(t.styleSheet=e),this.set(t,e)},n.set=function(t,e){t[this.styleSheetSymbol]=e,this.classSet.add(t)},n.get=function(t){return"function"!=typeof t&&(t=t.constructor),t[this.styleSheetSymbol]},n.getProperties=function(){return this.properties},n.getProperty=function(t,e){var n=this.properties[t]||e;return"function"==typeof n?n():n},n.setProperties=function(t,e){void 0===e&&(e=!0),Object.assign(this.properties,t),e&&this.updateThrottled()},n.setProperty=function(t,e){this.properties[t]=e},n.getAllStyleSheets=function(){for(var t=new Set(this.styleSheetSet),e=this.classSet.values(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;t.add(this.get(o))}return Array.from(t).map(function(t){return t.getInstance?t.getInstance():t})},n.addStyleSheet=function(t){this.styleSheetSet.add(t)},n.removeStyleSheet=function(t){this.styleSheetSet.delete(t)},n.updateStyleSheets=function(){for(var t=this.getAllStyleSheets(),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var r=i;r.update&&r.update()}},e.register=function(t,e){var n;return(n=this.Global).register.apply(n,arguments)},e.get=function(t){var e;return(e=this.Global).get.apply(e,arguments)},e.addStyleSheet=function(t){this.Global.addStyleSheet(t)},e.setProperties=function(t){var e;(e=this.Global).setProperties.apply(e,arguments)},e.getProperties=function(){return this.Global.getProperties()},e}(gi);Gi.Global=new Gi("Global"),wi.Element.prototype.getStyleSheet=function(){return Q(this.options)||Q(this.constructor)},Fi.theme=Gi.Global;var Yi,Ki,Xi,qi,Ji,Zi,$i,Qi,tr,er,nr,ir,rr,or,sr,ar,lr={};Gi.setProperties({COLOR_BACKGROUND:"#fff",COLOR_BACKGROUND_ALTERNATIVE:"#eee",COLOR_BACKGROUND_BODY:"#f8f8f8",COLOR_FOREGROUND_BODY:"#f2f2f2",COLOR_BACKGROUND_BADGE:"#777",COLOR_PRIMARY:"#337ab7",COLOR_SECONDARY:"#358ba4",COLOR_SUCCESS:"#5cb85c",COLOR_INFO:"#5bc0de",COLOR_WARNING:"#f0ad4e",COLOR_DANGER:"#d9534f",COLOR_LINK:"#337ab7",FONT_SIZE_EXTRA_SMALL:"10px",FONT_SIZE_SMALL:"12px",FONT_SIZE_DEFAULT:"14px",FONT_SIZE_LARGE:"17px",FONT_SIZE_EXTRA_LARGE:"21px",BASE_BORDER_RADIUS:0,BASE_BOX_SHADOW:"0px 0px 10px rgb(160, 162, 168)",BASE_BORDER_WIDTH:0,BASE_BORDER_STYLE:"solid",BASE_BORDER_COLOR:"#ddd",BUTTON_BORDER_RADIUS:"0.2rem",CARD_PANEL_HEADER_HEIGHT:30,CARD_PANEL_HEADER_HEIGHT_LARGE:40,CARD_PANEL_HEADING_PADDING:10,CARD_PANEL_HEADING_PADDING_LARGE:20,CARD_PANEL_TEXT_TRANSFORM:"inherit",DARK_BOX_SHADOW:"0px 0px 10px rgba(0, 0, 0, .6)",ROW_LIST_ROW_HEIGHT:30,ROW_LIST_ROW_HEIGHT_LARGE:40,ROW_LIST_ROW_PADDING:10,ROW_LIST_ROW_PADDING_LARGE:20,ROW_LIST_ROW_BORDER_WIDTH:1,FONT_FAMILY_SANS_SERIF:"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif",FONT_FAMILY_SERIF:"serif",FONT_FAMILY_MONOSPACE:"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace",FONT_FAMILY_DEFAULT:function(){return Gi.getProperties().FONT_FAMILY_SANS_SERIF},NAV_MANAGER_NAVBAR_HEIGHT:50,NAV_MANAGER_BOX_SHADOW_NAVBAR:"0px 0px 10px rgb(0, 0, 0)",NAV_MANAGER_BOX_SHADOW_SIDE_PANEL:"0px 0px 10px #202e3e",MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:0,FLAT_TAB_AREA_COLOR_BACKGROUND:"#f3f3f3",FLAT_TAB_AREA_LINE_HEIGHT:30,FLAT_TAB_AREA_PADDING_SIDES:10});var ur=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.Level=function(t){if(this[t])return this[t];for(var e=0,n=Object.keys(Li);e<n.length;e++){var i=n[e];if(t==Li[i])return this[i]}return""},n.Size=function(t){for(var e=0,n=Object.keys(Oi);e<n.length;e++){var i=n[e];if(t==Oi[i])return this[i]}return""},e}(Fi),cr=function(t){var e,n,i,o,s,a,l,u;return e=function(e){function c(){for(var t,r=arguments.length,c=new Array(r),d=0;d<r;d++)c[d]=arguments[d];return t=e.call.apply(e,[this].concat(c))||this,p(t,"BASE",n,h(t)),p(t,"PRIMARY",i,h(t)),p(t,"SECONDARY",o,h(t)),p(t,"SUCCESS",s,h(t)),p(t,"INFO",a,h(t)),p(t,"WARNING",l,h(t)),p(t,"DANGER",u,h(t)),t}return r(c,e),c.prototype.colorStyleRule=function(e,n){return t(e,n||et(e))},c}(ur),n=d(e.prototype,"BASE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)}}),i=d(e.prototype,"PRIMARY",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)}}),o=d(e.prototype,"SECONDARY",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_SECONDARY)}}),s=d(e.prototype,"SUCCESS",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_SUCCESS)}}),a=d(e.prototype,"INFO",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_INFO)}}),l=d(e.prototype,"WARNING",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_WARNING)}}),u=d(e.prototype,"DANGER",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_DANGER)}}),e},hr=(Yi=qi=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"HORIZONTAL",Ki,h(e)),p(e,"VERTICAL",Xi,h(e)),e}return r(e,t),e.prototype.Orientation=function(t){for(var e=0,n=Object.keys(Ci);e<n.length;e++){var i=n[e];if(t==Ci[i])return this[i]}},e}(Fi),Ki=d(Yi.prototype,"HORIZONTAL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",">*":{marginLeft:"20px",flex:"1"},">:first-child":{marginLeft:"0px"}}}}),Xi=d(Yi.prototype,"VERTICAL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",">*":{marginTop:"20px",flex:"1"},">:first-child":{marginTop:"0px"}}}}),Yi),pr=(Ji=nr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"EXTRA_SMALL",Zi,h(e)),p(e,"SMALL",$i,h(e)),p(e,"MEDIUM",Qi,h(e)),p(e,"LARGE",tr,h(e)),p(e,"EXTRA_LARGE",er,h(e)),e}r(e,t);var n=e.prototype;return n.getSizeStyle=function(t,e){return{margin:Ui.isMobileDevice()?"0 "+t+"px":"0% "+e+"%"}},n.Size=function(t){for(var e=0,n=Object.keys(Oi);e<n.length;e++){var i=n[e];if(t==Oi[i])return this[i]}},e}(Fi),Zi=d(Ji.prototype,"EXTRA_SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(6,15)}}),$i=d(Ji.prototype,"SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,10)}}),Qi=d(Ji.prototype,"MEDIUM",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,6)}}),tr=d(Ji.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(2,3)}}),er=d(Ji.prototype,"EXTRA_LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(2,1)}}),Ji),dr=(ir=ar=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.extraTop=function(){return e.themeProperties[Ui.isMobileDevice()?"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE":"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP"]},p(e,"fullHeight",rr,h(e)),p(e,"hidden",or,h(e)),p(e,"fullContainer",sr,h(e)),e}return r(e,t),e}(Fi),rr=d(ir.prototype,"fullHeight",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%"}}}),or=d(ir.prototype,"hidden",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"hidden"}}}),sr=d(ir.prototype,"fullContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{width:"100%",height:function(){return"calc(100% + "+t.extraTop()+"px)"},marginTop:function(){return-t.extraTop()}}}}),ir);lr.FlexContainer=hr.getInstance(),lr.Container=pr.getInstance(),lr.Utils=dr.getInstance();var fr,gr,mr,yr,br,vr,Sr,wr,Ar,Er,xr,Cr,Tr,Lr,Or,Rr,Nr,Ir,kr,Mr,Pr,Dr,zr,_r,Br,Hr,Fr,Ur,Wr,Vr,jr,Gr,Yr,Kr,Xr,qr,Jr,Zr,$r,Qr,to=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getLevel=function(){return this.options.level||this.parent&&this.parent.getLevel&&this.parent.getLevel()},n.setLevel=function(t){this.updateOptions({level:t})},n.getSize=function(){return this.options.size||this.parent&&this.parent.getSize&&this.parent.getSize()},n.setSize=function(t){this.updateOptions({size:t})},e}(wi.Element),eo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){return[this.beforeChildren(),this.getLabel(),t.prototype.render.call(this)]},n.getLabel=function(){return null!=this.options.label?this.options.label:""},n.setLabel=function(t){this.updateOptions({label:t})},n.getFaIcon=function(){return this.options.faIcon},n.setFaIcon=function(t){this.options.faIcon=t,this.redraw()},n.beforeChildren=function(){if(!this.getFaIcon())return null;var t={className:"fa fa-"+this.getFaIcon()};return this.getLabel()&&(t.style={marginRight:"5px"}),wi.createElement("span",t)},e}(to),no=function(t){var e=Z(t),n={backgroundColor:e[2],color:e[6],textDecoration:"none"},i={backgroundColor:e[1],borderColor:e[5],color:e[6]};return Object.assign({},i,{":hover":n,":hover:disabled":i,":focus":n,":active":n})},io=(fr=wr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"DEFAULT",gr,h(e)),p(e,"EXTRA_SMALL",mr,h(e)),p(e,"SMALL",yr,h(e)),p(e,"MEDIUM",br,h(e)),p(e,"LARGE",vr,h(e)),p(e,"EXTRA_LARGE",Sr,h(e)),e}return r(e,t),e}(cr(no)),gr=d(fr.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{fontWeight:"bold",border:"0.1em solid transparent",padding:"0.07em 0.4em",borderRadius:"0.3em",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"bottom",lineHeight:4/3+"",display:"inline-block",touchAction:"manipulation",":disabled":{opacity:"0.7",cursor:"not-allowed"}},{"font-size":"12px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)]}}),mr=d(fr.prototype,"EXTRA_SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px",padding:"0.05em 0.2em",borderWidth:"0.05em"}}}),yr=d(fr.prototype,"SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),br=d(fr.prototype,"MEDIUM",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),vr=d(fr.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Sr=d(fr.prototype,"EXTRA_LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.05em 0.2em"}}}),fr),ro=((Ar=tt(io))(Er=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.extraNodeAttributes=function(t){t.addClass(this.styleSheet.DEFAULT),this.getSize()&&t.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&t.addClass(this.styleSheet.Level(this.getLevel()))},e}(wi.Primitive(eo,"span"))),function(t){var e=Z(t);return{backgroundColor:e[1],borderColor:e[5],color:e[6]}}),oo=(xr=Ir=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"DEFAULT",Cr,h(e)),p(e,"EXTRA_SMALL",Tr,h(e)),p(e,"SMALL",Lr,h(e)),p(e,"MEDIUM",Or,h(e)),p(e,"LARGE",Rr,h(e)),p(e,"EXTRA_LARGE",Nr,h(e)),e}return r(e,t),e}(cr(ro)),Cr=d(xr.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{display:"inline-block",padding:"0.25em 0.55em",fontWeight:"700",lineHeight:"1",color:"#fff",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",backgroundColor:"#777",borderRadius:"0.8em"},{"font-size":"12px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)]}}),Tr=d(xr.prototype,"EXTRA_SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px",padding:"0.1em 0.2em"}}}),Lr=d(xr.prototype,"SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Or=d(xr.prototype,"MEDIUM",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Rr=d(xr.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Nr=d(xr.prototype,"EXTRA_LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.1em 0.2em"}}}),xr),so=((kr=tt(oo))(Mr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.extraNodeAttributes=function(t){t.addClass(this.styleSheet.DEFAULT),this.getSize()&&t.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&t.addClass(this.styleSheet.Level(this.getLevel()))},e}(wi.Primitive(eo,"span"))),function(t){return{backgroundColor:Z(t)[1]}}),ao=(Pr=jr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"container",Dr,h(e)),p(e,"DEFAULT",zr,h(e)),p(e,"striped",_r,h(e)),p(e,"active",Br,h(e)),p(e,"EXTRA_SMALL",Hr,h(e)),p(e,"SMALL",Fr,h(e)),p(e,"MEDIUM",Ur,h(e)),p(e,"LARGE",Wr,h(e)),p(e,"EXTRA_LARGE",Vr,h(e)),e}return r(e,t),e}(cr(so)),Dr=d(Pr.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"20px",marginBottom:"20px",overflow:"hidden",backgroundColor:"#f5f5f5",borderRadius:"4px",boxShadow:"inset 0 1px 2px rgba(0, 0, 0, .1)"}}}),zr=d(Pr.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{float:"left",width:"0",height:"100%",lineHeight:"20px",color:"#fff",textAlign:"center",backgroundColor:"#337ab7",boxShadow:"inset 0 -1px 0 rgba(0, 0, 0, .15)",transition:"width .6s ease",fontColor:"#ffffff"},{fontSize:"12px"},this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)]}}),_r=d(Pr.prototype,"striped",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundImage:"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)",backgroundSize:"40px 40px"}}}),Br=d(Pr.prototype,"active",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{animation:"progress-bar-stripes 2s linear infinite"}}}),Hr=d(Pr.prototype,"EXTRA_SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"8px"}}}),Fr=d(Pr.prototype,"SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Ur=d(Pr.prototype,"MEDIUM",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Wr=d(Pr.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Vr=d(Pr.prototype,"EXTRA_LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.1em 0.2em"}}}),Pr),lo=(Gr=tt(ao))(Yr=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.render=function(){var t=100*(this.options.value||0),e=Ci.HORIZONTAL;this.options.hasOwnProperty("orientation")&&(e=this.options.orientation);var n;n=e===Ci.HORIZONTAL?{width:t+"%",height:this.options.height+"px"}:{height:t+"%",width:"5px"};var i={className:this.styleSheet.DEFAULT,style:n};return this.options.disableTransition&&Object.assign(i.style,{transition:"none"}),this.options.level&&(i.className+=" "+this.styleSheet.Level(this.getLevel())),this.options.striped&&(i.className+=" "+this.styleSheet.striped),this.options.active&&(i.className+=" "+this.styleSheet.active),this.options.color&&(i.style.backgroundColor=this.options.color),wi.createElement("div",i,wi.createElement("span",null,this.options.label))},n.set=function(t){t<0?t=0:t>1&&(t=1),this.options.value=t,this.redraw()},e}(to))||Yr,uo=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getTitle=function(){return this.options.title},e}(wi.Element),co=(Wi(wi.Element),function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.setStyle("cursor","pointer")},n.getDefaultOptions=function(){return{newTab:!1}},n.setOptions=function(e){return t.prototype.setOptions.call(this,e),this.options.newTab&&(this.options.target="_blank"),e},n.render=function(){return this.options.value?[this.options.value]:t.prototype.render.call(this)},e}(wi.Primitive("a"))),ho=function(t){function e(){return t.apply(this,arguments)||this}
return r(e,t),e}(wi.Primitive("img")),po=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{scale:this.getDesiredScale(),initialScale:1,maximumScale:1}},n.getDesiredScale=function(){var t=this.options.minDeviceWidth;return t?Math.min(window.screen.availWidth,t)/t:1},n.getContent=function(){var t="width=device-width";return t+=",initial-scale="+this.options.scale,t+=",maximum-scale="+this.options.scale,t+=",user-scalable=no"},n.extraNodeAttributes=function(t){t.setAttribute("name","viewport"),t.setAttribute("content",this.getContent())},n.maybeUpdate=function(){var t=this.getDesiredScale();t!=this.options.scale&&this.updateOptions({scale:t})},n.onMount=function(){var t=this;window.addEventListener("resize",function(){return t.maybeUpdate()})},e}(wi.Primitive("meta")),fo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{margin:10}},n.render=function(){return[wi.createElement(wi.TextElement,{ref:"textElement",value:this.options.value||""})]},n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.setStyle("marginLeft",this.options.margin+"px"),e.setStyle("marginRight",this.options.margin+"px"),e},n.setValue=function(t){this.options.value=t,this.textElement.setValue(t)},n.setColor=function(t){this.setStyle("color",t)},n.showMessage=function(t,e,n){var i=this;void 0===e&&(e="black"),void 0===n&&(n=2e3),this.setColor(e),this.clear(),this.setValue(t),n&&(this.clearValueTimeout=setTimeout(function(){return i.clear()},n))},n.clear=function(){this.setValue(""),this.clearValueTimeout&&(clearTimeout(this.clearValueTimeout),this.clearValueTimeout=null)},e}(wi.Primitive("span")),go=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDesiredExcessHeightTop=function(){return 600},n.getDesiredExcessHeightBottom=function(){return 600},n.getHeightScrollPercent=function(){var t=this.node.scrollHeight,e=this.node.clientHeight;return t===e?0:this.node.scrollTop/(t-e)},n.getExcessTop=function(){return this.node.scrollTop},n.getExcessBottom=function(){return this.node.scrollHeight-this.node.clientHeight-this.node.scrollTop},n.haveExcessTop=function(){return this.getExcessTop()>this.getDesiredExcessHeightTop()},n.haveExcessBottom=function(){return this.getExcessBottom()>this.getDesiredExcessHeightBottom()},n.popChildTop=function(){this.eraseChildAtIndex(0)},n.popChildBottom=function(){this.eraseChildAtIndex(this.children.length-1)},n.removeExcessTop=function(){for(;this.haveExcessTop();)this.popChildTop()},n.removeExcessBottom=function(){for(;this.haveExcessBottom();)this.popChildBottom()},n.pushChildTop=function(t,e){void 0===e&&(e=!0),e&&this.removeExcessBottom(),this.insertChild(t,0)},n.pushChildBottom=function(t,e){void 0===e&&(e=!0),e&&this.removeExcessTop(),this.appendChild(t),this.appendChild(t)},n.saveScrollPosition=function(){this.options.scrollTop=this.node.scrollTop;var t=this.node.scrollHeight-this.node.clientHeight;this.options.scrollInfo={scrollAtTop:0===this.options.scrollTop,scrollAtBottom:this.options.scrollTop===t}},n.applyScrollPosition=function(){this.node.scrollTop=this.options.scrollTop||this.node.scrollTop},n.scrollToHeight=function(t){this.node.scrollTop=t},n.scrollToTop=function(){this.scrollToHeight(0)},n.scrollToBottom=function(){this.scrollToHeight(this.node.scrollHeight)},e}(wi.Element),mo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e=Object.assign({entries:[],entryComparator:function(t,e){return t.id-e.id},firstRenderedEntry:0,lastRenderedEntry:-1},e),t.prototype.setOptions.call(this,e),this.options.children=[],this.options.staticTop&&this.options.children.push(this.options.staticTop);for(var n=this.options.entries,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;this.options.children.push(this.renderEntry(s))}},n.getFirstVisibleIndex=function(){},n.getLastVisibleIndex=function(){},n.renderEntry=function(t){if(this.options.entryRenderer)return this.options.entryRenderer(t);console.error("You need to pass option entryRenderer or overwrite the renderEntry method")},n.pushEntry=function(t){this.insertEntry(t,this.options.entries.length)},n.insertEntry=function(t,e){var n=this.options.entries;if(null==e)for(e=0;e<n.length&&this.options.entryComparator(n[e],t)<=0;)e++;n.splice(e,0,t),this.options.staticTop&&(e+=1);var i=this.renderEntry(t);this.insertChild(i,e)},e}(go),yo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){return this.getTimeDeltaDisplay(this.options.timeStamp)},n.getDefaultOptions=function(){return{style:{color:"#aaa"}}},n.getTimeDeltaDisplay=function(t){var e=Date.now(),n=parseInt((e-1e3*t)/1e3),i=[31556926,2629743,604800,86400,3600,60],r=["year","month","week","day","hour","minute"];n<0&&(n=0);for(var o=0;o<r.length;o+=1){var s=parseInt(n/i[o]);if(i[o]<=n)return s+" "+r[o]+(s>1?"s":"")+" ago"}return"Few seconds ago"},e.addIntervalListener=function(t){var e=this;return this.updateFunction||(this.TIME_DISPATCHER=new gi,this.updateFunction=setInterval(function(){e.TIME_DISPATCHER.dispatch("updateTimeValue")},5e3)),this.TIME_DISPATCHER.addListener("updateTimeValue",t)},n.onMount=function(){var t=this;this._updateListener=this.constructor.addIntervalListener(function(){t.redraw()})},n.onUnmount=function(){this._updateListener&&this._updateListener.remove()},e}(wi.Primitive("span")),bo=(Kr=Zr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"inputElement",Xr,h(e)),p(e,"checkboxInput",qr,h(e)),p(e,"select",Jr,h(e)),e}return r(e,t),e}(Fi),Xr=d(Kr.prototype,"inputElement",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"border-color ease-in-out .15s, box-shadow ease-in-out .15s",padding:"0.4em 0.54em",border:"1px solid #ccc",borderRadius:"4px",fontSize:"90%",":focus":{outline:"0",borderColor:"#66afe9",boxShadow:"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)"}}}}),qr=d(Kr.prototype,"checkboxInput",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"0.2em",display:"inline-block",width:"initial !important",marginRight:"0.5em",marginBottom:"-.1em",height:"1em"}}}),Jr=d(Kr.prototype,"select",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"2.12em"}}}),Kr),vo=($r=tt(bo))(Qr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.inputElement)},e}(wi.Element))||Qr,So=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){var e=this.getInputType();e&&t.setAttribute("type",e)},n.redraw=function(){t.prototype.redraw.call(this),this.options.hasOwnProperty("value")&&this.setValue(this.options.value)},n.getValue=function(){return this.node.value},n.setValue=function(t){this.node.value=t},n.getInputType=function(){return null},n.onInput=function(t){this.addNodeListener("input change",t)},n.onKeyUp=function(t){this.addNodeListener("keyup",t)},e}(wi.Primitive(vo,"input"));So.domAttributesMap=P(wi.Element.domAttributesMap,[["autocomplete"],["autofocus",{noValue:!0}],["formaction"],["maxLength",{domName:"maxlength"}],["minLength",{domName:"minlength"}],["name"],["placeholder"],["readonly"],["required"],["value"]]);var wo=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputType=function(){return"submit"},e}(So);wo.domAttributesMap=P(wi.Element.domAttributesMap,[["formenctype"],["formmethod"],["formnovalidate"],["formtarget"]]);var Ao=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputType=function(){return"text"},e}(So);((function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getInputType=function(){return"number"},n.getValue=function(){var e=t.prototype.getValue.call(this);return parseFloat(e)},e})(So)).domAttributesMap=P(wi.Element.domAttributesMap,[["min"],["max"],["step"]]);var Eo=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputType=function(){return"email"},e}(So),xo=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputType=function(){return"password"},e}(So);((function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getInputType=function(){return"file"},n.getFiles=function(){return this.node.files},n.getFile=function(){return this.getFiles()[0]},n.getAsFormData=function(){for(var t=new FormData,e=this.getFiles(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;t.append(o.name,o)}return t},e})(So)).domAttributesMap=P(wi.Element.domAttributesMap,[["multipleFiles",{domName:"multiple",noValue:!0}],["fileTypes",{domName:"accept"}]]);var Co=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.checkboxInput)},n.getInputType=function(){return"checkbox"},n.getValue=function(){return this.node.checked},n.setValue=function(t){this.node.checked=t},e}(So);Co.domAttributesMap=P(wi.Element.domAttributesMap,[["checked",{noValue:!0}]]),(function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getInputType=function(){return"radio"},n.getValue=function(){return this.node.checked},n.setValue=function(t){this.node.checked=t},e}(Co)).domAttributesMap=P(Co.domAttributesMap,[["name"]]);var To,Lo,Oo,Ro,No,Io,ko,Mo,Po,Do,zo,_o,Bo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.applyNodeAttributes=function(){t.prototype.applyNodeAttributes.call(this),this.node.readOnly=this.options.readOnly||!1},n.setReadOnly=function(t){this.options.readOnly=t,this.node.readOnly=t},n.getValue=function(){return this.node.value},n.redraw=function(){t.prototype.redraw.call(this),this.options.hasOwnProperty("value")&&(this.node.value=this.options.value+"")},n.setValue=function(t){this.options.value=t,this.node.value=t},n.onInput=function(t){this.addNodeListener("input change",t)},n.onKeyUp=function(t){this.addNodeListener("keyup",t)},e}(wi.Primitive(vo,"textarea")),Ho=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){this.givenOptions=this.options.options||[];for(var t=[],e=0;e<this.givenOptions.length;e+=1){var n={key:e};this.givenOptions[e]==this.options.selected&&(n.selected=!0),t.push(wi.createElement("option",n,this.givenOptions[e].toString()))}return t},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.select)},n.get=function(){var t=this.getIndex();return this.givenOptions[t]},n.set=function(t){for(var e=0;e<this.givenOptions.length;e++)if(this.givenOptions[e]===t)return void this.setIndex(e);console.error("Can't set the select option ",t,"\nAvailable options: ",this.givenOptions)},n.getIndex=function(){return this.node.selectedIndex},n.setIndex=function(t){this.node.selectedIndex=t,this.options.selected=this.givenOptions[t]},n.redraw=function(){t.prototype.redraw.call(this),this.options.selected&&this.set(this.options.selected)},e}(wi.Primitive(vo,"select")),Fo=(To=Mo=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"form",Lo,h(e)),p(e,"formGroup",Oo,h(e)),p(e,"formField",Ro,h(e)),p(e,"sameLine",No,h(e)),e.separatedLineInputStyle={marginRight:"0.5em",width:"100%",height:"2.4em"},p(e,"separatedLine",Io,h(e)),p(e,"hasError",ko,h(e)),e}return r(e,t),e}(Fi),Lo=d(To.prototype,"form",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto"}}}),Oo=d(To.prototype,"formGroup",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"10px"}}}),Ro=d(To.prototype,"formField",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">label":{width:"100%"},display:"block",padding:"6px 0px",lineHeight:"1.42857143",color:"#555",maxWidth:"600px",margin:"0 auto","[disabled]":{opacity:"1",cursor:"not-allowed"},"[readonly]":{opacity:"1"}}}}),No=d(To.prototype,"sameLine",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">label>*:nth-child(1)":{display:"inline-block",textAlign:"right",paddingRight:"1em",width:"30%",verticalAlign:"middle"},">label>*:nth-child(2)":{display:"inline-block",width:"70%",verticalAlign:"middle"}}}}),Io=d(To.prototype,"separatedLine",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"6px 10px",">label>*:nth-child(1)":{verticalAlign:"sub"},">label>input":this.separatedLineInputStyle,">label>select":this.separatedLineInputStyle,">label>textarea":this.separatedLineInputStyle,">label>input[type='checkbox']":{marginLeft:"10px",verticalAlign:"middle"}}}}),ko=d(To.prototype,"hasError",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#a94442"}}}),To),Uo=(Po=tt(Fo))(Do=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.form)},n.onMount=function(){this.addNodeListener("submit",function(t){return t.preventDefault()})},e}(wi.Primitive("form")))||Do,Wo=(zo=tt(Fo))(_o=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.formGroup)},n.setError=function(t){this.errorField.node.textContent=t,this.addClass(this.styleSheet.hasError)},n.removeError=function(){this.errorField.node.textContent="",this.removeClass(this.styleSheet.hasError)},n.getErrorField=function(){return wi.createElement("span",{ref:"errorField",style:{float:"right"}})},n.getChildrenToRender=function(){return[this.render(),this.getErrorField()]},e}(wi.Element))||_o,Vo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.inline=function(){return!(!1===this.options.inline||this.parent&&this.parent.options&&!1===this.parent.options.inline)},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.formField),this.inline()?t.addClass(this.styleSheet.sameLine):t.addClass(this.styleSheet.separatedLine)},n.getLabel=function(){return this.options.label?wi.createElement("strong",null,this.options.label):null},n.render=function(){return this.options.contentFirst?[wi.createElement("label",null,[t.prototype.render.call(this),this.getLabel()])]:[wi.createElement("label",null,[this.getLabel(),t.prototype.render.call(this)])]},e}(Wo),jo=new Set(["width","height","rx","ry","cx","cy","x","y"]),Go=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.fixMozAttributes=function(t){if(this.hasOwnProperty("style"))for(var e=jo.values(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;this.style.hasOwnProperty(o)&&!this.hasOwnProperty(o)&&this.setAttribute(o,this.style[o],t)}},n.setStyle=function(e,n,i){t.prototype.setStyle.call(this,e,n,i),jo.has(e)&&this.setAttribute(e,n,i)},n.applyClassName=function(t){this.className?t.setAttribute("class",String(this.className)):t.removeAttribute("class")},n.apply=function(e,n){this.transform=this.transform||this.translate,t.prototype.apply.call(this,e,n),this.fixMozAttributes(e)},e}(Si),Yo={};Yo.Element=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.createNode=function(){return this.node=document.createElementNS("http://www.w3.org/2000/svg",this.getNodeType()),D(this),this.node},n.getScreenCoordinatedForPoint=function(t){var e=this.node,n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.x,i.y=t.y,i.matrixTransform(e.getScreenCTM().inverse())}var r=this.getBoundingClientRect();return{x:t.x-r.left-e.clientLeft,y:t.y-r.top-e.clientTop}},n.getMouseCoordinatesForEvent=function(t){return void 0===t&&(t=window.event),this.getScreenCoordinatedForPoint({x:Ui.getEventX(t),y:Ui.getEventY(t)})},n.saveState=function(){var t={};return t.options=Object.assign({},this.options),t},n.setState=function(t){this.setOptions(t.options)},n.getOptionsAsNodeAttributes=function(){var t=this.options;return t.__proto__=Go.prototype,t},n.getNodeAttributes=function(t){return void 0===t&&(t=!0),t?new Go(this.options):this.getOptionsAsNodeAttributes()},n.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.options.translate="translate("+t+","+e+")"},n.getHashCode=function(){return L(this)},n.getBoundingClientRect=function(){for(var t=this.node,e=0,n=0;t&&t!==document.body;)e-=t.scrollLeft,n-=t.scrollTop,t=t.offsetParent||t.parentNode;t&&(e-=t.scrollLeft,n-=t.scrollTop);var i=this.node.getBoundingClientRect();return{top:i.top-n,left:i.left-e,width:i.width,bottom:i.bottom-n,height:i.height,right:i.right-e}},n.getBBox=function(){return this.node.getBBox()},n.getHeight=function(){return this.getBoundingClientRect().height},n.getWidth=function(){return this.getBoundingClientRect().width},n.toFront=function(){var t=this.node&&this.node.parentElement;t&&(t.removeChild(this.node),t.appendChild(this.node))},n.toBack=function(){},n.setOpacity=function(t){this.options.opacity=t,this.node&&this.node.setAttribute("opacity",t)},n.setColor=function(t){this.options.color=t,this.node&&(this.node.setAttribute("stroke",t),this.node.setAttribute("fill",t))},n.remove=function(){},n.getSvg=function(){return this.parent.getSvg()},e}(wi.Element),Yo.Element.domAttributesMap=P(wi.Element.domAttributesMap,[["fill"],["height"],["opacity"],["stroke"],["strokeWidth",{domName:"stroke-width"}],["clipPath",{domName:"clip-path"}],["transform"],["width"],["cx"],["cy"],["rx"],["ry"],["x"],["y"],["x1"],["y1"],["x2"],["y2"],["offset"],["stopColor",{domName:"stop-color"}],["strokeDasharray",{domName:"stroke-dasharray"}],["strokeLinecap",{domName:"stroke-linecap"}],["viewBox",{domName:"viewBox"}]]),Yo.Text=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"text"},n.getDefaultOptions=function(){return{text:"",fontSize:"15px",color:"black",dy:"0.35em",textAnchor:"middle",selectable:!1}},n.extraNodeAttributes=function(t){this.options.selectable||(t.setStyle("-webkit-user-select","none"),t.setStyle("-khtml-user-select","none"),t.setStyle("-moz-user-select","none"),t.setStyle("-ms-user-select","none"),t.setStyle("user-select","none"))},n.render=function(){return[wi.createElement(wi.TextElement,{ref:"textElement",value:this.options.text+""})]},n.getX=function(){return this.options.x},n.setX=function(t){this.options.x=t,this.node.setAttribute("x",this.options.x)},n.getY=function(){return this.options.y},n.setY=function(t){this.options.y=t,this.node.setAttribute("y",this.options.y)},n.setText=function(t){this.options.text=t,this.textElement.setValue(t+"")},n.getText=function(){return this.options.text},n.setPosition=function(t,e){this.setX(t),this.setY(e)},n.getColor=function(){return this.options.color},n.setColor=function(t,e){void 0===e&&(e=!1),this.options.color=t,this.node&&(this.node.setAttribute("fill",t),e||this.node.setAttribute("stroke",t))},e}(Yo.Element),Yo.Text.domAttributesMap=P(Yo.Element.domAttributesMap,[["dx"],["dy"],["fontFamily",{domName:"font-family"}],["fontSize",{domName:"font-size"}],["textAnchor",{domName:"text-anchor"}]]);var Ko=function(t,e,n){return n=n||{x:0,y:0},(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x)},Xo=function(t,e,n){return n=n||{x:0,y:0},{x:e*Math.cos(t)+n.x,y:e*Math.sin(t)+n.y}};Yo.SVGRoot=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"svg"},n.getSvg=function(){return this},e}(Yo.Element),Yo.RawSVG=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.redraw=function(){t.prototype.redraw.call(this),this.node.innerHTML=this.options.innerHTML},e}(Yo.SVGRoot),Yo.Group=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"g"},n.setColor=function(t){for(var e=0;e<this.children.length;e+=1)this.children[e].setColor(t)},e}(Yo.Element),Yo.Defs=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"defs"},e}(Yo.Element),Yo.ClipPath=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"clipPath"},e}(Yo.Element),Yo.Path=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"path"},n.getDefaultOptions=function(){return{d:""}},n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.setAttribute("d",this.getPath()),e},n.getPath=function(){return this.options.d},n.setPath=function(t){this.options.d=t,this.node.setAttribute("d",this.options.d)},n.getLength=function(){return this.node.getTotalLength()},n.getPointAtLength=function(t){return this.node.getPointAtLength(t)},n.getPointAtLengthWithAngle=function(t){var e,n=this.getLength();e=n<=1?n/1e3:Math.min(n/1e3,Math.log(n),1);var i=this.getPointAtLength(t),r=this.getPointAtLength(Math.min(t+e,n)),o=this.getPointAtLength(Math.max(t-e,0));return{x:i.x,y:i.y,alpha:180*Math.atan2(o.y-r.y,o.x-r.x)/Math.PI}},e}(Yo.Element),Yo.Circle=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"circle"},n.getDefaultOptions=function(){return{radius:0,center:{x:0,y:0}}},n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.setAttribute("r",this.options.radius),e.setAttribute("cx",this.options.center.x),e.setAttribute("cy",this.options.center.y),e},n.getRadius=function(){return this.options.radius},n.setRadius=function(t){this.options.radius=t,this.setAttribute("r",t)},n.setCenter=function(t,e){this.options.center.x=t,this.options.center.y=e,this.setAttribute("cx",t),this.setAttribute("cy",e)},n.getCenter=function(){return this.options.center},n.toPath=function(){var t=this.options.radius,e=this.options.center.x,n=this.options.center.y,i="M"+(e-t)+" "+n+"a"+t+" "+t+" 0 0 1 "+t+" "+-t+"a"+t+" "+t+" 0 0 1 "+t+" "+t+"a"+t+" "+t+" 0 0 1 "+-t+" "+t+"a"+t+" "+t+" 0 0 1 "+-t+" "+-t;return new Yo.Path({d:i})},e}(Yo.Element),Yo.Stop=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"stop"},e}(Yo.Element),Yo.RadialGradient=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"radialGradient"},e}(Yo.Element),Yo.LinearGradient=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"linearGradient"},e}(Yo.Element),Yo.Ellipse=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getNodeType=function(){return"ellipse"},e}(Yo.Element),Yo.CircleArc=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getPath=function(){var t,e,n=this.options.startAngle,i=this.options.endAngle,r=this.options.radius,o=this.options.center,s=i-n+(i<n?2*Math.PI:0),a=Xo(n,r,o),l=Xo(i,r,o);return s<=Math.PI?(e=0,t=Ko(a,l,o)<=0?0:1):(e=1,t=Ko(a,l,o)<=0?1:0),"M "+a.x+" "+a.y+" A "+r+" "+r+" 0 "+e+" "+t+" "+l.x+" "+l.y},e}(Yo.Path),Yo.Rect=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"rect"},n.getX=function(){return this.options.x},n.setX=function(t){this.options.x=t,this.node.setAttribute("x",this.options.x)},n.getY=function(){return this.options.y},n.setY=function(t){this.options.y=t,this.node.setAttribute("y",this.options.y)},n.getWidth=function(){return this.options.width},n.setWidth=function(t){this.options.width=t,this.node.setAttribute("width",this.options.width)},n.getHeight=function(){return this.options.height},n.setHeight=function(t){this.options.height=t,this.node.setAttribute("height",this.options.height)},e}(Yo.Element),Yo.Line=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeType=function(){return"line"},n.getDefaultOptions=function(){return{fill:"black",stroke:"black"}},n.setLine=function(t,e,n,i){this.options.x1=t,this.options.y1=e,this.options.x2=n,this.options.y2=i,this.setAttribute("x1",t),this.setAttribute("y1",e),this.setAttribute("x2",n),this.setAttribute("y2",i)},e}(Yo.Element),Yo.Polygon=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{points:[]}},n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.setAttribute("d",this.getPolygonPath()),e},n.getPolygonPath=function(){for(var t="",e=0;e<this.options.points.length;++e)t+=0==e?"M ":"L ",t+=this.options.points[e].x+" "+this.options.points[e].y+" ";return t+="Z"},n.setPoints=function(t){this.options.points=t,this.setPath(this.getPolygonPath())},e}(Yo.Path);var qo=function(){function t(t){this.func=t.func,this.context=t.context,this.duration=t.duration||0,this.startTime=t.startTime||0,this.dependsOn=t.dependsOn||[],this.speedFactor=1}var e=t.prototype;return e.toString=function(){return"{\n   context: "+this.context+"\n   duration: "+this.duration+"\n   startTime: "+this.startTime+"\n   dependsOn: "+this.dependsOn+"\n   func: "+this.func.toString()+"\n}\n"},e.hasDependencyOn=function(t){for(var e=this.dependsOn,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}if(r===t)return!0}return!1},e.canAdvance=function(){for(var t=0;t<this.dependsOn.length;t+=1)if(!this.dependsOn[t].isStopped())return!1;return!0},e.getFraction=function(t){return void 0===t&&(t=Date.now()),Math.min((t-this.startTime)/this.getLength(),1)},e.start=function(t){var e=this;void 0===t&&(t=Date.now()),this.stopped&&delete this.stopped,this.setStartTime(t);var n=function t(){e.stopped||(e.pauseTime||e.nextStep(),requestAnimationFrame(t))};return requestAnimationFrame(n),this},e.getLength=function(){return this.getEndTime()-this.startTime},e.setStartTime=function(t){return this.startTime=t,this},e.setSpeedFactor=function(t,e){void 0===e&&(e=Date.now());var n=t/this.speedFactor;return this.startTime=(this.startTime-e)/n+e,this.pauseTime&&(this.pauseTime=(this.pauseTime-e)/n+e),this.speedFactor=t,this},e.pause=function(t){return void 0===t&&(t=Date.now()),this.pauseTime||(this.pauseTime=t),this},e.resume=function(t){return void 0===t&&(t=Date.now()),this.pauseTime&&(this.startTime+=t-this.pauseTime,this.pauseTime=0),this},e.forceStart=function(){return this.restart(),this.func(0,this.context),this},e.forceFinish=function(){return this.func(1,this.context),this.stop(),this},e.stop=function(){this.stopped=!0},e.restart=function(){return delete this.stopped,this},e.isStopped=function(){return!0===this.stopped},e.nextStep=function(t){return void 0===t&&(t=Date.now()),this.isStopped()?this:(this.lastT=this.getFraction(t),this.lastT<0?this:(this.func(this.lastT,this.context),1===this.lastT&&this.stop(),this))},e.getEndTime=function(){return this.startTime+this.duration/this.speedFactor},t}();Yo.AnimatedSVG=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.onMount=function(){var t=this;if(this.options.transition){this.options.transition.setStartTime(Date.now());var e=function e(){if(t.options.transition.isStopped())return void(t.options.repeat&&(t.options.transition.setStartTime(Date.now()),t.options.transition.restart(),requestAnimationFrame(e)));t.options.transition.pauseTime||t.options.transition.nextStep(),requestAnimationFrame(e)};requestAnimationFrame(e)}},e}(Yo.SVGRoot),Yo.Element.prototype.blinkTransition=function(t){var e=this,n={duration:2e3,times:2,firstColor:"grey",secondColor:"black",executeLastStep:!0,startTime:0,dependsOn:[]};return Object.assign(n,t),new qo({func:function(t,n){t>1-n.interval&&!n.executeLastStep?e.setColor(n.firstColor):e.setColor(Math.floor((1-t)/n.interval)%2==1?n.firstColor:n.secondColor)},context:{firstColor:n.firstColor,secondColor:n.secondColor,interval:1/(2*n.times),executeLastStep:n.executeLastStep},duration:n.duration,startTime:n.startTime,dependsOn:n.dependsOn})},Yo.Element.prototype.changeOpacityTransition=function(t,e,n,i){var r=this;return void 0===n&&(n=[]),void 0===i&&(i=0),this.options.hasOwnProperty("opacity")||(this.options.opacity=1),new qo({func:function(e,n){r.setOpacity((1-e)*n.opacity+e*t)},context:{opacity:this.options.opacity},duration:e,startTime:i,dependsOn:n})},Yo.Element.prototype.changeColorTransition=function(t,e,n,i){var r=this;return void 0===n&&(n=[]),void 0===i&&(i=0),new qo({func:function(e,n){r.setColor(ji.interpolate(n.color,t,e))},context:{color:this.getColor()},duration:e,startTime:i,dependsOn:n})},Yo.Text.prototype.moveTransition=function(t,e,n,i){var r=this;return void 0===n&&(n=[]),void 0===i&&(i=0),new qo({func:function(e,n){r.setPosition((1-e)*n.x+e*t.x,(1-e)*n.y+e*t.y)},context:{x:this.options.x,y:this.options.y},duration:e,startTime:i,dependsOn:n})},Yo.Text.prototype.changeFillTransition=function(t,e,n,i){var r=this;return void 0===n&&(n=[]),void 0===i&&(i=0),new qo({func:function(e,n){r.setColor(ji.interpolate(n.color,t,e),!0)},context:{color:this.getColor()},duration:e,startTime:i,dependsOn:n})};var Jo=function(t){function e(e){var n;return n=t.call(this,e)||this,n.childMap=new WeakMap,n.numRedraws=0,n}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{fullHeight:!1,preserveScroll:!0}},n.extraNodeAttributes=function(t){this.options.fullHeight&&t.addClass(lr.Utils.fullHeight)},n.copyState=function(t){var e=Object.assign({},t.options,{children:this.overwriteElements(this.options.children||[],t.options.children||[])});this.setOptions(e);for(var n=this.options.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;s.options.active&&(this.activeChild=s)}},n.render=function(){return this.activeChild||this.options.children[0]},n.overwriteElements=function(t,e){for(var n=this.getElementKeyMap(t)||new Map,i=0;i<e.length;i+=1){var r=e[i],o=r.options&&r.options.key||"autokey"+i,s=n.get(o);s!==r&&(s&&r.canOverwrite(s)&&(e[i]=r=this.overwriteChild(s,r)))}return e},n.redraw=function(){if(this.numRedraws+=1,this.applyNodeAttributes(),this.applyRef(),wi.renderingStack.push(this),this.render(),wi.renderingStack.pop(),0!=this.options.children.length){for(var t=this.options.children,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var r=i;this.options.lazyRender?(this.getChildProperties(r).isUpToDate=!1,r.applyRef()):this.updateChild(r)}this.updateActiveChild(this.activeChild||this.options.children[0])}},n.getChildProperties=function(t){return this.childMap.has(t)||this.childMap.set(t,{isMounted:!!t.node,redrawIndex:-1}),this.childMap.get(t)},n.updateChild=function(t){this.getChildProperties(t).redrawIndex<this.numRedraws&&(t.node?t.redraw():t.mount(this),
this.getChildProperties(t).redrawIndex=this.numRedraws)},n.appendChild=function(t,e){return void 0===e&&(e=!1),this.options.children.push(t),e&&t.mount(this),1==this.options.children.length&&this.setActive(t),t},n.getActive=function(){return this.activeChild},n.insertChildNodeBefore=function(t,e){var n=this.getChildProperties(t);n.isMounted=!0,n.redrawIndex=this.numRedraws},n.updateActiveChild=function(t){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);if(null==t)return void(this.activeChild=null);this.updateChild(t),this.node.appendChild(t.node),this.children[0]=this.activeChild=t},n.deactivateChild=function(t){t.dispatch("hide"),t.dispatch("setActive",!1),this.options.preserveScroll&&(this.getChildProperties(t).scrollTop=this.node.scrollTop)},n.activateChild=function(t){t.dispatch("setActive",!0),t.dispatch("show"),this.options.preserveScroll&&(this.node.scrollTop=this.getChildProperties(t).scrollTop||0)},n.setActive=function(t){this.activeChild!==t&&(this.activeChild&&this.deactivateChild(this.activeChild),this.updateActiveChild(t),this.activeChild&&this.activateChild(this.activeChild))},n.hasChild=function(t){return this.childMap.has(t)},n.onMount=function(){var t=this;this.addListener("shouldRedrawChild",function(e){e.child.isInDocument()?e.child.redraw():t.getChildProperties(e.child).isUpToDate=!1})},e}(wi.Element),Zo=function(){function t(){}return t.getPrefix=function(){return this.prefix?"("+this.prefix+") ":""},t.setPrefix=function(t){this.prefix=t,this.updatePageTitle()},t.setDefaultTitle=function(t){this.defaultTitle=t},t.getTitle=function(){return this.title||this.defaultTitle},t.setTitle=function(t){this.title=t,this.updatePageTitle()},t.getFullPageTitle=function(){return this.getPrefix()+this.getTitle()},t.updatePageTitle=function(){document.title=this.getFullPageTitle()},t.setIcon=function(){throw Error("Not implemented yet!")},t}();Zo.title=null,Zo.defaultTitle="Website",Zo.prefix=null;var $o=function(t){function e(){return t.apply(this,arguments)||this}r(e,t),e.parseURL=function(t){return void 0===t&&(t=location.pathname),Array.isArray(t)||(t=t.split("/")),t.filter(function(t){return""!=t})},e.joinURLParts=function(t){return t.length?"/"+t.join("/")+"/":"/"},e.changeURL=function(t,e){if(void 0===e&&(e=!1),Array.isArray(t)&&(t=this.joinURLParts(t)),t!==window.location.pathname){var n=[{},Zo.getTitle(),t];if(e){var i;(i=window.history).replaceState.apply(i,n)}else{var r;(r=window.history).pushState.apply(r,n)}this.updateURL()}},e.updateURL=function(){this.Global.setURL(this.parseURL())},e.setGlobalRouter=function(t){var e=this;this.Global=t,window.onpopstate=function(){e.updateURL(),di.Global.dispatch("externalURLChange")},this.updateURL()};var n=e.prototype;return n.clearCache=function(){this.getRoutes().clearCache()},n.getRoutes=function(){return this.options.routes},n.getPageNotFound=function(){var t=wi.createElement("h1",{children:["Can't find url, make sure you typed it correctly"]});return t.pageTitle="Page not found",t},n.getPageToRender=function(t){return this.getRoutes().getPage(t)||this.getPageNotFound()},n.setURL=function(t){t=f(t);var e=this.getPageToRender(t),n=this.getActive();n!==e&&(n&&n.dispatch("urlExit"),this.setActive(e),e.dispatch("urlEnter")),this===this.constructor.Global&&Zo.setTitle(e.pageTitle),this.dispatch("change",t,e,n)},n.addChangeListener=function(t){return this.addListener("change",t)},n.onMount=function(){e.Global||this.constructor.setGlobalRouter(this)},e}(Jo),Qo=function(){function t(t,e,n,i){void 0===n&&(n=[]),void 0===i&&(i={}),this.cachedPages=new Map,this.expr=t instanceof Array?t:[t],this.pageGenerator=e,this.subroutes=f(n),"string"==typeof i&&(i={title:i}),this.options=i,this.cachedPages=new Map}var e=t.prototype;return e.clearCache=function(){this.cachedPages.clear();for(var t=this.subroutes,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}i.clearCache()}},e.matches=function(t){if(t.length<this.expr.length)return null;for(var e=[],n=0;n<this.expr.length;n+=1){var i=this.expr[n]===this.constructor.ARG_KEY;if(t[n]!=this.expr[n]&&!i)return null;i&&e.push(t[n])}return{args:e,urlParts:t.slice(this.expr.length)}},e.getPageTitle=function(){return this.options.title},e.generatePage=function(){if(!this.pageGenerator)return null;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.toString();if(!this.cachedPages.has(i)){var r=this.pageGenerator,o=f(e),s={args:o,argsArray:e},a=r.prototype instanceof wi.Element?new r(s):r(s);if(!a.pageTitle){this.getPageTitle()&&(a.pageTitle=this.getPageTitle())}this.cachedPages.set(i,a)}return this.cachedPages.get(i)},e.matchesOwnNode=function(t){return 0===t.length},e.getPage=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(this.matchesOwnNode(t))return this.generatePage.apply(this,i);for(var o=this.subroutes,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var u=l,c=u.matches(t);if(c){c.args.length&&i.push(c.args);var h=u.getPage.apply(u,[c.urlParts,e].concat(i));return h&&!h.pageTitle&&(h.pageTitle=this.getPageTitle()),h}}},t}();Qo.ARG_KEY="%s";var ts=null;wi.TranslationElements=new Set,wi.TranslationTextElement=function(t){function e(e){var n;if(1===arguments.length)n=t.call(this,e)||this;else{var i;n=t.call(this,"")||this,(i=n).setValue.apply(i,arguments)}return h(n)}r(e,t);var n=e.prototype;return n.setValue=function(t){arguments.length>1?this.value=Array.from(arguments):this.value=t,this.node&&this.redraw()},n.evaluateSprintf=function(t){throw Error("Not yet implemented")},n.evaluate=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(Array.isArray(t)){arguments.length!=t.length&&console.error("Invalid arguments to evaluate ",Array.from(arguments));for(var r=t[0],o=1;o<arguments.length;o++)r+=arguments[o],r+=t[o];return r}return this.evaluateSprintf.apply(this,arguments)},n.getValue=function(){var t=this.value;if(Array.isArray(this.value)){var e;t=ts&&(e=ts).get.apply(e,t)||this.evaluate.apply(this,t)}else t=ts&&ts.get(t)||t;return t},n.onMount=function(){wi.TranslationElements.add(this)},n.onUnmount=function(){wi.TranslationElements.delete(this)},e}(wi.TextElement),wi.T=function(t){return new wi.TranslationTextElement(t)};var es,ns,is,rs,os,ss,as,ls,us,cs,hs,ps,ds,fs,gs,ms,ys,bs,vs,Ss,ws,As,Es,xs,Cs,Ts,Ls,Os,Rs,Ns,Is,ks,Ms,Ps,Ds,zs,_s,Bs,Hs,Fs,Us,Ws,Vs,js,Gs=(es=us=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.baseColor=function(){return e.themeProperties.COLOR_PRIMARY},e.arrowColor=function(){return J(e.baseColor(),.8)},e.arrowBackground=function(){return e.baseColor()},e.arrowHoverColor=function(){return J(e.baseColor(),1)},e.arrowHoverBackground=function(){return J(e.baseColor(),-.3)},e.transitionTime=.15,e.arrow={zIndex:"1",alignItems:"center",padding:".3em",fontSize:"150% !important",height:"100%",position:"absolute",cursor:"pointer",top:0,color:function(){return e.arrowColor()},backgroundColor:function(){return e.arrowBackground()},":hover":{color:function(){return e.arrowHoverColor()},backgroundColor:function(){return e.arrowHoverBackground()}}},p(e,"leftArrow",ns,h(e)),p(e,"rightArrow",is,h(e)),p(e,"horizontalOverflow",rs,h(e)),p(e,"childrenContainer",os,h(e)),p(e,"swipeAnimation",ss,h(e)),p(e,"hiddenArrow",as,h(e)),p(e,"pusherContainer",ls,h(e)),e}return r(e,t),e}(Fi),ns=d(es.prototype,"leftArrow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return Object.assign({},this.arrow,{left:0,borderRight:function(){return"2px solid "+t.arrowHoverBackground()}})}}),is=d(es.prototype,"rightArrow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return Object.assign({},this.arrow,{right:0,borderLeft:function(){return"2px solid "+t.arrowHoverBackground()}})}}),rs=d(es.prototype,"horizontalOverflow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",width:"100%",">:first-child":{display:"flex"},">:last-child":{display:"flex"}}}}),os=d(es.prototype,"childrenContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",overflow:Ui.isMobileDevice()?"auto":"hidden",display:"flex"}}}),ss=d(es.prototype,"swipeAnimation",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"margin-left "+this.transitionTime+"s ease"}}}),as=d(es.prototype,"hiddenArrow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),ls=d(es.prototype,"pusherContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:Ui.isMobileDevice()?"auto":"hidden",position:"relative",display:"flex",width:"100%"}}}),es),Ys=(cs=ms=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"tab",hs,h(e)),p(e,"activeTab",ps,h(e)),p(e,"nav",ds,h(e)),p(e,"switcher",fs,h(e)),p(e,"tabArea",gs,h(e)),e}return r(e,t),e}(Fi),hs=d(cs.prototype,"tab",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",display:"inline-block",position:"relative"}}}),ps=d(cs.prototype,"activeTab",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ds=d(cs.prototype,"nav",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{listStyle:"none"}}}),fs=d(cs.prototype,"switcher",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",overflow:"auto"}}}),gs=d(cs.prototype,"tabArea",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),cs),Ks=(ys=ws=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"tab",bs,h(e)),p(e,"activeTab",vs,h(e)),p(e,"nav",Ss,h(e)),e}return r(e,t),e}(Ys),bs=d(ys.prototype,"tab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"-1px",textDecoration:"none !important",marginRight:"2px",lineHeight:"1.42857143",border:"1px solid transparent",borderRadius:"4px 4px 0 0",padding:"8px",paddingLeft:"10px",paddingRight:"10px",":hover":{cursor:"pointer",backgroundColor:"#eee",color:"#555",border:"1px solid #ddd",borderBottomColor:"transparent"}}}}),vs=d(ys.prototype,"activeTab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#555 !important",cursor:"default !important",backgroundColor:"#fff !important",border:"1px solid #ddd !important",borderBottomColor:"transparent !important"}}}),Ss=d(ys.prototype,"nav",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"1px solid #ddd",paddingLeft:"0",marginBottom:"0"}}}),ys),Xs=(As=Ts=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"tab",Es,h(e)),p(e,"activeTab",xs,h(e)),p(e,"nav",Cs,h(e)),e}return r(e,t),e}(Ys),Es=d(As.prototype,"tab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none !important",lineHeight:"1.42857143",paddingTop:"6px",paddingLeft:"8px",paddingRight:"8px",paddingBottom:"4px",color:"#666",borderBottom:"2px solid transparent",":hover":{cursor:"pointer",color:"rgba(51,122,183,1)"}}}}),xs=d(As.prototype,"activeTab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"bold",color:"rgba(51,122,183,1)",cursor:"default !important",borderBottom:"2px solid rgba(51,122,183,1) !important"}}}),Cs=d(As.prototype,"nav",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",borderBottom:"1px solid #aaa"}}}),Ls=Ps=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.transitionTime=.3,p(e,"tab",Os,h(e)),p(e,"activeTab",Rs,h(e)),p(e,"nav",Ns,h(e)),p(e,"activeBar",Is,h(e)),p(e,"activeBarAnimated",ks,h(e)),p(e,"activeOnRender",Ms,h(e)),e}return r(e,t),e}(Ys),Os=d(Ls.prototype,"tab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{textDecoration:"none !important",padding:function(){return t.themeProperties.FLAT_TAB_AREA_PADDING_SIDES},letterSpacing:"0.5px",color:function(){return J(t.themeProperties.COLOR_FOREGROUND_BODY,.4)+"!important"},fontWeight:"bold",":hover":{cursor:"pointer",color:function(){return J(t.themeProperties.COLOR_FOREGROUND_BODY,.6)+"!important"}}}}}),Rs=d(Ls.prototype,"activeTab",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{color:function(){return J(t.themeProperties.COLOR_FOREGROUND_BODY,.8)+"!important"},cursor:"default !important"}}}),Ns=d(Ls.prototype,"nav",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{whiteSpace:"nowrap",position:"relative",paddingTop:"4px",backgroundColor:function(){return t.themeProperties.COLOR_FOREGROUND_BODY}}}}),Is=d(Ls.prototype,"activeBar",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{height:3,backgroundColor:function(){return t.themeProperties.COLOR_PRIMARY},position:"absolute",left:0,bottom:0}}}),ks=d(Ls.prototype,"activeBarAnimated",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:this.transitionTime+"s width, "+this.transitionTime+"s left"}}}),Ms=d(Ls.prototype,"activeOnRender",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{paddingBottom:function(){return t.themeProperties.FLAT_TAB_AREA_PADDING_SIDES-3},borderBottom:function(){return"3px solid "+t.themeProperties.COLOR_PRIMARY}}}}),Ls),qs=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.baseColor=function(){return e.themeProperties.COLOR_FOREGROUND_BODY},e.arrowColor=function(){return J(e.baseColor(),.4)},e.arrowBackground=function(){return e.baseColor()},e.arrowHoverColor=function(){return J(e.baseColor(),.8)},e.arrowHoverBackground=function(){return J(e.baseColor(),.1)},e}return r(e,t),e}(Gs),Js=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.tab),this.options.active&&t.addClass(this.styleSheet.activeTab)},n.getDefaultOptions=function(){return{newTab:!1}},n.canOverwrite=function(e){return t.prototype.canOverwrite.call(this,e)&&this.options.panel===e.options.panel},n.setActive=function(t){var e=this;this.options.active=t,this.redraw(),t&&this.options.activeTabDispatcher.setActive(this.getPanel(),function(){e.setActive(!1)})},n.getPanel=function(){return this.options.panel},n.getTitle=function(){if(this.options.title)return this.options.title;var t=this.getPanel();return"function"==typeof t.getTitle?t.getTitle():t.options.title},n.render=function(){return[this.getTitle()]},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.options.active&&this.setActive(!0),this.addClickListener(function(){e.setActive(!0)}),this.options.panel&&this.options.panel.addListener&&this.attachListener(this.options.panel,"show",function(){e.setActive(!0)})},e}(co),Zs=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(wi.Element),$s=(Ds=tt(Ks))(zs=_s=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.activeTabDispatcher=new yi,e}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{autoActive:!0,panelClass:null,titleAreaClass:null}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.tabArea)},n.createTabPanel=function(t){return[wi.createElement(Js,{panel:t,activeTabDispatcher:this.activeTabDispatcher,active:t.options.active,href:t.options.tabHref,styleSheet:this.styleSheet}),t]},n.appendChild=function(t,e){var n=this.createTabPanel(t),i=n[0],r=n[1];this.options.children.push(t),this.titleArea.appendChild(i),this.switcherArea.appendChild(r,e||!this.options.lazyRender)},n.getTitleArea=function(t){var e=this.styleSheet.nav;return this.options.titleAreaClass&&(e+=" "+this.options.titleAreaClass),wi.createElement(Zs,{ref:"titleArea",className:e},t)},n.getSwitcher=function(t){var e=this.styleSheet.switcher;return this.options.panelClass&&(e+=" "+this.options.panelClass),wi.createElement(Jo,{className:e,ref:"switcherArea",lazyRender:this.options.lazyRender},t)},n.getChildrenToRender=function(){for(var t,e=[],n=[],i=f(this.render()),r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s,l=this.createTabPanel(a),u=l[0],c=l[1];this.activePanel===c&&(t=u),e.push(u),n.push(c)}if(t)for(var h=0;h<n.length;h+=1){var p=e[h],d=n[h];p.options.active&&(p.options.active=!1),n.options.active&&(n.options.active=!1),t===p&&(d.options.active=!0,p.options.active=!0)}else for(var g=0,m=e;g<m.length;g++){var y=m[g];y.options.active&&(t=y)}return this.options.autoActive&&!t&&e.length>0&&(e[0].options.active=!0),[this.getTitleArea(e),this.getSwitcher(n)]},n.setActive=function(t){this.activeTabDispatcher.setActive(t)},n.getActive=function(){return this.activeTabDispatcher.getActive()},n.onSetActive=function(t){this.switcherArea.setActive(t),this.activePanel=t},n.onMount=function(){var t=this;this.attachListener(this.activeTabDispatcher,function(e){t.onSetActive(e)}),this.addListener("resize",function(){t.switcherArea.dispatch("resize")})},e}(wi.Element))||zs,Qs=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getIcon=function(){return this.options.icon},n.extraNodeAttributes=function(t){t.addClass("fa"),t.addClass("fa-"+this.getIcon()),this.options.size&&t.addClass("fa-"+this.options.size)},n.setIcon=function(t){this.options.icon=t,this.redraw()},e}(wi.Primitive("i")),ta=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getIcon=function(){return this.options.collapsed?"angle-right":"angle-down"},n.setCollapsed=function(t){this.options.collapsed=t,this.redraw()},n.toggleCollapsed=function(){this.setCollapsed(!this.options.collapsed)},e}(Qs),ea=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getIcon=function(){return this.options.direction===Ti.UP?"sort-asc":this.options.direction===Ti.DOWN?"sort-desc":"sort"},n.setDirection=function(t){this.options.direction=t,this.redraw()},e}(Qs),na=(Bs=tt(Gs))(Hs=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{swipePercent:.5}},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.horizontalOverflow)},n.getChildrenToRender=function(){return[wi.createElement(Qs,{ref:"leftArrow",icon:"chevron-left",className:this.styleSheet.leftArrow+" "+this.styleSheet.hiddenArrow}),wi.createElement("div",{ref:"childrenContainer",className:this.styleSheet.childrenContainer},wi.createElement("div",{ref:"swipeHelperChild"}),wi.createElement("div",{ref:"pusherContainer",className:this.styleSheet.pusherContainer},this.render())),wi.createElement(Qs,{ref:"rightArrow",icon:"chevron-right",className:this.styleSheet.rightArrow+" "+this.styleSheet.hiddenArrow})]},n.appendChild=function(){var t;(t=this.pusherContainer).appendChild.apply(t,arguments)},n.eraseChild=function(){var t;(t=this.pusherContainer).eraseChild.apply(t,arguments)},n.checkForOverflow=function(){var t=this.pusherContainer.children;if(t.length){for(var e=!1,n=!1,i=this.node.getBoundingClientRect(),r=t,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a,u=l.node.getBoundingClientRect();e|=i.left+i.width<u.left+u.width-1,n|=i.left>u.left}var c=!this.leftArrow.getWidth();n&&c?this.leftArrow.removeClass(this.styleSheet.hiddenArrow):n||c||this.leftArrow.addClass(this.styleSheet.hiddenArrow);var h=!this.rightArrow.getWidth();e&&h?this.rightArrow.removeClass(this.styleSheet.hiddenArrow):e||h||this.rightArrow.addClass(this.styleSheet.hiddenArrow)}},n.scrollContent=function(t){var e,n=this,i=this.pusherContainer.node;e=t<0?Math.max(0,i.scrollLeft+t*this.getWidth()):Math.min(i.scrollWidth-this.getWidth(),i.scrollLeft+t*this.getWidth()),t<0&&(this.swipeHelperChild.setStyle("marginLeft",e-i.scrollLeft),i.scrollLeft=e),this.pusherContainer.setWidth("fit-content"),this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation),t<0?this.swipeHelperChild.setStyle("marginLeft",0):this.swipeHelperChild.setStyle("marginLeft",i.scrollLeft-e),setTimeout(function(){n.pusherContainer.setWidth("100%"),n.swipeHelperChild.removeClass(n.styleSheet.swipeAnimation),i.scrollLeft=e,n.swipeHelperChild.setStyle("marginLeft",0),n.checkForOverflow()},1e3*this.styleSheet.transitionTime)},n.scrollContentLeft=function(){this.scrollContent(-this.options.swipePercent)},n.scrollContentRight=function(){this.scrollContent(this.options.swipePercent)},n.handleEventAndHandlePositionChange=function(t){t()},n.onMount=function(){var t=this;this.pusherContainer.addNodeListener("scroll",function(){return t.handleEventAndHandlePositionChange(function(){return t.checkForOverflow()})}),this.addListener("resize",function(){return t.handleEventAndHandlePositionChange(function(){return t.checkForOverflow()})}),this.rightArrow.addClickListener(function(){return t.handleEventAndHandlePositionChange(function(){return t.scrollContentRight()})}),this.leftArrow.addClickListener(function(){return t.handleEventAndHandlePositionChange(function(){return t.scrollContentLeft()})}),window.addEventListener("resize",function(){return t.handleEventAndHandlePositionChange(function(){return t.checkForOverflow()})}),setTimeout(function(){return t.checkForOverflow()})},e}(wi.Element))||Hs,ia=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.setActive=function(e){var n=this;t.prototype.setActive.call(this,e),e&&this.options.activeTabTitleDispatcher.setActive(this,function(){n.setActive(!1)})},e}(Js),ra=(Fs=tt(Xs))(Us=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.barLeft=0,e.barWidth=0,e}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.nav)},n.getChildrenToRender=function(){for(var t=this.render(),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var r=i;r.options.active&&r.addClass(this.styleSheet.activeOnRender)}return[wi.createElement(na,{ref:"horizontalOverflow",styleSheet:qs},this.render(),wi.createElement("div",{ref:"bar",className:this.styleSheet.activeBar,style:{left:this.barLeft,width:this.barWidth}}))]},n.setActiveBar=function(t){for(var e=0,n=0,i=f(this.render()),r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s,l=a.getWidth();if(a===t){n=l;break}e+=l}this.bar.setStyle({left:e,width:n}),this.barLeft=e,this.barWidth=n},n.setActive=function(t){var e=this;this.activeTab&&(this.setActiveBar(this.activeTab),this.activeTab.removeClass(this.styleSheet.activeOnRender)),setTimeout(function(){e.bar.addClass(e.styleSheet.activeBarAnimated),e.setActiveBar(t)}),setTimeout(function(){e.activeTab&&e.activeTab.removeClass(e.styleSheet.activeOnRender),t.addClass(e.styleSheet.activeOnRender),e.bar.removeClass(e.styleSheet.activeBarAnimated),e.bar.setWidth(0),e.activeTab=t},1e3*this.styleSheet.transitionTime)},n.onMount=function(){var e=this;t.prototype.onMount.call(this);for(var n=this.options.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;s.options.active&&this.setActive(s)}this.attachListener(this.options.activeTabTitleDispatcher,function(t){return e.setActive(t)}),this.addListener("resize",function(){return e.horizontalOverflow.dispatch("resize")})},e}(Zs))||Us,oa=((Ws=tt(Xs))(Vs=js=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.activeTabTitleDispatcher=new yi,e}r(e,t);var n=e.prototype;return n.getTitleArea=function(t){return wi.createElement(ra,{ref:"titleArea",activeTabTitleDispatcher:this.activeTabTitleDispatcher,className:this.options.titleAreaClass||""},t)},n.createTabPanel=function(t){return[wi.createElement(ia,{panel:t,activeTabDispatcher:this.activeTabDispatcher,activeTabTitleDispatcher:this.activeTabTitleDispatcher,active:t.options.active,href:t.options.tabHref,styleSheet:this.styleSheet}),t]},e}($s)),function(){function t(){this.map=new Map}t.iterator=function(t){return t[Symbol.iterator]};var e=t.prototype;return e.normalizeKey=function(t){return t},e.normalizeValue=function(t){return t},e.append=function(t,e){var n=this.normalizeKey(t),i=this.normalizeValue(e);this.map.has(n)?this.map.get(n).push(i):this.map.set(n,[i])},e.has=function(t){return this.map.has(this.normalizeKey(t))},e.delete=function(t){this.map.delete(this.normalizeKey(t))},e.set=function(t,e){this.map.set(this.normalizeKey(t),[this.normalizeValue(e)])},e.get=function(t){var e=this.normalizeKey(t);return this.map.has(e)?this.map.get(e)[0]:null},e.getAll=function(t){var e=this.normalizeKey(t);return this.map.has(e)?this.map.get(e).slice():null},e.forEach=function(t,e){for(var n=this.entries(),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o,a=s[0],l=s[1];t.call(e,l,a,this)}},e.keys=function(){return k(this.entries(),function(t){return t[0]})},e.values=function(){return k(this.entries(),function(t){return t[1]})},e.entries=regeneratorRuntime.mark(function t(){var e,n,i,r,o,s,a,l,u,c,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.map.entries(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();case 1:if(!n){t.next=7;break}if(!(i>=e.length)){t.next=4;break}return t.abrupt("break",30);case 4:r=e[i++],t.next=11;break;case 7:if(i=e.next(),!i.done){t.next=10;break}return t.abrupt("break",30);case 10:r=i.value;case 11:o=r,s=o[0],a=o[1],l=a,u=Array.isArray(l),c=0,l=u?l:l[Symbol.iterator]();case 13:if(!u){t.next=19;break}if(!(c>=l.length)){t.next=16;break}return t.abrupt("break",28);case 16:h=l[c++],t.next=23;break;case 19:if(c=l.next(),!c.done){t.next=22;break}return t.abrupt("break",28);case 22:h=c.value;case 23:return p=h,t.next=26,[s,p];case 26:t.next=13;break;case 28:t.next=1;break;case 30:case"end":return t.stop()}},t,this)}),e[Symbol.iterator]=function(){return this.entries()},t}()),sa=function(t){function e(n){var i;if(i=t.call(this)||this,n instanceof e)for(var r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a,u=l[0],c=l[1];i.append(u,c)}else if(n)for(var h=0,p=Object.keys(n);h<p.length;h++){var u=p[h];i.append(u,n[u])}return i}r(e,t);var n=e.prototype;return n.normalizeKey=function(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()},n.normalizeValue=function(t){return"string"!=typeof t&&(t=String(t)),t},e}(oa);sa.polyfill=!0;var aa=function(t){function e(e){var n;void 0===e&&(e=""),n=t.call(this,e)||this;var i=String(e);0===i.indexOf("?")&&(i=i.slice(1));for(var r=i.split("&"),o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a,u=l.indexOf("=");if(-1!==u){var c=n.constructor.decode(l.slice(0,u)),h=n.constructor.decode(l.slice(u+1));n.append(c,h)}}return n}r(e,t);var n=e.prototype;return n.normalizeKey=function(t){return t.toString()},n.normalizeValue=function(t){return t.toString()},e.encode=function(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return e[t]})},e.decode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},n.toString=function(){for(var t=[],e=this.map.entries(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}for(var o=r,s=o[0],a=o[1],l=this.constructor.encode(s),u=a,c=Array.isArray(u),h=0,u=c?u:u[Symbol.iterator]();;){var p;if(c){if(h>=u.length)break;p=u[h++]}else{if(h=u.next(),h.done)break;p=h.value}var d=p;t.push(l+"="+this.constructor.encode(d))}}return t.join("&")},e}(oa);aa.polyfill=!0;var la=function(){function t(){this.bodyUsed=!1}var e=t.prototype;return e.setBodyUsed=function(){if(this.bodyUsed)return Promise.reject(new TypeError("Already read"));this.bodyUsed=!0},t.decode=function(t){for(var e=new FormData,n=t.trim().split("&"),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;if(s){var a=s.split("="),l=a.shift().replace(/\+/g," "),u=a.join("=").replace(/\+/g," ");e.append(decodeURIComponent(l),decodeURIComponent(u))}}return e},t.cloneBuffer=function(t){if(t.slice)return t.slice();var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer},e.initialize=function(t){if(this._bodyInit=t,t)if("string"==typeof t||t instanceof String)this._bodyText=t;else if(Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(DataView.prototype.isPrototypeOf(t))this._bodyArrayBuffer=this.constructor.cloneBuffer(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!ArrayBuffer.prototype.isPrototypeOf(t)&&!ArrayBuffer.isView(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=this.constructor.cloneBuffer(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t||t instanceof String?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob=function(){var t=this.setBodyUsed();return t||(this._bodyBlob?Promise.resolve(this._bodyBlob):this._bodyArrayBuffer?Promise.resolve(new Blob([this._bodyArrayBuffer])):this._bodyFormData?Promise.resolve(this._bodyFormData):Promise.resolve(new Blob([this._bodyText])))},e.arrayBuffer=function(){return this._bodyArrayBuffer?this.setBodyUsed()||Promise.resolve(this._bodyArrayBuffer):this.blob().then(it)},e.readArrayBufferAsText=function(){for(var t=new Uint8Array(this._bodyArrayBuffer),e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")},e.text=function(){var t=this.setBodyUsed();if(t)return t;if(this._bodyBlob)return rt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(this.readArrayBufferAsText());if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData=function(){return this.text().then(this.constructor.decode)
},e.json=function(){return this.text().then(JSON.parse)},t}(),ua=function(t){function e(e,n){var i;void 0===n&&(n={}),i=t.call(this)||this;var r=n.body;if(("string"==typeof e||e instanceof String)&&(e={url:e}),e.bodyUsed)throw new TypeError("Already read");!r&&e.hasOwnProperty("_bodyInit")&&null!=e._bodyInit&&(r=e._bodyInit,e.bodyUsed=!0),i.method=i.constructor.normalizeMethod(n.method||e.method||"GET"),i.url=e.url;var o=n.headers||e.headers||null;if(i.headers=o?new Headers(o):new Headers,i.context=n.context||e.context||"",i.referrer=n.referrer||e.referrer||"about:client",i.referrerPolicy=n.referrerPolicy||e.referrerPolicy||"",i.mode=n.mode||e.mode||null,i.credentials=n.credentials||e.credentials||"omit",i.cache=n.cache||e.cache||"default",("GET"===i.method||"HEAD"===i.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");return i.initialize(r),i}return r(e,t),e.normalizeMethod=function(t){var e=t.toUpperCase();return this.methods.indexOf(e)>-1?e:t},e.prototype.clone=function(){return new e(this,{body:this._bodyInit})},e}(la);ua.methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var ca=function(t){function e(e,n){var i;return i=t.call(this)||this,n=n||{},i.type="default",n.hasOwnProperty("status")?i.status=n.status:i.status=200,i.ok=i.status>=200&&i.status<300,n.hasOwnProperty("statusText")?i.statusText=n.statusText:i.statusText="OK",i.headers=new Headers(n.headers),i.url=n.url||"",i.initialize(e),i}return r(e,t),e.prototype.clone=function(){return new e(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},e.error=function(){var t=new e(null,{status:0,statusText:""});return t.type="error",t},e.redirect=function(t,n){if(-1===this.redirectStatuses.indexOf(n))throw new RangeError("Invalid status code");return new e(null,{status:n,headers:{location:t}})},e}(la);ca.redirectStatuses=[301,302,303,307,308],window&&(function(t){t.Request=t.Request||ua}(window),function(t){t.Response=t.Response||ca}(window),function(t){t.Headers=t.Headers||sa}(window),function(t){t.URLSearchParams=t.URLSearchParams||aa}(window));var ha=function(){function t(t,e){var n=this;void 0===e&&(e={}),t=new Request(t,e);var i=new XMLHttpRequest;this.options=e,this.request=t,this.xhr=i,this.promise=new Promise(function(r,o){n.promiseResolve=r,n.promiseReject=o,i.onload=function(){var t=n.getResponseHeaders(),r=i.response||i.responseText,o={status:i.status,statusText:i.statusText,headers:t,url:i.responseURL||t.get("X-Request-URL")},s=new Response(r,o);"function"==typeof s[e.dataType]?s[e.dataType]().then(function(t){n.resolve(t)}):n.resolve(s)},i.onerror=function(){n.reject(new TypeError("Network error"))},i.ontimeout=function(){n.reject(new TypeError("Network timeout"))},i.open(t.method,t.url,!0),"include"===t.credentials&&(i.withCredentials=!0),i.responseType="blob",t.headers.forEach(function(t,n){e.body instanceof FormData&&"content-type"===n.toLowerCase()||i.setRequestHeader(n,t)}),e.body instanceof FormData?n.send(e.body):t.blob().then(function(t){var e=t instanceof FormData||t.size?t:null;n.send(e)})})}var e=t.prototype;return e.getResponseHeaders=function(){return ot(this.xhr)},e.send=function(t){this.getXHR().send(t)},e.getPostprocessors=function(){return this.options.postprocessors||ut.defaultPostprocessors},e.getErrorPostprocessors=function(){return this.options.errorPostprocessors||ut.defaultErrorPostprocessors},e.resolve=function(t){for(var e=this.getPostprocessors(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;try{t=o(t,this)||t}catch(t){return void this.reject(t)}}if(this.options.onSuccess){var s;(s=this.options).onSuccess.apply(s,arguments)}else this.promiseResolve.apply(this,arguments);this.options.onComplete&&this.options.onComplete()},e.reject=function(t){for(var e=this.getErrorPostprocessors(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}t=r(t)||t}if(this.options.onError){var o;(o=this.options).onError.apply(o,arguments)}else if(this._chained)this.promiseReject.apply(this,arguments);else if(this.options.errorHandler){var s;(s=this.options).errorHandler.apply(s,arguments)}else{var a;(a=console).error.apply(a,["Unhandled fetch error"].concat(Array.prototype.slice.call(arguments)))}this.options.onComplete&&this.options.onComplete()},e.then=function(t,e){return this._chained=!0,e=e||this.options.errorHandler,this.getPromise().then(t,e)},e.catch=function(){var t;return this._chained=!0,(t=this.getPromise()).catch.apply(t,arguments)},e.getXHR=function(){return this.xhr},e.getPromise=function(){return this.promise},e.getRequest=function(){return this.request},e.abort=function(){this.getXHR().abort()},e.addXHRListener=function(t,e){var n;(n=this.getXHR()).addEventListener.apply(n,arguments)},e.addProgressListener=function(t){this.addXHRListener.apply(this,["progress"].concat(Array.prototype.slice.call(arguments)))},t}();ut.defaultPreprocessors=[lt],ut.defaultPostprocessors=[],ut.defaultErrorPostprocessors=[],ut.polyfill=!0;var pa=function(){function t(t,e){void 0===e&&(e=null),null===this.constructor._baseAjax?this.constructor._baseAjax=this:0===arguments.length&&(t=this.constructor._baseAjax),this.parentHandler=t,this.preprocessors=t?[]:Array.from(ut.defaultPreprocessors),this.postprocessors=t?[]:Array.from(ut.defaultPostprocessors),this.errorPostprocessors=t?[]:Array.from(ut.defaultErrorPostprocessors),this.errorHandler=e}var e=t.prototype;return e.fetch=function(t){for(var e={preprocessors:this.getPreprocessors(),postprocessors:this.getPostprocessors(),errorPostprocessors:this.getErrorPostprocessors(),errorHandler:this.getErrorHandler()},n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];t[r]&&delete e[r]}for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return ut.apply(void 0,[t,e].concat(s))},e.request=function(){return this.fetch.apply(this,arguments)},e.get=function(t,e){return this.fetch.apply(this,Array.prototype.slice.call(arguments).concat([{method:"GET"}]))},e.getJSON=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.get.apply(this,[t,{dataType:"json",data:e}].concat(i))},e.post=function(t,e){return this.fetch.apply(this,Array.prototype.slice.call(arguments).concat([{method:"POST"}]))},e.postJSON=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.post.apply(this,[t,{dataType:"json",data:e}].concat(i))},e.addPreprocessor=function(t){this.preprocessors.push(t)},e.getPreprocessors=function(){var t=this.parentHandler&&this.parentHandler.getPreprocessors()||[];return[].concat(this.preprocessors,t)},e.addPostprocessor=function(t){this.postprocessors.push(t)},e.getPostprocessors=function(){return[].concat(this.parentHandler&&this.parentHandler.getPostprocessors()||[],this.postprocessors)},e.addErrorPostprocessor=function(t){this.errorPostprocessors.push(t)},e.getErrorPostprocessors=function(){return[].concat(this.parentHandler&&this.parentHandler.getErrorPostprocessors()||[],this.errorPostprocessors)},e.getErrorHandler=function(){return this.errorHandler||this.parentHandler&&this.parentHandler.getErrorHandler()},t}();pa._baseAjax=null;for(var da,fa,ga,ma,ya,ba,va,Sa,wa,Aa,Ea,xa,Ca,Ta,La,Oa,Ra,Na=new pa,Ia=function(t){var e=Z(t),n={backgroundColor:e[2]},i={backgroundColor:e[3]},r={backgroundColor:e[4]},o={backgroundColor:e[1],borderColor:e[5],color:e[6]},s=Object.assign({},o);return Object.assign({},o,{":hover":n,":hover:disabled":s,":focus":n,":active":i,":hover:active":r,":focus:active":r,".active":r})},ka=(da=Sa=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.base={outline:"0",border:"0.1em solid transparent",padding:"0.4em 0.8em",borderRadius:e.themeProperties.BUTTON_BORDER_RADIUS||e.themeProperties.BASE_BORDER_RADIUS,textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",lineHeight:4/3+"",marginBottom:"0",display:"inline-block",touchAction:"manipulation",userSelect:"none",":disabled":{opacity:"0.7",cursor:"not-allowed"}},p(e,"DEFAULT",fa,h(e)),p(e,"EXTRA_SMALL",ga,h(e)),p(e,"SMALL",ma,h(e)),p(e,"MEDIUM",ya,h(e)),p(e,"LARGE",ba,h(e)),p(e,"EXTRA_LARGE",va,h(e)),e}return r(e,t),e.prototype.getLevel=function(e){return t.prototype.getLevel.call(this,e)||this.INFO},e}(cr(Ia)),fa=d(da.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.base,{fontSize:"14px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)]}}),ga=d(da.prototype,"EXTRA_SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"12px",padding:"0.2em 0.4em",borderWidth:"0.05em"}}}),ma=d(da.prototype,"SMALL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"12px"}}}),ya=d(da.prototype,"MEDIUM",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ba=d(da.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px"}}}),va=d(da.prototype,"EXTRA_LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"21px",padding:"0.2em 0.4em"}}}),da),Ma=(wa=xa=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"HORIZONTAL",Aa,h(e)),p(e,"VERTICAL",Ea,h(e)),e}return r(e,t),e.prototype.Orientation=function(t){for(var e=0,n=Object.keys(Ci);e<n.length;e++){var i=n[e];if(t==Ci[i])return this[i]}},e}(Fi),Aa=d(wa.prototype,"HORIZONTAL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-left":"5px",display:"inline-block",pointerEvents:"initial"},">:first-child":{"margin-left":"0px"}}}}),Ea=d(wa.prototype,"VERTICAL",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-top":"5px",display:"block",pointerEvents:"initial"},">:first-child":{"margin-top":"0px"}}}}),wa),Pa=(Ca=La=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"DEFAULT",Ta,h(e)),e}return r(e,t),e}(Fi),Ta=d(Ca.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{pointerEvents:"initial",borderRadius:"0"},">:last-child":{borderTopRightRadius:"0.3em",borderBottomRightRadius:"0.3em"},">:first-child":{borderTopLeftRadius:"0.3em",borderBottomLeftRadius:"0.3em"}}}}),Ca),Da=(Oa=tt(ka))(Ra=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.DEFAULT),this.getSize()&&t.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&t.addClass(this.styleSheet.Level(this.getLevel()))},n.disable=function(){this.options.disabled=!0,this.node.disabled=!0},n.enable=function(){this.options.disabled=!1,this.node.disabled=!1},n.setEnabled=function(t){this.options.disabled=!t,this.node.disabled=!t},e}(wi.Primitive(eo,"button")))||Ra,za=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.state=this.options&&this.options.state||e.state||Ni.DEFAULT,t.prototype.setOptions.call(this,e),this.options.statusOptions=this.options.statusOptions||[];for(var n=0;n<4;n+=1)if("string"==typeof this.options.statusOptions[n]){var i=this.options.statusOptions[n];this.options.statusOptions[n]={label:i,faIcon:""}}},n.setState=function(t){this.options.state=t,t===Ni.DEFAULT?this.enable():t===Ni.RUNNING&&this.disable(),this.redraw()},n.render=function(){var e=this.options.statusOptions[this.options.state-1];return this.options.label=e.label,this.options.faIcon=e.faIcon,t.prototype.render.call(this)},e}(Da),_a=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign(t.prototype.getDefaultOptions.call(this)||{},{resetToDefaultTimeout:1e3})},n.getAjaxHandler=function(){return this.options.ajaxHandler||Na},n.setAjaxHandler=function(t){this.options.ajaxHandler=t},n.clearResetTimeout=function(){this.stateResetTimeout&&(clearTimeout(this.stateResetTimeout),delete this.stateResetTimeout)},n.scheduleStateReset=function(){var t=this;this.clearResetTimeout(),this.stateResetTimeout=setTimeout(function(){t.setState(Ni.DEFAULT),t.clearResetTimeout()},this.resetToDefaultTimeout)},n.ajax=function(t){var e,n=this;this.setState(Ni.RUNNING);for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];var s=(e=this.getAjaxHandler())[t].apply(e,r);return s.getPromise().then(function(t){n.setState(Ni.SUCCESS),n.scheduleStateReset()},function(t){n.setState(Ni.FAILED),n.scheduleStateReset()}),s},n.ajaxCall=function(t){return this.ajax("fetch",t)},e}(za),Ba=0,Ha=["fetch","request","get","post","getJSON","postJSON"];Ba<Ha.length;Ba++)!function(){var t=Ha[Ba];_a.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.ajax.apply(this,[t].concat(n))}}();var Fa,Ua,Wa,Va,ja,Ga,Ya,Ka,Xa,qa,Ja,Za,$a,Qa,tl,el,nl,il,rl,ol,sl,al,ll,ul,cl,hl,pl,dl,fl,gl,ml,yl,bl,vl,Sl,wl,Al,El,xl,Cl,Tl,Ll,Ol,Rl,Nl,Il,kl,Ml,Pl,Dl,zl,_l,Bl,Hl,Fl,Ul,Wl,Vl,jl,Gl,Yl,Kl,Xl,ql,Jl,Zl,$l,Ql,tu,eu,nu,iu,ru,ou,su,au,lu,uu,cu,hu,pu,du,fu,gu,mu,yu,bu,vu,Su,wu,Au,Eu,xu,Cu,Tu,Lu,Ou,Ru,Nu,Iu,ku,Mu,Pu,Du,zu,_u,Bu,Hu,Fu,Uu,Wu,Vu,ju,Gu,Yu,Ku,Xu,qu,Ju,Zu,$u,Qu,tc,ec,nc,ic,rc,oc,sc=(Fa=tt(Ma))(Ua=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{orientation:Ci.HORIZONTAL}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.Orientation(this.options.orientation))},e}(to))||Ua,ac=((Wa=tt(Pa))(Va=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.index=this.options.index||0},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.DEFAULT)},n.render=function(){var t=this;this.buttons=[];for(var e=0;e<this.options.givenOptions.length;e+=1)!function(e){t.buttons.push(wi.createElement(Da,{key:e,onClick:function(){t.setIndex(e)},size:t.getSize(),label:t.options.givenOptions[e].toString(),level:t.getLevel(),className:t.index===e?"active":""}))}(e);return this.buttons},n.getIndex=function(){return this.index},n.getValue=function(){return this.options.givenOptions[this.index]},n.setIndex=function(t){this.dispatch("setIndex",{index:t,oldIndex:this.index,value:this.options.givenOptions[t],oldValue:this.options.givenOptions[this.index]}),this.buttons[this.index].removeClass("active"),this.index=t,this.buttons[this.index].addClass("active")},e}(to)),ja=Ja=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"DEFAULT",Ga,h(e)),p(e,"LARGE",Ya,h(e)),p(e,"body",Ka,h(e)),p(e,"panel",Xa,h(e)),p(e,"centered",qa,h(e)),e}return r(e,t),e}(cr(ct)),Ga=d(ja.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{display:"flex",alignItems:"center",width:"100%",flexDirection:"row",padding:"5px",minHeight:this.themeProperties.CARD_PANEL_HEADER_HEIGHT,textTransform:this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,paddingLeft:this.themeProperties.CARD_PANEL_HEADING_PADDING,paddingRight:this.themeProperties.CARD_PANEL_HEADING_PADDING},ht(this.themeProperties.COLOR_BACKGROUND)]}}),Ya=d(ja.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,paddingLeft:this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,paddingRight:this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE}}}),Ka=d(ja.prototype,"body",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Xa=d(ja.prototype,"panel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{borderWidth:this.themeProperties.BASE_BORDER_WIDTH,borderRadius:this.themeProperties.BASE_BORDER_RADIUS,boxShadow:this.themeProperties.BASE_BOX_SHADOW,borderStyle:this.themeProperties.BASE_BORDER_STYLE,backgroundColor:this.themeProperties.COLOR_BACKGROUND},ct(this.themeProperties.COLOR_BACKGROUND)]}}),qa=d(ja.prototype,"centered",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",justifyContent:"center"}}}),ja),lc=cr(ht),uc=(Za=tt(ac))($a=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.panel)},n.getLevel=function(){return t.prototype.getLevel.call(this)||Li.PRIMARY},n.getTitle=function(){return this.options.title},n.getHeaderStyleSheet=function(){return lc.getInstance()},n.getDefaultOptions=function(){return{headingCentered:!0,bodyCentered:!1}},n.getHeadingClasses=function(){var t="",e=this.getHeaderStyleSheet().Level(this.getLevel()),n=this.options.headingCentered;return e&&(t+=e),t+=this.styleSheet.DEFAULT,this.getSize()&&(t+=this.styleSheet.Size(this.getSize())),n&&(t+=this.styleSheet.centered),t},n.getBodyClasses=function(){var t=this.options.bodyCentered,e=this.styleSheet.body;return t&&(e+=this.styleSheet.centered),e},n.getChildrenToRender=function(){var t=this.getHeadingClasses(),e=this.getBodyClasses();return[wi.createElement("div",{ref:"panelTitle",className:t},this.getTitle()),wi.createElement("div",{ref:"panelBody",className:e,style:this.options.bodyStyle},this.render())]},e}(to))||$a,cc=(Qa=ol=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"rowList",tl,h(e)),p(e,"DEFAULT",el,h(e)),p(e,"LARGE",nl,h(e)),p(e,"alternativeColorsOddRow",il,h(e)),p(e,"noAlternativeColors",rl,h(e)),e}return r(e,t),e}(ur),tl=d(Qa.prototype,"rowList",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),el=d(Qa.prototype,"DEFAULT",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",width:"100%",minHeight:this.themeProperties.ROW_LIST_ROW_HEIGHT,paddingLeft:this.themeProperties.ROW_LIST_ROW_PADDING,paddingRight:this.themeProperties.ROW_LIST_ROW_PADDING,backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),nl=d(Qa.prototype,"LARGE",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,paddingLeft:this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,paddingRight:this.themeProperties.ROW_LIST_ROW_PADDING_LARGE}}}),il=d(Qa.prototype,"alternativeColorsOddRow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE}}}),rl=d(Qa.prototype,"noAlternativeColors",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderTopWidth:this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,borderTopStyle:this.themeProperties.BASE_BORDER_STYLE,borderTopColor:this.themeProperties.BASE_BORDER_COLOR}}}),Qa),hc=((sl=tt(cc))(al=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.rowList)},n.getDefaultOptions=function(t){return{alternateColors:!0}},n.getRowClasses=function(t){var e=this.styleSheet.DEFAULT;this.getSize()&&(e+=this.styleSheet.Size(this.getSize()));var n=this.options.alternateColors;return n&&t%2==1?e+=this.styleSheet.alternativeColorsOddRow:!n&&t>0&&(e+=this.styleSheet.noAlternativeColors),e},n.render=function(){var t=this,e=this.options,n=e.rows,i=e.rowParser;return n.map(function(e,n){return wi.createElement("div",{className:t.getRowClasses(n)},i(e))})},e}(to)),ll=hl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.transitionDuration=.4,p(e,"collapsing",ul,h(e)),p(e,"collapsed",cl,h(e)),e}return r(e,t),e}(Fi),ul=d(ll.prototype,"collapsing",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",transitionTimingFunction:"ease",transitionDuration:this.transitionDuration+"s",transitionProperty:"margin-top",transitionDelay:"-0.15s"}}}),cl=d(ll.prototype,"collapsed",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"-100% !important",transitionDelay:"0s !important"}}}),ll),pc=(pl=yl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"panel",dl,h(e)),p(e,"heading",fl,h(e)),p(e,"button",gl,h(e)),p(e,"collapsedButton",ml,h(e)),e}return r(e,t),e}(ac),dl=d(pl.prototype,"panel",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxShadow:null,borderWidth:"1px",borderColor:"#ccc !important",borderRadius:"3px"}}}),fl=d(pl.prototype,"heading",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"10px 15px",borderBottom:"1px solid transparent",borderTopLeftRadius:"3px",borderTopRightRadius:"3px",backgroundColor:"#fefefe",":hover":{backgroundColor:"#f3f3f3"}}}}),gl=d(pl.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",marginBottom:"0",fontSize:"16px",color:"inherit",cursor:"pointer",":hover":{color:"inherit"},":before":{transition:"transform .2s linear",fontFamily:"'FontAwesome'",content:'"\\f107"',color:"grey",display:"inline-block",lineHeight:"0.7em",width:"0.7em",fontSize:"150%",verticalAlign:"bottom",height:"0.7em",textAlign:"center",transform:"rotate(0deg)",marginRight:".2em"}}}}),ml=d(pl.prototype,"collapsedButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":before":{transform:"rotate(-90deg) !important"}}}}),pl),dc=((bl=tt(pc))(vl=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.toggle=function(){this.options.collapsed?this.expand():this.collapse()},n.expand=function(){t.prototype.expand.call(this,this.contentArea),this.toggleButton.removeClass(this.styleSheet.collapsedButton)},n.collapse=function(){t.prototype.collapse.call(this,this.contentArea),this.toggleButton.addClass(this.styleSheet.collapsedButton)},n.setTitle=function(t){this.options.title=t,this.toggleButton.setChildren(t)},n.getChildrenToRender=function(){var t=this,e="",n="",i="",r={};return this.options.collapsed&&(n=this.styleSheet.collapsedButton,e=this.styleSheet.collapsed,i="hidden"),this.options.noPadding||(r={padding:"8px 8px"}),[wi.createElement("div",{className:this.styleSheet.heading},wi.createElement("div",{ref:"toggleButton",className:this.styleSheet.button+" "+n,onClick:function(){return t.toggle()}},this.getTitle())),wi.createElement("div",{style:{overflow:"hidden"}},wi.createElement("div",{ref:"contentArea",className:e+" "+i,style:r},this.render()))]},e}(pt(uc))),Sl=El=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"hiddenAnimated",wl,h(e)),p(e,"visibleAnimated",Al,h(e)),e}return r(e,t),e}(Fi),wl=d(Sl.prototype,"hiddenAnimated",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden",opacity:"0",transition:"opacity 0.1s linear"}}}),Al=d(Sl.prototype,"visibleAnimated",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"visible",opacity:"1",transition:"opacity 0.1s linear"}}}),Sl),fc=(xl=Nl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"container",Cl,h(e)),p(e,"background",Tl,h(e)),p(e,"header",Ll,h(e)),p(e,"body",Ol,h(e)),p(e,"footer",Rl,h(e)),e}return r(e,t),e}(dc),Cl=d(xl.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",zIndex:"9999"}}}),Tl=d(xl.prototype,"background",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"fixed",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)"}}}),Ll=d(xl.prototype,"header",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"15px",borderBottom:"1px solid #e5e5e5"}}}),Ol=d(xl.prototype,"body",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",padding:"15px"}}}),Rl=d(xl.prototype,"footer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"15px",textAlign:"right",borderTop:"1px solid #e5e5e5"}}}),xl),gc=(Il=tt(dc))(kl=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.getDefaultOptions=function(){return{transitionTime:0,style:{zIndex:2016}}},i.fadeOut=function(){this.removeClass(this.styleSheet.visibleAnimated),this.addClass(this.styleSheet.hiddenAnimated)},i.fadeIn=function(){this.removeClass(this.styleSheet.hiddenAnimated),this.addClass(this.styleSheet.visibleAnimated)},i.show=function(){var t=this;this.isInDocument()||(this.parentNode.appendChild(this.node),this.redraw(),setTimeout(function(){t.fadeIn()},0))},i.setParentNode=function(t){this.options.parentNode=t},i.hide=function(){var t=this;this.isInDocument()&&(this.fadeOut(),setTimeout(function(){t.isInDocument()&&t.parentNode.removeChild(t.node)},this.options.transitionTime))},n(e,[{key:"parentNode",get:function(){return this.options.parentNode||(this.parent?this.parent instanceof HTMLElement?this.options.parentNode=this.parent:this.options.parentNode=this.parent.node:this.options.parentNode=document.body),this.options.parentNode}}]),e}(wi.Element))||kl,mc=(Ml=tt(fc))(Pl=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{closeButton:!0,destroyOnHide:!0,visible:!1}},n.getChildrenToRender=function(){var t=this;return[wi.createElement(uo,{ref:"modalContainer",className:(this.options.visible?"":"hidden")+this.styleSheet.container},wi.createElement(uo,{ref:"behindPanel",className:this.styleSheet.hiddenAnimated+this.styleSheet.background,onClick:function(){return t.hide()}}),this.getModalWindow())]},n.getModalWindow=function(){var t=this,e=null;return this.options.closeButton&&(e=wi.createElement("div",{style:{right:"10px",zIndex:"10",position:"absolute"}},wi.createElement(Da,{className:"close",size:Oi.EXTRA_LARGE,style:{border:"none"},label:"×",onClick:function(){return t.hide()}}))),wi.createElement(gc,{ref:"modalWindow",style:this.getModalWindowStyle()},e,this.render())},n.getModalWindowStyle=function(){return this.options.fillScreen&&(this.options.width="85%"),{position:"relative",padding:"1%",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",borderRadius:"10px",margin:"60px auto",display:this.options.display||"block",maxHeight:this.options.maxHeight||"85%",left:"0",right:"0",width:this.options.width||"50%",height:this.options.height||"auto",background:"white",overflow:this.options.overflow||"auto"}},n.isVisible=function(){return this.options.visible},n.hide=function(){var t=this;this.isVisible()&&(this.options.visible=!1,this.modalWindow.fadeOut(),setTimeout(function(){t.behindPanel.removeClass(t.styleSheet.visibleAnimated),t.behindPanel.addClass(t.styleSheet.hiddenAnimated),setTimeout(function(){t.modalContainer.addClass("hidden"),t.options.destroyOnHide&&t.destroyNode()},t.modalWindow.options.transitionTime||0),t.detachListener(t.closeListenerHandler)},this.modalWindow.options.transitionTime||0),document.body.classList.remove("unscrollable"))},n.show=function(){var t=this;this.options.visible=!0,this.node||this.mount(document.body),this.modalContainer.removeClass("hidden"),setTimeout(function(){t.behindPanel.addClass(t.styleSheet.visibleAnimated),t.behindPanel.removeClass(t.styleSheet.hiddenAnimated),setTimeout(function(){t.modalWindow.fadeIn()},t.modalWindow.options.transitionTime)},0),this.closeListenerHandler=this.attachListener(di.Global,"closeAllModals",function(){t.hide()}),document.body.classList.add("unscrollable")},e.show=function(t){void 0===t&&(t={});var e=new this(t);return e.show(),e},e}(wi.Element))||Pl,yc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign(t.prototype.getDefaultOptions.call(this),{closeButton:!1})},n.getActionName=function(){return this.options.actionName},n.getActionLevel=function(){return this.options.level||Li.DEFAULT},n.getCloseName=function(){return this.options.closeName||"Close"},n.render=function(){return[wi.createElement("div",{className:this.styleSheet.header},this.getHeader()),this.getBody()?wi.createElement("div",{className:this.styleSheet.body},this.getBody()):null,this.getFooter()?wi.createElement("div",{className:this.styleSheet.footer},this.getFooter()):null]},n.getHeader=function(){return wi.createElement("h4",null,this.getTitle())},n.getTitle=function(){return this.options.title||this.getActionName()},n.getBody=function(){return null},n.getActionButton=function(){var t=this;return wi.createElement(Da,{level:this.getActionLevel(),label:this.getActionName(),onClick:function(){return t.action()},ref:"actionButton"})},n.getFooter=function(){var t=this;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:this.getCloseName(),onClick:function(){return t.hide()}}),this.getActionButton())]},n.action=function(){},e}(mc),bc=function(t){return function(e){function n(){return e.apply(this,arguments)||this}r(n,e);var i=n.prototype;return i.getModalOptions=function(){var t={actionName:this.options.label,level:this.options.level};return Object.assign(t,this.options.modalOptions),t},i.onMount=function(){var e=this;this.addClickListener(function(){t.show(e.getModalOptions())})},n}(Da)},vc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getTitle=function(){return"An Error occurred"},n.getBody=function(){return this.options.error.message||this.options.error},n.getFooter=function(){var t=this;return wi.createElement(Da,{level:Li.DANGER,label:"Dismiss",onClick:function(){return t.hide()}})},e}(yc),Sc=(Dl=_l=function(t){function e(){var e;return e=t.call(this,{updateOnResize:Ui.isMobileDevice()})||this,p(e,"default",zl,h(e)),e}return r(e,t),e}(Fi),zl=d(Dl.prototype,"default",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:function(){return Ui.isMobileDevice()?window.innerHeight+"px":"100vh"},paddingTop:this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,background:this.themeProperties.COLOR_BACKGROUND_BODY,width:"100%",">*":{height:"100%",width:"100%",paddingTop:Ui.isMobileDevice()?this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP,paddingBottom:Ui.isMobileDevice()?this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP,overflow:Ui.isMobileDevice()?"":"auto"}}}}),Dl),wc=(Bl=tt(Sc))(Hl=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.default)},n.onMount=function(){Ui.isTouchDevice()&&Ui.isMobileDevice()||Object.assign(document.body.style,{overflow:"hidden"}),e.Global=e.Global||this},e}(wi.Element))||Hl,Ac=function(t){function e(){
return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.dragMousedown=function(t){},n.dragMousemove=function(t){},n.dragMouseup=function(t){},n.dividerMousedownFunction=function(t){var e=this;this.dragMousedown(t),this.parent.dispatch("dividerMousedown",{divider:this,domEvent:t});var n=function(t){e.dragMousemove(t),t.preventDefault(),e.parent.dispatch("dividerMousemove",t)};this.parent.addNodeListener("touchmove",n),this.parent.addNodeListener("mousemove",n);var i=function t(i){e.dragMouseup(i),e.parent.dispatch("dividerMouseup",i),e.parent.removeNodeListener("touchmove",n),window.removeEventListener("touchend",t),e.parent.removeNodeListener("mousemove",n),window.removeEventListener("mouseup",t)};window.addEventListener("touchend",i),window.addEventListener("mouseup",i)},n.onMount=function(){var t=this;this.addNodeListener("touchstart",function(e){t.touchDeviceTriggered=!0,t.dividerMousedownFunction(e)}),this.addNodeListener("mousedown",function(e){t.touchDeviceTriggered||t.dividerMousedownFunction(e)})},e}(wi.Element),Ec=(Fl=Wl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"noTextSelection",Ul,h(e)),e}return r(e,t),e}(Fi),Ul=d(Fl.prototype,"noTextSelection",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none",userSelect:"none"}}}),Fl),xc=(Vl=Xl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"accordion",jl,h(e)),p(e,"grab",Gl,h(e)),p(e,"grabbing",Yl,h(e)),p(e,"collapseIcon",Kl,h(e)),e}return r(e,t),e}(Ec),jl=d(Vl.prototype,"accordion",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",">:nth-of-type(even)":{flexGrow:"1",flexShrink:"1",flexBasis:"auto",overflow:"auto",position:"relative"},">:nth-of-type(odd)":{fontSize:"1em",textTransform:"uppercase",padding:"8px 8px"}}}}),Gl=d(Vl.prototype,"grab",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"grab"}}}),Yl=d(Vl.prototype,"grabbing",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"grabbing"}}}),Kl=d(Vl.prototype,"collapseIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"0.7em",fontSize:"120% !important",fontWeight:"900 !important",textAlign:"center",marginRight:"0.2em"}}}),Vl),Cc=(ql=tu=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.barThickness=2,e.barPadding=3,e.dividerColor=function(){return"#DDD"},p(e,"horizontalDivider",Jl,h(e)),p(e,"verticalDivider",Zl,h(e)),p(e,"horizontalSection",$l,h(e)),p(e,"verticalSection",Ql,h(e)),e}return r(e,t),e}(Ec),Jl=d(ql.prototype,"horizontalDivider",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{zIndex:"10",position:"absolute",height:"100%",cursor:"col-resize",width:this.barThickness+2*this.barPadding+"px",background:function(){return t.dividerColor()},backgroundClip:"padding-box",borderLeft:this.barPadding+"px solid transparent",borderRight:this.barPadding+"px solid transparent",marginLeft:-this.barThickness/2-this.barPadding+"px",marginRight:-this.barThickness/2+"px",display:"inline-block"}}}),Zl=d(ql.prototype,"verticalDivider",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{zIndex:"10",position:"absolute",cursor:"row-resize",width:"100%",height:this.barThickness+2*this.barPadding+"px",background:function(){return t.dividerColor()},backgroundClip:"padding-box",borderBottom:this.barPadding+"px solid transparent",borderTop:this.barPadding+"px solid transparent",marginBottom:-this.barThickness/2-this.barPadding+"px",marginTop:-this.barThickness/2-this.barPadding+"px"}}}),$l=d(ql.prototype,"horizontalSection",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",whiteSpace:"nowrap",">*":{whiteSpace:"initial",verticalAlign:"top",paddingLeft:this.barThickness/2+this.barPadding+"px",paddingRight:this.barThickness/2+this.barPadding+"px"},">:first-child":{paddingLeft:"0"},">:last-child":{paddingRight:"0"},">:nth-of-type(even)":{padding:"0"},">:nth-of-type(odd)":{display:"inline-block"}}}}),Ql=d(ql.prototype,"verticalSection",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",">*":{paddingTop:this.barThickness/2+this.barPadding+"px",paddingBottom:this.barThickness/2+this.barPadding+"px"},">:first-child":{paddingTop:"0"},">:last-child":{paddingBottom:"0"},">:nth-of-type(even)":{padding:"0"}}}}),ql),Tc=(eu=du=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.barThickness=16,e.barPadding=1,e.transitionTime=.3,e.dividerStyle={backgroundColor:"white",borderColor:"#DDD !important"},p(e,"horizontalDivider",nu,h(e)),p(e,"horizontalDots",iu,h(e)),p(e,"verticalDivider",ru,h(e)),p(e,"verticalDots",ou,h(e)),p(e,"arrowButton",su,h(e)),p(e,"buttonsDisabled",au,h(e)),p(e,"barCollapsePanel",lu,h(e)),p(e,"hiddenContent",uu,h(e)),p(e,"collapsedBarTitle",cu,h(e)),p(e,"animatedSectionDivider",hu,h(e)),p(e,"paddingRemoved",pu,h(e)),e}return r(e,t),e}(Cc),nu=d(eu.prototype,"horizontalDivider",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.dividerStyle,{display:"inline-flex",alignItems:"center",flexDirection:"column",">*":{flex:"1",display:"flex",color:"rgba(0,0,0, .4)"},">:first-child":{alignItems:"flex-end"},">:last-child":{alignItems:"flex-start"},">:nth-child(2)":{flex:".2",alignItems:"center"}})}}),iu=d(eu.prototype,"horizontalDots",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transform:"rotate(90deg) scaleX(5)"}}}),ru=d(eu.prototype,"verticalDivider",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.dividerStyle,{display:"flex",alignItems:"center"})}}),ou=d(eu.prototype,"verticalDots",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",fontSize:"70% !important",height:0,textAlign:"center",transform:"scaleX(10) translateY(-.4em)"}}}),su=d(eu.prototype,"arrowButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"230% !important",padding:"1em .2em",color:"rgba(0,0,0, .4)",cursor:"pointer",":hover":{color:"black"}}}}),au=d(eu.prototype,"buttonsDisabled",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{pointerEvents:"none"},">:last-child":{pointerEvents:"none"}}}}),lu=d(eu.prototype,"barCollapsePanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",">:first-child":{width:"100%",height:"100%"},">:nth-child(2)":{display:"none",opacity:"0",transition:"opacity "+this.transitionTime+"s ease"}}}}),uu=d(eu.prototype,"hiddenContent",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{display:"none"},">:nth-child(2)":{opacity:"1"}}}}),cu=d(eu.prototype,"collapsedBarTitle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",width:"100%",height:"100%",display:"flex",alignItems:"center",backgroundColor:"#fff",flexDirection:"column",zIndex:5,position:"absolute",top:0,left:0,":hover":{backgroundColor:"#f3f3f3"},">:nth-child(2)":{flex:"1",transform:"rotate(90deg)"},">:nth-child(2)>:first-child":{textTransform:"uppercase",fontWeight:"bold",fontSize:"130%",whiteSpace:"nowrap",marginTop:"-.4em",transform:"translateY(10%)"},">*":{display:"flex",alignItems:"center"},">:first-child":{flex:".5",fontSize:"180%"},">:last-child":{flex:".5",fontSize:"180%"}}}}),hu=d(eu.prototype,"animatedSectionDivider",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{transition:this.transitionTime+"s height ease, "+this.transitionTime+"s width ease"}}}}),pu=d(eu.prototype,"paddingRemoved",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{padding:"0 !important",overflow:"hidden"},">:nth-of-type(even)":{display:"none !important"}}}}),eu),Lc=(fu=tt(Cc))(gu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign({},t.prototype.getDefaultOptions.call(this),{orientation:Ci.HORIZONTAL})},n.dragMousedown=function(t){document.body.classList.add(this.styleSheet.noTextSelection)},n.dragMouseup=function(t){document.body.classList.remove(this.styleSheet.noTextSelection)},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),this.options.orientation===Ci.VERTICAL?e.addClass(this.styleSheet.verticalDivider):e.addClass(this.styleSheet.horizontalDivider)},e}(Ac))||gu,Oc=(mu=tt(Cc))(yu=function(t){function e(e){var n;return n=t.call(this,e)||this,n.uncollapsedSizes=new WeakMap,n}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign({autoCollapse:!1},t.prototype.getDefaultOptions.call(this))},n.getDividerBarClass=function(){return Lc},n.extraNodeAttributes=function(t){this.getOrientation()===Ci.VERTICAL?t.addClass(this.styleSheet.verticalSection):t.addClass(this.styleSheet.horizontalSection)},n.getOrientation=function(){return this.options.orientation||Ci.VERTICAL},n.getDimension=function(t){return this.getOrientation()===Ci.HORIZONTAL?t.getWidth():t.getHeight()},n.setDimension=function(t,e){this.getOrientation()===Ci.HORIZONTAL?t.setWidth(e):t.setHeight(e)},n.getMinDimension=function(t){return this.getOrientation()===Ci.HORIZONTAL&&t.options.hasOwnProperty("minWidth")?t.options.minWidth:this.getOrientation()===Ci.VERTICAL&&t.options.hasOwnProperty("minHeight")?t.options.minHeight:this.getDimension(this)/this.panels.length/4},n.getHiddenDivider=function(t){for(var e,n=t;n<this.panels.length-1;n+=1){if(this.dividers[n].hasClass("hidden"))e=this.dividers[n];else if(!this.dividers[n].hasClass("hidden"))break;if(e&&!this.panels[n+1].hasClass("hidden"))return e}e=null;for(var i=t-1;i>=0;i-=1){if(this.dividers[i].hasClass("hidden"))e=this.dividers[i];else if(!this.dividers[i].hasClass("hidden"))break;if(e&&!this.panels[i].hasClass("hidden"))return e}return null},n.getVisibleDivider=function(t){for(var e=t;e<this.panels.length-1;e+=1)if(!this.dividers[e].hasClass("hidden"))return this.dividers[e];for(var n=t-1;n>=0;n-=1)if(!this.dividers[n].hasClass("hidden"))return this.dividers[n];return null},n.collapseChild=function(t){var e=this.getDimension(this),n=this.panels[t],i=this.getDimension(n);this.uncollapsedSizes.set(n,i);for(var r=-1,o=this.panels,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var u=l;this.getDimension(u)&&!u.options.fixed&&(r+=1)}var c=this.getVisibleDivider(t);c&&c.hide(),this.setDimension(n,"0"),n.hide();for(var h=this.panels,p=Array.isArray(h),d=0,h=p?h:h[Symbol.iterator]();;){var f;if(p){if(d>=h.length)break;f=h[d++]}else{if(d=h.next(),d.done)break;f=d.value}var g=f;0===this.getDimension(g)||g.options.fixed||this.setDimension(g,100*(this.getDimension(g)+i/r)/e-.5/this.children.length+"%")}this.recalculateDimensions()},n.expandChild=function(t){for(var e=this.getDimension(this),n=this.panels[t],i=1,r=this.panels,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;this.getDimension(l)&&!l.options.fixed&&(i+=1)}var u=this.getHiddenDivider(t);u&&u.show(),n.show();for(var c=this.uncollapsedSizes.get(n),h=this.panels,p=Array.isArray(h),d=0,h=p?h:h[Symbol.iterator]();;){var f;if(p){if(d>=h.length)break;f=h[d++]}else{if(d=h.next(),d.done)break;f=d.value}var g=f;this.getDimension(g)&&!g.options.fixed&&this.setDimension(g,100*(this.getDimension(g)-c/(i-1))/e-this.panels.length/2+"%")}this.setDimension(n,100*c/e+"%"),this.recalculateDimensions()},n.isCollapsed=function(t){return!this.getDimension(t)},n.toggleChild=function(t){this.isCollapsed(this.panels[t])?this.expandChild(t):this.collapseChild(t)},n.recalculateDimensions=function(){if(this.isInDocument()){for(var t=this.getDimension(this),e=0,n=0,i=this.panels,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;a.options.fixed?e+=this.getDimension(a):n+=this.getDimension(a)}for(var l=(t-e)/t,u=this.panels,c=Array.isArray(u),h=0,u=c?u:u[Symbol.iterator]();;){var p;if(c){if(h>=u.length)break;p=u[h++]}else{if(h=u.next(),h.done)break;p=h.value}var d=p;d.options.fixed||d.hasClass("hidden")||this.setDimension(d,100*this.getDimension(d)*l/n+"%")}}},n.getPreviousUnfixedChild=function(t){for(var e=t;e>=0;e-=1){var n=this.panels[e];if(!n.hasClass("hidden")&&!n.options.fixed)return n}return null},n.getNextUnfixedChild=function(t){for(var e=t+1;e<this.panels.length;e+=1){var n=this.panels[e];if(!n.hasClass("hidden")&&!n.options.fixed)return n}return null},n.dividerMouseDownFunction=function(t){var e=this,n=t.domEvent,i=this.dividers.indexOf(t.divider),r=this.getPreviousUnfixedChild(i),o=this.getNextUnfixedChild(i);if(r&&o){for(var s=this.getDimension(this),a=s,l=this.panels,u=Array.isArray(l),c=0,l=u?l:l[Symbol.iterator]();;){var h;if(u){if(c>=l.length)break;h=l[c++]}else{if(c=l.next(),c.done)break;h=c.value}var p=h;p.options.fixed&&(a-=this.getDimension(p))}var d=this.getOrientation()===Ci.HORIZONTAL?function(t){return Ui.getEventX(t)}:function(t){return Ui.getEventY(t)},f=this.addListener("dividerMousemove",function(t){var a=d(t)-d(n),l=e.getDimension(o)-a,u=e.getDimension(r)+a;if(e.options.autoCollapse){if(a>0&&o.collapsed||a<0&&r.collapsed)return;if(a<0&&o.collapsed&&e.options.autoCollapse)return void e.expandChild(i+1);if(a>0&&r.collapsed)return void e.expandChild(i);if(l<e.getMinDimension(o))return void e.collapseChild(i+1);if(u<e.getMinDimension(r))return void e.collapseChild(i)}else if(l<e.getMinDimension(o)||u<e.getMinDimension(r))return;e.setDimension(o,100*l/s+"%"),e.setDimension(r,100*u/s+"%"),n=t}),g=this.addListener("dividerMouseup",function(){e.clearListeners&&e.clearListeners()});this.clearListeners=function(){f.remove(),g.remove(),e.clearListeners=null}}},n.onMount=function(){var t=this;this.addListener("dividerMousedown",function(e){return t.dividerMouseDownFunction(e)}),setTimeout(function(){t.recalculateDimensions()})},n.getChildrenToRender=function(){var t=[];this.dividers=[],this.panels=[];for(var e=!1,n=this.getDividerBarClass(),i=f(this.render()),r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;if(this.panels.length){var l="hidden";e&&!a.hasClass("hidden")&&(l="");var u=wi.createElement(n,{className:l,orientation:this.getOrientation()});t.push(u),this.dividers.push(u)}e|=!a.hasClass("hidden"),t.push(a),this.panels.push(a)}return t},e}(wi.Element))||yu,Rc=(bu=tt(Tc))(vu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){return this.options.orientation===Ci.VERTICAL?[wi.createElement(Qs,{icon:"ellipsis-h",className:this.styleSheet.verticalDots})]:[wi.createElement("div",null,wi.createElement(Qs,{ref:"rightButton",icon:"caret-right",className:this.styleSheet.arrowButton})),wi.createElement("div",null,wi.createElement(Qs,{icon:"bars",className:this.styleSheet.horizontalDots})),wi.createElement("div",null,wi.createElement(Qs,{ref:"leftButton",icon:"caret-left",className:this.styleSheet.arrowButton}))]},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.leftButton.addNodeListener("mousedown",function(t){t.stopPropagation()}),this.leftButton.addClickListener(function(){e.dispatch("collapsePrevious")}),this.rightButton.addNodeListener("mousedown",function(t){t.stopPropagation()}),this.rightButton.addClickListener(function(){e.dispatch("collapseNext")})},e}(Lc))||vu,Nc=(Su=tt(Tc))(wu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){var e=this.getGivenChildren()[0];t.addClass(this.styleSheet.barCollapsePanel);var n=e.options.size;this.collapsed&&(t.addClass(this.styleSheet.hiddenContent),n=this.options.collapsedSize),n&&(this.options.orientation===Ci.VERTICAL?t.setStyle("height",n):t.setStyle("width",n)),this.options.orientation===Ci.VERTICAL?t.setStyle("width","100%"):t.setStyle("height","100%")},n.getChildrenToRender=function(){this.collapsed=this.getGivenChildren()[0].options.collapsed;var t=0===this.parent.panels.indexOf(this),e=this.parent.panels.indexOf(this)===this.parent.panels.length-1,n=e?"left":"right",i=t?"right":"left";return[this.render(),wi.createElement("div",{ref:"collapsedBarTitle",style:{display:this.collapsed?"flex":" none"},className:this.styleSheet.collapsedBarTitle},wi.createElement("div",null,wi.createElement(Qs,{icon:"caret-"+n})),wi.createElement("div",{className:this.styleSheet.title},wi.createElement("div",null,this.options.title)),wi.createElement("div",null,wi.createElement(Qs,{icon:"caret-"+i})))]},n.toggle=function(){var t=this;this.collapsed?(this.collapsed=!1,this.removeClass(this.styleSheet.hiddenContent),this.collapsedBarTitle.setStyle("display","none")):(this.collapsed=!0,this.collapsedBarTitle.setStyle("display","flex"),setTimeout(function(){t.addClass(t.styleSheet.hiddenContent)},100))},n.onMount=function(){var t=this;this.collapsedBarTitle.addClickListener(function(){t.dispatch("expand")}),this.addListener("resize",function(){for(var e=f(t.render()),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}r.dispatch("resize")}})},e}(wi.Element))||wu,Ic=((Au=tt(Tc))(Eu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign({},t.prototype.getDefaultOptions.call(this),{collapsedSize:40,autoCollapse:!0})},n.getDividerBarClass=function(){return Rc},n.setDimension=function(t,e){this.getOrientation()===Ci.HORIZONTAL?t.setWidth(e):t.setHeight(e)},n.collapseChild=function(t){var e=this;this.clearListeners&&this.clearListeners(),this.addClass(this.styleSheet.paddingRemoved),this.addClass(this.styleSheet.animatedSectionDivider);var n=this.getDimension(this),i=this.panels[t],r=this.getDimension(i);this.uncollapsedSizes.set(i,r);for(var o=-1,s=this.panels,a=Array.isArray(s),l=0,s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}var c=u;c.collapsed||c.options.fixed||(o+=1)}this.setDimension(i,this.options.collapsedSize),i.toggle();for(var h=this.panels,p=Array.isArray(h),d=0,h=p?h:h[Symbol.iterator]();;){var f;if(p){if(d>=h.length)break;f=h[d++]}else{if(d=h.next(),d.done)break;f=d.value}var g=f;g.collapsed||g.options.fixed||this.setDimension(g,100*(this.getDimension(g)+(r-this.options.collapsedSize)/o)/n+"%")}setTimeout(function(){e.removeClass(e.styleSheet.animatedSectionDivider),e.recalculateDimensions()},1e3*this.styleSheet.transitionTime)},n.expandChild=function(t){var e=this;this.removeClass(this.styleSheet.paddingRemoved),this.addClass(this.styleSheet.animatedSectionDivider);for(var n=this.getDimension(this),i=this.panels[t],r=1,o=this.panels,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var u=l;u.collapsed||u.options.fixed||(r+=1)}var c=this.uncollapsedSizes.get(i);i.toggle();for(var h=this.panels,p=Array.isArray(h),d=0,h=p?h:h[Symbol.iterator]();;){var f;if(p){if(d>=h.length)break;f=h[d++]}else{if(d=h.next(),d.done)break;f=d.value}var g=f;this.getDimension(g)&&!g.options.fixed&&this.setDimension(g,100*(this.getDimension(g)-(c-this.options.collapsedSize)/(r-1))/n+"%")}this.setDimension(i,100*c/n+"%"),setTimeout(function(){e.removeClass(e.styleSheet.animatedSectionDivider),e.recalculateDimensions()},1e3*this.styleSheet.transitionTime)},n.getChildrenToRender=function(){var t=[];this.dividers=[],this.panels=[];for(var e=this.getDividerBarClass(),n=f(this.render()),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;if(s.options.collapsed&&this.addClass(this.styleSheet.paddingRemoved),this.panels.length){var a=wi.createElement(e,{orientation:this.getOrientation()});t.push(a),this.dividers.push(a)}var l=wi.createElement(Nc,{orientation:this.options.orientation,collapsedSize:this.options.collapsedSize,title:s.options.title||"..."},s);t.push(l),this.panels.push(l)}return t},n.onMount=function(){var e=this;t.prototype.onMount.call(this);for(var n=0;n<this.panels.length;n+=1)!function(t){var n=e.panels[t];e.attachListener(n,"expand",function(){e.uncollapsedSizes.set(n,e.getDimension(e)/e.panels.length),e.expandChild(t)})}(n);for(var n=0;n<this.dividers.length;n+=1)!function(t){e.attachListener(e.dividers[t],"collapseNext",function(){return e.collapseChild(t+1)}),e.attachListener(e.dividers[t],"collapsePrevious",function(){return e.collapseChild(t)})}(n)},e}(Oc)),(xu=tt(xc))(Cu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.dragMousedown=function(t){document.body.classList.add(this.styleSheet.noTextSelection),this.addClass(this.styleSheet.grabbing)},n.dragMouseup=function(t){document.body.classList.remove(this.styleSheet.noTextSelection),this.removeClass(this.styleSheet.grabbing)},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.grab)},n.render=function(){return[wi.createElement(ta,{ref:"collapseIcon",collapsed:!1,className:this.styleSheet.collapseIcon}),this.options.children]},n.setCollapsed=function(t){this.collapseIcon.setCollapsed(t)},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addListener("togglePanel",function(){e.collapseIcon.toggleCollapsed()})},e}(Ac))||Cu),kc=((Tu=tt(xc))(Lu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.accordion)},n.getChildrenToRender=function(){var t=[];this.dividers=[],this.panels=[];for(var e=f(this.render()),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r,s=o.getTitle?o.getTitle():o.options.title?o.options.title:"",a=wi.createElement(Ic,null,s);this.dividers.push(a),this.panels.push(o),t.push(a),t.push(o)}return t},n.getNextVisibleChild=function(t){for(var e=t;e<this.panels.length;e+=1)if(!this.panels[e].hasClass("hidden"))return this.panels[e];return null},n.getPreviousVisibleChild=function(t){for(var e=t-1;e>=0;e-=1)if(!this.panels[e].hasClass("hidden"))return this.panels[e];return null},n.dividerMousedownFunction=function(t){var e,n,i,r=this,o=t.domEvent,s=this.dividers.indexOf(t.divider),a=this.getPreviousVisibleChild(s),l=this.getNextVisibleChild(s);n=this.getHeight();for(var u=this.dividers,c=Array.isArray(u),h=0,u=c?u:u[Symbol.iterator]();;){var p;if(c){if(h>=u.length)break;p=u[h++]}else{if(h=u.next(),h.done)break;p=h.value}n-=p.getHeight()}i=0;for(var d=this.panels,f=Array.isArray(d),g=0,d=f?d:d[Symbol.iterator]();;){var m;if(f){if(g>=d.length)break;m=d[g++]}else{if(g=d.next(),g.done)break;m=g.value}var y=m;y.hasClass("hidden")||(i+=parseFloat(z(y.node,"flex")))}var b=this.addListener("dividerMousemove",function(t){if(e=!0,-1!=s&&l&&a){var u=(Ui.getEventY(t)-Ui.getEventY(o))*i/n,c=parseFloat(z(l.node,"flex")),h=parseFloat(z(a.node,"flex"));u=Math.sign(u)*Math.min(Math.abs(u),u>0?c:h),l.setStyle("flex",c-u),a.setStyle("flex",h+u),o=t,r.dispatch("dragging")}}),v=this.addListener("dividerMouseup",function(){e||(t.divider.dispatch("togglePanel"),r.toggleChild(r.panels[s])),b.remove(),v.remove(),r.dispatch("childrenStatusChange")})},n.toggleChild=function(t){for(var e=0,n=this.panels,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;s.hasClass("hidden")||(e+=parseFloat(z(s.node,"flex")))}if(e+=(t.hasClass("hidden")?1:-1)*parseFloat(z(t,"flex")),t.toggleClass("hidden"),e<1)for(var a=this.panels,l=Array.isArray(a),u=0,a=l?a:a[Symbol.iterator]();;){var c;if(l){if(u>=a.length)break;c=a[u++]}else{if(u=a.next(),u.done)break;c=u.value}var h=c;!h.hasClass("hidden")&&parseFloat(z(h.node,"flex"))<1&&h.setStyle("flex",1)}},n.getChildrenStatus=function(){for(var t=[],e=this.panels,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;t.push({flex:z(o.node,"flex"),collapsed:o.hasClass("hidden")})}return t},n.getDefaultChildrenStatus=function(){for(var t=[],e=this.panels,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){if(n){if(i>=e.length)break;e[i++]}else{if(i=e.next(),i.done)break;i.value}t.push({flex:1,collapsed:!1})}return t},n.setChildrenStatus=function(t){for(var e=0;e<t.length;e+=1){this.panels[e].setStyle("flex",t[e].flex);var n=t[e].collapsed;n?this.panels[e].addClass("hidden"):this.panels[e].removeClass("hidden"),this.dividers[e].setCollapsed(n)}},n.onMount=function(){var t=this;this.addListener("dividerMousedown",function(e){return t.dividerMousedownFunction(e)})},e}(wi.Element)),Ou=Mu=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.navigatorHeight="35px",e.hoverColor="#364251",e.transitionTime="0.3",e.textColor="inherit",e.navigatorTransitionTime="0s",p(e,"carousel",Ru,h(e)),p(e,"container",Nu,h(e)),p(e,"navigator",Iu,h(e)),p(e,"navigatorIcon",ku,h(e)),e}return r(e,t),e}(Fi),Ru=d(Ou.prototype,"carousel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"hidden"}}}),Nu=d(Ou.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{whiteSpace:"nowrap",height:"100%",">*":{width:"100%",height:"100%",display:"inline-block",verticalAlign:"top"},">:first-child":{width:"0",transition:"margin-left ease "+this.transitionTime+"s"}}}}),Iu=d(Ou.prototype,"navigator",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:this.navigatorHeight,display:"flex"}}}),ku=d(Ou.prototype,"navigatorIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.textColor,fontSize:"180% !important",textAlign:"center",cursor:"pointer",flex:"1",fontWeight:"900 !important",lineHeight:this.navigatorHeight+" !important",transition:"background-color "+this.navigatorTransitionTime,":hover":{backgroundColor:this.hoverColor}}}}),Ou),Mc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.extraNodeAttributes=function(t){t.addClass(this.styleSheet.navigator)},i.render=function(){var t=this;return[wi.createElement(Qs,{icon:"angle-left",className:this.styleSheet.navigatorIcon,onClick:function(){t.parent.dispatch("previousPage")}}),wi.createElement(Qs,{icon:"angle-right",className:this.styleSheet.navigatorIcon,onClick:function(){t.parent.dispatch("nextPage")}})]},n(e,[{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),e}(wi.Element),Pc=(Pu=tt(kc))(Du=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.carousel)},n.appendChild=function(t,e){this.options.children.push(t),e&&this.setActive(t),t.mount(this,null),this.redraw()},n.eraseChild=function(t){this.options.children.indexOf(t)===this.options.children.length-1&&this.setActiveIndex(Math.max(this.options.children.length-2,0)),this.options.children.splice(this.options.children.indexOf(t),1),this.redraw()},n.render=function(){if(null==this.activeIndex){this.activeIndex=0;for(var t=0;t<this.options.children.length;t+=1)if(this.options.children[t].options.active){this.activeIndex=t;break}}return[wi.createElement(Mc,{className:this.options.children.length>1?"":"hidden"}),wi.createElement("div",{className:this.styleSheet.container},wi.createElement("div",{ref:"pusher",style:{marginLeft:100*-this.activeIndex+"%"}}),this.options.children)]},n.setActive=function(t){this.setActiveIndex(this.options.children.indexOf(t))},n.setActiveIndex=function(t){this.activeIndex=t,this.pusher.setStyle("margin-left",-t*this.getWidth()+"px")},n.getActive=function(){return this.options.children[this.activeIndex]},n.onMount=function(){var t=this;this.addListener("nextPage",function(){return t.setActiveIndex((t.activeIndex+1)%t.options.children.length)}),this.addListener("previousPage",function(){return t.setActiveIndex((t.activeIndex+t.options.children.length-1)%t.options.children.length)})},n.getOrientation=function(){return this.options.orientation||Ci.VERTICAL},e}(wi.Element))||Du,Dc=(zu=ju=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.rowHeight=52,p(e,"default",_u,h(e)),p(e,"tableContainer",Bu,h(e)),p(e,"scrollablePanel",Hu,h(e)),p(e,"fakePanel",Fu,h(e)),p(e,"footer",Uu,h(e)),p(e,"jumpToButton",Wu,h(e)),p(e,"table",Vu,h(e)),e}return r(e,t),e}(Fi),_u=d(zu.prototype,"default",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"auto",overflowY:"hidden"}}}),Bu=d(zu.prototype,"tableContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",height:"100%",width:"100%",position:"relative"}}}),Hu=d(zu.prototype,"scrollablePanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"auto",height:"calc(100% - 30px)",width:"100%"}}}),Fu=d(zu.prototype,"fakePanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),Uu=d(zu.prototype,"footer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"bold",textAlign:"center",position:"absolute",bottom:"0px",width:"100%",whiteSpace:"nowrap",paddingBottom:"15px",paddingTop:"3px"}}}),Wu=d(zu.prototype,"jumpToButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"5px",padding:"2.3px 10px",verticalAlign:"bottom"}}}),Vu=d(zu.prototype,"table",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"calc(100% - 15px)",marginBottom:"0px",top:"0px",position:"absolute",pointerEvents:"none",">tbody>tr>td":{height:this.rowHeight+"px !important",whiteSpace:"nowrap !important"}}}}),Gu=Xu=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.cellStyle={padding:"8px",lineHeight:"1.42857143",verticalAlign:"top",borderTop:"1px solid #ddd"},e.theadCellStyle={borderBottom:"2px solid #ddd",borderTop:"0"},p(e,"table",Yu,h(e)),p(e,"tableStripped",Ku,h(e)),e}return r(e,t),e}(Fi),Yu=d(Gu.prototype,"table",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",maxWidth:"100%",marginBottom:"20px",borderSpacing:"0",borderCollapse:"collapse",">*>*>td":this.cellStyle,">*>*>th":this.cellStyle,">*>thead>*>*":this.theadCellStyle}}}),Ku=d(Gu.prototype,"tableStripped",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">tbody>tr:nth-of-type(odd)":{
backgroundColor:"#f5f5f5"}}}}),Gu),zc=(qu=$u=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"sortIcon",Ju,h(e)),p(e,"table",Zu,h(e)),e}return r(e,t),e}(Dc),Ju=d(qu.prototype,"sortIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",right:"0px",bottom:"0px",visibility:"hidden",float:"right"}}}),Zu=d(qu.prototype,"table",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={},t[" th:hover ."+this.sortIcon.getClassName()]={visibility:"inherit"},t[" th:hover"]={cursor:"pointer"},t}}),qu),_c=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){for(var t=[],e=this.options.columns,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;t.push(this.renderEntryCell(o))}return t},n.renderEntryCell=function(t){return wi.createElement("td",{style:t.cellStyle,key:t.id},t.value(this.options.entry,this.options.index))},e}(wi.Primitive("tr")),Bc=(Qu=tt(Dc))(tc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.setColumns(e.columns||[]),this.entries=e.entries||[]},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.table)},n.getRowClass=function(){return _c},n.getRowOptions=function(t){return{entry:t,columns:this.columns}},n.render=function(){return[wi.createElement("thead",null,this.renderTableHead()),wi.createElement("tbody",null,this.renderTableBody())]},n.renderTableHead=function(){return wi.createElement("tr",null,this.columns.map(this.renderHeaderCell,this))},n.getEntryKey=function(t,e){return null!=t.id?t.id:e},n.renderTableBody=function(){this.rows=[];for(var t=this.getEntries(),e=0;e<t.length;e+=1){var n=t[e],r=this.getRowClass(n);this.rows.push(wi.createElement(r,i({key:this.getEntryKey(n,e),index:e},this.getRowOptions(n),{parent:this})))}return this.rows},n.renderHeaderCell=function(t){return wi.createElement("th",{style:t.headerStyle,ref:"columnHeader"+t.id},this.renderColumnHeader(t))},n.renderColumnHeader=function(t){return"function"==typeof t.headerName?t.headerName():t.headerName},n.getEntries=function(){return this.entries||[]},n.columnDefaults=function(t,e){t.id=e},n.setColumns=function(t){this.columns=t;for(var e=0;e<this.columns.length;e+=1)this.columnDefaults(this.columns[e],e)},e}(wi.Primitive("table")))||tc,Hc=(ec=oc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"button",nc,h(e)),p(e,"collapsedButton",ic,h(e)),p(e,"heading",rc,h(e)),e}return r(e,t),e}(Fi),nc=d(ec.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",marginBottom:"0",fontSize:"16px",color:"inherit",cursor:"pointer",":hover":{color:"inherit"},":after":{fontFamily:"'FontAwesome'",content:'"\\f107"',color:"grey",float:"left",fontWeight:"bold",width:"0.7em",fontSize:"130%",verticalAlign:"top",height:"0.7em",marginTop:"-0.2em",textAlign:"center"}}}}),ic=d(ec.prototype,"collapsedButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":after":{content:'"\\f105" !important'}}}}),rc=d(ec.prototype,"heading",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"10px 15px",backgroundColor:"initial !important"}}}),ec),Fc=new Hc,Uc=(pt(_c),function(t,e){var n;return void 0===e&&(e=ea),tt(zc)(n=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var i=n.prototype;return i.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.table)},i.setOptions=function(e){t.prototype.setOptions.call(this,e),this.columnSortingOrder=e.columnSortingOrder||[]},i.onMount=function(){var e=this;t.prototype.onMount.call(this);for(var n=this.columns,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if("break"===function(){if(i){if(r>=n.length)return"break";o=n[r++]}else{if(r=n.next(),r.done)return"break";o=r.value}var t=o;e["columnHeader"+t.id].addClickListener(function(){e.sortByColumn(t),e.dispatch("reorder")})}())break}},i.renderColumnHeader=function(n){var i=wi.createElement(e,{className:this.styleSheet.sortIcon});return this.sortBy===n&&(i=this.sortDescending?wi.createElement(e,{className:this.styleSheet.sortIcon,style:{visibility:"inherit"},direction:Ti.DOWN}):wi.createElement(e,{className:this.styleSheet.sortIcon,style:{visibility:"inherit"},direction:Ti.UP})),wi.createElement("div",{style:{position:"relative"}},t.prototype.renderColumnHeader.call(this,n)," ",i)},i.sortByColumn=function(t){t===this.sortBy?this.sortDescending=1!=this.sortDescending:this.sortDescending=!0,this.sortBy=t,this.redraw()},i.getComparator=function(){var t=this;if(!this.sortBy&&0===this.columnSortingOrder.length)return null;var e=function(t,e,n){if(!n)return 0;var i=n.rawValue?n.rawValue(t):n.value(t),r=n.rawValue?n.rawValue(e):n.value(e);return n.cmp(i,r)};return function(n,i){var r;if(t.sortBy&&0!==(r=e(n,i,t.sortBy)))return t.sortDescending?-r:r;for(var o=0;o<t.columnSortingOrder.length;o+=1)if(r=e(n,i,t.columnSortingOrder[o]),t.columnSortingOrder[o].sortDescending&&(r=-r),0!==r)return r;return 0}},i.sortEntries=function(t){var e=t.slice();return this.getComparator()&&e.sort(this.getComparator()),e},i.getEntries=function(){return this.sortEntries(t.prototype.getEntries.call(this))},i.columnDefaults=function(e,n){t.prototype.columnDefaults.call(this,e,n),e.hasOwnProperty("cmp")||(e.cmp=b)},n}(t))||n}(Bc)),Wc=function(){function t(t,e,n,i){void 0===i&&(i={}),this.name=t,this.pluralName=t+"s",this.baseUnit=e,this.multiplier=n,this.milliseconds=(e&&e.getMilliseconds()||1)*n,this.variableMultiplier=i.variableMultiplier||!1,this.variableDuration=this.variableMultiplier||e&&e.isVariable()}t.toTimeUnit=function(e){return e instanceof t?e:this.CANONICAL[e]};var e=t.prototype;return e.valueOf=function(){return this.milliseconds},e.getName=function(){return this.name},e.getPluralName=function(){return this.pluralName},e.getMilliseconds=function(){return this.milliseconds},e.isVariable=function(){return this.variableDuration},e.hasVariableMultiplier=function(){return this.variableMultiplier},e.getDateValue=function(t){},e.setDateValue=function(t,e){},t}();Wc.CANONICAL={},Wc.ALL=[],Wc.FIXED_DURATION=[],Wc.VARIABLE_DURATION=[],Wc.MILLISECOND=new Wc("millisecond",null,1),Wc.SECOND=new Wc("second",Wc.MILLISECOND,1e3),Wc.MINUTE=new Wc("minute",Wc.SECOND,60),Wc.HOUR=new Wc("hour",Wc.MINUTE,60),Wc.DAY=new Wc("day",Wc.HOUR,24,{variableMultiplier:!0}),Wc.WEEK=new Wc("week",Wc.DAY,7),Wc.MONTH=new Wc("month",Wc.DAY,30,{variableMultiplier:!0}),Wc.QUARTER=new Wc("quarter",Wc.MONTH,3),Wc.TRIMESTER=new Wc("trimester",Wc.MONTH,4),Wc.SEMESTER=new Wc("semester",Wc.MONTH,6),Wc.YEAR=new Wc("year",Wc.DAY,365,{variableMultiplier:!0}),Wc.DAY.dateMethodSuffix="Date",Wc.MONTH.dateMethodSuffix="Month",Wc.YEAR.dateMethodSuffix="FullYear";var Vc=function(){function t(e){if(e instanceof self.Date)throw new Error("Can't automatically transform Date to Duration, use date.getTime() if you really want to");if(A(e))return void(this.milliseconds=e);if(e instanceof t)return void Object.assign(this,e);if(E(e)){this.milliseconds=0;for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],o=Wc.CANONICAL[r];if(!o)throw Error("Unknown time unit:",r);o.isVariable()?(this[r]=parseInt(e[r]),this.relativeDuration=!0):this.milliseconds+=parseFloat(e[r])*o.milliseconds}}else{if(arguments.length>0)throw Error.apply(void 0,["Invalid Duration arguments: "].concat(Array.prototype.slice.call(arguments)));this.milliseconds=0}}t.toDuration=function(e){return e instanceof t?e:new this(e)};var e=t.prototype;return e.increment=function(t){t=this.constructor.toDuration(t);for(var e in t)e in Wc.CANONICAL&&(this.hasOwnProperty(e)?this[e]+=t[e]:this[e]=t[e]);return this},e.add=function(t){return this.clone().increm(t)},e.subtract=function(t){return t=this.constructor.toDuration(t).negate(),this.add(t)},e.isAbsolute=function(){return!this.isVariable()},e.isVariable=function(){return this.relativeDuration},e.negate=function(){var e=new t(this);for(var n in e)n in Wc.CANONICAL&&(e[n]=-e[n]);return e},e.abs=function(){return new t(Math.abs(+this))},e.clone=function(){return new t(this)},e.valueOf=function(){return this.milliseconds},e.toNanoseconds=function(){return Math.floor(1e6*+this)},e.toMilliseconds=function(){return Math.floor(+this)},e.getMilliseconds=function(){return this.toMilliseconds()%1e3},e.toSeconds=function(){return Math.floor(+this/1e3)},e.getSeconds=function(){return this.toSeconds()%60},e.toMinutes=function(){return Math.floor(+this/6e4)},e.getMinutes=function(){return this.toMinutes()%60},e.toHours=function(){return Math.floor(+this/36e5)},e.getHours=function(){return this.toHours()%24},e.toDays=function(){return Math.floor(+this/864e5)},e.toMonths=function(){return Math.floor(+this/2592e6)},e.toYears=function(){return Math.floor(+this/31536e6)},e.toString=function(t){},t}();!function(){for(var t in Wc){var e=Wc[t];e instanceof Wc&&dt(t,e)}}();var jc,Gc=Math.pow(2,32),Yc=self.Date,Kc=function(t){if(!t.toString().includes(" extends ")){for(var e=t.__proto__,n=Object.getOwnPropertySymbols(t).concat(Object.getOwnPropertyNames(t)),i=t.create||function(){return I.apply(void 0,[e,i].concat(Array.prototype.slice.call(arguments)))},r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a,u=Object.getOwnPropertyDescriptor(t,l);Object.defineProperty(i,l,u)}return i.prototype=t.prototype,i.__proto__=t.__proto__,i.prototype.constructor=i,i}}(jc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t),e.create=function(t){return 1===arguments.length&&A(t)&&t<Gc?I(Yc,e,1e3*t):I.apply(void 0,[Yc,e].concat(Array.prototype.slice.call(arguments)))},e.toDate=function(t){return t instanceof e?t:new this(t)},e.now=function(){return new this(Yc.now())};var n=e.prototype;return n.toDate=function(){return this},e.fromUnixMilliseconds=function(t){return this.create(new Yc(t))},e.fromUnixSeconds=function(t){return this.fromUnixMilliseconds(1e3*t)},e.fromHighResTimestamp=function(t){return this.fromUnixMilliseconds(t+self.performance.timing.navigationStart)},e.unix=function(t){return this.fromUnixSeconds(t)},n.set=function(t){t=this.constructor.toDate(t),this.setTime(t.setTime())},n.clone=function(){return new this.constructor(this.getTime())},n.toUnix=function(){return this.getTime()/1e3},n.unix=function(){return Math.floor(this.toUnix())},n.isBefore=function(t){return this.getTime()<e.toDate(t).getTime()},n.equals=function(t){return this.getTime()===e.toDate(t).getTime()},n.get=function(t){return t=Wc.toTimeUnit(t),t.getDateValue(this)},n.isSame=function(t,e){return e?(e=Wc.toTimeUnit(e),t=this.constructor.toDate(t),!(this.diff(t)>=2*e)&&this.get(e)==t.get(e)):this.equals(t)},n.isAfter=function(t){return this.getTime()>e.toDate(t).getTime()},n.isSameOrBefore=function(t){return this.isBefore(t)||this.equals(t)},n.isSameOrAfter=function(t){return this.isAfter(t)||this.equals(t)},n.isBetween=function(t,e){return this.isSameOrAfter(t)&&this.isSameOrBefore(e)},n.getWeekDay=function(){return this.getDay()},n.addUnit=function(t,e){if(void 0===e&&(e=1),t=Wc.toTimeUnit(t),e=parseInt(e),!t.isVariable())return this.setTime(this.getTime()+t.getMilliseconds()*e),this;for(;!t.dateMethodSuffix;)e*=t.multiplier,t=t.baseUnit;var n=t.dateMethodSuffix,i=this["get"+n]();return this["set"+n](i+e),this},e.min=function(){for(var t=this.constructor.toDate(arguments[0]),e=1;e<arguments.length;e++){var n=this.constructor.toDate(arguments[e]);n.isBefore(t)&&(t=n)}return t},e.max=function(){for(var t=this.constructor.toDate(arguments[0]),e=1;e<arguments.length;e++){var n=this.constructor.toDate(arguments[e]);n.isAfter(t)&&(t=n)}return t},n.capUp=function(t){t=this.constructor.toDate(t),this.isAfter(t)&&this.set(t)},n.capDown=function(t){t=this.constructor.toDate(t),this.isBefore(t)&&this.set(t)},n.roundDown=function(t){for(t=Wc.toTimeUnit(t);t=t.baseUnit;)this["set"+t.dateMethodSuffix](0);return this},n.roundUp=function(t){var e=this.clone().roundDown(t);return this.equals(e)?(this.set(e),this):(this.addUnit(t),this.roundDown(t))},n.round=function(t){var e=this.clone().roundUp(t),n=this.clone().roundDown(t);return this.diff(e)<=this.diff(n)?this.setTime(e.getTime()):this.setTime(n.getTime()),this},n.add=function(t){if(t=Vc.toDuration(t),t.isAbsolute())return this.setTime(this.getTime()+t.toMilliseconds()),this;for(var e in t){var n=Wc.CANONICAL[e];n&&this.addUnit(n,t[e])}return this},n.subtract=function(t){return t=Vc.toDuration(t).negate(),this.add(t)},n.diffDuration=function(t){return new Vc(this.diff(t))},n.diff=function(t){return t=this.constructor.toDate(t),Math.abs(+this-t)},n.locale=function(t){return this},e.splitToTokens=function(t){for(var e=[],n=null,i=!1,r=!1,o=0;o<t.length;o++){var s=t.charCodeAt(o);if(125===s&&i)i=!1,n=null;else if(93===s&&r)r=!1,n=null;else if(i||r)e[e.length-1]+=t[o];else if(123===s)i=!0,e.push("");else if(91===s)r=!0,e.push("");else{var a=65<=s&&s<=90||97<=s&&s<=122;a===n?e[e.length-1]+=t[o]:e.push(t[o]),n=a}}return(i||r)&&console.warn("Unfinished escaped sequence!"),e},n.evalToken=function(t){var e=this.constructor.tokenFormattersMap.get(t);return e?e(this):t},n.format=function(t){var e=this;void 0===t&&(t="ISO");var n=this.constructor.splitToTokens(t);return n=n.map(function(t){return e.evalToken(t)}),n.join("")},n.isValid=function(){return"Invalid Date"!==this.toString()},n.utc=function(){return this.constructor.fromUnixMilliseconds(+this+60*this.getTimezoneOffset()*1e3)},n.isLeapYear=function(){var t=this.getFullYear();return t%4==0&&(t%100!=0||t%400==0)},n.daysInMonth=function(){return new Yc(this.getFullYear(),this.getMonth()+1,0).getDate()},n.getDaysCountPerMonth=function(t){return[31,28+this.isLeapYear(),31,30,31,30,31,31,30,31,30,31][t]},n.getDayInYear=function(){for(var t=this.getMonth(),e=0,n=0;n<t;n+=1)e+=this.getDaysCountPerMonth(n);return e+this.getDate()-1},n.getWeekInYear=function(){return(this.getDayInYear()-this.getWeekDay())/7},e}(Yc))||jc;Vc.prototype.format=function(t){return Kc.fromUnixMilliseconds(this.toMilliseconds()).utc().format(t)};var Xc=["Su","Mo","Tu","We","Th","Fr","Sa"],qc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Jc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Zc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$c=["January","February","March","April","May","June","July","August","September","October","November","December"];Kc.tokenFormattersMap=new Map([["ISO",function(t){return t.toISOString()}],["Y",function(t){return t.getFullYear()}],["YY",function(t){return O(t.getFullYear()%100,2)}],["YYYY",function(t){return t.getFullYear()}],["M",function(t){return t.getMonth()+1}],["MM",function(t){return O(t.getMonth()+1,2)}],["MMM",function(t){return Zc[t.getMonth()]}],["MMMM",function(t){return $c[t.getMonth()]}],["D",function(t){return t.getDate()}],["Do",function(t){return N(t.getDate())}],["DD",function(t){return O(t.getDate(),2)}],["d",function(t){return t.getWeekDay()}],["do",function(t){return N(t.getWeekDay())}],["dd",function(t){return Xc[t.getWeekDay()]}],["ddd",function(t){return qc[t.getWeekDay()]}],["dddd",function(t){return Jc[t.getWeekDay()]}],["H",function(t){return t.getHours()}],["HH",function(t){return O(t.getHours(),2)}],["h",function(t){return t.getHours()%12?t.getHours()%12:12}],["hh",function(t){return O(t.getHours()%12?t.getHours()%12:12,2)}],["m",function(t){return t.getMinutes()}],["mm",function(t){return O(t.getMinutes(),2)}],["s",function(t){return t.getSeconds()}],["ss",function(t){return O(t.getSeconds(),2)}],["S",function(t){return Math.floor(t.getMilliseconds()/100)}],["SS",function(t){return O(Math.floor(t.getMilliseconds()/10),2)}],["SSS",function(t){return O(t.getMilliseconds(),3)}],["ms",function(t){return O(t.getMilliseconds(),3)}],["aa",function(t){return t.getHours()>12?"pm":"am"}],["AA",function(t){return t.getHours()>12?"PM":"AM"}],["LL",function(t){return t.format("MMMM Do, YYYY")}]]);var Qc,th,eh,nh,ih,rh,oh,sh,ah,lh,uh,ch={now:function(){return Kc().subtract(this.getOffset())},getOffset:function(){return this.offset},set:function(t,e){void 0===e&&(e=!1),e&&null!=this.offset||(this.offset=Date.now()-new Kc(t))},setPageLoadTime:function(t,e){void 0===e&&(e=0),this.serverPageLoad=t,this.offset=performance.timing.responseStart-1e3*t}},hh=(Qc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t),e.requireAce=function(t){throw Error("You need to implement requireAce")};var n=e.prototype;return n.isLoaded=function(){return!!this.getAce()},n.setOptions=function(e){var n={aceMode:"text",readOnly:!1,aceTheme:"dawn",aceKeyboardHandler:"ace",fontSize:14,tabSize:4,showLineNumber:!0,showPrintMargin:!1,printMarginSize:80};e=Object.assign(n,e),t.prototype.setOptions.call(this,e),this.options.aceMode&&(this.options.aceMode=this.options.aceMode.toLowerCase()),"cpp"!==this.options.aceMode&&"c"!==this.options.aceMode||(this.options.aceMode="c_cpp"),this.getAce()&&this.applyAceOptions()},n.redraw=function(){if(this.getAce())return this.aceResize(),void this.applyRef();t.prototype.redraw.call(this)},n.whenLoaded=function(t){this.isLoaded()?t():this.addListenerOnce("aceReady",t)},n.onMount=function(){var t=this;if(this.addListener("resize",function(){t.aceResize()}),this.addListener("change",function(){t.aceResize()}),!window.ace)return void this.constructor.requireAce(function(){t.onDelayedMount()});this.onDelayedMount()},n.onDelayedMount=function(){var t=this;this.ace=window.ace.edit(this.node),this.getAce().$blockScrolling=1/0,this.resolveQueuedMethods(),this.applyAceOptions(),this.getAce().renderer.$textLayer.addEventListener("changeCharacterSize",function(e){t.aceResize()}),this.dispatch("aceReady")},n.getAce=function(){return this.ace},n.getValue=function(){return this.getAce().getValue()},n.applyAceOptions=function(){var t=this;if(this.setAceMode(this.options.aceMode),this.setAceKeyboardHandler(this.options.aceKeyboardHandler),this.setAceTheme(this.options.aceTheme),this.setAceFontSize(this.options.fontSize),this.setAceTabSize(this.options.tabSize),this.setAceLineNumberVisible(this.options.showLineNumber),this.setAcePrintMarginVisible(this.options.showPrintMargin),this.setAcePrintMarginSize(this.options.printMarginSize),this.setReadOnly(this.options.readOnly),this.setUseWrapMode(this.options.lineWrapping||!1),this.options.numLines&&(this.options.maxLines=this.options.minLines=this.options.numLines),this.options.maxLines&&this.setAceOptions({maxLines:this.options.maxLines}),this.options.minLines&&this.setAceOptions({minLines:this.options.minLines}),this.options.value&&this.setValue(this.options.value,-1),this.options.hasOwnProperty("enableBasicAutocompletion")||this.options.hasOwnProperty("enableLiveAutocompletion")){require(["/static/js/ext/ace/ext-language_tools.js"],function(){t.setBasicAutocompletion(t.options.enableBasicAutocompletion),t.setLiveAutocompletion(t.options.enableLiveAutocompletion),t.setSnippets(t.options.enableSnippets)})}},n.aceResize=function(){this.getAce().resize()},n.setValue=function(t,e){this.apiChange=!e,this.getAce().setValue(t,-1),this.apiChange=!1},n.setAceOptions=function(t){this.getAce().setOptions(t)},n.setReadOnly=function(t){this.getAce().setReadOnly(t)},n.setAceMode=function(t){t.hasOwnProperty("aceMode")&&(t=t.aceMode),this.getAce().getSession().setMode("ace/mode/"+t)},n.getAceKeyboardHandler=function(){return this.getAce().$keybindingId},n.setAceKeyboardHandler=function(t){t.hasOwnProperty("aceName")&&(t=t.aceName),this.getAce().setKeyboardHandler("ace/keyboard/"+t)},n.getAceMode=function(){return this.getAce().getSession().getMode()},n.setAceTheme=function(t){t.hasOwnProperty("aceName")&&(t=t.aceName),this.getAce().setTheme("ace/theme/"+t)},n.getAceTheme=function(){return this.getAce().getTheme()},n.setAceFontSize=function(t){this.getAce().setOptions({fontSize:t+"px"})},n.getAceFontSize=function(){return this.getAce().getFontSize()},n.setAceTabSize=function(t){this.getAce().setOptions({tabSize:t})},n.getAceTabSize=function(){return this.getAce().getOption("tabSize")},n.setAceLineNumberVisible=function(t){this.getAce().renderer.setShowGutter(t)},n.getAceLineNumberVisible=function(){return this.getAce().renderer.getShowGutter()},n.setAcePrintMarginVisible=function(t){this.getAce().setShowPrintMargin(t)},n.getAcePrintMarginVisible=function(){return this.getAce().getShowPrintMargin()},n.setAcePrintMarginSize=function(t){this.getAce().setPrintMarginColumn(t)},n.getAcePrintMarginSize=function(){return this.getAce().getPrintMarginColumn()},n.setBasicAutocompletion=function(t){this.getAce().setOptions({enableBasicAutocompletion:t})},n.setLiveAutocompletion=function(t){this.getAce().setOptions({enableLiveAutocompletion:t})},n.setSnippets=function(t){this.getAce().setOptions({enableSnippets:t})},n.setAnnotations=function(t){this.getAce().getSession().setAnnotations(t)},n.setUseWrapMode=function(t){this.getAce().getSession().setUseWrapMode(t)},n.setIndentedSoftWrap=function(t){this.getAce().setOption("indentedSoftWrap",t)},n.blockScroll=function(){this.getAce().$blockScrolling=1/0},n.setFoldStyle=function(t){this.getAce().getSession().setFoldStyle(t)},n.setHighlightActiveLine=function(t){this.getAce().setHighlightActiveLine(t)},n.setHighlightGutterLine=function(t){this.getAce().setHighlightGutterLine(t)},n.setShowGutter=function(t){this.getAce().renderer.setShowGutter(t)},n.getScrollTop=function(){return this.getAce().getSession().getScrollTop()},n.setScrollTop=function(t){this.getAce().getSession().setScrollTop(t)},n.addMarker=function(t,e,n,i){for(var r,o=this.constructor.AceRange,s=arguments.length,a=new Array(s>4?s-4:0),l=4;l<s;l++)a[l-4]=arguments[l];return(r=this.getAce().getSession()).addMarker.apply(r,[new o(t,e,n,i)].concat(a))},n.removeMarker=function(t){this.getAce().getSession().removeMarker(t)},n.getRendererLineHeight=function(){return this.getAce().renderer.lineHeight},n.getTextRange=function(t,e,n,i){var r=this.constructor.AceRange;return this.getAce().getSession().doc.getTextRange(new r(t,e,n,i))},n.setTextRange=function(t,e,n,i,r){var o=this.constructor.AceRange;this.getAce().getSession().replace(new o(t,e,n,i),r)},n.removeLine=function(t){var e=this.constructor.AceRange;this.getAce().getSession().getDocument().remove(new e(t,0,t+1,0))},n.insertAtLine=function(t,e){var n=this.getAce().session.getLine(t-1).length;this.getAce().gotoLine(t,n),this.insert(e)},n.replaceLine=function(t,e){var n=this.constructor.AceRange;this.getAce().getSession().getDocument().replace(new n(t,0,t+1,0),e)},n.addAceSessionEventListener=function(t,e){this.getAce().getSession().addEventListener(t,e)},n.addAceSessionChangeListener=function(t){this.addAceSessionEventListener("change",t)},n.addAceChangeListener=function(t){this.getAce().on("change",t)},n.addAceEventListener=function(){var t;(t=this.getAce()).addEventListener.apply(t,arguments)},n.focus=function(){this.getAce().focus()},n.gotoEnd=function(){var t=this.getAce(),e=t.session.getLength()-1,n=t.session.getLine(e).length;t.gotoLine(e+1,n)},n.setUndoManager=function(t){this.getAce().getSession().setUndoManager(t)},n.setAceRendererOption=function(t,e){this.getAce().renderer.setOption(t,e)},n.insert=function(t){this.getAce().insert(t)},n.append=function(t){var e=this.getAce().getSession().getLength()-1;e<0&&(e=0);var n=this.getAce().getSession().getLine(e).length,i=this.getAce().isRowFullyVisible(e);this.getAce().getSession().insert({row:e,column:n},t),this.aceResize(),i&&this.getAce().scrollToLine(this.getAce().getSession().getLength()-1,!0,!0,function(){})},n.copyTextToClipboard=function(){this.getAce().selectAll(),this.getAce().focus(),document.execCommand("copy")},e}(function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.isLoaded=function(){throw Error("Not implemented!")},n.enqueueMethodCall=function(t,e){this.methodCallQueue=this.methodCallQueue||[],this.methodCallQueue.push([t,e])},n.resolveQueuedMethods=function(){if(!this.isLoaded())throw Error("Cannot process scheduled jobs, element not loaded");for(var t=this.methodCallQueue||[],e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i,r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var o=r;(i=o[0]).call.apply(i,[this].concat(o[1]))}delete this.methodCallQueue},e}(t)}(wi.Element)),d(Qc.prototype,"applyAceOptions",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"applyAceOptions"),Qc.prototype),d(Qc.prototype,"aceResize",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"aceResize"),Qc.prototype),d(Qc.prototype,"setValue",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setValue"),Qc.prototype),d(Qc.prototype,"setAceOptions",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceOptions"),Qc.prototype),d(Qc.prototype,"setReadOnly",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setReadOnly"),Qc.prototype),d(Qc.prototype,"setAceMode",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceMode"),Qc.prototype),d(Qc.prototype,"setAceKeyboardHandler",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceKeyboardHandler"),Qc.prototype),d(Qc.prototype,"setAceTheme",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceTheme"),Qc.prototype),d(Qc.prototype,"setAceFontSize",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceFontSize"),Qc.prototype),d(Qc.prototype,"setAceTabSize",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceTabSize"),Qc.prototype),d(Qc.prototype,"setAceLineNumberVisible",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceLineNumberVisible"),Qc.prototype),d(Qc.prototype,"setAcePrintMarginVisible",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAcePrintMarginVisible"),Qc.prototype),d(Qc.prototype,"setAcePrintMarginSize",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAcePrintMarginSize"),Qc.prototype),d(Qc.prototype,"setBasicAutocompletion",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setBasicAutocompletion"),Qc.prototype),d(Qc.prototype,"setLiveAutocompletion",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setLiveAutocompletion"),Qc.prototype),d(Qc.prototype,"setSnippets",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setSnippets"),Qc.prototype),d(Qc.prototype,"setAnnotations",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAnnotations"),Qc.prototype),d(Qc.prototype,"setUseWrapMode",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setUseWrapMode"),Qc.prototype),d(Qc.prototype,"setIndentedSoftWrap",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setIndentedSoftWrap"),Qc.prototype),d(Qc.prototype,"blockScroll",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"blockScroll"),Qc.prototype),d(Qc.prototype,"setFoldStyle",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setFoldStyle"),Qc.prototype),d(Qc.prototype,"setHighlightActiveLine",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setHighlightActiveLine"),Qc.prototype),d(Qc.prototype,"setHighlightGutterLine",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setHighlightGutterLine"),Qc.prototype),d(Qc.prototype,"setShowGutter",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setShowGutter"),Qc.prototype),d(Qc.prototype,"setScrollTop",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setScrollTop"),Qc.prototype),d(Qc.prototype,"addMarker",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"addMarker"),Qc.prototype),d(Qc.prototype,"removeMarker",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"removeMarker"),Qc.prototype),d(Qc.prototype,"setTextRange",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setTextRange"),Qc.prototype),d(Qc.prototype,"removeLine",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"removeLine"),Qc.prototype),d(Qc.prototype,"insertAtLine",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"insertAtLine"),Qc.prototype),d(Qc.prototype,"replaceLine",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"replaceLine"),Qc.prototype),d(Qc.prototype,"addAceSessionEventListener",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"addAceSessionEventListener"),Qc.prototype),d(Qc.prototype,"addAceSessionChangeListener",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"addAceSessionChangeListener"),Qc.prototype),d(Qc.prototype,"addAceChangeListener",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"addAceChangeListener"),Qc.prototype),d(Qc.prototype,"addAceEventListener",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"addAceEventListener"),Qc.prototype),d(Qc.prototype,"focus",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"focus"),Qc.prototype),d(Qc.prototype,"gotoEnd",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"gotoEnd"),Qc.prototype),d(Qc.prototype,"setUndoManager",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setUndoManager"),Qc.prototype),d(Qc.prototype,"setAceRendererOption",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"setAceRendererOption"),Qc.prototype),d(Qc.prototype,"insert",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"insert"),Qc.prototype),d(Qc.prototype,"append",[gt],Object.getOwnPropertyDescriptor(Qc.prototype,"append"),Qc.prototype),Qc),ph=(th=nh=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"hideActive",eh,h(e)),e}return r(e,t),e}(Fi),eh=d(th.prototype,"hideActive",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" .ace_gutter-active-line":{display:"none"}," .ace_active-line":{display:"none"}," .ace_cursor":{display:"none"}}}}),th),dh=(ih=tt(ph))(rh=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e=Object.assign({fontSize:13,readOnly:!0,lineWrapping:!0},e),t.prototype.setOptions.call(this,e)},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.hideActive)},e}(hh))||rh,fh=(oh=uh=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"container",sh,h(e)),p(e,"topContainer",ah,h(e)),p(e,"bottomContainer",lh,h(e)),e}return r(e,t),e}(Fi),sh=d(oh.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),ah=d(oh.prototype,"topContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flexGrow:"1.5",width:"100%",backgroundColor:"#f0a150",display:"flex",justifyContent:"center",alignItems:"center"}}}),lh=d(oh.prototype,"bottomContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flexGrow:"2",width:"100%",fontSize:"18px",paddingTop:"20px",textAlign:"center"}}}),oh);yt.prototype={constructor:yt,reset:function(){this.s=this.t=0},add:function(t){bt(gh,t,this.t),bt(this,gh.s,this.s),this.s?this.t+=gh.t:this.s=gh.t},valueOf:function(){return this.s}};var gh=new yt,mh=1e-6,yh=Math.PI,bh=yh/2,vh=yh/4,Sh=2*yh,wh=180/yh,Ah=yh/180,Eh=Math.abs,xh=Math.atan,Ch=Math.atan2,Th=Math.cos,Lh=Math.ceil,Oh=Math.sin,Rh=Math.sign||function(t){return t>0?1:t<0?-1:0},Nh=Math.sqrt,Ih={Feature:function(t,e){Et(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Et(n[i].geometry,e)}},kh={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},
LineString:function(t,e){xt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)xt(n[i],e,0)},Polygon:function(t,e){Ct(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ct(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Et(n[i],e)}};mt(),mt(),mt();zt.invert=zt;var Mh,Ph,Dh,zh,_h,Bh,Hh,Fh,Uh=mt(),Wh=(function(t){1===t.length&&(t=Zt(t))}(Jt),regeneratorRuntime.mark(Qt)),Vh=ne(function(){return!0},oe,ae,[-yh,-bh]),jh=1e9,Gh=-jh,Yh=(mt(),mt()),Kh=mt(),Xh={point:At,lineStart:At,lineEnd:At,polygonStart:function(){Xh.lineStart=me,Xh.lineEnd=ve},polygonEnd:function(){Xh.lineStart=Xh.lineEnd=Xh.point=At,Yh.add(Eh(Kh)),Kh.reset()},result:function(){var t=Yh/2;return Yh.reset(),t}},qh=1/0,Jh=qh,Zh=-qh,$h=Zh,Qh={point:Se,lineStart:At,lineEnd:At,polygonStart:At,polygonEnd:At,result:function(){var t=[[qh,Jh],[Zh,$h]];return Zh=$h=-(Jh=qh=1/0),t}},tp=0,ep=0,np=0,ip=0,rp=0,op=0,sp=0,ap=0,lp=0,up={point:we,lineStart:Ae,lineEnd:Ce,polygonStart:function(){up.lineStart=Te,up.lineEnd=Le},polygonEnd:function(){up.point=we,up.lineStart=Ae,up.lineEnd=Ce},result:function(){var t=lp?[sp/lp,ap/lp]:op?[ip/op,rp/op]:np?[tp/np,ep/np]:[NaN,NaN];return tp=ep=np=ip=rp=op=sp=ap=lp=0,t}};Ne.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Sh)}},result:At};var cp,hp,pp,dp,fp,gp=mt(),mp={point:At,lineStart:function(){mp.point=Ie},lineEnd:function(){cp&&ke(hp,pp),mp.point=At},polygonStart:function(){cp=!0},polygonEnd:function(){cp=null},result:function(){var t=+gp;return gp.reset(),t}};Me.prototype={_radius:4.5,_circle:Pe(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Pe(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},_e.prototype={constructor:_e,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yp=16,bp=Th(30*Ah),vp=ze({point:function(t,e){this.stream.point(t*Ah,e*Ah)}}),Sp=function(t){return function(e,n){var i=Th(e),r=Th(n),o=t(i*r);return[o*r*Oh(e),o*Oh(n)]}}(function(t){return Nh(2/(1+t))});Sp.invert=$e(function(t){return 2*St(t/2)}),tn.invert=tn,rn.invert=$e(St);var wp=Math.abs,Ap=Math.cos,Ep=Math.sin,xp=1e-6,Cp=Math.PI,Tp=Cp/2;Math.SQRT1_2;un.invert=function(t,e){var n=2*sn(e/2);return[t*Ap(n/2)/Ap(n),n]},hn.invert=function(t,e){var n=e*an((4+Cp)/Cp)/2,i=sn(n),r=Ap(i);return[t/(2/an(Cp*(4+Cp))*(1+r)),sn((i+n*(r+2))/(2+Tp))]};var Lp=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return Lp[t]})}),[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]].forEach(function(t){t[1]*=1.0144});var Op,Rp,Np,Ip,kp,Mp,Pp,Dp,zp,_p,Bp,Hp,Fp,Up,Wp,Vp,jp,Gp,Yp,Kp,Xp,qp,Jp,Zp,$p,Qp,td,ed,nd,id,rd,od,sd,ad,ld,ud,cd,hd=(Op=kp=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.height=40,e.width=160,p(e,"yearSelect",Rp,h(e)),p(e,"button",Np,h(e)),p(e,"textInput",Ip,h(e)),e}return r(e,t),e}(Fi),Rp=d(Op.prototype,"yearSelect",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:this.width,height:this.height,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"}}}),Np=d(Op.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height,width:this.width/4,backgroundColor:this.themeProperties.COLOR_BACKGROUND,border:"0",transition:"0.15s",":hover":{backgroundColor:this.themeProperties.COLOR_BACKGROUND,color:this.themeProperties.COLOR_PRIMARY,transition:"0.15s"},":active":{backgroundColor:this.themeProperties.COLOR_BACKGROUND,transition:"0.15s"},":focus":{backgroundColor:this.themeProperties.COLOR_BACKGROUND,transition:"0.15s"},":active:focus":{backgroundColor:this.themeProperties.COLOR_BACKGROUND,transition:"0.15s"}}}}),Ip=d(Op.prototype,"textInput",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height,width:this.width/2,fontSize:"18px",textAlign:"center",border:"0",outline:"none",borderBottom:"2px solid #000",transition:"0.15s",backgroundColor:this.themeProperties.COLOR_BACKGROUND,":hover":{borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY,color:this.themeProperties.COLOR_PRIMARY,transition:"0.15s"},":active":{borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY,color:this.themeProperties.COLOR_PRIMARY,transition:"0.15s"},":focus":{borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY,color:this.themeProperties.COLOR_PRIMARY,transition:"0.15s"}}}}),Op),pd=(Mp=tt(hd))(Pp=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){this.currentValue=e.values[0],t.prototype.setOptions.call(this,e)},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.yearSelect)},n.addChangeListener=function(t){return this.addListener("change",t)},n.getCurrentValue=function(){return this.currentValue},n.setCurrentValue=function(t){this.currentValue=t,this.redraw(),this.dispatch("change")},n.getFromArrow=function(t){var e=this.options.values,n=e.indexOf(this.getCurrentValue()),i=n+t;i>=0&&i<e.length&&this.setCurrentValue(e[i])},n.getFromInput=function(t){var e,n=this.options.values;e=n.filter(function(e){return e<=t}),this.setCurrentValue(e[e.length-1]||n[0])},n.render=function(){var t=this;return[wi.createElement(Da,{className:this.styleSheet.button,onClick:function(){return t.getFromArrow(-1)}},wi.createElement(Qs,{icon:"arrow-left"})),wi.createElement(Ao,{ref:"textInput",className:this.styleSheet.textInput,value:this.getCurrentValue()}),wi.createElement(Da,{className:this.styleSheet.button,onClick:function(){return t.getFromArrow(1)}},wi.createElement(Qs,{icon:"arrow-right"}))]},n.onMount=function(){var t=this;this.textInput.addNodeListener("keypress",function(e){13===e.keyCode&&(t.getFromInput(t.textInput.getValue()),t.redraw())})},e}(wi.Element))||Pp,dd=Math.PI/180,fd=180/Math.PI,gd=function(){function t(t,e){this.eventHandler=t.addNodeListener("wheel",function(t){t.preventDefault(),t.stopPropagation(),e(t,t.deltaY)})}return t.prototype.cleanup=function(){this.eventHandler.remove()},t}(),md=function(){function t(t,e){var n=this;this.pinchActive=!1,this.touchStartHandler=t.addNodeListener("touchstart",function(t){n.recalculateCentroid(t)}),this.touchEndHandler=t.addNodeListener("touchend",function(t){n.recalculateCentroid(t)}),this.touchCancelHandler=t.addNodeListener("touchcancel",function(t){n.recalculateCentroid(t)}),this.touchMoveHandler=t.addNodeListener("touchmove",function(t){if(n.pinchActive&&t.touches&&t.touches.length>1){var i=n.calculateCentroid(t.touches),r=i.centroid,o=i.averageDist;e(t,n.averageDist-o),Object.assign(n,{centroid:r,averageDist:o})}})}var e=t.prototype;return e.calculateCentroid=function(t){for(var e={x:0,y:0},n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;e.x+=Ui.getEventX(s),e.y+=Ui.getEventY(s)}e.x/=t.length,e.y/=t.length;for(var a=0,l=t,u=Array.isArray(l),c=0,l=u?l:l[Symbol.iterator]();;){var h;if(u){if(c>=l.length)break;h=l[c++]}else{if(c=l.next(),c.done)break;h=c.value}var p=h,d=Ui.getEventX(p),f=Ui.getEventY(p);a+=Math.sqrt((d-e.x)*(d-e.x)+(f-e.y)*(f-e.y))}return a/=t.length,{centroid:e,averageDist:a}},e.recalculateCentroid=function(t){var e=t.touches||[];if(e.length<2)return void(this.pinchActive=!1);this.pinchActive=!0,Object.assign(this,this.calculateCentroid(e))},e.cleanup=function(){this.touchStartHandler.remove(),this.touchMoveHandler.remove(),this.touchEndHandler.remove(),this.touchCancelHandler.remove()},t}(),yd=(Dp=_p=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"featureBorder",zp,h(e)),e}return r(e,t),e}(Fi),zp=d(Dp.prototype,"featureBorder",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{strokeWidth:0,":hover":{stroke:"white",strokeWidth:1}}}}),Dp),bd=(Bp=tt(yd))(Hp=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(t){return{className:this.styleSheet.featureBorder,fill:t.fill||this.getFeatureFill()}},n.getFeatureFill=function(){var t=this.options.feature;return An(t.properties.entity_id||t.properties.name||t.properties.ctr_name)},n.getMap=function(){return this.options.map},n.dispatchFeatureToMap=function(t){var e=this.getMap();e&&e.dispatch(t,this.options.feature,this)},n.onMount=function(){var t=this;this.addNodeListener("mouseenter",function(){t.toFront(),t.dispatchFeatureToMap("mouseEnterFeature")}),this.addNodeListener("mouseleave",function(){t.dispatchFeatureToMap("mouseLeaveFeature")})},e}(Yo.Path))||Hp,vd=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.simpleRedrawThrottler=new hi({throttle:hi.ON_ANIMATION_FRAME}),e.fullRedrawThrottler=new hi({debounce:500}),e}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(t){t=Object.assign({width:800,height:600,showGraticule:!0,geometryGetter:function(t){return t.geometry}},t);var e=Math.min(t.height,t.width);return t=Object.assign({initialScale:.5*e,initialTranslate:[t.width/2,t.height/2],initialRotation:[0,0,0]},t),t.projection=t.projection||on().scale(t.initialScale).clipAngle(90).translate(t.initialTranslate),t},n.extraNodeAttributes=function(t){t.setStyle({background:"transparent"})},n.setData=function(t){this.data=t,this.redraw()},n.getPrecisionLevel=function(){return this.options.precisionLevel},n.getProjection=function(){return this.options.projection},n.setProjection=function(t){var e=this.getProjection();t.scale(e.scale()),t.translate(e.translate()),t.rotate(e.rotate()),this.options.projection=t,this.redraw()},n.resetProjection=function(){this.getProjection().scale(this.options.initialScale).translate(this.options.initialTranslate).rotate(this.options.initialRotation),this.redraw()},n.setShowGraticule=function(t){this.updateOptions({showGraticule:t})},n.getPathMaker=function(){return De(this.getProjection())},n.makePath=function(t){return this.getPathMaker()(t)},n.getGraticule=function(){if(this.getProjection().precision(Math.sqrt(.5)),this.options.showGraticule){var t=de().step([20,10])();return wi.createElement(Yo.Path,{fill:"none",stroke:"#aaa",strokeWidth:.5,d:this.makePath(t)})}},n.setDimensions=function(t){console.log(t.height,t.width)},n.getGeometry=function(t){return this.options.geometryGetter(t,this)},n.render=function(){var t=this;if(!this.data)return[];var e=this.data.features.map(function(e){var n=t.getGeometry(e),i=n&&t.makePath(n);return i?wi.createElement(bd,{feature:e,d:i,map:t}):null});return[wi.createElement(Yo.Group,null,wi.createElement(Yo.Path,{fill:"#cef",d:this.makePath({type:"Sphere"})}),e),this.getGraticule()]},n.getProjectionCoordinates=function(t){return void 0===t&&(t=this.getMouseCoordinatesForEvent()),this.getProjection().invert([t.x,t.y])},n.redrawSimplified=function(){var t=this;this.simpleRedrawThrottler.call(function(){t.options.isDragging=!0,t.getProjection().precision(5),t.redraw()}),this.fullRedrawThrottler.call(function(){t.options.isDragging=!1,t.getProjection().precision(Math.sqrt(.5)),t.redraw()})},n.handleDragStart=function(t){this._dragStartPoint=this.getProjectionCoordinates()},n.handleDrag=function(){var t=this.getProjection(),e=this.getProjectionCoordinates(),n=t.rotate(),i=Sn(this._dragStartPoint,e,n);t.rotate(i),this.redrawSimplified()},n.handleDragEnd=function(){},n.onMount=function(){var t=this;this.addDragListener({onStart:function(e){return t.handleDragStart()},onDrag:function(e,n,i){return t.handleDrag()},onEnd:function(e){return t.handleDragEnd()}}),this.addZoomListener(function(e){var n=t.getProjection();n.scale(n.scale()*e.zoomFactor),t.redrawSimplified()})},e}(function(t){var e,n;return n=e=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e._zoomListeners=[],e}r(e,t);var n=e.prototype;return n.getZoomLevel=function(){return this.options.zoomLevel||1},n.getMinZoomLevel=function(){return this.options.minZoomLevel||.02},n.getMaxZoomLevel=function(){return this.options.maxZoomLevel||50},n.setZoomLevel=function(t){t=Math.max(this.getMinZoomLevel(),t),t=Math.min(this.getMaxZoomLevel(),t),this.getZoomLevel()!==t&&(this.options.zoomLevel=t,this.dispatch("setZoomLevel",t))},n.addZoomListener=function(t,e){if(void 0===e&&(e=200),this._zoomListeners.find(function(e){return e.callback===t}))return void console.warn("Trying to add a listener twice!",t);for(var n=[],i=this.constructor.EVENT_HANDLERS,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;n.push(new a(this,function(n,i){return t(wn(n,i,e))}))}var l={handler:new mi(n),callback:t};return this._zoomListeners.push(l),l.handler},n.removeZoomListener=function(t){var e=this._zoomListeners.find(function(e){return e.callback===t});e&&(e.handler.cleanup(),this._zoomListeners.splice(this._zoomListeners.indexOf(e),1))},e}(t),e.EVENT_HANDLERS=[gd,md],n}(Wi(Yo.SVGRoot))),Sd=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setCurrentYear=function(t){this.options.currentYear=t,this.redraw()},n.getYearsInterval=function(t){var e=this.options.years,n=e.filter(function(e){return e<t}),i=n[n.length-1]||e[0]-1;return i+1===t?" in "+t:" in "+(i+1)+"-"+t},n.render=function(){return wi.createElement("div",null,"Map of the world ",this.getYearsInterval(this.options.currentYear))},e}(wi.Element),wd=(Fp=Zp=function(t){function e(){var e;return e=t.call(this,{updateOnResize:!0})||this,e.resizeWidthLimit=720,e.menuWidth=240,e.menuExtraPaddingVertical=10,e.menuExtraPaddingHorizontal=20,e.toggleOptionsHeight=50,e.toggleOptionsMobileHeight=35,e.toggleOptionsFontSize=22,e.toggleOptionsMobileFontSize=18,e.boxShadowWidth=5,p(e,"container",Up,h(e)),p(e,"yearSelectContainer",Wp,h(e)),p(e,"historyWorldMapTitle",Vp,h(e)),p(e,"menuContainer",jp,h(e)),p(e,"menuToggled",Gp,h(e)),p(e,"menuUntoggled",Yp,h(e)),p(e,"toggleOptions",Kp,h(e)),p(e,"menuIcon",Xp,h(e)),p(e,"select",qp,h(e)),p(e,"button",Jp,h(e)),e}r(e,t);var n=e.prototype;return n.getYearSelectContainerWidth=function(){return window.innerWidth>=this.resizeWidthLimit?"calc(100% - "+this.menuWidth+")":"100%"},n.getYearSelectContainerMarginTop=function(){return window.innerWidth>=this.resizeWidthLimit?5:this.getToggleOptionsHeight()+"px"},n.getYearSelectContainerMarginBottom=function(){return window.innerWidth>=this.resizeWidthLimit?15:0},n.getYearSelectContainerPaddingLeft=function(){return window.innerWidth>=this.resizeWidthLimit?this.menuWidth:this.menuExtraPaddingHorizontal},n.getToggleOptionsHeight=function(){return window.innerWidth>=this.resizeWidthLimit?this.toggleOptionsHeight:this.toggleOptionsMobileHeight},n.getToggleOptionsFontSize=function(){return window.innerWidth>=this.resizeWidthLimit?this.toggleOptionsFontSize:this.toggleOptionsMobileFontSize},e}(Fi),Up=d(Fp.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),Wp=d(Fp.prototype,"yearSelectContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",marginTop:this.getYearSelectContainerMarginTop(),paddingLeft:this.getYearSelectContainerPaddingLeft(),paddingRight:this.menuExtraPaddingHorizontal,display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:this.getYearSelectContainerMarginBottom(),flexDirection:"row"}}}),Vp=d(Fp.prototype,"historyWorldMapTitle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",fontSize:"22px"}}}),jp=d(Fp.prototype,"menuContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingTop:this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT+this.menuExtraPaddingVertical,backgroundColor:J(this.themeProperties.COLOR_PRIMARY,.3),boxShadow:this.themeProperties.BASE_BOX_SHADOW,width:this.menuWidth,height:"100%",position:"fixed",left:"0",display:"flex",alignItems:"center",flexDirection:"column",">*":{userSelect:"none"}}}}),Gp=d(Fp.prototype,"menuToggled",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{left:"0",transitionDuration:"0.15s"}}}),Yp=d(Fp.prototype,"menuUntoggled",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{left:"-"+(this.menuWidth+this.boxShadowWidth)+"px",transitionDuration:"0.15s"}}}),Kp=d(Fp.prototype,"toggleOptions",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.getToggleOptionsHeight(),padding:"0 "+this.menuExtraPaddingHorizontal+"px",backgroundColor:J(this.themeProperties.COLOR_PRIMARY,.3),fontSize:this.getToggleOptionsFontSize()+"px !important",transition:"0.2s",cursor:"pointer",color:"#fff",position:"fixed",top:this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,left:0,width:this.menuWidth,display:"flex",justifyContent:"space-between",alignItems:"center",":hover":{backgroundColor:this.themeProperties.COLOR_PRIMARY,color:"#fff",transition:"0.15s"}}}}),Xp=d(Fp.prototype,"menuIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex !important",alignItems:"center",justifyContent:"center"}}}),qp=d(Fp.prototype,"select",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:J(this.themeProperties.COLOR_PRIMARY,-.2),border:"0",borderRadius:"0",color:"#fff",transition:"0.15s",":hover":{backgroundColor:J(this.themeProperties.COLOR_PRIMARY,-.3),transition:"0.15s"}}}}),Jp=d(Fp.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"20px",backgroundColor:J(this.themeProperties.COLOR_PRIMARY,-.2),padding:"10px 20px",color:"#fff",cursor:"pointer",transition:"0.15s",borderRadius:"5px",":hover":{backgroundColor:J(this.themeProperties.COLOR_PRIMARY,-.3),transition:"0.15s"}}}}),Fp),Ad=($p=id=function(t){function e(){var e;return e=t.call(this,{updateOnResize:!0})||this,e.height=45,e.items=2,p(e,"featureArea",Qp,h(e)),p(e,"container",td,h(e)),p(e,"title",ed,h(e)),p(e,"row",nd,h(e)),e}return r(e,t),e.prototype.getDisplay=function(){return window.innerWidth>=500?"block":"none"},e}(Fi),Qp=d($p.prototype,"featureArea",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:this.getDisplay(),borderRadius:"3px",position:"absolute",backgroundColor:"rgba(40, 70, 90, 0.7)",color:"#fff",top:110,right:0,width:240,pointerEvents:"none"}}}),td=d($p.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height*this.items}}}),ed=d($p.prototype,"title",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{justifyContent:"center"}}}),nd=d($p.prototype,"row",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height,width:"100%",padding:"0 10px",display:"flex",alignItems:"center"}}}),$p),Ed=(rd=tt(Ad))(od=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.featureArea)},n.setFeature=function(t){this.setOptions({feature:t}),this.redraw()},n.render=function(){var t=this.options.feature,e=this.styleSheet;if(!t||!t.properties)return null;var n=t.properties,i=n.name,r=n.currency;return wi.createElement("div",{className:e.container},wi.createElement("div",{className:e.row+e.title},i),r&&wi.createElement("div",{className:e.row},"Currency: ",r))},e}(wi.Element))||od,xd=(sd=tt(wd))(ad=ld=function(t){function e(e){var n;return n=t.call(this,e)||this,n.requestedYears=new Set,n.geometries=new Map,n.redrawDropper=(new ci).toFunction(),n.menuIsToggled=!1,n.graticuleIsToggled=!0,n}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{currentYear:window.WORLD_MAP_YEARS[0]}},n.getGeometry=function(t,e){var n=["","-sm"];e.options.isDragging&&n.reverse();for(var i=0,r=n;i<r.length;i++){var o=r[i],s=this.getCurrentYear()+o+t.properties.entity_id;if(this.geometries.has(s))return this.geometries.get(s)}return t.geometry},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.getAvailableProjections=function(){function t(t,e){var n=t().clipAngle(90);return n.toString=function(){return e},n}return[t(on,"Spherical"),t(pn,"Eckert 4"),t(Qe,"Azimuthal Equal Area"),t(nn,"Conic equidistant"),t(cn,"Hammer")]},n.toggleMenu=function(){this.menuIsToggled?(this.menu.removeClass(this.styleSheet.menuToggled),this.menu.addClass(this.styleSheet.menuUntoggled)):(this.menu.removeClass(this.styleSheet.menuUntoggled),this.menu.addClass(this.styleSheet.menuToggled)),this.menuIsToggled=!this.menuIsToggled,this.menuIcon.setChildren([this.getMenuLabel()])},n.getMenuLabel=function(){return this.menuIsToggled?["Less map options",wi.createElement(Qs,{icon:"angle-double-left",className:this.styleSheet.menuIcon})]:["More map options",wi.createElement(Qs,{icon:"angle-double-right",className:this.styleSheet.menuIcon})]},n.getGraticuleLabel=function(){return this.graticuleIsToggled?"Hide graticule":"Show graticule"},n.render=function(){var t=this,e=this.options,n=e.currentYear;e.feature;return[wi.createElement("div",{ref:"menu",className:this.styleSheet.menuContainer+this.styleSheet.menuUntoggled},wi.createElement(Ho,{options:this.getAvailableProjections(),ref:"projectionSelect",onChange:function(e){return t.setProjection(e.get())},className:this.styleSheet.select}),wi.createElement("div",{className:this.styleSheet.button,onClick:function(){return t.map.resetProjection()}},"Reset projection"),wi.createElement("div",{className:this.styleSheet.button,ref:"drawGraticuleContainer"},this.getGraticuleLabel())),wi.createElement("div",{ref:"menuIcon",className:this.styleSheet.toggleOptions},this.getMenuLabel()),wi.createElement("div",{className:this.styleSheet.yearSelectContainer},wi.createElement(pd,{values:self.WORLD_MAP_YEARS,value:n,ref:"yearSelect"}),wi.createElement(Sd,{ref:"title",years:self.WORLD_MAP_YEARS,currentYear:n,className:this.styleSheet.historyWorldMapTitle})),wi.createElement(vd,i({ref:"map",geometryGetter:this.getGeometry.bind(this)},En())),wi.createElement(Ed,{ref:"featureArea",feature:this.options.feature})]},n.setProjection=function(t){this.map.setProjection(t)},n.setCurrentYear=function(t){this.options.currentYear=t,this.title.setCurrentYear(t)},n.getCurrentYear=function(){return this.options.currentYear},n.loadCurrentYearData=function(){for(var t=this,e=this.yearSelect.getCurrentValue(),n="/static/json/world/"+e,i=["-sm",""],r=0,o=i;r<o.length;r++)!function(){var i=o[r],s=t.redrawDropper(function(n){t.setCurrentYear(e),t.map.setData(n)});Na.getJSON(n+i+".json").then(function(n){for(var r=n.features,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var l;if(o){if(a>=r.length)break;l=r[a++]}else{if(a=r.next(),a.done)break;l=a.value}var u=l,c=e+i+u.properties.entity_id;t.geometries.set(c,u.geometry)}s(n)})}()},n.onMount=function(){var t=this;this.loadCurrentYearData(),this.menuIcon.addClickListener(function(e){e.stopPropagation(),t.toggleMenu()}),this.menu.addClickListener(function(t){t.stopPropagation()}),this.yearSelect.addChangeListener(function(){t.loadCurrentYearData()}),this.drawGraticuleContainer.addClickListener(function(){t.graticuleIsToggled=!t.graticuleIsToggled,t.map.setShowGraticule(t.graticuleIsToggled),t.drawGraticuleContainer.setChildren([t.getGraticuleLabel()])}),this.map.addListener("mouseEnterFeature",function(e){t.featureArea.setFeature(e)}),this.map.addListener("mouseLeaveFeature",function(e){t.featureArea.setFeature(null)}),document.body.addEventListener("click",function(){t.menuIsToggled&&t.toggleMenu()}),window.addEventListener("resize",function(){console.log("Resize, needs to be handled")})},e}(wi.Element))||ad,Cd=(ud=tt(fh))(cd=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.render=function(){return[wi.createElement(xd,null)]},e}(wi.Element))||cd,Td=function(){function t(t,e){this.string=t,this.pointer=0}var e=t.prototype;return e.done=function(){return this.pointer>=this.string.length},e.advance=function(t){void 0===t&&(t=1),this.pointer+=t},e.char=function(){var t=this.string.charAt(this.pointer);return this.pointer+=1,t},e.whitespace=function(t){void 0===t&&(t=/\s/);for(var e=this.pointer;!this.done()&&t.test(this.at(0));)this.pointer+=1;return this.string.substring(e,this.pointer)},e.word=function(t,e){void 0===t&&(t=/\S/),void 0===e&&(e=!0),e&&this.whitespace();for(var n=this.pointer;!this.done()&&t.test(this.at(0));)this.pointer+=1;return this.string.substring(n,this.pointer)},e.number=function(t){void 0===t&&(t=!0),t&&this.whitespace();if(this.startsWith("NaN"))return this.advance("NaN".length),NaN;var e="+";"-"!==this.at(0)&&"+"!==this.at(0)||(e=this.char());if(this.startsWith("Infinity"))return this.advance("Infinity".length),"+"===e?1/0:-1/0;var n=function(t){return t>="0"||t<="9"};if("0"===this.at(0)&&("X"===this.at(1)||"x"===this.at(1))){this.advance(2);for(var i=this.pointer;!this.done()&&function(t){return n(t)||t>="A"&&t<="F"||t>="a"&&t<="f"}(this.at(0));)this.pointer+=1;return parseInt(e+this.string.substring(i),16)}for(var r=this.pointer;!this.done()&&n(this.at(1));)if(this.pointer+=1,"."===this.peek){for(this.advance(1);!this.done()&&n(this.at(1));)this.pointer+=1;break}return parseFloat(e+this.string.substring(r,this.pointer))},e.line=function(t,e){if(void 0===t&&(t=/\r*\n/),void 0===e&&(e=1/0),t instanceof RegExp){var n,i,r=this.string.substring(this.pointer),o=r.match(t);return null===o?(n=r.length,i=0):(n=o.index,i=o[0].length),n>=e?(this.pointer+=e,r.substring(0,e)):(this.advance(n+i),r.substring(0,n))}var s=this.string.indexOf(t,this.pointer);if(-1===s&&(s=this.string.length),s-this.pointer>e){var a=this.string.substring(this.pointer,this.pointer+e);return this.advance(e),a}var l=this.string.substring(this.pointer,s);return this.pointer=s+t.length,l},e.at=function(t){return this.string.charAt(this.pointer+t)},e.peek=function(t){return void 0===t&&(t=1),this.string.substring(this.pointer,this.pointer+t)},e.startsWith=function(t){return t instanceof RegExp?(t=new RegExp("^"+t.toString().slice(1,-1)),t.test(this.string.substring(this.pointer))):this.peek(t.length)===t},e.search=function(t){var e;return e=t instanceof RegExp?this.string.substring(this.pointer).search(t):this.string.indexOf(t,this.pointer)-this.pointer,e<0?-1:e},e.clone=function(){var t=new this.constructor(this.string);return t.pointer=this.pointer,t},t}(),Ld=function(){function t(t){var e=this;this.options=t,this.steps=0,this.startNode={value:null,startNode:!0},this.node=this.startNode;var n=this.startNode,i=t.pattern.charAt(0),r={value:i,startNode:!0},o=xn(t.pattern),s=[r];if(t.leftWhitespace){var a={value:" ",whitespaceNode:!0};a.next=function(t){return t===i?r:/\s/.test(t)?a:e.startNode},n.next=function(t){return/\s/.test(t)?a:e.startNode},this.node=a}else n.next=function(t){return t===i?r:e.startNode};n=r;for(var l=1;l<t.pattern.length;l+=1)!function(i){var r=t.pattern[i],a={value:r};s.push(a);var l=0===o[i-1]?e.startNode:s[o[i-1]-1];n.next=function(t){return t===r?a:l.next(t)},n=a}(l);if(n.patternLastNode=!0,t.captureContent){this.capture=[];var u={value:"",captureNode:!0},c=t.endPattern.charAt(0),h={value:c},p=xn(t.endPattern),d=[h];n.next=u.next=function(t){return t===c?h:u},n=h;for(var l=1;l<t.endPattern.length;l+=1)!function(e){var i=t.endPattern[e],r={value:i};d.push(r);var o=0===p[e-1]?u:d[p[e-1]-1];n.next=function(t){return t===i?r:o.next(t)},n=r}(l);n.endPatternLastNode=!0}n.endNode=!0,n.next=function(t){return e.startNode.next(t)}}var e=t.prototype;return e.nextState=function(t){return this.steps+=1,this.node=this.node.next(t),this.node.startNode&&(this.steps=0,delete this.patternStep,delete this.endPatternStep),this.node.patternLastNode&&(this.patternStep=this.steps-this.options.pattern.length+1),this.node.endPatternLastNode&&(this.endPatternStep=this.steps-this.options.pattern.length+1),this.node},e.done=function(){return this.node.endNode},t}(),Od=function(){function t(t){}var e=t.prototype;return e.modify=function(t,e){for(var n=new Ld({pattern:this.pattern,captureContent:this.captureContent,endPattern:this.endPattern,leftWhitespace:this.leftWhitespace}),i=0,r=t[i],o=[],s=0;s<e.length;s+=1){var a=e[s];if(s>=r.end&&(o.push(r),i+=1,r=t[i]),r.isJSX)n.nextState("\\"+a);else if(n.nextState(a),n.done()){for(var l=s-(n.steps-n.patternStep),u=s-(n.steps-n.endPatternStep)+this.endPattern.length,c=[];o.length>0&&l<=o[o.length-1].start;){var h=o.pop();c.push(h)}if(o.length>0&&l<o[o.length-1].end){var p=o.pop();o.push({isString:!0,start:p.start,end:l}),c.push({isString:!0,start:l,end:p.end})}r.start<l&&o.push({isString:!0,start:r.start,end:l}),c.reverse(),c.push({isString:!0,start:Math.max(r.start,l),end:u}),o.push({content:this.wrap(this.processChildren(c,e)),start:l,end:u}),r={isString:!0,start:u,end:r.end}}}return r.start<e.length&&o.push(r),o},e.processChildren=function(t,e){var n=this;return t.map(function(t){return n.processChild(t,e)})},e.processChild=function(t,e){return t.isDummy?"":t.isString?e.substring(t.start,t.end):t.content},t}(),Rd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="```",n.endPattern="\n```",n.leftWhitespace=!0,n.captureContent=!0,n}r(e,t);var n=e.prototype;return n.processChildren=function(t,e){if(this.codeOptions=null,t.length>0){var n=e.substring(t[0].start,t[t.length-1].end);n=n.substring(n.indexOf(this.pattern)+this.pattern.length),n=n.substring(0,n.lastIndexOf(this.endPattern));var i=n.indexOf("\n")+1,r=n.substring(0,i).trim();if(n=n.substring(i),r.length>0){this.codeOptions={};var o=new Td(r);this.codeOptions.aceMode=o.word(),Object.assign(this.codeOptions,Ud.parseOptions(o))}return n}return""},n.getElement=function(t){return{tag:this.constructor.tag||"pre",children:[t]}},n.wrap=function(t,e){var n=this.getElement(t),i={aceMode:"c_cpp",maxLines:32};return this.codeOptions&&(Object.assign(i,this.codeOptions),delete this.codeOptions),Object.assign(i,n),i},e}(Od),Nd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="#",n}return r(e,t),e.prototype.wrap=function(t){
var e=t[0],n=e.indexOf("#"),i=n+1,r=1,o=e.charAt(i);if(o>="1"&&o<="6")r=parseInt(o),i+=1;else if("#"===o)for(;r<6&&"#"===e.charAt(i);)r+=1,i+=1;return t[0]=e.substring(i),{tag:"h"+r,children:t}},e}(Tn(Od)),Id=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="---",n}return r(e,t),e.prototype.wrap=function(t){return{tag:"hr"}},e}(Tn(Od)),kd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.tag="ul",n.itemTag="li",n.pattern="- ",n.groupConsecutive=!0,n}return r(e,t),e}(Tn(Od)),Md=function(t){function e(e){var n;return n=t.call(this,e)||this,n.tag="ol",n.itemTag="li",n.pattern="1. ",n.groupConsecutive=!0,n}return r(e,t),e}(Tn(Od)),Pd=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.modify=function(t,e){for(var n=[],i=[],r=0,o=t[r],s=0,a=0;a<e.length;a+=1)if(a>=o.end&&(i.push(o),r+=1,o=t[r]),!o.isJSX&&"\n"===e[a]){if(o.start<a&&i.push({isString:!0,start:o.start,end:a}),n.push({content:this.wrap(this.processChildren(i,e)),start:s,end:a+1}),i=[],s=a+1,"\n"===e[a+1]){var l=void 0,u=void 0;for(l=a;a+1<e.length&&"\n"===e[a+1];)a+=1;u=a+1,n.push({content:{tag:"br"},start:l,end:u}),s=a+1}o={isString:!0,start:s,end:o.end}}return o.start<e.length&&i.push(o),i.length>0&&n.push({content:this.wrap(this.processChildren(i,e)),start:s,end:e.length}),n},n.wrap=function(t){return{tag:"p",children:t}},e}(Od),Dd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.leftWhitespace=!0,n.pattern="*",n.endPattern="*",n.tag="strong",n}return r(e,t),e}(Cn(Od)),zd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.leftWhitespace=!0,n.pattern="/",n.endPattern="/",n.tag="em",n}return r(e,t),e}(Cn(Od)),_d=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="`",n.endPattern="`",n.tag="code",n}return r(e,t),e.prototype.processChildren=function(t,e){return 0===t.length?[]:[e.substring(t[0].start,t[t.length-1].end)]},e}(Ln(Cn(Od))),Bd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="$",n.endPattern="$",n.tag="var",n}return r(e,t),e}(Ln(Cn(Od))),Hd=function(t){function e(e){var n;return n=t.call(this,e)||this,n.pattern="$$",n.endPattern="$$",n.tag="Latex",n}return r(e,t),e}(Ln(Cn(Od))),Fd=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.isCorrectUrl=function(t){if(t.startsWith("http://")||t.startsWith("https://"))return!0},e.trimProtocol=function(t){return"s"===t[4]?t.substring(8,t.length):t.substring(7,t.length)},e.prototype.modify=function(t,e){for(var n=this,i=[],r=0,o=t[r],s=0,a=function(t,r){var s=e.substring(t,r);n.constructor.isCorrectUrl(s)&&(o.start<t&&i.push({isString:!0,start:o.start,end:t}),i.push({isJSX:!0,content:{tag:"a",href:s,children:[n.constructor.trimProtocol(s)],target:"_blank"},start:t,end:r}),o={isString:!0,start:r,end:o.end})},l=0;l<e.length;l+=1)l>=o.end&&(i.push(o),r+=1,o=t[r]),o.isJSX||/\s/.test(e[l])&&(a(s,l),s=l+1);return s<e.length&&a(s,e.length),o.start<e.length&&i.push(o),i},e}(Od),Ud=function(){function t(t){t=t||{},this.modifiers=t.modifiers||this.constructor.modifiers,this.uiElements=t.uiElements||new Map}var e=t.prototype;return e.parse=function(t){if(!t)return[];for(var e=[],n=this.parseUIElements(t),i=this.modifiers.length-1;i>=0;i-=1){n=this.modifiers[i].modify(n,t)}for(var r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;l.isDummy||(l.isString?e.push(t.substring(l.start,l.end)):e.push(l.content))}return e},e.parseUIElements=function(t){for(var e=new Td(t),n=[],i=0;!e.done();){if("<"===e.char()&&/[a-zA-Z]/.test(e.at(0))){e.pointer-=1;var r=e.pointer,o=void 0;try{o=this.parseUIElement(e)}catch(t){continue}this.uiElements.has(o.tag)&&(n.push({isString:!0,start:i,end:r}),n.push({content:o,isJSX:!0,start:r,end:e.pointer}),i=e.pointer)}}return i<t.length&&n.push({isString:!0,start:i,end:t.length}),n},e.parseUIElement=function(t,e){if(void 0===e&&(e=/\/?>/),t.whitespace(),t.done())return null;if("<"!==t.at(0))throw Error("Invalid UIElement declaration.");var n={};return t.char(),n.tag=t.word(),t.whitespace(),Object.assign(n,this.parseOptions(t,e)),t.line(e),n},e.parseOptions=function(t,e){return this.constructor.parseOptions(t,e)},t.parseOptions=function(t,e){var n={};for(t.whitespace();!t.done();){t.whitespace();var i=/[\w$]/,r=void 0;if(i.test(t.at(0))&&(r=t.word(i)),t.whitespace(),e&&0===t.search(e)){n[r]=!0;break}if(!r)throw Error("Invalid option name");if("="===t.peek()){if(t.char(),t.whitespace(),t.done())throw Error("No argument given for option: "+r);if('"'===t.peek()){var o="",s=!1;for(t.char();!t.done();){var a=t.char();if('"'===a){s=!0;break}o+=a}if(!s)throw Error("Argument string not closed: "+o);n[r]=o}else{if("{"!==t.peek())throw Error("Invalid argument for option: "+r+". Need string or JSON.");var l=0,u=!1,c="";for(t.char();!t.done();){var h=t.char();if("{"===h)l+=1;else if("}"===h){if(!(l>0)){n[r]=c.length>0?this.parseJSON5(c):void 0,u=!0;break}l-=1}c+=h}if(!u)throw Error("Invalid JSON argument for option: "+r+". Input: "+c)}}else n[r]=!0;t.whitespace()}return n},e.parseTextLine=function(t){for(var e=[],n=t.pointer,i=t.pointer;!t.done()&&!t.startsWith(/\s+\r*\n/);)if("<"!==t.at(0)){var r=t.char();"\\"===r&&(r+=t.char())}else{e.push({content:t.string.substring(i,t.pointer),start:i,end:t.pointer});var o=t.pointer,s=this.parseUIElement(t,/\/*>/);e.push({content:s,start:o,end:t.pointer}),i=t.pointer}var a=t.string.substring(n,t.pointer);return a.length>0&&e.push(a),t.line(),e},t}();Ud.modifiers=[new Rd,new Nd,new Id,new kd,new Md,new Pd,new _d,new Hd,new Bd,new Dd,new zd,new Fd],Ud.parseJSON5=function(){var t,e,n,i,r,o,s={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(t){return""===t?"EOF":"'"+t+"'"},l=function(i){var o=new SyntaxError;throw o.message=i+" at line "+e+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(r.substring(t-1,t+19)),o.at=t,o.lineNumber=e,o.columnNumber=n,o},u=function(o){return o&&o!==i&&l("Expected "+a(o)+" instead of "+a(i)),i=r.charAt(t),t++,n++,("\n"===i||"\r"===i&&"\n"!==c())&&(e++,n=0),i},c=function(){return r.charAt(t)},h=function(){var t=i;for("_"!==i&&"$"!==i&&(i<"a"||i>"z")&&(i<"A"||i>"Z")&&l("Bad identifier as unquoted key");u()&&("_"===i||"$"===i||i>="a"&&i<="z"||i>="A"&&i<="Z"||i>="0"&&i<="9");)t+=i;return t},p=function(){var t,e="",n="",r=10;if("-"!==i&&"+"!==i||(e=i,u(i)),"I"===i)return t=b(),("number"!=typeof t||isNaN(t))&&l("Unexpected word for number"),"-"===e?-t:t;if("N"===i)return t=b(),isNaN(t)||l("expected word to be NaN"),t;switch("0"===i&&(n+=i,u(),"x"===i||"X"===i?(n+=i,u(),r=16):i>="0"&&i<="9"&&l("Octal literal")),r){case 10:for(;i>="0"&&i<="9";)n+=i,u();if("."===i)for(n+=".";u()&&i>="0"&&i<="9";)n+=i;if("e"===i||"E"===i)for(n+=i,u(),"-"!==i&&"+"!==i||(n+=i,u());i>="0"&&i<="9";)n+=i,u();break;case 16:for(;i>="0"&&i<="9"||i>="A"&&i<="F"||i>="a"&&i<="f";)n+=i,u()}if(t="-"===e?-n:+n,isFinite(t))return t;l("Bad number")},d=function(){var t,e,n,r,o="";if('"'===i||"'"===i)for(r=i;u();){if(i===r)return u(),o;if("\\"===i)if(u(),"u"===i){for(n=0,e=0;e<4&&(t=parseInt(u(),16),isFinite(t));e+=1)n=16*n+t;o+=String.fromCharCode(n)}else if("\r"===i)"\n"===c()&&u();else{if("string"!=typeof s[i])break;o+=s[i]}else{if("\n"===i)break;o+=i}}l("Bad string")},f=function(){"/"!==i&&l("Not an inline comment");do{if(u(),"\n"===i||"\r"===i)return void u()}while(i)},g=function(){"*"!==i&&l("Not a block comment");do{for(u();"*"===i;)if(u("*"),"/"===i)return void u("/")}while(i);l("Unterminated block comment")},m=function(){"/"!==i&&l("Not a comment"),u("/"),"/"===i?f():"*"===i?g():l("Unrecognized comment")},y=function(){for(;i;)if("/"===i)m();else{if(!/\s/.test(i))return;u()}},b=function(){switch(i){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null;case"I":return u("I"),u("n"),u("f"),u("i"),u("n"),u("i"),u("t"),u("y"),1/0;case"N":return u("N"),u("a"),u("N"),NaN}l("Unexpected "+a(i))},v=function(){var t=[];if("["===i)for(u("["),y();i;){if("]"===i)return u("]"),t;if(","===i?l("Missing array element"):t.push(o()),y(),","!==i)return u("]"),t;u(","),y()}l("Bad array")},S=function(){var t,e={};if("{"===i)for(u("{"),y();i;){if("}"===i)return u("}"),e;if(t='"'===i||"'"===i?d():h(),y(),u(":"),e[t]=o(),y(),","!==i)return u("}"),e;u(","),y()}l("Bad object")};return o=function(){switch(y(),i){case"{":return S();case"[":return v();case'"':case"'":return d();case"-":case"+":case".":return p();default:return i>="0"&&i<="9"?p():b()}},function(s,a){var u;return r=String(s),t=0,e=1,n=1,i=" ",u=o(),y(),i&&l("Syntax error"),"function"==typeof a?function t(e,n){var i,r,o=e[n];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r=t(o,i),void 0!==r?o[i]=r:delete o[i]);return a.call(e,n,o)}({"":u},""):u}}();var Wd=function(){function t(t,e){void 0===e&&(e=[]),this.classMap=new Map,this.fallback=t;for(var n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;this.addClass(s[0],s[1])}}var e=t.prototype;return e.addClass=function(t,e){this.classMap.set(t,e)},e.registerDependencies=function(t){for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;o&&o.registerMarkup&&o.registerMarkup(this)}},t.addClass=function(t,e){this.GLOBAL.addClass(t,e)},e.getClass=function(t){var e=this.classMap.get(t);return!e&&this.fallback&&(e=this.fallback.getClass(t)),e},e.get=function(t){return this.getClass(t)},e.has=function(t){return this.getClass(t)},t}();Wd.GLOBAL=new Wd;var Vd=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.classMap||(e.classMap=new Wd(Wd.GLOBAL)),e.parser||(e.parser=new Ud({uiElements:e.classMap})),t.prototype.setOptions.call(this,e),this.setValue(this.options.value||""),this.options.classMap&&(this.classMap=this.options.classMap)},n.setValue=function(t){if("string"==typeof t){this.options.rawValue=t;try{t=this.options.parser.parse(t)}catch(e){console.error("Can't parse ",t,e),t={tag:"span",children:[t]}}}this.options.value=t},n.reparse=function(){this.options.rawValue&&this.setValue(this.options.rawValue)},n.registerDependencies=function(t){t.length>0&&(this.classMap.registerDependencies(t),this.reparse())},n.addClass=function(t,e){this.classMap.addClass(t,e)},n.getClass=function(t){return this.classMap.getClass(t)},n.getValue=function(){return this.options.value},n.convertToUI=function(t){var e=this;if(t instanceof wi.TextElement||t instanceof wi.Element)return t;if("string"==typeof t)return new wi.TextElement(t);if(Array.isArray(t))return t.map(function(t){return e.convertToUI(t)});t.children&&(t.children=this.convertToUI(t.children));var n=this.getClass(t.tag)||t.tag;return wi.createElement.apply(wi,[n,t].concat(t.children||[]))},n.render=function(){return this.convertToUI(this.getValue())},e}(uo);Wd.addClass("CodeSnippet",dh);var jd=function(t,e){return function(t){function n(){return t.apply(this,arguments)||this}return r(n,t),n.prototype.setOptions=function(n){if(n.hasOwnProperty(e)&&!this.constructor.isSafeUri(n[e])){var i;return t.prototype.setOptions.call(this,Object.assign({},n,(i={},i[e]=void 0,i)))}return t.prototype.setOptions.call(this,n)},n.isSafeUri=function(t){return-1===t.indexOf(":")||t.startsWith("http:")||t.startsWith("https:")||t.startsWith("mailto:")},n}(t)};Wd.addClass("Link",jd(co,"href")),Wd.addClass("Image",jd(ho,"src"));var Gd,Yd,Kd,Xd,qd,Jd,Zd=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{showButtons:!0}},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.setStyle("textAlign","center")},n.getMarkupRenderer=function(){var t={};return this.options.classMap&&(t.classMap=this.options.classMap),wi.createElement(Vd,i({ref:this.refLink("markupRenderer"),value:this.options.value,style:{height:"100%",overflow:"auto"}},t))},n.getEditor=function(){return wi.createElement(Bo,{ref:"codeEditor",style:{width:"100%",height:"calc(100% - 3px)",resize:"none",backgroundColor:"#F9F9F9"},value:this.options.value||""})},n.render=function(){var t;return this.options.showButtons&&(t=wi.createElement(sc,null,wi.createElement(Da,{ref:"toggleLeftButton",label:wi.T("Editor"),level:Li.SUCCESS}),wi.createElement(Da,{ref:"toggleRightButton",label:wi.T("Article"),level:Li.SUCCESS}))),[t,wi.createElement(Oc,{ref:"sectionDivider",orientation:Ci.HORIZONTAL,style:{textAlign:"initial",height:"100%",width:"100%",display:"inline-block",overflow:"hidden"}},wi.createElement(uo,{ref:"editorPanel",style:{width:"50%",height:"100%",overflow:"hidden"}},this.getEditor()),wi.createElement(uo,{ref:"rendererPanel",style:{width:"50%",height:"100%",overflow:"auto",padding:"10px"}},this.getMarkupRenderer()))]},n.updateValue=function(t){this.markupRenderer.setValue(t),this.markupRenderer.redraw()},n.appendValue=function(t,e){void 0===e&&(e="\n");var n=this.getValue();n&&null!=e&&(n+=e),n+=t,this.setValue(n),this.updateValue(n)},n.setEditorOptions=function(){var t=this;this.editorPanel.addListener("resize",function(){t.codeEditor.setWidth(t.editorPanel.getWidth()-15)}),this.codeEditor.addNodeListener("input",function(){var e=t.codeEditor.getValue();try{t.updateValue(e)}catch(t){console.error("Exception in parsing markup: ",t)}})},n.onMount=function(){var t=this;this.options.showButtons&&(this.toggleLeftButton.addClickListener(function(){0===t.editorPanel.getWidth()?(t.sectionDivider.expandChild(0),t.toggleLeftButton.setLevel(Li.SUCCESS)):(t.sectionDivider.collapseChild(0),t.toggleLeftButton.setLevel(Li.DANGER))}),this.toggleRightButton.addClickListener(function(){0===t.rendererPanel.getWidth()?(t.sectionDivider.expandChild(1),t.toggleRightButton.setLevel(Li.SUCCESS)):(t.sectionDivider.collapseChild(1),t.toggleRightButton.setLevel(Li.DANGER))})),this.setEditorOptions()},n.getValue=function(){return this.codeEditor.getValue()},n.setValue=function(t){return this.updateValue(t),this.codeEditor.setValue(t)},e}(uo),$d=(Gd=Xd=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"rotateClockwise",Yd,h(e)),p(e,"rotateCounterclockwise",Kd,h(e)),e}return r(e,t),e}(Fi),Yd=d(Gd.prototype,"rotateClockwise",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}),Kd=d(Gd.prototype,"rotateCounterclockwise",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}}}}),Gd),Qd=(qd=tt($d))(Jd=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){return wi.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"200px"}},Rn(125,5,"#3a4859",this.styleSheet.rotateClockwise,"2.25s"),Rn(100,4,"#666666",this.styleSheet.rotateCounterclockwise,"1.5s"),Rn(75,3,"#aaaaaa",this.styleSheet.rotateClockwise,"1s"),Rn(50,2,"#20232d",this.styleSheet.rotateCounterclockwise,"3s"))},e}(wi.Element))||Jd,tf=function(t){function e(e){var n;n=t.call(this)||this,n.loaded=!1,n.jobs=[];var i=document.createElement("script");return i.async=!0,i.src=e,i.onload=function(){return n.onLoad()},document.getElementsByTagName("head")[0].appendChild(i),n}r(e,t);var n=e.prototype;return n.onLoad=function(){this.loaded=!0;for(var t=0;t<this.jobs.length;t+=1)this.jobs[t](this);this.jobs=[]},n.resolve=function(t){if(this.loaded)return void t(this);this.jobs.push(t)},e}(gi),ef=new Map,nf=function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.applyNodeAttributesNotLoaded=function(){t.prototype.applyNodeAttributes.call(this)},n.applyNodeAttributesLoaded=function(){t.prototype.applyNodeAttributes.call(this)},n.applyNodeAttributes=function(){return this._loaded?this.applyNodeAttributesLoaded():this.applyNodeAttributesNotLoaded()},n.renderNotLoaded=function(){return"Loading component..."},n.renderLoaded=function(){return t.prototype.render.call(this)},n.render=function(){return this._loaded?this.renderLoaded():this.renderNotLoaded()},n.setLoaded=function(){this._loaded||(this._loaded=!0,this.node&&(t.prototype.redraw.call(this),this._executedMount||(this._executedMount=!0,this.onDelayedMount())))},n.beforeRedrawNotLoaded=function(){},n.redrawNotLoaded=function(){this.beforeRedrawNotLoaded(),this._loaded||t.prototype.redraw.call(this)},n.redrawLoaded=function(){t.prototype.redraw.call(this)},n.redraw=function(){return this._loaded?this.redrawLoaded():this.redrawNotLoaded()},n.onMount=function(){},n.onDelayedMount=function(){t.prototype.onMount.call(this)},e}(t)},rf=function(t){function e(){var e;return e=t.call(this)||this,e.stores=new Map,e.applyEventWrapper=function(t){e.applyEvent(t)},e}r(e,t);var n=e.prototype;return n.getStore=function(t){return t=t&&t.toLowerCase(),this.stores.get(t)},n.getStoreForEvent=function(t){var e=t.objectType||t.store;return this.getStore(e)},n.addStore=function(t){var e=t.objectType.toLowerCase();if(this.stores.has(e))throw Error("GlobalState: Adding a store for an existing object type: "+t.objectType);this.stores.set(e,t)},n.applyEvent=function(t){if(null!=t)if(Array.isArray(t))for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;this.applyEvent(o)}else if(!t.state||(this.importState(t.state),this.getStoreForEvent(t))){var s=this.getStoreForEvent(t);if(s)return s.applyEvent(t);console.log("GlobalState: Missing store for event: ",t)}},n.get=function(t,e){var n=this.getStore(t);if(n){var i=Array.prototype.slice.call(arguments,1);return n.get.apply(n,i)}return console.error("GlobalState: Can't find store ",t),null},n.importStateFromTempMap=function(t,e){var n=e.get(t);e.delete(t);var i=this.getStore(t);if(!i)return void console.error("Failed to import state, can't find store ",t);for(var r=i.getDependencies(),o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;this.importStateFromTempMap(l.toLowerCase(),e)}i.importState(n)},n.importState=function(t){if(Array.isArray(t))for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;this.importState(o)}else{var s=new Map;for(var a in t)s.set(a.toLowerCase(),t[a]);for(;s.size>0;){var l=s.keys(),u=l.next().value;this.importStateFromTempMap(u,s)}}},e}(gi),of=new rf,sf=of;self.GlobalState=of;var af=function t(e){return function(e){function n(){return e.apply(this,arguments)||this}r(n,e);var i=n.prototype;return i.importState=function(t){of.importState(t.state||{});for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];"state"!==i&&(this.options[i]=t[i])}},i.getAjaxUrl=function(){var t=location.pathname;return t.endsWith("/")||(t+="/"),t},i.getAjaxRequest=function(){return{}},i.renderNotLoaded=function(){var e=t.renderLoading;return"function"==typeof e&&(e=e()),e},i.setError=function(t){this.options.error=t},i.renderError=function(){var e=t.renderError;return"function"==typeof e&&(e=e(this.options.error)),e},i.renderLoaded=function(){return this.options.error?this.renderError():e.prototype.renderLoaded.call(this)},i.onDelayedMount=function(){this.options.error||e.prototype.onDelayedMount.call(this)},i.beforeRedrawNotLoaded=function(){var t=this;Na.getJSON(this.getAjaxUrl(),this.getAjaxRequest()).then(function(e){t.importState(e),t.setLoaded()},function(e){t.setError(e),t.setLoaded()})},n}(nf(e))};af.renderLoading=function(){return wi.createElement(Qd,null)},af.renderError=function(t,e){return wi.createElement("div",{style:{maxWidth:"300px",margin:"0 auto",marginTop:"30px"}},wi.createElement(uc,{title:wi.T("Error in opening the URL"),level:Li.ERROR},wi.createElement("h3",null,e||t.message)))};var lf=function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.fetch=function(t,e,n,i){var r=this;if(void 0===i&&(i=!1),!i){var o=this.get(t);if(o)return void e(o)}this.fetchJobs||(this.fetchJobs=[]),this.fetchJobs.push({id:t,success:e,error:n}),this.fetchTimeout||(this.fetchTimeout=setTimeout(function(){r.executeAjaxFetch()},this.options.fetchTimeoutDuration||0))},n.getFetchRequestData=function(t,e){return{ids:t}},n.getFetchRequestObject=function(t,e){var n=this,i=this.getFetchRequestData(t,e);return{url:this.options.fetchURL,type:this.options.fetchType||"GET",dataType:"json",data:i,cache:!1,success:function(t){of.importState(t.state||{});for(var i=e,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s,l=n.get(a.id);l?a.success(l):(console.error("Failed to fetch object ",a.id," of type ",n.objectType),a.error&&a.error())}},error:function(t){console.error("Failed to fetch objects of type ",n.objectType,":\n",t);for(var i=e,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;a.error&&a.error(t)}}}},n.getFetchRequests=function(t){for(var e=new Map,n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o,a=s.id;e.has(a)||e.set(a,new Array),e.get(a).push(s)}for(var l=this.options.maxFetchObjectCount||256,u=y(Array.from(e.keys()),l),c=y(Array.from(e.values()),l),h=[],p=0;p<u.length;p+=1)h.push(this.getFetchRequestObject(u[p],f(c[p])));return h},n.executeAjaxFetch=function(){var t=this.fetchJobs;this.fetchJobs=null;for(var e=this.getFetchRequests(t),n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;Na.fetch(s)}clearTimeout(this.fetchTimeout),this.fetchTimeout=null},e}(t)},uf=Symbol("Store"),cf=function(t){function e(e,n,i){var r;return r=t.call(this)||this,Object.assign(h(r),e),r.setStore(i),r}r(e,t),e.getStoreName=function(){return this.name};var n=e.prototype;return n.setStore=function(t){this[uf]=t},n.getStore=function(){return this[uf]},n.applyEvent=function(t){Object.assign(this,t.data)},n.addUpdateListener=function(t){return this.addListener("update",t)},n.addDeleteListener=function(t){return this.addListener("delete",t)},n.addEventListener=function(t,e){var n=this;if(Array.isArray(t)){var i=t.map(function(t){return n.addEventListener(t,e)});return new mi(i)}return this._eventDispatcher||(this._eventDispatcher=new gi,this.addUpdateListener(function(t){n._eventDispatcher.dispatch(t.type,t,n)})),this._eventDispatcher.addListener(t,e)},n.getStreamName=function(){throw"getStreamName not implemented"},n.registerToStream=function(){this.getStore().getState().registerStream(this.getStreamName())},e}(gi),hf=function(t){function e(e,n,i){var r;return void 0===n&&(n=cf),void 0===i&&(i={}),r=t.call(this)||this,r.options=i,r.objectType=e.toLowerCase(),r.ObjectWrapper=n,r.attachToState(),r}r(e,t);var n=e.prototype;return n.attachToState=function(){this.getState()&&this.getState().addStore(this)},n.getState=function(){return this.options.hasOwnProperty("state")?this.options.state:sf},n.getDependencies=function(){return this.options.dependencies||[]},e}(gi),pf=function(t){function e(e,n,i){var r;return void 0===n&&(n=cf),void 0===i&&(i={}),r=t.apply(this,arguments)||this,r.objects=new Map,r}r(e,t);var n=e.prototype;return n.has=function(t){return!!this.get(t)},n.get=function(t){return null==t?null:this.objects.get(parseInt(t))},n.clear=function(){this.objects.clear(),this.dispatch("update",null,null)},n.getObjectIdForEvent=function(t){return t.objectId||t.data.id},n.getObjectForEvent=function(t){var e=this.getObjectIdForEvent(t);return this.get(e)},n.all=function(t){var e=this.objects.values();return t||(e=Array.from(e)),e},n.createObject=function(t){var e=new this.ObjectWrapper(t.data,t,this);return e.setStore(this),e},n.applyCreateEvent=function(t,e){void 0===e&&(e=!0);var n=this.getObjectForEvent(t);if(n){var i=Object.assign({},t);return i.type="refresh",n.applyEvent(i),n.dispatch("update",t),n}var r=this.createObject(t);return this.objects.set(this.getObjectIdForEvent(t),r),e&&this.dispatch("create",r,t),r},n.applyUpdateOrCreateEvent=function(t){var e=this.getObjectForEvent(t);return e?this.applyEventToObject(e,t):(e=this.applyCreateEvent(t,!1),this.dispatch("create",e,t)),this.dispatch("updateOrCreate",e,t),e},n.applyDeleteEvent=function(t){var e=this.getObjectForEvent(t);return e&&(this.objects.delete(this.getObjectIdForEvent(t)),e.dispatch("delete",t,e),this.dispatch("delete",e,t)),e},n.applyEventToObject=function(t,e){return t.applyEvent(e),t.dispatch("update",e),this.dispatch("update",t,e),t},n.applyEvent=function(t){if(t.data=t.data||{},"create"===t.type)return this.applyCreateEvent(t);if("delete"===t.type)return this.applyDeleteEvent(t);if("updateOrCreate"===t.type)return this.applyUpdateOrCreateEvent(t);var e=this.getObjectForEvent(t);return e?this.applyEventToObject(e,t):void console.error("I don't have object of type ",this.objectType," ",t.objectId)},n.importState=function(t){t=t||[];for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;this.fakeCreate(o)}},n.fakeCreate=function(t,e){if(void 0===e&&(e="fakeCreate"),t){var n={objectType:this.objectType,objectId:t.id,type:e,data:t};return this.applyCreateEvent(n)}},n.addCreateListener=function(t,e){if(e)for(var n=this.objects.values(),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o,a={objectType:this.objectType,objectId:s.id,type:"fakeCreate",data:s};t(s,a)}return this.addListener("create",t)},n.addUpdateListener=function(t){return this.addListener("update",t)},n.addDeleteListener=function(t){return this.addListener("delete",t)},e}(hf);(function(t){function e(n,i){return void 0===i&&(i={}),t.call(this,n,e,i)||this}r(e,t);var n=e.prototype;return n.get=function(){return this},n.all=function(){return[this]},n.applyEvent=function(t){Object.assign(this,t.data),this.dispatch("update",t,this)},n.importState=function(t){Object.assign(this,t),this.dispatch("update",event,this)},n.addUpdateListener=function(t){return this.addListener("update",t)},e})(hf).prototype.addEventListener=cf.prototype.addEventListener;var df=function(t){function e(e){return t.call(this,e)||this}r(e,t);var n=e.prototype;return n.getName=function(){},n.getCustomSetting=function(t,e){for(var n=t.split(":"),i=this.customSettings,r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;if(!(l in i))return e;i=i[l]}return i},n.getParsedCustomSetting=function(t,e){return JSON.parse(this.getCustomSetting(t,e))},n.setCustomSetting=function(t,e){var n=t.split(":"),i=n.pop();this.customSettings||(this.customSettings={});for(var r=this.customSettings,o=n,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var u=l;u in r||(r[u]={}),r=r[u]}r[i]=e,this.dispatch("updateCustomSetting",{key:t,value:JSON.parse(e),rawValue:e,origin:"set"})},n.saveCustomSetting=function(t,e){if(this.id!=USER.id)return void console.error("Invalid user");this.dispatch("updateCustomSetting",{key:t,value:e,origin:"save"});var n={customSettingsKey:t,customSettingsValue:e};this.timeouts||(this.timeouts=new Map),this.timeouts.has(t)&&clearTimeout(this.timeouts.get(t)),this.timeouts.set(t,setTimeout(function(){Na.postJSON("/accounts/profile_changed/",n).then(function(){},function(){})}))},n.applyEvent=function(e){"setCustomSetting"===e.type?(console.log("Updated custom settings: ",e),this.setCustomSetting(e.data.key,e.data.value)):t.prototype.applyEvent.call(this,e)},e}(cf),ff=new pf("user",df);ff.getCurrentUser=function(){return window.USER};var gf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDisplayHandle=function(){return(this.displayName?this.name||this.username:this.username||this.name)||"user-"+this.id},n.getProfileUrl=function(){return this.username?"/user/"+this.username:"/userid/"+this.id},e}(cf),mf=lf(pf),yf=new mf("publicuser",gf,{fetchTimeoutDuration:20,maxFetchObjectCount:512,fetchURL:"/accounts/public_user_profiles/"});window.USER=Object.assign({id:0,customSettings:{}},window.USER||{}),window.USER=ff.fakeCreate(window.USER);var bf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getUser=function(){return ff.get(this.userId)},n.isRead=function(){return this.id<=this.getUser().lastReadNotificationId},e}(cf),vf=(new pf("UserNotification",bf,{dependencies:["user"]}),function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.userId=e.userId||e.id,t.prototype.setOptions.call(this,e),this.options.color=this.options.color||"#2089b5",this.setUser(yf.get(this.options.userId))},n.setUser=function(t){this.user=t},n.getNodeType=function(){return"span"},n.setColor=function(t){this.options.color=t,this.handle.setStyle("color",t)},n.render=function(){var t,e=this;return this.user?t=wi.createElement("span",{ref:"handle",style:{cursor:"pointer",color:this.options.color},onClick:function(){window.open(e.user.getProfileUrl(),"_blank")}},wi.createElement("b",null,this.user.getDisplayHandle())):(yf.fetch(this.options.userId,function(t){e.setUser(t),e.redraw()}),t=wi.createElement("b",{ref:"handle",style:{color:"#BBB"}},"user-"+this.options.userId)),[wi.createElement("span",{ref:"container",style:{position:"relative",overflow:"hidden"}},t,this.options.children)]},e}(wi.Element)),Sf=function(t){function e(e){var n;return n=t.call(this,e)||this,n.translationMap=new Map,n}r(e,t);var n=e.prototype;return n.toString=function(){var t=this.name;return this.localName&&this.localName!=this.name&&(t+=" ("+this.localName+")"),t},n.buildTranslation=function(t){Af.dispatch("buildTranslationMap",this),t(this.translationMap)},e}(cf),wf=function(t){function e(){return t.call(this,"Language",Sf)||this}r(e,t);var n=e.prototype;return n.getLanguageForCode=function(t){for(var e=this.all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;if(o.isoCode===t)return o}},n.setLocale=function(t){this.Locale!=t&&(this.Locale=t,this.dispatch("localeChange",t))},n.getLocale=function(){return this.Locale},e}(pf),Af=new wf,Ef=function(t){function e(e){var n;return n=t.call(this,e)||this,n.edits=new Map,n}r(e,t);var n=e.prototype;return n.canBeEditedByUser=function(t){return void 0===t&&(t=USER),t.isSuperUser||this.userCreatedId==t.id},n.addEdit=function(t){this.edits.set(t.id,t)},n.getEdits=function(){return Array.from(this.edits.values())},n.getTranslation=function(t){void 0===t&&(t=Af.Locale);for(var e=Tf.all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;if(o.baseArticleId===this.id&&o.languageId===t.id)return o}return this},n.getBaseArticle=function(){return Tf.get(this.baseArticleId)||this},e}(cf),xf=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getArticle=function(){return Tf.get(this.articleId)},e
}(cf),Cf=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getTranslation=function(t,e){void 0===e&&(e=Af.Locale);var n=this.get(t);return n&&(n=n.getTranslation(e)),n},e}(lf(pf)),Tf=new Cf("article",Ef,{fetchURL:"/fetch_article/",maxFetchObjectCount:32});new pf("articleedit",xf,{dependencies:["article"]}).addCreateListener(function(t){t.getArticle().addEdit(t)});var Lf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getActionName=function(){return"Transfer ownership"},n.getActionLevel=function(){return Li.PRIMARY},n.getArticle=function(){return this.options.article},n.getBody=function(){return[wi.createElement(wi.TextElement,{ref:"text",value:"Set owner for "+this.getArticle().name+":"}),wi.createElement(Uo,{style:{marginTop:"10px"}},wi.createElement(Vo,{ref:"ownerFormField",label:"Author ID"},wi.createElement(Ao,{ref:"ownerFormInput",value:this.getArticle().userCreatedId})))]},n.getFooter=function(){var t=this;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:"Close",onClick:function(){return t.hide()}}),wi.createElement(_a,{ref:"transferOwnershipButton",level:this.getActionLevel(),onClick:function(){return t.action()},statusOptions:[this.getActionName(),{faIcon:"spinner fa-spin",label:" transfering ownership ..."},this.getActionName(),"Failed"]}))]},n.action=function(){var t=this,e=this.ownerFormInput.getValue(),n={newOwner:e};this.messageArea.showMessage("Saving...","black",null),this.transferOwnershipButton.postJSON("/article/"+this.getArticle().id+"/set_owner/",n).then(function(){return t.hide()},function(e){return t.messageArea.showMessage("Error in changing owner "+e.message,"red")})},n.hide=function(){this.messageArea.clear(),t.prototype.hide.call(this)},e}(yc),Of=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getActionName=function(){return"Delete article"},n.getBody=function(){return wi.createElement(wi.TextElement,{ref:"text",value:"Delete "+this.getArticle().name+"?"})},n.getArticle=function(){return this.options.article},n.getFooter=function(){var t=this;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:"Close",onClick:function(){return t.hide()}}),wi.createElement(_a,{ref:"deleteArticleButton",level:Li.DANGER,onClick:function(){t.deleteArticle()},statusOptions:["Delete article",{faIcon:"spinner fa-spin",label:" deleting article ..."},"Delete article","Failed"]}))]},n.deleteArticle=function(){var t=this;this.deleteArticleButton.postJSON("/article/"+this.getArticle().id+"/delete/",{}).then(function(){var e=t.options.parent.table;e.options.articles.splice(e.getArticleIndex(t.getArticle().id),1),e.redraw(),t.hide()},function(e){return t.messageArea.showMessage(e.message,"red")})},n.hide=function(){this.messageArea.clear(),t.prototype.hide.call(this)},e}(yc),Rf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getActionName=function(){return"Create article"},n.getBody=function(){return wi.createElement(Uo,{style:{marginTop:"10px"}},wi.createElement(Vo,{ref:"articleNameFormField",label:"Article name"},wi.createElement(Ao,{ref:"articleNameInput",value:""})),wi.createElement(Vo,{ref:"dependencyFormField",label:"Dependencies"},wi.createElement(Ao,{ref:"dependencyInput",value:""})),wi.createElement(Vo,{ref:"languageFormField",label:"Language"},wi.createElement(Ho,{ref:"languageSelect",options:Af.all()})),wi.createElement(Vo,{ref:"publicFormField",label:"Public"},wi.createElement(Co,{ref:"publicCheckbox",checked:!1})))},n.getFooter=function(){var t=this;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:"Close",onClick:function(){return t.hide()}}),wi.createElement(_a,{ref:"createArticleButton",level:Li.PRIMARY,onClick:function(){t.createArticle()},statusOptions:["Create article",{faIcon:"spinner fa-spin",label:" creating article ..."},"Create article","Failed"]}))]},n.createArticle=function(t){var e=this,n=this.articleNameInput.getValue(),i=this.dependencyInput.getValue(),r=this.languageSelect.get().id,o=this.publicCheckbox.getValue(),s={name:n,dependency:i,languageId:r,isPublic:o};t&&Object.assign(s,t),this.createArticleButton.postJSON("/create_article/",s).then(function(t){e.options.parent.table.addArticle(Tf.get(t.article.id)),e.hide()},function(t){e.messageArea.showMessage(t.message,"red")})},n.hide=function(){this.messageArea.clear(),t.prototype.hide.call(this)},e}(yc),Nf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getActioName=function(){return"Add translation"},n.getBody=function(){var t=this.options.baseArticle;return wi.createElement(Uo,{style:{marginTop:"10px"}},wi.createElement(Vo,{ref:"articleNameFormField",label:"Article name"},wi.createElement(Ao,{ref:"articleNameInput",value:"Translation for "+t.name})),wi.createElement(Vo,{ref:"dependencyFormField",label:"Dependencies"},wi.createElement(Ao,{ref:"dependencyInput",value:t.dependency})),wi.createElement(Vo,{ref:"languageFormField",label:"Language"},wi.createElement(Ho,{ref:"languageSelect",options:Af.all()})),wi.createElement(Vo,{ref:"publicFormField",label:"Public"},wi.createElement(Co,{ref:"publicCheckbox",checked:t.isPublic})))},n.getFooter=function(){var t=this,e=this.options.baseArticle;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:"Close",onClick:function(){return t.hide()}}),wi.createElement(_a,{ref:"createArticleButton",level:Li.PRIMARY,onClick:function(){return t.createArticle({baseArticleId:e.id,markup:e.markup})},statusOptions:["Add translation",{faIcon:"spinner fa-spin",label:" creating translation article ..."},"Success","Failed"]}))]},e}(Rf),If=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getArticle=function(){return this.options.article},n.render=function(){return wi.createElement(vf,{id:this.getArticle().userCreatedId})},n.onMount=function(){var t=this;this.attachUpdateListener(this.getArticle(),function(){return t.redraw()})},e}(wi.Primitive("span")),kf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{size:"lg"}},n.getArticle=function(){return this.options.article},n.isPublic=function(){return this.options.article.isPublic},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.setStyle("color",this.isPublic()?"green":"red")},n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.options.icon=this.isPublic()?"check":"times"},n.onMount=function(){var t=this;this.attachUpdateListener(this.getArticle(),function(){return t.updateOptions({icon:t.isPublic()?"check":"times"})})},e}(Qs),Mf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.resetColumnSortingOrder()},n.resetColumnSortingOrder=function(){this.columnSortingOrder=[this.columns[4],this.columns[5],this.columns[0],this.columns[3],this.columns[2],this.columns[1]]},n.getArticleIndex=function(t){for(var e=0;e<this.options.articles.length;e+=1)if(this.options.articles[e].id===t)return e;return-1},n.addArticle=function(t){this.options.articles.push(t),this.redraw()},n.setColumns=function(){var e=this,n={textAlign:"left",verticalAlign:"middle"},i={textAlign:"left",verticalAlign:"middle"},r=[{value:function(t){return wi.createElement(co,{href:"/article/"+t.id+"/edit/",value:t.name})},rawValue:function(t){return t.name},headerName:"Article",headerStyle:i,cellStyle:n},{value:function(t){return wi.createElement(If,{article:t})},rawValue:function(t){return yf.get(t.userCreatedId).username},headerName:"Author",headerStyle:i,cellStyle:n},{value:function(t){return wi.createElement(kf,{article:t})},rawValue:function(t){return t.isPublic?"Yes":"No"},headerName:"Public",headerStyle:i,cellStyle:n},{value:function(t){return Af.get(t.languageId).name},rawValue:function(t){return Af.get(t.languageId).name},headerName:"Language",headerStyle:i,cellStyle:n},{value:function(t){return Kc.unix(t.dateCreated).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(t){return t.dateCreated},sortDescending:!0,headerName:"Date created",headerStyle:i,cellStyle:n},{value:function(t){return Kc.unix(t.dateModified).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(t){return t.dateModified},sortDescending:!0,headerName:"Date modified",headerStyle:i,cellStyle:n}];this.options.parent.options.readOnly||(USER.isSuperUser&&r.push({value:function(t){return wi.createElement(Da,{level:Li.PRIMARY,label:"Set owner",onClick:function(){return Lf.show({article:t})}})},headerName:"Set owner",headerStyle:i,cellStyle:n}),r.push({value:function(t){return wi.createElement(Da,{level:Li.DANGER,label:"Delete",onClick:function(){Of.show({article:t,parent:e.options.parent})}})},headerName:"Delete",headerStyle:i,cellStyle:n})),t.prototype.setColumns.call(this,r)},n.getEntries=function(){return this.sortEntries(this.options.articles)},e}(Uc),Pf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{title:"Translation manager"}},n.setOptions=function(e){e=Object.assign(this.getDefaultOptions(),e),t.prototype.setOptions.call(this,e)},n.render=function(){var t=this;this.table=wi.createElement(Mf,{articles:[],parent:this});var e=null;return this.options.readOnly||(e=wi.createElement("div",{className:"pull-right"},wi.createElement(Da,{level:Li.PRIMARY,label:"Add translation",onClick:function(){return Nf.show({parent:t,baseArticle:t.options.baseArticle})},style:{marginTop:"5px",marginBottom:"5px"}}))),[wi.createElement("div",{className:"pull-left"},wi.createElement("h4",null,wi.createElement("strong",null,this.options.title))),e,this.table]},n.onMount=function(){var t=this;this.options.baseArticle&&Na.getJSON("/article/"+this.options.baseArticle.id+"/get_translations/",{}).then(function(){for(var e=Tf.all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;o.baseArticleId===t.options.baseArticle.id&&t.table.options.articles.push(o)}t.table.redraw()})},e}(uo),Df=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.classMap=e.classMap||this.constructor.markupClassMap,t.prototype.setOptions.call(this,e)},n.getEditButton=function(){if(this.options.showEditButton&&this.options.article.canBeEditedByUser()){var t=this.options.editButtonUrl||"/article/"+this.options.article.id+"/edit/";return wi.createElement("div",{className:"text-left"},wi.createElement("a",{href:t,target:"_blank"},wi.createElement(Da,{label:wi.T("Edit"),style:{margin:"10px"}})))}},n.render=function(){return[this.getEditButton(),t.prototype.render.call(this)]},n.setArticle=function(t){this.updateOptions({article:t})},n.getValue=function(){return t.prototype.setValue.call(this,this.getArticleToRender().markup),t.prototype.getValue.call(this)},n.getArticleToRender=function(){return this.options.article.getTranslation()},n.getArticleDependencies=function(){var t=this.options.article.dependency;return t&&t.split(",")},n.redraw=function(){var e=this,n=this.getArticleDependencies();if(!n)return void t.prototype.redraw.call(this);window.require(n,function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.registerDependencies(i),t.prototype.redraw.call(e)})},n.onMount=function(){var t=this;this.options.liveLanguage&&this.attachListener(Af,"localeChange",function(){return t.redraw()})},e}(Vd),zf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.options.articleId=this.options.articleId||this.options.id},n.redraw=function(){var e=this;if(this.options.article)return t.prototype.redraw.call(this);Tf.fetch(this.options.articleId,function(t){return e.updateOptions({article:t})})},e}(Df);Df.markupClassMap=new Wd(Wd.GLOBAL,[["Article",zf],["RawSVG",Yo.RawSVG]]);var _f=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.options.value=this.options.article.markup},n.getMarkupRenderer=function(){return wi.createElement(Df,{ref:this.refLink("markupRenderer"),article:this.options.article,style:{flex:"1",height:"100%",overflow:"auto"}})},n.updateValue=function(e){this.options.article.markup=e,t.prototype.updateValue.call(this,e)},e}(Zd),Bf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getActionName=function(){return"Delete Article"},n.getBody=function(){return wi.createElement("p",null,"Delete ",this.options.article.name,"?")},n.getFooter=function(){var t=this;return[wi.createElement(fo,{ref:"messageArea"}),wi.createElement(sc,null,wi.createElement(Da,{label:"Close",onClick:function(){return t.hide()}}),wi.createElement(_a,{ref:"deleteArticleButton",level:Li.DANGER,onClick:function(){t.deleteArticle()},statusOptions:["Delete article",{faIcon:"spinner fa-spin",label:" deleting article ..."},"Delete article","Failed"]}))]},n.deleteArticle=function(){var t=this;this.deleteArticleButton.postJSON("/article/"+this.options.article.id+"/delete/",{}).then(function(){t.options.article.baseArticleId?window.location.replace("/article/"+t.options.article.baseArticleId+"/edit/"):window.location.replace("/")},function(e){return t.messageArea.showMessage(e.message,"red")})},e}(yc),Hf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e)},n.getArticle=function(){return Tf.get(this.options.articleId)},n.initializeVersioning=function(){if(e.DiffWidgetClass){this.versions=[],this.versionsLabels=[];for(var t=this.getArticle().getEdits(),n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}var o=r;this.versions.push(o.content),this.versionsLabels.push("Version "+o.id)}this.versions.push(this.getArticle().markup),this.versionsLabels.push("Edit version"),this.versions.reverse(),this.versionsLabels.reverse(),this.leftEditable=!0,this.rightEditable=!1}},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.setStyle({display:"flex",flexDirection:"column",height:"100%"})},n.render=function(){var t=this;this.initializeVersioning();var n=null,i=null;this.getArticle().baseArticleId?i=wi.createElement(Vo,{ref:"baseArticleFormField",label:"Base article"},wi.createElement(co,{href:"/article/"+this.getArticle().baseArticleId+"/edit/",value:"Go to base article"})):n=wi.createElement(uo,{title:"Translations"},wi.createElement(Pf,{title:"Translations for "+this.getArticle().name,baseArticle:this.getArticle()}));var r=null;USER.isSuperUser&&(r=wi.createElement(uo,{title:"Ownership"},wi.createElement(Uo,{style:{marginTop:"10px"}},wi.createElement(Vo,{ref:"ownerFormField",label:"Author ID"},wi.createElement(Ao,{ref:"ownerFormInput",value:this.getArticle().userCreatedId}))),wi.createElement(_a,{ref:"setOwnerButton",level:Li.INFO,onClick:function(){var e=t.ownerFormInput.getValue();t.setOwner(e)},statusOptions:["Transfer ownership",{faIcon:"spinner fa-spin",label:" transfering ownership ..."},"Transfer ownership","Failed"]}),wi.createElement(fo,{ref:"setOwnerMessageArea"})));var o;if(e.DiffWidgetClass){var s=e.DiffWidgetClass;o=wi.createElement(uo,{title:"Revisions",style:{height:"100%",display:"flex",flexDirection:"column"}},wi.createElement(uo,null,wi.createElement(Ho,{ref:"leftTextSelector",options:this.versionsLabels}),wi.createElement(Ho,{style:{float:"right",marginRight:"25px"},ref:"rightTextSelector",options:this.versionsLabels})),wi.createElement(s,{ref:"diffWidget",leftEditable:this.leftEditable,rightEditable:this.rightEditable,leftTextValue:this.versions[2],arrows:this.arrows,rightTextValue:this.versions[1],style:{flex:"1",height:"calc(100% - 100px)",width:"calc(100% - 100px)"}}))}return[wi.createElement("h3",null,this.getArticle().name+" Id="+this.options.articleId),wi.createElement($s,{ref:"tabArea",variableHeightPanels:!0,style:{flex:"1",height:"100%",display:"flex",flexDirection:"column"}},wi.createElement(uo,{title:"Edit",active:!0,style:{height:"100%",overflow:"hidden"}},wi.createElement(_a,{ref:"saveMarkupButton",level:Li.INFO,onClick:function(){var e=t.markupEditor.getValue();t.saveMarkup(e)},statusOptions:["Save",{faIcon:"spinner fa-spin",label:" saveing ..."},"Save","Failed"]}),wi.createElement(fo,{ref:"saveMarkupMessageArea"}),wi.createElement(_f,{style:{height:"100%",marginTop:"-31px",display:"flex",flexDirection:"column"},ref:"markupEditor",article:this.getArticle()})),o,wi.createElement(uo,{title:"Summary"},wi.createElement(Uo,{style:{marginTop:"10px"}},wi.createElement(Vo,{ref:"articleNameFormField",label:"Article name"},wi.createElement(Ao,{ref:"articleNameFormInput",value:this.getArticle().name})),wi.createElement(Vo,{ref:"dependencyFormField",label:"Dependencies"},wi.createElement(Ao,{ref:"dependencyFormInput",value:this.getArticle().dependency})),i,wi.createElement(Vo,{ref:"languageFormField",label:"Language"},wi.createElement(Ho,{ref:"languageSelect",options:Af.all(),selected:Af.get(this.getArticle().languageId)})),wi.createElement(Vo,{ref:"publicFormField",label:"Public"},wi.createElement(Co,{ref:"publicCheckbox",checked:this.getArticle().isPublic}))),wi.createElement(_a,{ref:"saveOptionsButton",level:Li.INFO,onClick:function(){var e=t.articleNameFormInput.getValue(),n=t.dependencyFormInput.getValue(),i=t.languageSelect.get().id,r=t.publicCheckbox.getValue(),o={name:e,dependency:n,languageId:i,isPublic:r};t.saveOptions(o)},statusOptions:["Save",{faIcon:"spinner fa-spin",label:" saveing ..."},"Save","Failed"]}),wi.createElement(Da,{ref:"deleteArticleButton",level:Li.DANGER,label:"Delete article",style:{marginLeft:"3px"},onClick:function(){return t.deleteArticleModal.show()}}),wi.createElement(fo,{ref:"saveOptionsMessageArea"})),n,r)]},n.saveMarkup=function(t){var n=this,i={markup:t};this.saveMarkupMessageArea.showMessage("Saving...","black",null),this.saveMarkupButton.postJSON("/article/"+this.options.articleId+"/edit/",i).then(function(){e.DiffWidgetClass&&n.addNewVersion(t),n.saveMarkupMessageArea.showMessage("Saved article")},function(t){return n.saveMarkupMessageArea.showMessage("Error in saving the article: "+t.message,"red")})},n.saveOptions=function(t){var e=this,n={};Object.assign(n,t),this.saveOptionsMessageArea.showMessage("Saving...","black",null),this.saveOptionsButton.postJSON("/article/"+this.options.articleId+"/edit/",n).then(function(){return window.location.replace("/article/"+e.options.articleId+"/edit/")},function(t){return e.saveOptionsMessageArea.showMessage("Error in saving the article: "+t.message,"red")})},n.setOwner=function(t){var e=this;this.setOwnerMessageArea.showMessage("Saving...","black",null),this.setOwnerButton.postJSON("/article/"+this.options.articleId+"/set_owner/",{newOwner:t}).then(function(){return e.setOwnerMessageArea.showMessage("Author successfully changed")},function(t){return e.setOwnerMessageArea.showMessage("Error in changing owner "+t.message,"red")})},n.addNewVersion=function(t){this.versionsLabels[0]="Version "+this.versionsLabels.length,this.versions[0]=t,this.versions.unshift(this.markupEditor.getValue()),this.versionsLabels.unshift("Edit version");var e=this.leftTextSelector.getIndex(),n=this.rightTextSelector.getIndex();this.leftTextSelector.redraw(),this.rightTextSelector.redraw(),this.setLeftIndex(e),this.setRightIndex(n)},n.setLeftIndex=function(t){this.leftTextSelector.setIndex(t),this.diffWidget.setLeftText(this.versions[t])},n.setRightIndex=function(t){this.rightTextSelector.setIndex(t),this.diffWidget.setRightText(this.versions[t])},n.onMount=function(){var t=this;if(this.deleteArticleModal=wi.createElement(Bf,{article:this.getArticle()}),e.DiffWidgetClass){this.tabArea.titleArea.children[1].addClickListener(function(){t.versions[0]=t.markupEditor.getValue(),t.setLeftIndex(t.leftTextSelector.getIndex()),t.setRightIndex(t.rightTextSelector.getIndex())});var n=function(){t.leftEditable=0===t.leftTextSelector.getIndex(),t.rightEditable=0===t.rightTextSelector.getIndex(),t.diffWidget.setLeftEditable(t.leftEditable),t.diffWidget.setRightEditable(t.rightEditable)};this.leftTextSelector.addChangeListener(function(){t.diffWidget.setLeftText(t.versions[t.leftTextSelector.getIndex()]),n()}),this.rightTextSelector.addChangeListener(function(){t.diffWidget.setRightText(t.versions[t.rightTextSelector.getIndex()]),n()}),this.setLeftIndex(0),this.setRightIndex(1)}window.onbeforeunload=function(){return""}},e}(uo),Ff=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getUserReactionStore=function(){return this.getStore().getState().getStore("UserReaction")},n.getReactions=function(){for(var t=[],e=this.getUserReactionStore().all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;o.collectionId==this.id&&t.push(o)}return t},n.getCurrentUserReaction=function(){for(var t=window.USER,e=this.getReactions(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;if(o.userId==t.id)return o}return null},n.getCurrentUserReactionType=function(){var t=this.getCurrentUserReaction();return t&&t.type},e}(cf),Uf=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(cf),Wf=new pf("UserReactionCollection",Ff),Vf=(new pf("UserReaction",Uf),function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,yf.fakeCreate(n.user),i}r(e,t);var n=e.prototype;return n.getNormalizedId=function(){var t=this.id+"";return t.startsWith("temp-")&&(t=t.substr(5)),parseInt(t)},n.getDate=function(){return this.timeAdded},n.getUser=function(){var t=yf.get(this.userId);return t?t.username:"user-"+this.userId},n.getContent=function(){return this.content},n.getMessageThread=function(){return Kf.get(this.messageThreadId)},n.getReactionCollection=function(t){void 0===t&&(t=!1);var e=Wf.get(this.reactionCollectionId);return t&&!e?{upvotesCount:0,downvotesCount:0,getCurrentUserReactionType:function(){}}:e},n.getNumLikes=function(){return this.getReactionCollection(!0).upvotesCount},n.getNumDislikes=function(){return this.getReactionCollection(!0).downvotesCount},n.getVotesBalance=function(){return this.getNumLikes()-this.getNumDislikes()},n.getUserVote=function(){return this.getReactionCollection(!0).getCurrentUserReactionType()},n.getPreviousMessage=function(){var t=null,e=this.getNormalizedId();this.hasTemporaryId()&&(e+=1);for(var n=this.getMessageThread().getMessages(),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;s.id<e&&(!t||t.id<s.id)&&(t=s)}return t},n.getNextMessage=function(){throw"Implement me!"},n.hasMarkupEnabled=function(){return this.getMessageThread().hasMarkupEnabled()},n.getTimeOfDay=function(){return Kc.unix(this.timeAdded).format("HH:mm")},n.edit=function(t,e,n){void 0===e&&(e=li),void 0===n&&(n=li),Na.postJSON("/chat/edit_message/",{messageId:this.id,message:t}).then(e,n)},n.react=function(t,e,n){void 0===e&&(e=li),void 0===n&&(n=li),Na.postJSON("/chat/edit_message/",{messageId:this.id,reaction:t}).then(e,n)},n.like=function(t,e){this.react("like",t,e)},n.dislike=function(t,e){this.react("dislike",t,e)},n.resetReaction=function(t,e){this.react("resetReaction",t,e)},n.deleteMessage=function(t,e){Na.postJSON("/chat/edit_message/",{messageId:this.id,hidden:!0}).then(t,e)},n.applyEvent=function(e){"messageEdit"===e.type?(Object.assign(this,e.data),this.dispatch("edit",e)):"reaction"===e.type?(Object.assign(this,e.data),this.dispatch("reaction",e)):"messageDelete"===e.type?(this.dispatch("delete",e),this.getMessageThread().deleteMessageInstance(this)):t.prototype.applyEvent.call(this,e)},n.updateId=function(e){if(this.id!=e){var n=this.id;t.prototype.updateId.call(this,e);var i=this.getMessageThread();i.messages.delete(n),i.messages.set(this.id,this)}},n.setPostError=function(t){this.postError=t,this.dispatch("postError",t),console.log("Post error: ",t)},e}(function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.hasTemporaryId=function(){return("string"==typeof this.id||this.id instanceof String)&&this.id.startsWith("temp-")},n.updateId=function(t){if(this.id!=t){var e=this.id;this.hasTemporaryId()||console.error("This is only meant to replace temporary ids!"),this.id=t,this.dispatch("updateId",{oldId:e})}},e}(t)}(cf))),jf=function(t){function e(e){var n;return n=t.call(this,e)||this,n.messages=new Map,n.streamName.startsWith("messagethread-privatechat-")||of.registerStream(n.streamName),n.online=new Set(n.online||[]),n.online.delete(0),n}r(e,t);var n=e.prototype;return n.hasMarkupEnabled=function(){return this.markupEnabled||!1},n.addMessageInstance=function(t,e){this.messages.set(t.id,t),this.dispatch("newMessage",e)},n.deleteMessageInstance=function(t){this.messages.delete(t.id)},n.applyEvent=function(e){e.data.online&&(this.online=e.data.online=new Set(e.data.online),this.online.delete(0)),"online"===e.type?this.dispatch("usersChanged",e):"onlineDeltaJoined"===e.type?(0!=e.data.userId&&this.online.add(e.data.userId),this.dispatch("usersChanged",e)):"onlineDeltaLeft"===e.type?(0!=e.data.userId&&this.online.delete(e.data.userId),this.dispatch("usersChanged",e)):t.prototype.applyEvent.call(this,e)},n.getMessages=function(t){void 0===t&&(t=!1);var e=Array.from(this.messages.values());return t?e.sort(function(t,e){return e.id-t.id}):e.sort(function(t,e){return t.id-e.id})},n.getNumMessages=function(){return this.messages.size},n.getMaxMessageId=function(){for(var t=0,e=this.messages.values(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;!o.hasTemporaryId()&&o.id>t&&(t=o.id)}return t},n.getLastMessage=function(){for(var t=null,e=this.messages.values(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;(!t||t.getNormalizedId()<o.getNormalizedId()||t.getNormalizedId()===o.getNormalizedId()&&o.hasTemporaryId())&&(t=o)}return t},e}(cf),Gf=function(t){function e(){return t.call(this,"MessageInstance",Vf,{dependencies:["messagethread","publicuser"]})||this}return r(e,t),e.prototype.createVirtualMessageInstance=function(t,e,n){var i={content:t,temporaryId:n,id:"temp-"+n,timeAdded:ch.now().toUnix(),userId:parseInt(USER.id),messageThreadId:e.id,meta:{}};return this.fakeCreate(i,"virtualMessage")},e}(function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t),e.generateVirtualId=function(){return this.virtualIdCounter||(this.virtualIdCounter=0),this.virtualIdCounter+=1,this.virtualIdCounter};var n=e.prototype;return n.generateVirtualId=function(){return this.constructor.generateVirtualId()},n.getVirtualObject=function(t){return this.objects.get("temp-"+t.virtualId)},n.get=function(t){return this.objects.get(t)},n.applyUpdateObjectId=function(t,e){if(t.id!==e){var n=t.id;t.updateId(e),this.objects.delete(n),this.objects.set(t.id,t),this.dispatch("updateObjectId",t,n)}},n.applyCreateEvent=function(e,n){if(void 0===n&&(n=!0),e.virtualId){var i=this.getVirtualObject(e);i&&this.applyUpdateObjectId(i,e.objectId)}return t.prototype.applyCreateEvent.apply(this,arguments)},e}(t)}(pf)),Yf=new Gf;Yf.addCreateListener(function(t,e){t.getMessageThread().addMessageInstance(t,e)});var Kf=new pf("messagethread",jf),Xf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getMessageThread=function(){return Kf.get(this.messageThreadId)},n.getOnlineUserIds=function(){return this.getMessageThread().online},e}(cf),qf=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(Xf),Jf=lf(pf),Zf=new Jf("groupChat",qf,{fetchURL:"/chat/group_chat_state/",maxFetchObjectCount:1});Zf.getFetchRequestData=function(t,e){return{chatId:t[0]}};var $f=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getOtherUserId=function(){return USER.id===this.user1Id?this.user2Id:this.user1Id},e}(Xf),Qf=new pf("PrivateChat",$f,{});Qf.getChatWithUser=function(t){if(USER.id===t){for(var e=this.all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;if(o.user1Id===t&&o.user2Id===t)return o}return null}for(var s=this.all(),a=Array.isArray(s),l=0,s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}var c=u;if(c.user1Id===t||c.user2Id===t)return c}},Qf.fetchForUser=function(t,e,n){Na.postJSON("/chat/private_chat_state/",{userId:t}).then(function(t){return e(Qf.get(t.privateChatId))},n)},Qf.addListener("update",function(t,e){"privateMessage"===e.type&&of.importState(e.state)});var tg=function(t){return function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.registerPlugin=function(t){this.hasOwnProperty("plugins")||(this.plugins=new Map);var e=new t(this),n=e.name();this.plugins.has(n)&&console.error("You are overwriting an existing plugin: ",n," for object ",this),this.plugins.set(n,e)},n.removePlugin=function(t){var e=this.getPlugin(t);e?(e.remove(this),this.plugins.delete(e.name())):console.error("Can't remove plugin ",t)},n.getPlugin=function(t){return"string"!=typeof t&&(t=t.pluginName()),this.plugins?this.plugins.get(t):null},e}(t)};wi.Emoji=wi.Emoji||wi.Element;var eg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign(t.prototype.getDefaultOptions.call(this),{height:"85%",width:"80%",destroyOnHide:!1})},n.getMarkupEditorStyle=function(){return{height:"85%",border:"solid 5px #DDD",borderRadius:"10px"}},n.getButtonStyle=function(){return{margin:"5px"}},n.render=function(){var t=this;return[wi.createElement(Zd,{ref:this.refLink("markupEditor"),classMap:this.options.classMap,showButtons:!1,style:this.getMarkupEditorStyle()}),wi.createElement("div",{ref:this.refLink("buttonPanel"),style:{"text-align":"center"}},wi.createElement(Da,{ref:"graphExample",label:"Graph",onClick:function(){t.appendGraphExample()},style:this.getButtonStyle(),className:"pull-left"}),wi.createElement(Da,{ref:"submissionExample",label:"Submission",onClick:function(){t.appendSubmissionExample()},style:this.getButtonStyle(),className:"pull-left"}),wi.createElement(Da,{ref:"codeSnippetExample",level:Li.DEFAULT,size:Oi.DEFAULT,label:"Code",onClick:function(){t.appendCodeExample()},style:this.getButtonStyle(),className:"pull-left"}),wi.createElement(Da,{ref:"linkExample",level:Li.DEFAULT,size:Oi.DEFAULT,label:"Link",onClick:function(){t.appendLinkExample()},style:this.getButtonStyle(),className:"pull-left"}),wi.createElement(Da,{ref:"latexExample",level:Li.DEFAULT,size:Oi.DEFAULT,label:"LaTeX",onClick:function(){t.appendLatexExample()},style:this.getButtonStyle(),className:"pull-left"}),wi.createElement(Da,{ref:this.refLink("doneButton"),level:Li.PRIMARY,label:"Done",className:"pull-right",style:this.getButtonStyle()})),wi.createElement("div",{className:"",style:{position:"absolute",width:"90%","margin-top":"45px"}},wi.createElement(co,{href:"/about/#markup",value:"More details here"}))]},
n.appendLatexExample=function(){this.markupEditor.appendValue("$$lim_{x\\to\\infty} f(x)$$")},n.appendGraphExample=function(){this.markupEditor.appendValue("<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />")},n.appendSubmissionExample=function(){this.markupEditor.appendValue("<Submission id={25717} />")},n.appendCodeExample=function(){this.markupEditor.appendValue('```java\nclass Main {\n    public static void main (String[] args) throws java.lang.Exception {\n        System.out.println("42");\n    }\n}\n```')},n.appendUserExample=function(){this.markupEditor.appendValue("<User id={1} />")},n.appendLinkExample=function(){this.markupEditor.appendValue('<Link href="https://csacademy.com" value="Cool website" newTab/>')},n.hide=function(){t.prototype.hide.call(this),this.options.hideCallback&&this.options.hideCallback(this)},n.show=function(){t.prototype.show.call(this),this.options.showCallback&&this.options.showCallback(this)},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.doneButton.addClickListener(function(){e.hide()})},e}(mc),ng=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.setOptions=function(e){e.classMap=this.constructor.classMap,t.prototype.setOptions.call(this,e)},e}(Vd);ng.classMap=new Wd(Wd.GLOBAL);var ig,rg,og,sg,ag,lg,ug,cg,hg,pg,dg,fg,gg,mg,yg,bg,vg,Sg,wg,Ag,Eg,xg,Cg,Tg,Lg,Og,Rg,Ng,Ig,kg,Mg,Pg,Dg,zg,_g,Bg,Hg,Fg,Ug,Wg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.toString=function(){return this.name},n.getIsoCode=function(){return this.isoCode},n.getEmojiName=function(){return"flag_"+this.getIsoCode().toLowerCase()},e}(cf),Vg=function(t){return{id:0,name:"",toString:function(){return t||"All Countries"}}},jg=function(t){return{id:-1,name:"",toString:function(){return t||"None"}}},Gg=function(t,e){return t.name>e.name?1:-1},Yg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.allWithNone=function(t){return void 0===t&&(t="None"),[jg(t)].concat(this.all().sort(Gg))},n.getCountriesFromIds=function(t,e){void 0===e&&(e=!0);for(var n=[],i=t,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;n.push(Kg.get(a))}var l=n.sort(Gg);return e&&l.unshift(Vg()),l},e}(pf),Kg=new Yg("country",Wg),Xg=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getClientId=function(){return this.clientId},e}(cf),qg=function(t){function e(){return t.call(this,"SocialApp",Xg)||this}r(e,t);var n=e.prototype;return n.getSocialApps=function(){return this.all()},n.getSocialAppByName=function(t){return this.all().find(function(e){return e.name===t})},e}(pf),Jg=new qg,Zg=function(t){function e(e,n){var i;return i=t.call(this)||this,i.socialApp=e,i.options=n,i}r(e,t);var n=e.prototype;return n.getSocialApp=function(){return this.socialApp},n.getClientId=function(){return this.getSocialApp().getClientId()},n.setLoaded=function(){this.loaded=!0,this.dispatch("loaded")},e.getInstance=function(){return this._Global||(this._Global=new this),this._Global},e.login=function(t,e){var n;(n=this.getInstance()).login.apply(n,arguments)},e.connect=function(t,e){var n;(n=this.getInstance()).connect.apply(n,arguments)},e}(gi),$g=function(t){function e(){var e;return e=t.call(this,Jg.getSocialAppByName("Google"),{loginByTokenUrl:"/accounts/google/login/token/"})||this,e.ensureScriptNodeExists(),e}r(e,t);var n=e.prototype;return n.sendData=function(t,e,n){void 0===n&&(n=li),Na.postJSON(t,e).then(n)},n.ensureScriptNodeExists=function(){var t=this,e="google-jsapi";if(!document.getElementById(e)){var n=document.createElement("script");n.id=e,n.async=!0,n.onload=function(){gapi.load("auth2",function(){gapi.auth2.init({client_id:t.getClientId()}).then(function(){t.updateSigninStatus(t.getGoogleAuth().isSignedIn.get()),t.getGoogleAuth().isSignedIn.listen(t.updateSigninStatus),t.setLoaded()})})},n.src="https://apis.google.com/js/platform.js",document.getElementsByTagName("head")[0].appendChild(n)}},n.getGoogleAuth=function(){return gapi.auth2.getAuthInstance()},n.getGoogleUser=function(){return this.getGoogleAuth().currentUser.get()},n.getAuthResponse=function(){return this.getGoogleUser().getAuthResponse()},n.updateSigninStatus=function(t){t&&console.log("Google user is signed in")},n.handleProcess=function(t){var e=this;if(!this.loaded)return void this.addListenerOnce("loaded",function(){return e.handleProcess(t)});this.getGoogleAuth().grantOfflineAccess({redirect_uri:"postmessage",immediate:!1}).then(function(n){Object.assign(n,{process:t}),e.sendData(e.options.loginByTokenUrl,n,function(){return self.location.reload()})})},n.login=function(){this.handleProcess("login")},n.connect=function(){this.handleProcess("connect")},e}(Zg),Qg=function(t){function e(){var e;return e=t.call(this,Jg.getSocialAppByName("Facebook"),{version:"v2.7",loginByTokenUrl:"/accounts/facebook/login/token/",loginOptions:{auth_type:"rerequest",scope:"email"},logoutUrl:"/accounts/logout/",locale:"en_US"})||this,e.ensureScriptNodeExists(),e}r(e,t);var n=e.prototype;return n.sendData=function(t,e){var n=this;Na.postJSON(t,e).then(function(t){t.next?self.location.href=t.next:location.reload()},function(t){n.dispatch("loginError",t)})},n.ensureScriptNodeExists=function(){var t=this;self.fbAsyncInit=function(){FB.init({appId:t.getClientId(),version:t.options.version,status:!0,cookie:!0,xfbml:!0}),t.setLoaded()};var e="facebook-jssdk";if(!document.getElementById(e)){var n=document.createElement("script");n.id=e,n.async=!0,n.src="//connect.facebook.net/"+this.options.locale+"/sdk.js",document.getElementsByTagName("head")[0].appendChild(n)}},n.onLoginCanceled=function(t){},n.onLoginError=function(t){},n.onLoginSuccess=function(t,e,n){var i={next:e||"",process:n,accessToken:t.authResponse.accessToken,expiresIn:t.authResponse.expiresIn};this.sendData(this.options.loginByTokenUrl,i)},n.logout=function(){var t=this;self.FB&&FB.logout(function(e){t.onLogoutSuccess(e,nextUrl)})},n.onLogoutSuccess=function(t){this.options.logoutUrl&&this.sendData(this.options.logoutUrl,data)},n.handleProcess=function(t,e,n){var i=this;if(!this.loaded)return void this.addListenerOnce("loaded",function(){return i.handleProcess(n)});"reauthenticate"===e&&(this.options.loginOptions.auth_type=e),FB.login(function(e){e.authResponse?i.onLoginSuccess(e,t,n):e&&e.status&&["not_authorized","unknown"].indexOf(e.status)>-1?i.onLoginCanceled(e):i.onLoginError(e)},this.options.loginOptions)},n.login=function(t,e,n){this.handleProcess(self.location.pathname,"authenticate","login")},n.connect=function(t,e,n){this.handleProcess(self.location.pathname,"authenticate","connect")},e}(Zg),tm=function(t){function e(){return t.call(this,Jg.getSocialAppByName("Github"),{loginWindowOptions:"height=600,width=800,scrollbars=yes"})||this}return r(e,t),e.prototype.login=function(t){var e={client_id:this.getClientId()},n=at("https://github.com/login/oauth/authorize",e);window.open(n,"githubWindow",this.options.loginWindowOptions).onbeforeunload=t},e}(Zg),em=40,nm=(ig=Lg=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"loginRegisterSystem",rg,h(e)),p(e,"loginRegisterButtons",og,h(e)),p(e,"loginSystemButton",sg,h(e)),p(e,"registerSystemButton",ag,h(e)),e.selectedLeft={borderBottom:"0",borderRight:"0",backgroundColor:"#fff",fontWeight:"bold"},p(e,"selectedLeftClass",lg,h(e)),e.selectedRight={borderBottom:"0",borderLeft:"0",backgroundColor:"#fff",fontWeight:"bold"},p(e,"selectedRightClass",ug,h(e)),p(e,"loginWidget",cg,h(e)),p(e,"registerWidget",hg,h(e)),e.fontAwesomeIcon={height:em+"px",lineHeight:em+"px",width:"15%",maxWidth:"15%",textAlign:"center",fontSize:"150%",display:"inline-block",float:"left",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",borderRight:"0px solid white",marginTop:"20px"},p(e,"input",pg,h(e)),p(e,"countrySelect",dg,h(e)),p(e,"badLogin",fg,h(e)),p(e,"rememberMe",gg,h(e)),p(e,"rememberMeCheckbox",mg,h(e)),p(e,"forgotPassword",yg,h(e)),p(e,"signInButtonContainer",bg,h(e)),p(e,"signInButton",vg,h(e)),p(e,"horizontalLine",Sg,h(e)),e.connectWith={width:"100%",textAlign:"center",marginTop:"20px"},e.connectIcons={width:"60%",marginLeft:"20%",marginRight:"20%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px"},p(e,"faLogo",wg,h(e)),p(e,"recaptchaContainer",Ag,h(e)),p(e,"connectWithButtonsSpan",Eg,h(e)),p(e,"thirdPartyLoginContainer",xg,h(e)),e.socialConnectDimensions="35px",p(e,"socialConnectButtonContainer",Cg,h(e)),p(e,"socialConnectButtonIcon",Tg,h(e)),e}return r(e,t),e}(Fi),rg=d(ig.prototype,"loginRegisterSystem",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return Ui.isTouchDevice()?(console.log("Touch device mode on"),{position:"absolute",height:"500px",width:"500px",backgroundColor:"#fff",maxHeight:"100%",maxWidth:"100%"}):{maxWidth:"100%",height:"500px",width:"500px",margin:"0 auto",backgroundColor:"#fff"}}}}),og=d(ig.prototype,"loginRegisterButtons",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",width:"100%",height:"12%"}}}),sg=d(ig.prototype,"loginSystemButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"100%",width:"50%",backgroundColor:"#f6f6f6",color:"#252525",border:"1px solid #d3d5d9",cursor:"pointer",float:"left",borderLeft:"0",borderTop:"0",textTransform:"uppercase"},t.fontSize="1.1em",t}}),ag=d(ig.prototype,"registerSystemButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"100%",width:"50%",backgroundColor:"#f6f6f6",color:"#252525",border:"1px solid #d3d5d9",cursor:"pointer",float:"left",borderRight:"0",borderTop:"0",textTransform:"uppercase"},t.fontSize="1.1em",t}}),lg=d(ig.prototype,"selectedLeftClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"0",borderRight:"0",backgroundColor:"#fff"}}}),ug=d(ig.prototype,"selectedRightClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"0",borderLeft:"0",backgroundColor:"#fff"}}}),cg=d(ig.prototype,"loginWidget",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"440px",width:"500px",maxWidth:"100%",padding:"5% 10%",color:"#252525",borderTop:"0px solid #d3d5d9"}}}),hg=d(ig.prototype,"registerWidget",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"440px",width:"500px",maxWidth:"100%",padding:"5% 10%",color:"#252525",borderTop:"0px solid #d3d5d9"}}}),pg=d(ig.prototype,"input",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"85%",maxWidth:"85%",height:em+"px",lineHeight:em+"px",display:"inline-block",float:"left",borderRadius:"0",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",marginTop:"20px",fontWeight:"bold",color:"#252525",border:"0px solid #d3d5d9",borderLeft:"0px solid white",boxShadow:"none",fontSize:"85%",":focus":{boxShadow:"none",outline:"none",border:"0px solid #d3d5d9",borderLeft:"0px solid white"}}}}),dg=d(ig.prototype,"countrySelect",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"85%",maxWidth:"85%",lineHeight:"30px",marginTop:"30px",marginBottom:"10px"}}}),fg=d(ig.prototype,"badLogin",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",width:"100%",fontSize:"14px",color:this.themeProperties.COLOR_DANGER,textAlign:"center"}}}),gg=d(ig.prototype,"rememberMe",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",paddingLeft:"5px"}}}),mg=d(ig.prototype,"rememberMeCheckbox",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"left"}}}),yg=d(ig.prototype,"forgotPassword",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",paddingRight:"5px"}}}),bg=d(ig.prototype,"signInButtonContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",margin:"20px auto"}}}),vg=d(ig.prototype,"signInButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"auto",marginRight:"auto",backgroundColor:"#f6f6f6",marginTop:"20px",minWidth:"120px",height:"50px",textAlign:"center",lineHeight:"50px",border:"0px solid #d3d5d9",fontSize:"18px",color:"#252525",":hover":{border:"0px solid #0b79a7",borderBottom:"2px solid #0b79a7",color:"#0b79a7"}}}}),Sg=d(ig.prototype,"horizontalLine",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"1px solid #d3d5d9",width:"100%",marginTop:"20px"}}}),wg=d(ig.prototype,"faLogo",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",paddingLeft:"15px",paddingRight:"15px",borderRadius:"3px",textAlign:"center",fontSize:"18px",marginLeft:"5px",marginRight:"5px",transition:".2s",color:"#fff",":hover":{transition:".2s",opacity:".9"},cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold"}}}),Ag=d(ig.prototype,"recaptchaContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"column",width:"100%"}}}),Eg=d(ig.prototype,"connectWithButtonsSpan",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"15px",fontSize:"15px"}}}),xg=d(ig.prototype,"thirdPartyLoginContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",margin:"15px 0"}}}),Cg=d(ig.prototype,"socialConnectButtonContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",height:this.socialConnectDimensions,color:"#fff",paddingRight:"10px",borderRadius:"5px",margin:"5px",outline:"none",paddingTop:"0",cursor:"pointer",fontSize:"13px",border:"0",":hover":{opacity:".85"}}}}),Tg=d(ig.prototype,"socialConnectButtonIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.socialConnectDimensions,width:this.socialConnectDimensions,display:"flex !important",justifyContent:"center",alignItems:"center"}}}),ig),im={Google:{name:"Google",color:"#de4b39",icon:"google-plus",loginManager:$g},Facebook:{name:"Facebook",color:"#3b5998",icon:"facebook",loginManager:Qg},Github:{name:"Github",color:"#000",icon:"github",loginManager:tm}},rm=(Og=tt(nm))(Rg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){var e=this.options.specificInfo;t.addClass(this.styleSheet.socialConnectButtonContainer),t.setStyle({backgroundColor:e.color})},n.getLoginManager=function(){return this.options.specificInfo.loginManager.getInstance()},n.render=function(){var t=this.options.specificInfo;return[wi.createElement(Qs,{icon:t.icon,className:this.styleSheet.socialConnectButtonIcon}),wi.createElement("span",null," ",t.name)]},n.onMount=function(){var t=this;this.getLoginManager(),this.addClickListener(function(){var e=t.options.loginElement;e&&e.clearErrorMessage(),t.getLoginManager().login()})},e}(wi.Primitive("button")))||Rg,om=(Ng=tt(nm))(Ig=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getSocialApps=function(){return Jg.all()},n.getConnectWith=function(){return wi.createElement("div",{style:this.styleSheet.connectWith},wi.T("or connect with"))},n.getConnectWithButtons=function(){var t=this;return wi.createElement("div",{className:this.styleSheet.thirdPartyLoginContainer},this.getSocialApps().map(function(e){return wi.createElement(rm,{specificInfo:im[e.name],loginElement:t.options.loginElement})}))},n.render=function(){return[this.getConnectWith(),this.getConnectWithButtons()]},e}(wi.Element))||Ig,sm=(kg=tt(nm))(Mg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.loginWidget)},n.getEmailInput=function(t){return void 0===t&&(t="user"),[wi.createElement("div",{style:{width:"100%"}},wi.createElement(Qs,{icon:t,style:this.styleSheet.fontAwesomeIcon}),wi.createElement(Eo,{autofocus:"autofocus",placeholder:"Email address",name:"email",ref:"emailInput",className:this.styleSheet.input}))]},n.getPasswordInput=function(t){return void 0===t&&(t={}),t=Object.assign({name:"password",className:this.styleSheet.input,ref:"passwordInput",placeholder:"Password",style:{marginBottom:"20px"}},t),[wi.createElement("div",{style:{width:"80% !important"}},wi.createElement(Qs,{icon:"lock",style:this.styleSheet.fontAwesomeIcon}),wi.createElement(xo,t))]},n.getRememberMeCheckbox=function(){return[wi.createElement(Co,{checked:!0,ref:"rememberInput",className:this.styleSheet.rememberMeCheckbox}),wi.createElement("div",{className:this.styleSheet.rememberMe},wi.T("Remember me"))]},n.getForgotPassword=function(){return wi.createElement(co,{className:this.styleSheet.forgotPassword,href:"/accounts/password_reset",value:wi.T("Forgot Password?")})},n.getClearBothArea=function(){return wi.createElement("div",{style:{clear:"both",height:"20px"}})},n.getErrorArea=function(){return wi.createElement(fo,{className:this.styleSheet.badLogin,ref:"loginErrorMessage"})},n.getSignInValue=function(){return"Sign In"},n.getSignInButton=function(){return wi.createElement("div",{className:this.styleSheet.signInButtonContainer},wi.createElement(wo,{className:this.styleSheet.signInButton,value:this.getSignInValue()}))},n.getHorizontalLine=function(){return wi.createElement("div",{className:this.styleSheet.horizontalLine})},n.getThirdPartyLogin=function(){return Jg.all().length?[this.getHorizontalLine(),wi.createElement(om,{loginElement:this})]:null},n.render=function(){return[wi.createElement("form",{ref:"form"},this.getEmailInput(),this.getPasswordInput(),this.getRememberMeCheckbox(),this.getForgotPassword(),this.getSignInButton(),this.getClearBothArea(),this.getErrorArea()),this.getThirdPartyLogin()]},n.setErrorMessage=function(t,e){void 0===e&&(e=!0),this.loginErrorMessage.showMessage(t.message,e?Gi.Global.getProperty("COLOR_DANGER"):"#000",6e3)},n.clearErrorMessage=function(){this.loginErrorMessage.clear()},n.sendLogin=function(){var t=this;this.clearErrorMessage();var e={email:this.emailInput.getValue(),password:this.passwordInput.getValue(),remember:this.rememberInput.getValue()};Na.postJSON("/accounts/login/",e).then(function(){return location.reload()},function(e){return t.setErrorMessage(e)})},n.onMount=function(){var t=this;this.form&&this.form.addNodeListener("submit",function(e){t.sendLogin(),e.preventDefault()})},e}(wi.Element))||Mg,am=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){return wi.createElement("div",{key:Math.random()})},n.redraw=function(){t.prototype.redraw.call(this),window.grecaptcha&&window.GOOGLE_RECAPTCHA_PUBLIC_KEY&&(this.captchaId=grecaptcha.render(this.children[0].node,{sitekey:window.GOOGLE_RECAPTCHA_PUBLIC_KEY}))},n.getResponse=function(){return grecaptcha.getResponse(this.captchaId)},n.onMount=function(){var t=this;window.onRecaptchaCallback=function(){return t.redraw()},In("https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback",function(){})},e}(wi.Element),lm=(Pg=tt(nm))(Dg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.registerWidget)},n.getSignUpButton=function(){return wi.createElement("div",{className:this.styleSheet.signInButtonContainer},wi.createElement(wo,{className:this.styleSheet.signInButton,value:"Sign Up",ref:"submitButton"}))},n.getUsernameInput=function(){return[wi.createElement("div",{style:{width:"100%"}},wi.createElement(Qs,{icon:"user",style:this.styleSheet.fontAwesomeIcon}),wi.createElement(Ao,{placeholder:"Username",ref:"usernameInput",className:this.styleSheet.input}))]},n.getCountryInput=function(){return[wi.createElement("div",{style:{width:"100%",marginBottom:"20px"}},wi.createElement(Qs,{icon:"flag",style:this.styleSheet.fontAwesomeIcon}),wi.createElement(Ho,{ref:"countrySelect",options:Kg.allWithNone("Don't set country"),className:this.styleSheet.countrySelect}),wi.createElement("div",{style:{clear:"both"}}))]},n.render=function(){var t=[this.getEmailInput(),this.getPasswordInput()];return t.splice(1,0,this.getUsernameInput()),t[0]=this.getEmailInput("envelope"),t[t.length-1]=this.getPasswordInput({style:{}}),t.push(this.getCountryInput()),"localhost"!==window.location.hostname&&(this.recaptchaWidget=wi.createElement(am,null)),[wi.createElement("form",{ref:"form"},t,wi.createElement("div",{className:this.styleSheet.recaptchaContainer},this.recaptchaWidget,this.getSignUpButton(),wi.createElement(fo,{ref:"errorArea"})))]},n.sendRegistration=function(){var t=this;this.submitButton.updateOptions({value:"Signing up..."});var e={email:this.emailInput.getValue(),recaptchaKey:this.recaptchaWidget&&this.recaptchaWidget.getResponse(),password:this.passwordInput.getValue()};this.usernameInput&&(e.username=this.usernameInput.getValue()),this.countrySelect&&(e.countryId=this.countrySelect.get().id),Na.postJSON("/accounts/signup_request/",e).then(function(){t.recaptchaWidget&&t.recaptchaWidget.hide(),t.submitButton.hide(),t.errorArea.showMessage("Done! Please check your email to continue","black",936e5)},function(e){t.errorArea.showMessage("Error in registration: "+e.message,"red",4e3),t.submitButton.updateOptions({value:"Sign Up"}),t.recaptchaWidget&&t.recaptchaWidget.redraw()})},n.onMount=function(){var t=this;this.form.addNodeListener("submit",function(e){e.preventDefault(),t.sendRegistration()})},e}(wi.Element))||Dg;lm.prototype.getEmailInput=sm.prototype.getEmailInput,lm.prototype.getPasswordInput=sm.prototype.getPasswordInput,lm.prototype.getHorizontalLine=sm.prototype.getHorizontalLine;var um,cm,hm,pm,dm,fm,gm,mm,ym,bm,vm,Sm,wm,Am,Em,xm,Cm,Tm,Lm,Om,Rm,Nm,Im,km,Mm,Pm,Dm=(zg=tt(nm))(_g=function(t){function e(){var e;return e=t.call(this)||this,e.state=0,e}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.loginRegisterSystem)},n.getLoginButton=function(){var t={};return 0===this.state&&(t=this.styleSheet.selectedLeft),wi.createElement("div",{className:this.styleSheet.loginSystemButton,style:t,ref:"loginButton"},wi.T("Log In"))},n.getRegisterButton=function(){var t={};return 1===this.state&&(t=this.styleSheet.selectedRight),wi.createElement("div",{className:this.styleSheet.registerSystemButton,style:t,ref:"registerButton"},wi.T("Sign Up"))},n.render=function(){return[wi.createElement("div",{className:this.styleSheet.loginRegisterButtons},this.getLoginButton(),this.getRegisterButton()),wi.createElement(Jo,{ref:"switcher"},wi.createElement(sm,{ref:"loginWidget",active:0===this.state}),wi.createElement(lm,{ref:"registerWidget",active:1===this.state}))]},n.onMount=function(){var t=this;this.loginButton.addClickListener(function(){t.state=0,t.switcher.setActive(t.loginWidget),t.redraw()}),this.registerButton.addClickListener(function(){t.state=1,t.switcher.setActive(t.registerWidget),t.redraw()})},e}(wi.Element))||_g,zm=((Bg=tt(nm))(Hg=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{children:[wi.T("Log In")]}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.loginSystemButton),this.options.active&&t.addClass(this.styleSheet.selectedLeftClass)},e}(wi.Primitive(Js,"div"))),(Fg=tt(nm))(Ug=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{children:[wi.T("Register")]}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.registerSystemButton),this.options.active&&t.addClass(this.styleSheet.selectedRightClass)},e}(wi.Primitive(Js,"div"))),function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){return[wi.createElement(Dm,null)]},e}(wi.Element)),_m=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getModalWindowStyle=function(){return Ui.isTouchDevice()?{position:"relative",padding:"0",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",display:this.options.display||"block",left:"0",right:"0",width:"100vw",height:"600px",background:"white",overflow:this.options.overflow||"auto",maxHeight:"100%",maxWidth:"500px",verticalAlign:"center",margin:"0 auto"}:{position:"relative",padding:"0",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",margin:"60px auto",display:this.options.display||"block",maxHeight:this.options.maxHeight||"85%",left:"0",right:"0",width:"500px",height:this.options.height||"600px",background:"white",overflow:this.options.overflow||"auto"}},n.render=function(){return wi.createElement(zm,null)},e.requireLogin=function(t){if(USER.isAuthenticated)return t();this.show()},e}(mc),Bm=(um=gm=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.height=40,e.size=1,e.likeColor=e.options.likeColor||"#1E8921",e.dislikeColor=e.options.dislikeColor||"#C5302C",e.notVoteColor=e.options.notVoteColor||"#313534",e.balanceColor=e.options.balanceColor||"#313534",e.orientation=Ci.VERTICAL,p(e,"container",cm,h(e)),e.mainClass={height:"40px",lineHeight:"40px",fontSize:"14px",color:"#767676",display:"inline-block",float:"right",textAlign:"right"},e.thumbsStyle={fontSize:e.height/2+"px",lineHeight:e.height+"px"},p(e,"displayStyle",hm,h(e)),e.counterStyle={fontSize:18*e.size+"px",fontWeight:"900",color:e.balanceColor},p(e,"thumbsUpHoverStyle",pm,h(e)),p(e,"thumbsDownHoverStyle",dm,h(e)),p(e,"padding",fm,h(e)),e}return r(e,t),e}(Fi),cm=d(um.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",width:"100%",fontSize:"14px",color:"#767676",display:"flex",justifyContent:"flex-end",alignItems:"center"}}}),hm=d(um.prototype,"displayStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",paddingLeft:"3px"}}}),pm=d(um.prototype,"thumbsUpHoverStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:".25s",":hover":{color:this.likeColor,opacity:".8",transition:".25s"}}}}),dm=d(um.prototype,"thumbsDownHoverStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:".25s",":hover":{color:this.dislikeColor,opacity:".8",transition:".25s"}}}}),fm=d(um.prototype,"padding",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"3px",float:"left",display:"inline-block",height:this.height+"px"}}}),um),Hm=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e=Object.assign({votesBalance:0,userVote:Ri.NONE,size:1,likeColor:this.options.likeColor||"#1E8921",dislikeColor:this.options.dislikeColor||"#C5302C",notVoteColor:this.options.notVoteColor||"#313534",balanceColor:this.options.balanceColor||"#313534",orientation:Ci.VERTICAL},e),t.prototype.setOptions.call(this,e)},n.extraNodeAttributes=function(t){t.setStyle({textAlign:"center",marginRight:"10px"})},n.render=function(){var t={paddingLeft:"4px",paddingRight:"4px",paddingTop:"0px",paddingBottom:"0px",lineHeight:"0px",backgroundColor:"transparent",borderColor:"transparent",fontSize:40*this.options.size+"px",marginTop:8*this.options.size+"px",marginBottom:8*this.options.size+"px",display:this.options.orientation===Ci.VERTICAL?"block":"inline-block",marginLeft:"auto",marginRight:"auto",opacity:.7,cursor:"pointer",color:this.options.notVoteColor},e=Object.assign({},t);this.getUserVote()===Ri.LIKE&&(e.color=this.options.likeColor);var n=Object.assign({},t);this.getUserVote()===Ri.DISLIKE&&(n.color=this.options.dislikeColor);var i={fontSize:18*this.options.size+"px",fontWeight:"900",color:this.options.balanceColor};return[wi.createElement("span",{className:"fa fa-caret-up voteButton",ref:"likeButton",faIcon:"caret-up",style:e,HTMLtitle:"Click to like"}),wi.createElement("span",{ref:"counterContainer",style:i},wi.createElement(wi.TextElement,{ref:"counter",value:this.getVotesBalance()+""})),wi.createElement("span",{className:"fa fa-caret-down voteButton",ref:"dislikeButton",faIcon:"caret-down",style:n,HTMLtitle:"Click to dislike"})]},n.getVotesBalance=function(){return this.options.votesBalance},n.getUserVote=function(){return this.options.userVote},e}(wi.Element),Fm=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getVotesBalance=function(){return this.options.message.getVotesBalance()},n.getUserVote=function(){return this.options.message.getUserVote()},n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.updateTarget(this.options.message)},n.updateTarget=function(t){var e=this;if(!t||t instanceof Ff)return void(this.options.target=t);var n=t.getReactionCollection();if(n)return void(this.options.target=n);var i=this.attachEventListener(t,"createReactionCollection",function(){e.updateOptions({target:t.getReactionCollection()}),e.setupListener(),i.remove()})},n.setupListener=function(){var t=this,e=this.options.target;e&&this.attachUpdateListener(e,function(){t.redraw()})},n.onMount=function(){var t=this;this.setupListener(),this.likeButton.addClickListener(function(){if(!USER.isAuthenticated)return void _m.show();t.getUserVote()===Ri.LIKE?t.options.message.resetReaction():t.options.message.like()}),this.dislikeButton.addClickListener(function(){if(!USER.isAuthenticated)return void _m.show();t.getUserVote()===Ri.DISLIKE?t.options.message.resetReaction():t.options.message.dislike()}),this.options.message.addListener("reaction",function(){t.redraw()})},e}(Hm),Um=(mm=tt(Bm))(ym=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.getNumLikes=function(){return this.options.message.getNumLikes()},n.getNumDislikes=function(){return this.options.message.getNumDislikes()},n.render=function(){var t={},e={},n=Object.assign({},this.styleSheet.thumbsStyle);this.getUserVote()===Ri.LIKE&&(n.color=t.color=this.options.likeColor,t.fontWeight="bold");var i=Object.assign({},this.styleSheet.thumbsStyle);return this.getUserVote()===Ri.DISLIKE&&(i.color=e.color=this.options.dislikeColor,e.fontWeight="bold"),[wi.createElement("span",{className:this.styleSheet.displayStyle,style:t},this.getNumLikes()),wi.createElement("span",{className:"fa fa-thumbs-up voteButton "+this.styleSheet.displayStyle+" "+this.styleSheet.thumbsUpHoverStyle,ref:"likeButton",faIcon:"thumbs-up",style:n,HTMLtitle:"Click to like"}),wi.createElement("div",{className:this.styleSheet.padding}),wi.createElement("span",{className:this.styleSheet.displayStyle,style:e},this.getNumDislikes()),wi.createElement("span",{className:"fa fa-thumbs-down voteButton "+this.styleSheet.displayStyle+" "+this.styleSheet.thumbsDownHoverStyle,ref:"dislikeButton",faIcon:"thumbs-down",style:i,HTMLtitle:"Click to dislike"})]},e}(Fm))||ym,Wm=(bm=Nm=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r]
;return e=t.call.apply(t,[this].concat(i))||this,e.navbarHeight="50px",e.renderMessageHeight="100px",e.userFontSize="1.1em",e.commentFontSize="1.1em",e.backgroundColor="#fff",e.hrBackgroundColor="#ddd",e.hoverBackgroundColor="#f8f8f8",p(e,"renderMessageView",vm,h(e)),p(e,"renderMessage",Sm,h(e)),p(e,"chatInput",wm,h(e)),p(e,"messageBoxButton",Am,h(e)),e.previewButton={height:"30px",width:"30px",borderRadius:"100%",fontSize:"100%",marginLeft:"5px"},e.loadMoreButton={border:"0px",color:"#333",borderRadius:"0",borderBottom:"0",backgroundColor:"#eee",padding:"5px 10px",textTransform:"uppercase",marginTop:"15px"},p(e,"messageTimeStampHr",Em,h(e)),p(e,"messageTimeStamp",xm,h(e)),p(e,"groupChatMessage",Cm,h(e)),p(e,"comment",Tm,h(e)),p(e,"userHandle",Lm,h(e)),p(e,"commentContent",Om,h(e)),p(e,"timestamp",Rm,h(e)),e}return r(e,t),e}(Fi),vm=d(bm.prototype,"renderMessageView",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",overflowY:"auto",overflowX:"hidden",backgroundColor:this.backgroundColor,position:"relative",wordBreak:"break-word"}}}),Sm=d(bm.prototype,"renderMessage",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.renderMessageHeight,maxHeight:this.renderMessageHeight,width:"100%",borderTop:"1px solid "+this.hrBackgroundColor,backgroundColor:this.backgroundColor,position:"relative"}}}),wm=d(bm.prototype,"chatInput",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={height:"100%",width:"calc(100% - 50px)",paddingTop:"0",paddingBottom:"0",fontSize:"14px",borderRadius:"0",paddingLeft:"8px",border:"0px"},t.paddingTop="5px",t.resize="none",t.transition=".2s",t.display="inline-block",t.float="left",t.outline="none",t.position="absolute",t[":focus"]={outline:"none",boxShadow:"none"},t[":active"]={outline:"none",boxShadow:"none"},t}}),Am=d(bm.prototype,"messageBoxButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",flex:"1",backgroundColor:"#fff",border:"0",fontSize:"18px",transition:".2s",color:"#333",padding:"0",":hover":{backgroundColor:"transparent",color:"#2089b5",transition:".2s"},":active":{backgroundColor:"transparent",color:"#2089b5",transition:".2s"},":focus":{backgroundColor:"transparent",color:"#2089b5",transition:".2s",outline:"none"},":focus:active":{backgroundColor:"transparent",color:"#2089b5"},":hover:active":{backgroundColor:"transparent",color:"#2089b5"}}}}),Em=d(bm.prototype,"messageTimeStampHr",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"1px",marginTop:"1.5em",marginBottom:"1.5em",width:"100%",maxWidth:"100%",backgroundColor:this.hrBackgroundColor,display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase"}}}),xm=d(bm.prototype,"messageTimeStamp",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"1.5em",width:"auto",paddingLeft:"10px",paddingRight:"10px",backgroundColor:this.backgroundColor,textAlign:"center",color:"#222",fontWeight:"bold"}}}),Cm=d(bm.prototype,"groupChatMessage",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",backgroundColor:"#fff"}}}),Tm=d(bm.prototype,"comment",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"12px",paddingRight:"12px",paddingTop:"12px",paddingBottom:"12px",":hover":{backgroundColor:this.hoverBackgroundColor}}}}),Lm=d(bm.prototype,"userHandle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.userFontSize}}}),Om=d(bm.prototype,"commentContent",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" p":{marginTop:"0",marginBottom:"0",fontSize:this.commentFontSize,color:"#454545",wordWrap:"break-word"}}}}),Rm=d(bm.prototype,"timestamp",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#262626",fontWeight:"bold",margin:"0 10px"}}}),bm);ka.getInstance().ensureFirstUpdate(),bo.getInstance().ensureFirstUpdate();var Vm,jm,Gm,Ym,Km,Xm,qm,Jm,Zm,$m,Qm,ty,ey,ny,iy,ry,oy,sy,ay,ly,uy,cy,hy,py,dy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.faIcon||(e.label=e.label||wi.T("Preview")),t.prototype.setOptions.call(this,e)},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addClickListener(function(){eg.show({classMap:ng.classMap,showCallback:function(t){t.markupEditor.setValue(e.options.getValue()),t.markupEditor.codeEditor.getAce().focus()},hideCallback:function(t){e.options.setValue(t.markupEditor.getValue())}})})},e}(Da),fy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign({},t.prototype.getDefaultOptions.call(this),{deletable:!0})},n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.message=e.message},n.render=function(){var t=this;return[wi.createElement(Da,{ref:"editButton",onClick:function(){return t.toggleEditMode()}},wi.T("Edit")),wi.createElement(Jo,{ref:"contentSwitcher"},wi.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?wi.createElement(ng,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):wi.createElement(wi.TextElement,{ref:"content",value:this.message.getContent()})))]},n.showEditMode=function(){var t=this;if(this.editContent)this.messageInput.setValue(this.message.getContent());else{var e={"margin-top":"5px"},n={overflow:"auto",height:"60px",width:"100%"};this.editContent=wi.createElement("div",{style:e},wi.createElement(Bo,{ref:this.refLink("messageInput"),style:n,className:"form-control",value:this.message.getContent()}),wi.createElement(sc,null,wi.createElement(Da,{label:wi.T("Cancel"),level:Li.DEFAULT,size:Oi.SMALL,onClick:function(){t.hideEditMode()}}),wi.createElement(dy,{size:Oi.SMALL,getValue:function(){return t.messageInput.getValue()},setValue:function(e){t.messageInput.setValue(e),t.messageInput.node.focus()}}),wi.createElement(Da,{label:wi.T("Save changes"),level:Li.PRIMARY,onClick:function(){return t.saveMessageChanges()},size:Oi.SMALL}),this.options.deletable?wi.createElement(Da,{level:Li.DANGER,label:wi.T("Delete"),size:Oi.SMALL,onClick:function(){return t.deleteMessage()}}):""))}this.contentSwitcher.hasChild(this.editContent)||this.contentSwitcher.appendChild(this.editContent),this.contentSwitcher.setActive(this.editContent)},n.hideEditMode=function(){this.contentSwitcher.setActive(this.contentContainer)},n.toggleEditMode=function(){this.contentSwitcher.getActive()===this.contentContainer?this.showEditMode():this.hideEditMode()},n.saveMessageChanges=function(){var t=this,e=this.messageInput.getValue();e&&this.message.edit(e,function(){t.hideEditMode()})},n.deleteMessage=function(){this.options.deletable&&this.message.deleteMessage()},n.onMount=function(){var t=this;this.message.addListener("edit",function(){t.content.setValue(t.message.getContent()),t.redraw()}),this.message.addListener("delete",function(){t.hide()})},e}(wi.Element),gy=(Im=tt(Wm))(km=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){var n=this;t.prototype.setOptions.call(this,e),this.message.hasTemporaryId()&&(this.message.addListener("postError",function(){n.redraw()}),this.message.addListener("updateId",function(){n.options.key=n.message.id}))},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.groupChatMessage)},n.shouldShowDayTimestamp=function(){var t=this.options.message.getPreviousMessage();return!t||ft(t.timeAdded,this.options.message.timeAdded)},n.render=function(){var t,e=this;(this.message.userId===USER.id||USER.isSuperUser)&&(t=wi.createElement("a",{style:Object.assign({cursor:"pointer"},this.styleSheet.timestamp),onClick:function(){return e.toggleEditMode()}},wi.T("Edit"))),this.contentSwitcher||(this.contentSwitcher=wi.createElement(Jo,null,wi.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?wi.createElement(ng,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):wi.createElement(wi.TextElement,{ref:"content",value:this.message.getContent()}))));var n=null;this.shouldShowDayTimestamp()&&(n=wi.createElement("div",{ref:"dayTimestamp",className:this.styleSheet.messageTimeStampHr},wi.createElement("div",{className:this.styleSheet.messageTimeStamp},Kc.unix(this.message.timeAdded).format("dddd, MMMM Do"))));var i=null;return this.message.postError&&(i=wi.createElement("span",{ref:"errorArea",style:{marginLeft:"1rem"},className:"fa fa-warning",HTMLTitle:"Error: "+this.message.postError})),[n,wi.createElement("div",{className:this.styleSheet.comment},wi.createElement(vf,{userId:this.message.userId,className:this.styleSheet.userHandle}),wi.createElement("span",{className:this.styleSheet.timestamp},this.message.getTimeOfDay()),t,i,wi.createElement("div",{className:this.styleSheet.commentContent},this.contentSwitcher))]},e}(fy))||km,my=(Mm=tt(Wm))(Pm=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.message=e.message},n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.addClass(this.styleSheet.groupChatMessage),e},n.shouldShowDayTimestamp=function(){var t=this.options.message.getPreviousMessage();return!t||ft(t.timeAdded,this.options.message.timeAdded)},n.isOwnMessage=function(){return this.message.userId===USER.id},n.render=function(){this.contentSwitcher||(this.contentSwitcher=wi.createElement(Jo,null,wi.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?wi.createElement(ng,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):wi.createElement(wi.TextElement,{ref:"content",value:this.message.getContent()}))));var t=null;this.shouldShowDayTimestamp()&&(t=wi.createElement("div",{className:this.styleSheet.messageTimeStampHr},wi.createElement("div",{ref:"dayTimestamp",className:this.styleSheet.messageTimeStamp},Kc.unix(this.message.timeAdded).format("dddd, MMMM Do"))));var e=null;this.message.postError&&(e=wi.createElement("span",{ref:"errorArea",style:{marginLeft:"1rem"},className:"fa fa-warning",HTMLTitle:"Error: "+this.message.postError}));var n=[wi.createElement("div",{className:this.styleSheet.comment,style:{margin:"8px 16px",backgroundColor:"#eee"}},wi.createElement(vf,{userId:this.message.userId,className:this.styleSheet.userHandle}),wi.createElement("span",{className:this.styleSheet.timestamp},this.message.getTimeOfDay()),e,wi.createElement("div",{className:this.styleSheet.commentContent},this.contentSwitcher))],i=wi.createElement("div",{style:{flexGrow:"1000000"}});return this.isOwnMessage()?[t,wi.createElement("div",{style:{display:"flex"}},i,n)]:[t,wi.createElement("div",{style:{display:"flex"}},n,i)]},e}(uo))||Pm,yy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e=Object.assign({entryComparator:function(t,e){return t.getNormalizedId()-e.getNormalizedId()}},e),t.prototype.setOptions.call(this,e)},n.getTopMessage=function(){return this.children[1]},e}(mo),by=function t(e){var i;return tt(Wm)(i=function(i){function o(){return i.apply(this,arguments)||this}r(o,i);var s=o.prototype;return s.getDefaultOptions=function(t){return{dateTimestamps:!0,renderMessage:function(t){return wi.createElement(e,{key:t.getNormalizedId(),message:t})}}},s.setOptions=function(t){i.prototype.setOptions.call(this,t),this.initializeShowLoadMoreButton()},s.extraNodeAttributes=function(t){i.prototype.extraNodeAttributes.call(this,t),t.setStyle({display:"flex",flexDirection:"column"})},s.canOverwrite=function(){return!1},s.initializeShowLoadMoreButton=function(){this.messageThread.getNumMessages()>=20&&(this.showLoadMoreButton=!0)},s.createVirtualMessage=function(t,e){var n=this.messageThread.getMaxMessageId()+"-"+Yf.generateVirtualId()+"-"+Math.random(),i=Yf.createVirtualMessageInstance(e,this.messageThread,n);return t.virtualId=n,i},s.sendMessage=function(t){if(!USER.isAuthenticated)return void _m.show();var e=Object.assign({},this.options.baseRequest||{});if(t=t||this.chatInput.getValue(),t=t.trim()){e.message=t;var n=this.createVirtualMessage(e,t),i=function(t){if(t.error)return void n.setPostError(t.error);n&&n.hasTemporaryId()&&(Yf.applyUpdateObjectId(n,t.messageId),of.importState(t.state))},r=function(t){n&&n.setPostError(42),console.log("Error in sending chat message:\n"+t.message),console.log(t.stack)};this.messageWindow.scrollToBottom(),this.chatInput.setValue(""),this.chatInput.dispatch("messageSent"),Na.postJSON(this.getPostURL(),e,{disableStateImport:!0}).then(i,r)}},s.saveScrollPosition=function(){this.scrollPosition=this.messageWindow.node.scrollTop,this.scrollPercent=this.scrollPosition/(this.messageWindow.node.scrollHeight-this.messageWindow.node.clientHeight)},s.applyScrollPosition=function(){this.messageWindow.node.scrollTop=this.scrollPosition||this.messageWindow.node.scrollHeight,this.chatInput.node.focus()},s.addResizeListeners=function(){var t=this;this.messageWindow.addNodeListener("scroll",function(){t.messageWindow.node.scrollTop<20&&t.loadMoreMessages()}),this.addListener("hide",function(){t.saveScrollPosition()}),this.addListener("show",function(){t.applyScrollPosition()}),window.addEventListener("resize",function(){t.saveScrollPosition(),t.setAdaptiveHeight()}),this.addListener("resize",function(){t.setAdaptiveHeight(),t.messageWindow.node.scrollTop=t.scrollPercent*(t.messageWindow.node.scrollHeight-t.messageWindow.node.clientHeight)})},s.getDesiredHeight=function(){if(this.options.style&&this.options.style.height)return this.options.style.height;var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),e=document.getElementById("navbar").offsetHeight,n=t-e-(this.options.extraHeightOffset||25);return Math.max(n||0,100)+"px"},s.setAdaptiveHeight=function(){this.setStyle("height",this.getDesiredHeight())},s.setHeight=function(t){this.setStyle("height",t)},s.renderMessageView=function(){var t,e=this;return this.showLoadMoreButton&&(t=wi.createElement("div",{className:"text-center"},wi.createElement(_a,{ref:this.refLink("loadMoreButton"),level:Li.DEFAULT,onClick:function(){e.loadMoreMessages()},style:this.styleSheet.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[wi.createElement(yy,{className:this.styleSheet.renderMessageView,ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(),staticTop:t})]},s.getGetType=function(){return"GET"},s.loadMoreMessages=function(){var t=this;if(!this.outstandingRequest){this.outstandingRequest=!0;var e=this.messageWindow.getTopMessage(),n=this.messageThread.getMessages(),i=999999999;n.length&&(i=n[0].id);var r=Object.assign({lastMessageId:i},this.options.baseRequest||{}),o=this.messageWindow.node.scrollHeight;this.loadMoreButton&&this.loadMoreButton.ajaxCall({url:this.getGetURL(),type:this.getGetType(),dataType:"json",data:r,complete:function(){t.outstandingRequest=!1}}).then(function(n){var i=!n.state||!n.state.MessageInstance;if(!(i||n.state.MessageInstance.length<20)||(t.loadMoreButton&&t.loadMoreButton.hide(),t.showLoadMoreButton=!1,!i)){var r=0;e.shouldShowDayTimestamp()||(r+=e.dayTimestamp.getHeight(),e.dayTimestamp.addClass("hidden")),t.messageWindow.scrollToHeight(t.messageWindow.node.scrollHeight-o-r),t.outstandingRequest=!1}})}},s.renderMessageBox=function(){var t=this;return wi.createElement("div",{ref:"writingSection",className:this.styleSheet.renderMessage},wi.createElement(Bo,{readOnly:this.messageThread.muted,ref:"chatInput",placeholder:"Type a message...",className:this.styleSheet.chatInput}),wi.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",position:"absolute",right:"0px",width:"50px"}},wi.createElement(Da,{ref:"sendMessageButton",faIcon:"paper-plane",disabled:this.messageThread.muted,onClick:function(){return t.sendMessage()},className:this.styleSheet.messageBoxButton}),wi.createElement(dy,{ref:"previewMessageButton",getValue:function(){return t.chatInput.getValue()},setValue:function(e){t.chatInput.setValue(e),t.chatInput.node.focus()},className:this.styleSheet.messageBoxButton,faIcon:"eye"})))},s.renderStatus=function(){if(this.messageThread.muted)return[wi.createElement("h4",{style:{color:"red",textAlign:"center"}},"This chat is currently turned off.")];if(USER.isSuperUser){for(var t=[],e=this.messageThread.online,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;t.push([wi.createElement(vf,{id:parseInt(o)})])}return t}},s.render=function(){return[this.renderMessageView(),this.renderMessageBox()]},s.getDefaultPlugins=function(){return t.defaultPlugins||[]},s.onMount=function(){var t=this;i.prototype.onMount.call(this);for(var e=this.options.plugins||this.getDefaultPlugins(),n=Array.isArray(e),r=0,e=n?e:e[Symbol.iterator]();;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if(r=e.next(),r.done)break;o=r.value}var s=o;this.registerPlugin(s)}this.attachUpdateListener(this.messageThread,function(e){"muted"===e.type&&t.redraw()}),this.attachListener(this.messageThread,"newMessage",function(e){var n=Yf.get(e.data.id),i=t.messageWindow.node.scrollTop,r=t.messageWindow.node.scrollHeight-t.messageWindow.node.offsetHeight;t.messageWindow.insertEntry(n),i+20>r&&setTimeout(function(){t.messageWindow.scrollToBottom()},0)}),this.addResizeListeners()},n(o,[{key:"messageThread",get:function(){return this.options.messageThread}}]),o}(tg(uo)))||i},vy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.options.baseRequest={chatId:this.options.chatId}},n.getPostURL=function(){return"/chat/group_chat_post/"},n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.setStyle({display:"flex",flexDirection:"column",overflowY:"hidden"})},n.getGetURL=function(){return"/chat/group_chat_state/"},n.renderMessageView=function(){var t,e=this;return this.showLoadMoreButton&&(t=wi.createElement("div",{className:"text-center"},wi.createElement(_a,{ref:this.refLink("loadMoreButton"),level:Li.DEFAULT,onClick:function(){e.loadMoreMessages()},style:this.styleSheet.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[wi.createElement(yy,{className:this.styleSheet.renderMessageView,ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(),staticTop:t})]},e}(by(gy)),Sy=(by(my),function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var e=t.prototype.render.call(this);return e[1].options.children.push(wi.createElement(Um,{style:{display:"inline-block"},message:this.options.message})),e},e}(gy)),wy=(by(Sy),{BLUE:"#20232d",HOVER_BLUE:"#364251",BLACK:"#181a22",HOVER_BLACK:"#323539",WHITE:"#eee"}),Ay={color:wy},Ey=(Vm=Jm=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.titleFontSize="2em",p(e,"commentsTitle",jm,h(e)),p(e,"bottomSection",Gm,h(e)),p(e,"blogEntryView",Ym,h(e)),e.title={"font-size":e.titleFontSize,"padding-top":"20px","padding-bottom":"10px","text-decoration":"italic",width:"100%","text-align":"center","word-wrap":"normal","line-height":"60px"},e.writtenBy={width:"100%","text-align":"left","padding-top":"20px","font-size":"1em",color:"#666"},e.article={"text-align":"justify","font-size":"17px"},e.link={textDecoration:"none",textAlign:"center",marginTop:"-15pt",fontSize:"1.1em"},e.blogArticleRenderer={overflow:"hidden",position:"relative",maxHeight:"180px","text-align":"justify","font-size":"17px",marginBottom:"25px"},p(e,"whiteOverlay",Km,h(e)),p(e,"loadMoreButton",Xm,h(e)),p(e,"sendMessageButtonStyle",qm,h(e)),e}return r(e,t),e}(Fi),jm=d(Vm.prototype,"commentsTitle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"20px",color:"#333",marginTop:"10px",fontSize:"1em",textTransform:"uppercase"}}}),Gm=d(Vm.prototype,"bottomSection",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"5px",height:"50px",width:"100%"}}}),Ym=d(Vm.prototype,"blogEntryView",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto",width:"900px","max-width":"100%"}}}),Km=d(Vm.prototype,"whiteOverlay",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100px",background:"linear-gradient(rgba(255,255,255,0), #fff)",position:"absolute",marginTop:"-120px",pointerEvents:"none",width:"92%"}}}),Xm=d(Vm.prototype,"loadMoreButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"16px",color:"#fff",height:"40px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:Ay.color.BLUE,border:"0",padding:"5px 10px",borderColor:Ay.color.BLUE,fontSize:"1em",transition:".2s",textTransform:"uppercase",opacity:"1",":hover":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":active":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":focus":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":active:focus":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"}}}}),qm=d(Vm.prototype,"sendMessageButtonStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:Ay.color.BLUE,borderColor:"#333",fontSize:"13px",transition:".2s",":hover":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":active":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":focus":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"},":focus:active":{backgroundColor:Ay.color.HOVER_BLUE,borderColor:Ay.color.HOVER_BLUE,transition:".2s"}}}}),Vm),xy=(Zm=ty=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.hStyle={"text-align":"center","margin-top":"30px","margin-bottom":"30px",width:"100%"},p(e,"blogArticleRenderer",$m,h(e)),p(e,"quote",Qm,h(e)),e}return r(e,t),e}(Fi),$m=d(Zm.prototype,"blogArticleRenderer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" h1":this.hStyle," h2":this.hStyle," h3":this.hStyle," h4":this.hStyle," h5":this.hStyle," h6":this.hStyle}}}),Qm=d(Zm.prototype,"quote",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"font-style":"italic","margin-top":"20px","margin-bottom":"20px",color:"#707070",float:"right",display:"flex",width:"100%"}}}),Zm),Cy=(ey=ry=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.loadMoreButton={border:"0px",color:"#333",borderRadius:"0",borderBottom:"0",backgroundColor:"#eee",padding:"5px 10px"},e.writingSectionStyle={height:"auto",marginTop:"10px"},p(e,"chatInputStyle",ny,h(e)),p(e,"chatInputMax",iy,h(e)),e.previewButtonStyle={height:"30px",width:"auto",fontSize:"100%",marginLeft:"5px"},e}return r(e,t),e}(Fi),ny=d(ey.prototype,"chatInputStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",width:"100%",paddingBottom:"0",fontSize:"14px",borderRadius:"0",outline:"none",paddingLeft:"8px",paddingTop:"5px",resize:"none",transition:".2s",display:"block",border:"1px solid #aaa",":focus":{height:"120px",transition:".2s"},":active":{height:"120px",transition:".2s"}}}}),iy=d(ey.prototype,"chatInputMax",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"120px"}}}),ey),Ty=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return Object.assign({},t.prototype.getDefaultOptions.call(this),{deletable:!1})},n.render=function(){var t,e=this,n=wi.createElement(yo,{timeStamp:this.message.getDate(),style:{color:"#666 !important",textTransform:"uppercase",fontSize:".85em"}});(this.message.userId===USER.id||USER.isSuperUser)&&(t=wi.createElement("a",{style:Object.assign({cursor:"pointer",padding:"0 10px",fontSize:"1.05em",lineHeight:"0px"}),onClick:function(){return e.toggleEditMode()}},"edit")),this.contentSwitcher||(this.contentSwitcher=wi.createElement(Jo,null,wi.createElement("div",{ref:"contentContainer"},wi.createElement(Vd,{ref:"content",value:this.message.getContent()}))));var i=wi.createElement(Um,{height:40,style:{float:"left"},message:this.message,ref:"commentVotingWidget"});return[wi.createElement("span",{style:{float:"right",display:"inline-block",height:"40px",lineHeight:"40px"}},n),wi.createElement("div",{style:{height:"40px",lineHeight:"40px"}},wi.createElement("div",{style:{height:"40px",lineHeight:"40px",display:"inline-block",float:"left",fontSize:".95em",color:"#333"}},wi.createElement(vf,{userId:this.message.userId,style:{fontSize:"1.1em"}})),t),wi.createElement("div",{style:{paddingTop:"5px",fontSize:"16px"}},this.contentSwitcher),wi.createElement("div",{style:{height:"40px"}},i),wi.createElement("div",{style:{height:"1px",width:"100%",backgroundColor:"#ddd"}})]},e}(fy),Ly=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.onMount=function(){t.prototype.onMount.call(this),this.addClickListener(function(){_m.show()})},e}(wi.Primitive("span")),Oy=(oy=tt(Ey))(sy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.getDefaultOptions=function(){return Object.assign({},t.prototype.getDefaultOptions.call(this),{entryComparator:function(t,e){return e.getNormalizedId()-t.getNormalizedId()}})},i.renderMessageView=function(){var t,e=this;return this.showLoadMoreButton&&(t=wi.createElement("div",{className:"text-center"},wi.createElement(_a,{ref:this.refLink("loadMoreButton"),level:Li.DEFAULT,onClick:function(){e.loadMoreMessages()},style:this.commentWidgetStyle.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[wi.createElement(yy,{ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(!0),entryComparator:this.options.entryComparator,staticTop:t})]},i.renderMessageBox=function(){var t=this;return[wi.createElement("div",{ref:"writingSection",style:this.commentWidgetStyle.writingSectionStyle},wi.createElement(Bo,{readOnly:this.messageThread.muted,ref:"chatInput",onChange:function(){t.chatInput.getValue()?t.chatInput.addClass(t.commentWidgetStyle.chatInputMax):t.chatInput.removeClass(t.commentWidgetStyle.chatInputMax)},className:this.commentWidgetStyle.chatInputStyle,placeholder:"Leave a comment..."}),wi.createElement(Da,{disabled:this.messageThread.muted,label:"SUBMIT",ref:"sendMessageButton",className:this.styleSheet.sendMessageButtonStyle,level:Li.PRIMARY,onClick:function(){return t.sendMessage()}}))]},i.render=function(){return[this.renderMessageBox(),this.renderMessageView()]},i.getDefaultPlugins=function(){return Ry.defaultPlugins||[]},i.createVirtualMessage=function(t,e){return null},n(e,[{key:"commentWidgetStyle",get:function(){return Cy.getInstance()}}]),e}(by(Ty)))||sy,Ry=(ay=tt(Ey))(ly=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.key=this.messageThread.id,this.options.baseRequest={chatId:this.options.chatId},this.options.dateTimestamps=!1},n.getPostURL=function(){return"/chat/group_chat_post/"},n.renderMessageBox=function(){return USER.isAuthenticated?t.prototype.renderMessageBox.call(this):wi.createElement("div",{style:{color:"#333",paddingTop:"5px",paddingBottom:"5px"}},"You need to ",wi.createElement(Ly,{style:{backgroundColor:"#eee",cursor:"pointer",padding:"5px 10px"}},"login")," to send a comment.")},n.render=function(){var e,n=this.messageThread.getMessages().length;return e=wi.createElement("div",{className:this.styleSheet.commentsTitle},n," ",1!=n?"comments":"comment"),[e,t.prototype.render.call(this)]},e}(Oy))||ly,Ny=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getMessageThread=function(){var t=Zf.get(this.options.chatId);return t&&t.getMessageThread()},n.render=function(){var t=this,e=this.getMessageThread(),n={marginBottom:"10px",paddingBottom:"10px",height:"auto",width:"100%",marginTop:"50px",marginLeft:"0px",marginRight:"0px",border:"0px",maxWidth:"900px"};return e?[wi.createElement(Ry,{ref:"commentsSection",chatId:this.options.chatId,messageThread:e,style:n})]:(Zf.fetch(this.options.chatId,function(e){t.redraw()}),[wi.createElement("div",{style:{width:"100%",height:"60px",lineHeight:"60px",fontSize:"1em",textAlign:"center",textTransform:"uppercase",fontWeight:"bold"}},wi.createElement("span",{className:"fa fa-spinner fa-spin",style:{padding:"0 8px"}}),"Comments loading...")])},e}(wi.Element),Iy=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getArticle=function(){return Tf.get(this.articleId)},e}(cf),ky=function(t){function e(e,n){return void 0===e&&(e="BlogEntry"),void 0===n&&(n=Iy),t.call(this,e,n,{dependencies:["Article"]})||this}return r(e,t),e.prototype.getEntryForURL=function(t){return this.all().find(function(e){return e.urlName===t})},e}(pf),My=new ky,Py=(uy=tt(xy))(cy=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.blogArticleRenderer)},e}(Df))||cy,Dy=(hy=tt(xy))(py=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.quote)},n.render=function(){return[wi.createElement("div",{style:{"flex-grow":"1000000","min-width":"10%",display:"inline-block"}}),wi.createElement("div",{style:{"flex-grow":"1",display:"inline-block"}},this.options.value)]},e}(wi.Primitive("div")))||py;Py.markupClassMap=new Wd(Df.markupClassMap),Py.markupClassMap.addClass("Quote",Dy);var zy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getModalWindowStyle=function(){return Object.assign({},t.prototype.getModalWindowStyle.call(this),{margin:"0 auto",maxHeight:"100%",overflow:"initial",display:"flex",flexDirection:"column",top:"1vh",height:"98vh"})},n.render=function(){var t=this,e=My.get(this.options.entryId),n=e.getArticle(),i=null;return e.discussionId||(i=wi.createElement(Da,{level:Li.WARNING,label:"Create discussion",onClick:function(){return t.createDiscussion()},style:{marginLeft:"5px"}})),[wi.createElement("h3",null,"Edit Entry"),wi.createElement(Uo,null,wi.createElement(Vo,{label:"Title"},wi.createElement(Ao,{ref:"titleInput",value:n.name})),wi.createElement(Vo,{label:"URL Name"},wi.createElement(Ao,{ref:"urlInput",value:e.urlName})),wi.createElement(Vo,{label:"Visible"},wi.createElement(Co,{ref:"visibleCheckbox",value:e.visible})),wi.createElement(Da,{level:Li.PRIMARY,label:"Change settings",onClick:function(){return t.changeSettings()}}),i,wi.createElement(fo,{
ref:"messageArea"})),wi.createElement(Hf,{ref:"contentEditor",articleId:n.id,style:{flex:"1"}})]},n.changeSettings=function(){var t=this,e=this.titleInput.getValue(),n=this.urlInput.getValue(),i={entryId:this.options.entryId,isVisible:this.visibleCheckbox.getValue()};e&&(i.title=e),n&&(i.urlName=n),Na.postJSON("/blog/change_entry_settings/",i).then(function(e){e.urlName&&$o.changeURL(["blog",e.urlName]),t.hide()})},n.createDiscussion=function(){var t=this,e={entryId:this.options.entryId};Na.postJSON("/blog/create_entry_discussion/",e).then(function(){return t.hide()})},e}(mc),_y=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){var t=this;return[wi.createElement("h1",null,"New Entry"),wi.createElement(Wo,null,wi.createElement(Vo,{label:"Title"},wi.createElement(Ao,{ref:"titleInput"})),wi.createElement(Vo,{label:"URL Name"},wi.createElement(Ao,{ref:"urlInput"})),wi.createElement(Vo,{label:"Visible"},wi.createElement(Co,{ref:"visibleCheckbox"})),wi.createElement(Da,{label:"Add Entry",level:Li.PRIMARY,onClick:function(){t.addEntry()}}),wi.createElement(Zd,{ref:"postContentMarkup",style:{height:"450px"}}))]},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.titleInput.onKeyUp(function(){e.urlInput.setValue(v(e.titleInput.getValue()))})},n.addEntry=function(){var t=this,e={},n=this.titleInput.getValue();n&&(e.title=n);var i=this.urlInput.getValue();i&&(e.urlName=i),e.isVisible=this.visibleCheckbox.getValue();var r=this.postContentMarkup.getValue();r&&(e.content=r),Na.postJSON("/blog/add_entry/",e).then(function(e){var n=My.get(e.blogEntryId);$o.changeURL(["blog",n.urlName]),t.hide()})},e}(mc),By=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.setStyle({position:"relative",maxHeight:"420px",marginTop:"45px",marginBottom:"45px"})},n.canOverwrite=function(e){return t.prototype.canOverwrite.call(this,e)&&this.options.entryId===e.options.entryId},n.getBlogEntry=function(){return My.get(this.options.entryId)},n.getBlogArticle=function(){return this.getBlogEntry().getArticle()},n.getEntryURL=function(){return"/blog/"+this.getBlogEntry().urlName+"/"},n.render=function(){var t,e=this.getStyleSheet(),n=this.getBlogArticle(),i=n.dateCreated,r=Kc.unix(i).format("LL"),o={color:"#777",fontSize:"1em",margin:"0",fontStyle:"italic"};return n.dateModified>n.dateCreated&&(t=wi.createElement("p",{style:o},wi.T("Last update on")," ",Kc.unix(n.dateModified).format("LL"),".")),[wi.createElement("div",{style:{height:"100%"}},wi.createElement("div",{style:{boxShadow:"0px 0px 10px rgb(160, 162, 168)","background-color":"#fff",padding:"1% 4% 10px 4%",margin:"0 auto",width:"900px","max-width":"100%",position:"relative"}},wi.createElement("div",{style:e.writtenBy},wi.T("Written by")," ",wi.createElement(vf,{userId:n.userCreatedId}),", ",r,".",t),wi.createElement("div",{style:e.title},wi.createElement(co,{href:this.getEntryURL(),value:n.name,style:{"text-decoration":"none",color:"inherit"}})),wi.createElement(Py,{article:n,style:e.blogArticleRenderer}),wi.createElement("div",{className:e.whiteOverlay}),wi.createElement(co,{href:this.getEntryURL(),style:e.link,value:wi.T("Continue reading")})))]},e}(wi.Element),Hy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.getBlogEntry=function(){return My.get(this.options.entryId)},i.getBlogArticle=function(){return this.getBlogEntry().getArticle()},i.extraNodeAttributes=function(t){t.addClass(this.getStyleSheet().blogEntryView)},i.getComments=function(){var t=this.getBlogEntry().discussionId;return t?wi.createElement("div",{style:{marginBottom:"20px",marginTop:"20px"}},wi.createElement(Ny,{chatId:t})):null},i.render=function(){var t,e=this,n=this.getBlogArticle(),i=this.getStyleSheet(),r=n.dateCreated,o=Kc.unix(r).format("LL"),s={margin:"3px",color:"#777",fontSize:"1em",fontStyle:"italic"};n.dateModified>n.dateCreated&&(t=wi.createElement("p",{style:s},"Last update on ",Kc.unix(n.dateModified).format("LL"),"."));var a;return USER.isSuperUser&&(a=wi.createElement(Da,{level:Li.DEFAULT,label:"Edit",onClick:function(){zy.show({entryId:e.getBlogEntry().id,fillScreen:!0})}})),[wi.createElement("div",{style:{"background-color":"#fff",padding:"2% 5%","box-shadow":"rgb(160, 160, 160) 0px 3px 15px"}},a,wi.createElement("div",{style:i.writtenBy},"Written by ",wi.createElement(vf,{userId:n.userCreatedId})," on ",o,".",t),wi.createElement("div",{style:i.title},n.name),wi.createElement(Py,{style:i.article,article:n}),wi.createElement("div",{style:{"margin-top":"30px","margin-bottom":"10px"}},wi.createElement(co,{href:"/blog/",style:i.link,value:"Back to the Main Blog"})),this.getComments()),wi.createElement("div",{className:i.bottomSection})]},n(e,[{key:"pageTitle",get:function(){return this.getBlogArticle().name}}]),e}(wi.Element),Fy=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.setStyle("paddingTop","10px")},n.showNewBlogPostModal=function(){wi.createElement(_y,{fillScreen:!0}).show()},n.render=function(){for(var t=this,e=this.getStyleSheet(),n=[],i=My.all().sort(function(t,e){return e.getArticle().dateCreated-t.getArticle().dateCreated}),r=i,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;n.push(wi.createElement(By,{key:l.id,entryId:l.id}))}return[USER.isSuperUser?wi.createElement(Da,{label:"New Entry",level:Li.DEFAULT,onClick:function(){return t.showNewBlogPostModal()}}):null,wi.createElement("div",{ref:"entriesList"},n),wi.createElement(Da,{label:this.options.finishedLoading?wi.T("End of blog"):wi.T("Load More"),ref:"loadMoreButton",style:{margin:"0px auto",display:"block"},className:e.loadMoreButton,disabled:this.options.finishedLoading}),wi.createElement("div",{style:{height:"45px",width:"100%"}})]},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.loadMoreButton.addClickListener(function(){e.options.finishedLoading||Na.getJSON("/blog/",{lastDate:Math.min.apply(null,My.all().map(function(t){return t.getArticle().dateCreated}))}).then(function(t){e.options.finishedLoading=t.finishedLoading,e.options.finishedLoading&&(e.loadMoreButton.options.label=wi.T("No more posts"),e.loadMoreButton.redraw(),e.loadMoreButton.disable()),e.redraw()})}),this.attachCreateListener(My,function(){e.redraw()})},e}(wi.Element);Gi.register(Hy,Ey),Gi.register(By,Ey),Gi.register(Fy,Ey);var Uy,Wy,Vy,jy,Gy,Yy,Ky,Xy,qy,Jy,Zy,$y,Qy,tb,eb,nb,ib,rb,ob,sb,ab,lb,ub,cb,hb,pb,db,fb,gb,mb,yb,bb,vb,Sb,wb,Ab,Eb,xb,Cb,Tb,Lb,Ob,Rb,Nb,Ib,kb,Mb,Pb,Db,zb,_b,Bb,Hb,Fb,Ub,Wb,Vb,jb,Gb,Yb,Kb,Xb,qb,Jb,Zb,$b,Qb,tv,ev=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(af(Fy)),nv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.getBlogEntry=function(){return My.getEntryForURL(this.options.entryURL)},i.onDelayedMount=function(){t.prototype.onDelayedMount.call(this),$o.updateURL()},i.getAjaxUrl=function(){return"/blog/get_blog_post/"},i.getAjaxRequest=function(){return{entryUrlName:this.options.entryURL}},n(e,[{key:"pageTitle",get:function(){return this.getBlogEntry()?t.prototype.pageTitle:null},set:function(t){}}]),e}(af(Hy)),iv=function(t){function e(e,n){var i;return void 0===e&&(e="blog"),void 0===n&&(n={}),n.title=n.title||"Blog",i=t.call(this,e,ev,[],n)||this,i.subroutes=i.getSubroutes(),i}return r(e,t),e.prototype.getSubroutes=function(){return[new Qo("%s",function(t){var e=t.args[t.args.length-1],n=My.getEntryForURL(e);return n?wi.createElement(Hy,{entryId:n.id}):wi.createElement(nv,{entryURL:e})})]},e}(Qo),rv=function(t){function e(){var e;return e=t.apply(this,arguments)||this,e.forumThreads=new Map,e.registerToStream(),av.addDeleteListener(function(t){t.parentId===e.id&&e.forumThreads.has(t.id)&&e.deleteForumThread(t)}),e}r(e,t);var n=e.prototype;return n.getStreamName=function(){return"forum-"+this.id},n.getForumThreads=function(){var t=Array.from(this.forumThreads.values());return t=t.filter(function(t){return t.isVisible()}),t.sort(function(t,e){return e.id-t.id}),t},n.addForumThread=function(t,e){this.forumThreads.set(t.id,t),this.dispatch("newForumThread",e)},n.deleteForumThread=function(t){this.forumThreads.delete(t.id),this.dispatch("deleteForumThread",t)},e}(cf),ov=new pf("forum",rv),sv=function(t){function e(e){var n;n=t.call(this,e)||this;var i=n.getParent();return i&&i.addForumThread(h(n)),n}r(e,t);var n=e.prototype;return n.getAuthor=function(){return yf.get(this.authorId)},n.isPinned=function(){return null!=this.pinnedIndex},n.getPinIndex=function(){return this.pinnedIndex},n.getTitle=function(){return this.title},n.getContentMessage=function(){return Yf.get(this.contentMessageId)},n.getVotesBalance=function(){var t=this.getContentMessage();return t?t.getVotesBalance():this.votesBalance},n.getParent=function(){return ov.get(this.parentId)},n.getMessageThread=function(){return Kf.get(this.messageThreadId)},n.getTimeAdded=function(){return this.timeAdded},n.getLastActive=function(){return this.lastActive},n.getNumReplies=function(){return this.getNumMessages()-1},n.deleteThread=function(t,e){void 0===t&&(t=li),void 0===e&&(e=li),Na.postJSON("/forum/edit_forum_thread/",{forumThreadId:this.id,hidden:!0}).then(t,e)},n.getNumMessages=function(){return this.numMessages},n.isVisible=function(){return!this.hidden},n.isLoaded=function(){return null!=this.getMessageThread()&&this.getNumReplies()===this.getMessageThread().getNumMessages()-1},e}(cf),av=new pf("forumthread",sv,{dependencies:["forum","messageinstance"]}),lv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.setOptions=function(e){e.faIcon||(e.label=e.label||wi.T("Preview")),e.level=e.level||Li.PRIMARY,t.prototype.setOptions.call(this,e)},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void _m.show();uv.show({messageInstance:e.options.messageInstance,classMap:ng.classMap})})},e}(Da),uv=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.onMount=function(){var e=this;t.prototype.onMount.call(this),this.markupEditor.setValue(this.options.messageInstance.getContent()),this.doneButton.addClickListener(function(){e.options.messageInstance.edit(e.markupEditor.getValue())})},e}(eg),cv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getTitle=function(){return wi.T("Delete message")},n.getActionName=function(){return wi.T("Delete")},n.getBody=function(){return wi.createElement("p",null,wi.T("Are you sure you want to delete the message?"))},n.action=function(){this.options.messageInstance.deleteMessage(),this.hide()},e}(yc),hv=bc(cv),pv={BLUE:"#202e3e",HOVER_BLUE:"#364251",BLACK:"#1c2937",HOVER_BLACK:"#364251",WHITE:"#eee"},dv=(Uy=Ky=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"mainClass",Wy,h(e)),p(e,"repliesUserAndDate",Vy,h(e)),p(e,"repliesUser",jy,h(e)),p(e,"repliesDate",Gy,h(e)),p(e,"repliesContent",Yy,h(e)),e}return r(e,t),e}(Fi),Wy=d(Uy.prototype,"mainClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",margin:"0 auto",maxWidth:"1200px"}}}),Vy=d(Uy.prototype,"repliesUserAndDate",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",width:"100%",lineHeight:"40px",fontSize:"15px",marginTop:"8px",marginBottom:"8px"}}}),jy=d(Uy.prototype,"repliesUser",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",color:"#444",fontSize:"14px"}}}),Gy=d(Uy.prototype,"repliesDate",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right"}}}),Yy=d(Uy.prototype,"repliesContent",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"15px",fontSize:"16px"}}}),Xy=fb=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.fontSize="0.9em",e.numRepliesFontSize="1.03em",e.messageFontSize="1.2em",e.buttonFontSize="1em",p(e,"mainClass",qy,h(e)),p(e,"title",Jy,h(e)),p(e,"backButton",Zy,h(e)),p(e,"replyButtonDiv",$y,h(e)),p(e,"replyButton",Qy,h(e)),p(e,"fullPost",tb,h(e)),p(e,"dislikeButton",eb,h(e)),p(e,"likeButton",nb,h(e)),p(e,"author",ib,h(e)),p(e,"header",rb,h(e)),p(e,"message",ob,h(e)),p(e,"buttons",sb,h(e)),p(e,"bottomPanel",ab,h(e)),p(e,"voting",lb,h(e)),p(e,"numReplies",ub,h(e)),p(e,"replies",cb,h(e)),p(e,"editDeleteButtons",hb,h(e)),p(e,"editButton",pb,h(e)),p(e,"deleteButton",db,h(e)),e}return r(e,t),e}(Fi),qy=d(Xy.prototype,"mainClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto",marginBottom:"20px",width:"100%"}}}),Jy=d(Xy.prototype,"title",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",fontSize:"2em",color:"#333",minHeight:"50px",display:"flex",justifyContent:"center",alignItems:"center"}}}),Zy=d(Xy.prototype,"backButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#444",fontSize:this.fontsize,textDecoration:"none",transition:".15s",opacity:"1",":hover":{opacity:"1",color:"#337ab7",transition:".15s"}}}}),$y=d(Xy.prototype,"replyButtonDiv",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",height:"50px",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0 auto"}}}),Qy=d(Xy.prototype,"replyButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0"}}}),tb=d(Xy.prototype,"fullPost",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",fontSize:this.fontSize,border:"1px solid #ddd",borderTop:"0"}}}),eb=d(Xy.prototype,"dislikeButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",marginRight:"16px"}}}),nb=d(Xy.prototype,"likeButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",marginRight:"8px"}}}),ib=d(Xy.prototype,"author",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#262626",fontSize:this.fontSize,height:"50px",display:"flex",alignItems:"center",paddingLeft:"0",textTransform:"uppercase"}}}),rb=d(Xy.prototype,"header",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ob=d(Xy.prototype,"message",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"5px 12px",fontSize:this.messageFontSize,color:pv.BLUE," p":{marginBottom:"0",padding:"5px 0"}}}}),sb=d(Xy.prototype,"buttons",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",width:"100%",paddingTop:"12px"}}}),ab=d(Xy.prototype,"bottomPanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}}}),lb=d(Xy.prototype,"voting",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingRight:"12px"}}}),ub=d(Xy.prototype,"numReplies",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",fontSize:this.numRepliesFontSize,paddingLeft:"12px",color:"#767676",display:"flex",alignItems:"center",fontWeight:"bold",textTransform:"uppercase"}}}),cb=d(Xy.prototype,"replies",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",color:"#444"}}}),hb=d(Xy.prototype,"editDeleteButtons",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:"50px",padding:"0 7px",display:"flex",alignItems:"center",justifyContent:"flex-start"}}}),pb=d(Xy.prototype,"editButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"35px",width:"35px",margin:"0 4px",border:"0",borderRadius:"0",color:"#fff",backgroundColor:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:this.buttonFontSize,transition:".2s",":hover":{backgroundColor:"#454545",transition:".2s"}}}}),db=d(Xy.prototype,"deleteButton",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"35px",width:"35px",margin:"0 4px",border:"0",borderRadius:"0",color:"#fff",backgroundColor:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:this.buttonFontSize,transition:".2s",":hover":{backgroundColor:"#454545",transition:".2s"}}}}),Xy),fv=(gb=yb=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"button",mb,h(e)),e}return r(e,t),e}(Fi),mb=d(gb.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={marginLeft:"16px",color:"#fff",height:"30px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:pv.BLUE,border:"0",padding:"5px 10px"},t.marginBottom="0",t.borderColor=pv.BLUE,t.fontSize="13px",t.transition=".2s",t.outline="none",t[":hover"]={backgroundColor:pv.HOVER_BLUE,borderColor:pv.HOVER_BLUE,transition:".2s"},t[":active"]={backgroundColor:pv.HOVER_BLUE,borderColor:pv.HOVER_BLUE,transition:".2s"},t[":focus"]={backgroundColor:pv.HOVER_BLUE,borderColor:pv.HOVER_BLUE,transition:".2s"},t}}),gb),gv=(bb=Tb=function(t){function e(){var e;return e=t.call(this,{updateOnResize:!0})||this,e.fontSize="0.85em",e.widthLimit=800,e.tagsHeight=50,e.borderTopColor="#333",e.baseStyleObject={height:e.tagsHeight+"px",color:"#262626",display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase",fontWeight:"bold"},p(e,"mainClass",vb,h(e)),p(e,"tagsTitle",Sb,h(e)),p(e,"tagsAuthor",wb,h(e)),p(e,"tagsReplies",Ab,h(e)),p(e,"tagsViews",Eb,h(e)),p(e,"tagsVotes",xb,h(e)),p(e,"tagsActivity",Cb,h(e)),e}return r(e,t),e}(Fi),vb=d(bb.prototype,"mainClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={height:"40px",width:"100%",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto",color:"#aaa",display:"flex",boxSizing:"content-box",backgroundColor:"#eaeaea"},t.height=this.tagsHeight+"px",t.borderTop="3px solid "+this.borderTopColor,t}}),Sb=d(bb.prototype,"tagsTitle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return[this.baseStyleObject,{paddingLeft:"12px",flex:function(){return window.innerWidth<t.widthLimit?"1.5":"3"},justifyContent:"initial",fontSize:this.fontSize}]}}),wb=d(bb.prototype,"tagsAuthor",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".7",textAlign:"center",fontSize:this.fontSize}]}}),Ab=d(bb.prototype,"tagsReplies",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return[this.baseStyleObject,(t={paddingLeft:"4px",paddingRight:"4px"},t.paddingLeft="4px",t.paddingRight="4px",t.flex=".5",t.textAlign="center",t.fontSize=this.fontSize,t)]}}),Eb=d(bb.prototype,"tagsViews",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".5",textAlign:"center",fontSize:this.fontSize,display:function(){return console.log(window.innerWidth),window.innerWidth<t.widthLimit?"none":"inherit"}}]}}),xb=d(bb.prototype,"tagsVotes",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".5",textAlign:"center",fontSize:this.fontSize,display:function(){return window.innerWidth<t.widthLimit?"none":"inherit"}}]}}),Cb=d(bb.prototype,"tagsActivity",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"12px",flex:".5",textAlign:"center",fontSize:this.fontSize}]}}),bb),mv=(Lb=Rb=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.maxHeight=50,e.lines=2,e.lineHeight=e.maxHeight/e.lines,e.fontSize=".88em",e.color="#aaa",p(e,"forumThreadPreview",Ob,h(e)),e}return r(e,t),e}(Fi),Ob=d(Lb.prototype,"forumThreadPreview",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxHeight:this.maxHeight+"px",lineHeight:this.lineHeight+"px",overflow:"hidden",fontSize:this.fontSize,color:this.color," *":{marginBottom:"0"}}}}),Lb),yv=(Nb=Gb=function(t){function e(){var e;return e=t.call(this,{updateOnResize:!0})||this,e.fontSize="1em",e.titlePaddingBottom="10px",e.widthLimit=800,e.baseStyleObject={display:"inline-block",verticalAlign:"top",fontSize:e.fontSize},p(e,"backgroundColorOddInstances",Ib,h(e)),p(e,"backgroundColorPinnedInstances",kb,h(e)),p(e,"backgroundColorEvenInstances",Mb,h(e)),p(e,"mainClass",Pb,h(e)),p(e,"threadTitleAndPreview",Db,h(e)),p(e,"threadTitle",zb,h(e)),p(e,"pinnedIcon",_b,h(e)),p(e,"threadTitleSpan",Bb,h(e)),p(e,"threadAuthor",Hb,h(e)),p(e,"threadReplies",Fb,h(e)),p(e,"threadRepliesSpan",Ub,h(e)),p(e,"threadViews",Wb,h(e)),p(e,"threadVotes",Vb,h(e)),p(e,"threadActivity",jb,h(e)),e}return r(e,t),e}(Fi),Ib=d(Nb.prototype,"backgroundColorOddInstances",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#f4f6f7",":hover":{backgroundColor:"#eff1f2"}}}}),kb=d(Nb.prototype,"backgroundColorPinnedInstances",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#f4f6f7",":hover":{backgroundColor:"#eff1f2"}}}}),Mb=d(Nb.prototype,"backgroundColorEvenInstances",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#fff",":hover":{backgroundColor:"#fafafa"}}}}),Pb=d(Nb.prototype,"mainClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto",color:"#555",border:"1px solid #ddd",borderTop:"0",display:"flex"}}}),Db=d(Nb.prototype,"threadTitleAndPreview",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{flexDirection:"column",flex:function(){return window.innerWidth<t.widthLimit?"1.5":"3"},paddingTop:"25px",paddingBottom:"25px",paddingLeft:"12px"}}}),zb=d(Nb.prototype,"threadTitle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flexDirection:"column",textAlign:"justify",verticalAlign:"middle",wordWrap:"break-word",color:"#252628",paddingBottom:this.titlePaddingBottom}]}}),_b=d(Nb.prototype,"pinnedIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",display:"inline-block",float:"left",height:"60px",paddingTop:"25px",paddingRight:"12px"}}}),Bb=d(Nb.prototype,"threadTitleSpan",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",verticalAlign:"middle",lineHeight:"20px",transition:"0.2s",fontSize:"1.2em",":hover":{color:"#337ab7",transition:"0.2s"}}}}),Hb=d(Nb.prototype,"threadAuthor",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".7",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"}]}}),Fb=d(Nb.prototype,"threadReplies",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".5",textAlign:"center",fontWeight:"bold",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"}]}}),Ub=d(Nb.prototype,"threadRepliesSpan",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"0.2s",":hover":{color:"#337ab7",transition:"0.2s"}}}}),Wb=d(Nb.prototype,"threadViews",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t,e=this;return[this.baseStyleObject,(t={flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"},t.display=function(){return window.innerWidth<e.widthLimit?"none":"inherit"},t)]}}),Vb=d(Nb.prototype,"threadVotes",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t,e=this;return[this.baseStyleObject,(t={flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"},t.display=function(){return window.innerWidth<e.widthLimit?"none":"inherit"},t)]}}),jb=d(Nb.prototype,"threadActivity",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"12px",fontSize:".85em"}]}}),Nb),bv=(Yb=$b=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.textColor="#333",e.headerItemHeight=50,p(e,"mainClass",Kb,h(e)),p(e,"title",Xb,h(e)),p(e,"buttonParent",qb,h(e)),p(e,"button",Jb,h(e)),p(e,"header",Zb,h(e)),e}return r(e,t),e}(Fi),Kb=d(Yb.prototype,"mainClass",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),Xb=d(Yb.prototype,"title",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",fontSize:"2em",color:this.textColor,height:this.headerItemHeight+"px",display:"flex",justifyContent:"center",alignItems:"center"}}}),qb=d(Yb.prototype,"buttonParent",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",height:this.headerItemHeight+"px",display:"flex",justifyContent:"flex-end",alignItems:"center"}}}),Jb=d(Yb.prototype,"button",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0"}}}),Zb=d(Yb.prototype,"header",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:2*this.headerItemHeight+"px",width:"100%"}}}),Yb),vv=(Qb=tt(fv))(tv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{level:Li.PRIMARY,size:Oi.LARGE,label:wi.T("Preview")}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.button)},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void _m.show();e.markupEditorModal||(e.markupEditorModal=wi.createElement(Sv,{forumThreadId:e.options.forumThreadId,classMap:ng.classMap})),e.markupEditorModal.show()})},e}(Da))||tv,Sv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.doneButton.addClickListener(function(){e.createThreadReply()})},n.createThreadReply=function(){Na.postJSON("/forum/forum_thread_post/",{forumThreadId:this.options.forumThreadId,message:this.markupEditor.getValue()})},e}(eg),wv=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(cf),Av=new pf("TranslationKey",wv),Ev=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getLanguage=function(){return Af.get(this.languageId)},n.getTranslationKey=function(){return Av.get(this.translationKeyId)},e}(cf),xv=new pf("TranslationEntry",Ev);Af.addListener("buildTranslationMap",function(t){for(var e=xv.all(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;o.languageId===t.id&&t.translationMap.set(o.getTranslationKey().value,o.value)}});var Cv=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getTranslation=function(){Av.get(this.translationKeyId)},e}(cf),Tv=function(t){function e(){return t.call(this,"ErrorMessage",Cv)||this}return r(e,t),e}(pf),Lv=new Tv,Ov={};Ov.wrapError=function(t){return t instanceof cf?t:t.id?Lv.fakeCreate(t):("string"==typeof t||t instanceof String?t={message:t}:t instanceof Error&&(t={name:t.name,message:t.message}),new Cv(t))},Ov.showErrorAlert=function(t){vc.show({error:Ov.wrapError(t)})},Ov.PAGE_NOT_FOUND=Ov.wrapError("Page not found.");var Rv,Nv,Iv,kv,Mv=dv.getInstance();fv.getInstance();var Pv,Dv,zv,_v,Bv,Hv,Fv,Uv,Wv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.render=function(){var e={"margin-bottom":"4px",border:"0",outline:"none",color:"#333","font-size":"14px","padding-left":"8px",width:"100%","text-align":"center","font-weight":"bold"};return[wi.createElement(So,{label:wi.T("Title"),ref:"titleInput",style:e,placeholder:"Click here to edit the title (max. 160 characters)."})].concat(t.prototype.render.call(this))},n.onMount=function(){var t=this;this.doneButton.addClickListener(function(){t.createForumThread()})},n.routeToThread=function(t){$o.changeURL(["forum",t,"title"])},n.createForumThread=function(){var t=this,e={forumId:this.options.forumId,title:this.titleInput.getValue(),message:this.markupEditor.getValue()};Na.postJSON("/forum/create_forum_thread/",e).then(function(e){t.routeToThread(e.forumThreadId),t.titleInput.setValue(""),t.markupEditor.setValue(""),t.markupEditor.redraw(),t.hide()})},e}(eg),Vv=(Rv=tt(fv))(Nv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.button)},n.setOptions=function(e){e.faIcon||(e.label=e.label||wi.T("Preview")),e.level=e.level||Li.PRIMARY,e.size=e.size||Oi.LARGE,t.prototype.setOptions.call(this,e)},n.getModalClass=function(){return Wv},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void _m.show();e.getModalClass().show({forumId:e.options.forumId,classMap:ng.classMap})})},e}(Da))||Nv,jv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getTitle=function(){return wi.T("Delete forum thread")},n.getActionName=function(){return wi.T("Delete")},n.getBody=function(){return wi.createElement("p",null,wi.T("Are you sure you want to delete thread"),' "'+this.options.forumThread.title+'"?')},n.action=function(){this.options.forumThread.deleteThread(),this.hide()},e}(yc),Gv=bc(jv),Yv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){},n.getMessageInstance=function(){return this.options.messageInstance},n.render=function(){var t,e,n=this.getMessageInstance(),i=wi.createElement("span",null);return(USER.isSuperUser||USER.id===n.userId)&&(t=wi.createElement(hv,{faIcon:"trash",level:Li.DANGER,className:Mv.deleteButton,modalOptions:{messageInstance:n}}),e=wi.createElement(lv,{faIcon:"pencil",level:Li.INFO,messageInstance:n,forumThreadPanel:this,className:Mv.editButton}),i=wi.createElement("div",{className:Mv.editDeleteButtons,style:{width:"auto"}},e,t)),[wi.createElement("div",{className:Mv.fullPost},wi.createElement("div",{className:Mv.author,style:{fontSize:"1em",paddingLeft:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"}},wi.createElement(vf,{id:n.userId,style:{textTransform:"initial",fontSize:"1.1em"}}),wi.createElement(yo,{timeStamp:n.getDate(),style:{color:"#262626 !important",paddingRight:"12px"}
})),wi.createElement(ng,{ref:this.refLink("postContent"+n.id),value:n.getContent(),className:Mv.message}),wi.createElement("div",{className:Mv.bottomPanel},i,wi.createElement(Um,{height:40,balanceColor:"#313534",notVoteColor:"#313534",message:n,className:Mv.voting})))]},n.onMount=function(){var t=this;this.attachEventListener(this.getMessageInstance(),"messageDelete",function(){t.hide()}),this.attachEventListener(this.getMessageInstance(),"messageEdit",function(){t.redraw()})},e}(wi.Element),Kv=(Iv=tt(dv))(kv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.mainClass)},n.returnToMainForum=function(){$o.changeURL(this.getMainForumURL())},n.getMainForumURL=function(){return"/forum/"},n.getForumThreadState=function(t){var e=this;void 0===t&&(t=li);var n={forumThreadId:this.options.forumThread.id};Na.postJSON("/forum/forum_thread_state/",n).then(t,function(t){e.returnToMainForum(),Ov.showErrorAlert(t)})},n.getForumThread=function(){return this.options.forumThread},n.getTitle=function(){return[wi.createElement("div",{className:this.styleSheet.title},wi.createElement(co,{href:this.getMainForumURL(),className:this.styleSheet.backButton,value:wi.createElement("span",{className:"fa fa-arrow-left",style:{paddingRight:"10px",fontSize:".8em",color:"#333"}})}),this.getForumThread().getTitle())]},n.getAuthor=function(){return wi.createElement("div",{className:this.styleSheet.author},wi.T("written by")," ",wi.createElement(vf,{id:this.getForumThread().authorId,style:{textTransform:"initial"}})," ",wi.createElement(yo,{timeStamp:this.getForumThread().getTimeAdded(),style:{color:"#262626 !important"}}))},n.getMessage=function(){return wi.createElement("div",{className:this.styleSheet.message},wi.createElement(ng,{ref:this.refLink("content"),value:this.getForumThread().getContentMessage().getContent(),style:{height:"auto"}}))},n.getNumReplies=function(t){return[wi.createElement("div",{className:this.styleSheet.numReplies},wi.createElement("span",{style:{"font-weight":"bold"}},t)," ","replies in this thread"+(0==t?", be the first one to comment":""))]},n.getVoting=function(){return wi.createElement("div",{className:this.styleSheet.voting},wi.createElement(Um,{height:40,balanceColor:"#313534",notVoteColor:"#313534",message:this.getForumThread().getContentMessage(),style:{"margin-left":"0"}}))},n.render=function(){var t=this;if(!this.options.forumThread.isLoaded())return this.getForumThreadState(function(){t.redraw(),t.initializeListeners()}),wi.createElement(Qd,null);var e,n=[],i=this.options.forumThread,r=Array.from(i.getMessageThread().getMessages());r.sort(function(t,e){return t.getDate()-e.getDate()});for(var o=0,s=r;o<s.length;o++){var a=s[o];a!==i.getContentMessage()&&n.push(wi.createElement(Yv,{className:this.styleSheet.replies,messageInstance:a}))}n.length&&(e=wi.createElement("div",{style:{height:"60px",borderBottom:"1px solid #ddd",width:"90%",maxWidth:"1200px",margin:"0 auto"}}));var l,u,c;return(USER.isSuperUser||USER.id===this.getForumThread().authorId)&&(l=wi.createElement(Gv,{faIcon:"trash",level:Li.DANGER,className:this.styleSheet.deleteButton,modalOptions:{forumThread:this.getForumThread()}}),u=wi.createElement(lv,{faIcon:"pencil",level:Li.INFO,className:this.styleSheet.editButton,messageInstance:this.getForumThread().getContentMessage()}),c=wi.createElement("div",{className:this.styleSheet.editDeleteButtons},u,l)),[wi.createElement("div",{style:{marginBottom:"60px"}},wi.createElement("div",{className:this.styleSheet.header},this.getTitle(),wi.createElement("div",{className:this.styleSheet.replyButtonDiv},this.getAuthor(),wi.createElement(vv,{label:wi.T("REPLY"),className:this.styleSheet.replyButton,size:Oi.DEFAULT,forumThreadId:i.id,forumThread:this.getForumThread(),classMap:ng.classMap}))),wi.createElement("div",{style:{width:"90%",maxWidth:"1200px",margin:"0 auto",height:"3px",backgroundColor:"#333",marginTop:"10px"}}),wi.createElement("div",{className:this.styleSheet.fullPost},this.getMessage(),wi.createElement("div",{className:this.styleSheet.bottomPanel},this.getNumReplies(n.length),this.getVoting()),c),e,n)]},n.deleteThread=function(){this.getForumThread().deleteThread()},n.initializeListeners=function(){var t=this;this.getForumThread().getMessageThread().addListener("newMessage",function(){t.redraw()}),this.getForumThread().getMessageThread().addListener("deleteMessage",function(){t.redraw()}),this.getForumThread().getContentMessage().addEventListener("messageEdit",function(){t.content.setValue(t.getForumThread().getContentMessage().getContent()),t.content.redraw()})},n.onMount=function(){var t=this;this.options.forumThread.isLoaded()&&this.initializeListeners(),this.getForumThread().addDeleteListener(function(){t.returnToMainForum()})},e}(uo))||kv,Xv=(Pv=tt(gv))(Dv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.mainClass)},n.getTitle=function(){return wi.createElement("div",{className:this.styleSheet.tagsTitle},wi.T("Title"))},n.getAuthor=function(){return wi.createElement("div",{className:this.styleSheet.tagsAuthor},wi.T("Author"))},n.getReplies=function(){return wi.createElement("div",{className:this.styleSheet.tagsReplies},wi.T("Replies"))},n.getViews=function(){return wi.createElement("div",{className:this.styleSheet.tagsViews},wi.T("Views"))},n.getVotes=function(){return wi.createElement("div",{className:this.styleSheet.tagsVotes},wi.T("Score"))},n.getActivity=function(){return wi.createElement("div",{className:this.styleSheet.tagsActivity},wi.T("Active"))},n.render=function(){return[this.getTitle(),this.getAuthor(),this.getReplies(),this.getViews(),this.getVotes(),this.getActivity()]},e}(wi.Element))||Dv,qv=(zv=tt(mv))(_v=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.extraNodeAttributes=function(t){t.addClass(this.styleSheet.forumThreadPreview)},e}(ng))||_v,Jv=(Bv=tt(yv))(Hv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.addClass(this.styleSheet.mainClass),e},n.getHref=function(){return"/forum/"+this.getForumThread().id+"/"+v(this.getForumThread().getTitle())},n.getForumThread=function(){return this.options.forumThread},n.getThreadTitle=function(){var t=this,e="";this.getForumThread().isPinned()&&(e=wi.createElement("span",{className:"fa fa-thumb-tack "+this.styleSheet.pinnedIcon,"aria-hidden":"true",style:{paddingTop:"0",lineHeight:"20px",height:"20px"}}));var n=this.getForumThread();return[wi.createElement("div",{className:this.styleSheet.threadTitleAndPreview},wi.createElement("div",{className:this.styleSheet.threadTitle,style:{paddingBottom:function(){return n.getContentMessage().content?t.styleSheet.titlePaddingBottom:"0"}}},e,wi.createElement(co,{style:{"text-decoration":"none",color:"inherit","font-size":"14px","text-align":"justify"},href:this.getHref(),value:wi.createElement("span",{className:this.styleSheet.threadTitleSpan},this.getForumThread().getTitle())})),wi.createElement(qv,{value:this.getForumThread().getContentMessage().content}))]},n.getThreadAuthor=function(){return[wi.createElement("span",{className:this.styleSheet.threadAuthor},wi.createElement(vf,{id:this.getForumThread().authorId,style:{"line-height":"normal",wordBreak:"break-word"}}))]},n.getThreadReplies=function(){return[wi.createElement("div",{className:this.styleSheet.threadReplies},wi.createElement(co,{style:{"text-decoration":"none",color:"inherit"},href:this.getHref(),value:wi.createElement("span",{className:this.styleSheet.threadRepliesSpan},this.getForumThread().getNumReplies())}))]},n.getThreadViews=function(){return[wi.createElement("div",{className:this.styleSheet.threadViews},this.getForumThread().numViews)]},n.getThreadVotes=function(){return[wi.createElement("div",{className:this.styleSheet.threadVotes},this.getForumThread().getVotesBalance())]},n.getThreadActivity=function(){var t=this.getForumThread().getLastActive();return[wi.createElement("div",{className:this.styleSheet.threadActivity},wi.createElement(yo,{timeStamp:t}))]},n.render=function(){return[this.getThreadTitle(),this.getThreadAuthor(),this.getThreadReplies(),this.getThreadViews(),this.getThreadVotes(),this.getThreadActivity()]},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.getForumThread().addUpdateListener(function(){e.redraw()}),this.getForumThread().addDeleteListener(function(){e.hide()})},e}(wi.Element))||Hv,Zv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getNodeAttributes=function(){var e=t.prototype.getNodeAttributes.call(this);return e.setStyle({width:"90%",margin:"0 auto",marginTop:"10px",marginBottom:"60px"}),e},n.getBubbleClass=function(){return Jv},n.render=function(){var t=Array.from(this.options.forum.getForumThreads());t.sort(function(t,e){return t.isPinned()&&e.isPinned()?e.getPinIndex()-t.getPinIndex():t.isPinned()?-1:e.isPinned()?1:e.lastActive-t.lastActive});var e=[],n=1;e.push(wi.createElement(Xv,null));for(var i=this.getBubbleClass(),r=0,o=t;r<o.length;r++){var s=o[r];e.push(wi.createElement(i,{forumThread:s,color:n,isPinned:s.isPinned()})),s.isPinned()||(n=!n)}return e},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.options.forum.addListener("newForumThread",function(){e.redraw()})},e}(wi.Element),$v=(Fv=tt(bv))(Uv=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.mainClass)},n.getTitle=function(){return wi.createElement("div",{className:this.styleSheet.title},this.options.forum.name)},n.getButton=function(){return wi.createElement("div",{className:this.styleSheet.buttonParent},wi.createElement(Vv,{label:"NEW POST",className:this.styleSheet.button,size:Oi.DEFAULT,forumId:this.options.forum.id}))},n.getForumThreadList=function(){return wi.createElement(Zv,{forum:this.options.forum})},n.render=function(){return[wi.createElement("div",{className:this.styleSheet.header},this.getTitle(),this.getButton()),this.getForumThreadList()]},n.onMount=function(){var t=this;this.attachListener(av,"create",function(){return t.redraw()}),this.attachListener(av,"delete",function(){return t.redraw()})},e}(uo))||Uv,Qv=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.importState=function(e){t.prototype.importState.call(this,e),this.options.forum=ov.get(this.options.forumId)},e}(af($v)),tS=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.beforeRedrawNotLoaded=function(){var t=this;Na.postJSON("/forum/forum_thread_state/",{forumThreadId:this.options.forumThreadId}).then(function(e){t.importState(e),t.setLoaded()},function(){})},n.importState=function(e){t.prototype.importState.call(this,e),this.options.forumThread=av.get(this.options.forumThreadId)},e}(af(Kv)),eS=function(t){function e(e,n){var i;return void 0===e&&(e="forum"),void 0===n&&(n={}),i=t.call(this,e,Qv,[],n)||this,i.subroutes=i.getSubroutes(),i}return r(e,t),e.prototype.getSubroutes=function(){return[new Qo(["%s","%s"],function(t){var e=t.args[t.args.length-2],n=av.get(e);return n?wi.createElement(Kv,{forumThread:n}):wi.createElement(tS,{forumThreadId:e})})]},e}(Qo),nS={geo:{}},iS=Math.PI,rS=180/iS,oS=iS/180,sS=1e-15;nS.geo.voronoi=function(t,e){arguments.length<2&&(e=nS.geo.delaunay(t)),e||(e=[]);var n=t.length,i=[];return e.forEach(function(t){i[t.a.p.i]=t.a,i[t.b.p.i]=t.b}),{type:"GeometryCollection",geometries:1===n?[{type:"Sphere"}]:2===n?kn(t[0],t[1]):t.map(function(e,n){var r=[],o=[],s={type:"Polygon",coordinates:[r],neighbors:o},a=i[n],l=a,u=l;if(!u)return null;for(var c=u.triangle.centre;;){var h=u.triangle.centre;if(_n(h,c)<sS-1){var p=Gn(t[u.neighbor.p.i]),d=Gn(t[u.p.i]),f=Vn([p[0]+d[0],p[1]+d[1],p[2]+d[2]]);_n(h,Bn(p,d))>0&&(f[0]=-f[0],f[1]=-f[1],f[2]=-f[2]),r.push(jn(f))}if(r.push(jn(h)),o.push(u.neighbor.p.i),c=h,u===a&&l!==a)break;u=(l=u).next.next.neighbor}return s})}},nS.geo.voronoi.topology=function(t,e){arguments.length<2&&(e=nS.geo.delaunay(t)),e||(e=[]);var n=t.length,i=new Array(n),r=[],o=-1,s={},a=[];return e.forEach(function(t){a[t.a.p.i]=t.a,a[t.b.p.i]=t.b}),t.forEach(function(t,e){var n=[],l=[],u=a[e],c=u,h=c;if(!h)return null;for(;;){if(h!==c){var p=c.triangle.index,d=h.triangle.index,f=p<d?p+","+d:d+","+p,g=s[f];null==g&&(r[g=s[f]=++o]=p<d?[jn(c.triangle.centre),jn(h.triangle.centre)]:[jn(h.triangle.centre),jn(c.triangle.centre)]),n.push(p<d?g:~g),l.push(h.neighbor.p.i)}if(h===u&&c!==u)break;h=(c=h).neighbor.next}i[e]={type:"Polygon",neighbors:l,arcs:[n]}}),{objects:{voronoi:{type:"GeometryCollection",geometries:i}},arcs:r}},nS.geo.delaunay=function(t){var e=t.map(Gn),n=(t.length,nS.convexhull3d(e));if(n.length)return n.forEach(function(e){e.coordinates=[t[e.a.p.i],t[e.b.p.i],t[e.c.p.i]],e.centre=Pn(e)}),n},nS.convexhull3d=function(t){var e,n=t.length;if(n<4)return[];for(e=0;e<n;++e)t[e].i=e;ee(t);var i=t[0],r=t[1],o=t[2],s=new qn(i,r,o);for(e=3;e<n&&Wn(s,t[e]);++e);if(e===n)return[];var a=t[e];if(t[e]=t[3],t[3]=a,Un(s,a)){var l=r;r=o,o=l}var u=new qn(i,r,o,0),c=new qn(a,r,i,1),h=new qn(o,a,i,2),p=new qn(r,a,o,3),d=[u,c,h,p];for(Qn(u.a,c.b),Qn(u.b,p.c),Qn(u.c,h.c),Qn(c.a,p.a),Qn(p.b,h.a),Qn(h.b,c.c),e=4;e<n;++e){var f=t[e];Kn(u,f,e),Kn(c,f,e),Kn(h,f,e),Kn(p,f,e)}for(e=4;e<n;++e){var g=t[e],m=g.visible;if(m){var y=null,b=m;do{b.t.marked=!0}while(b=b.nextF);b=m;do{var v=b.t;if(y=$n(v.a)||$n(v.b)||$n(v.c))break}while(b=b.nextF);if(y){for(var S=null,w=null,A=0,E=y.length;A<E;++A){var x=y[A],C=x.triangle,T=x.neighbor.triangle,L=new qn(g,x.neighbor.p,x.p,d.length);Qn(L.b,x),S?Qn(S.a,L.c):w=L,Xn(L,C,T),d.push(S=L)}Qn(S.a,w.c),b=m;do{for(var O=b.t,R=0,N=O.visible.length;R<N;++R)O.visible[R].remove();O.visible.length=0,Mn(d,O.index)}while(b=b.nextF)}}}return d},Yn.prototype.remove=function(){this.prevF?this.prevF.nextF=this.nextF:this.v.visible=this.nextF,this.nextF&&(this.nextF.prevF=this.prevF)};var aS=nS.geo.voronoi,lS=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{framerate:30,stroke:"white",fill:"cornflowerblue"}},e.getPaths=function(t){if((t=t||Date.now())==this.cachedTimestamp)return this.cachedPaths;this.cachedTimestamp=t;var e=ti(t),n=aS(e).geometries,i=this.VIEW_BOX_SIZE,r=on().scale(.5*i).clipAngle(90).translate([i/2,i/2]),o=De().projection(r);return this.cachedPaths=n.map(function(t){return o(t)}),this.cachedPaths},n.render=function(){var t=this,e=this.options.size||300,n=this.constructor.VIEW_BOX_SIZE,i=this.constructor.getPaths(this.options.timestamp||Date.now());return[wi.createElement(Yo.SVGRoot,{height:e,width:e,viewBox:"0 0 "+n+" "+n},i.map(function(e){return e&&wi.createElement(Yo.Path,{strokeWidth:12,stroke:t.options.stroke,fill:t.options.fill,d:e})}))]},n.setTimestamp=function(t){this.isInDocument()&&this.updateOptions({timestamp:t})},n.onMount=function(){var t=this;if(this.options.framerate>=60){var e=function e(n){t.setTimestamp(+Kc.fromHighResTimestamp(n)),t.animationFrame=requestAnimationFrame(e)};this.animationFrame=requestAnimationFrame(e)}else this.interval=setInterval(function(){return t.setTimestamp(Date.now())},1e3/this.options.framerate)},n.onUnmount=function(){this.interval&&clearInterval(this.interval),this.animationFrame&&cancelAnimationFrame(this.animationFrame)},e}(wi.Element);lS.VIEW_BOX_SIZE=500;var uS,cS,hS,pS,dS,fS,gS,mS,yS,bS,vS,SS,wS,AS,ES,xS,CS,TS,LS,OS,RS,NS,IS,kS,MS,PS,DS,zS,_S,BS,HS,FS,US,WS,VS,jS,GS,YS,KS,XS,qS,JS,ZS,$S,QS,tw,ew,nw,iw,rw,ow,sw,aw,lw,uw,cw,hw,pw,dw,fw,gw,mw,yw,bw,vw,Sw,ww,Aw,Ew,xw,Cw,Tw,Lw,Ow,Rw,Nw=(uS=ES=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.feedbackFormWidth=720,e.marginBottom=10,e.padding=15,e.width=300,e.inputHeight=35,p(e,"feedbackForm",cS,h(e)),p(e,"container",hS,h(e)),p(e,"feedback",pS,h(e)),p(e,"nameAndEmailContainer",dS,h(e)),p(e,"field",fS,h(e)),p(e,"textAreaField",gS,h(e)),p(e,"label",mS,h(e)),p(e,"input",yS,h(e)),p(e,"contactTextArea",bS,h(e)),p(e,"submitInput",vS,h(e)),p(e,"submitInputSending",SS,h(e)),p(e,"submitInputSuccess",wS,h(e)),p(e,"submitInputError",AS,h(e)),e}return r(e,t),e}(Fi),cS=d(uS.prototype,"feedbackForm",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{width:function(){return t.feedbackFormWidth},maxWidth:"100%",margin:"0 auto"}}}),hS=d(uS.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),pS=d(uS.prototype,"feedback",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),dS=d(uS.prototype,"nameAndEmailContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}}}),fS=d(uS.prototype,"field",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={display:"flex",width:"50%",flex:"1",flexDirection:"column",padding:"0 10px"},t.width="100%",t.minWidth="240px",t}}),gS=d(uS.prototype,"textAreaField",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxWidth:"100%",width:"100%",padding:"0 10px"}}}),mS=d(uS.prototype,"label",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block",fontSize:"18px",marginBottom:this.marginBottom,fontWeight:"600"}}}),yS=d(uS.prototype,"input",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={borderRadius:"0px !important",height:this.inputHeight,lineHeight:this.inputHeight,fontSize:"16px",paddingLeft:this.padding,marginBottom:this.marginBottom,letterSpacing:"0.2px",border:"0"},t.border="2px solid #ddd",t.transition="0.25s",t.display="flex",t.width="100%",t.flex="1",t.outline="0",t[":focus"]={border:"2px solid "+J(this.themeProperties.COLOR_PRIMARY,.3),transition:"0.25s"},t[":hover"]={border:"2px solid "+J(this.themeProperties.COLOR_PRIMARY,.3),transition:"0.25s"},t[":active"]={border:"2px solid "+J(this.themeProperties.COLOR_PRIMARY,.3),transition:"0.25s"},t}}),bS=d(uS.prototype,"contactTextArea",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"175px",lineHeight:"initial",padding:this.padding,maxWidth:"100%",width:"100%"}}}),vS=d(uS.prototype,"submitInput",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t;return t={margin:"0 10px",marginTop:"20px",padding:"5px 15px",fontSize:"18px",backgroundColor:"#fff",border:"0"},t.border="2px solid #ddd",t.fontWeight="600",t.transition="0.25s",t[":hover"]={borderColor:J(this.themeProperties.COLOR_PRIMARY,.3),transition:"0.25s"},t[":focus"]={borderColor:J(this.themeProperties.COLOR_PRIMARY,.3),transition:"0.25s",outline:"0"},t}}),SS=d(uS.prototype,"submitInputSending",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:J(this.themeProperties.COLOR_WARNING,.3),":hover":{borderColor:J(this.themeProperties.COLOR_WARNING,.3)}}}}),wS=d(uS.prototype,"submitInputSuccess",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:J(this.themeProperties.COLOR_SUCCESS,.3),":hover":{borderColor:J(this.themeProperties.COLOR_SUCCESS,.3)}}}}),AS=d(uS.prototype,"submitInputError",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:J(this.themeProperties.COLOR_DANGER,.3),":hover":{borderColor:J(this.themeProperties.COLOR_DANGER,.3)}}}}),uS),Iw=(xS=tt(Nw))(CS=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(t){return{formState:0}},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.feedbackForm)},n.isDisabled=function(){return this.options.formState>0},n.setFormState=function(t){this.options.formState=t,this.redraw()},n.getButtonAttributes=function(){var t=this.options.formState,e=this.styleSheet.submitInput;return 0===t?{value:"Submit",className:e}:1===t?{value:"Sending...",className:e+this.styleSheet.submitInputSending}:2===t?{value:"Thank you!",className:e+this.styleSheet.submitInputSuccess}:{value:"Sorry, you exceeded your quota of sending feedbacks",className:e+this.styleSheet.submitInputError}},n.render=function(){var t=this;return[wi.createElement(Uo,{ref:"feedbackForm",className:this.styleSheet.container},wi.createElement("div",{className:this.styleSheet.nameAndEmailContainer},USER.isAuthenticated?null:[wi.createElement("div",{className:this.styleSheet.field},wi.createElement("label",{className:this.styleSheet.label},"Name"),wi.createElement(So,{ref:"nameInput",className:this.styleSheet.input,disabled:this.isDisabled()})),wi.createElement("div",{className:this.styleSheet.field},wi.createElement("label",{className:this.styleSheet.label},"Email"),wi.createElement(Eo,{ref:"emailInput",className:this.styleSheet.input,disabled:this.isDisabled()}))]),wi.createElement("div",{className:this.styleSheet.textAreaField},wi.createElement("label",{className:this.styleSheet.label},"Message"),wi.createElement(Bo,{ref:"messageInput",className:this.styleSheet.input+this.styleSheet.contactTextArea,disabled:this.isDisabled()})),wi.createElement(wo,i({},this.getButtonAttributes(),{disabled:this.isDisabled(),onClick:function(){return t.submitMessage()}})))]},n.submitMessage=function(){var t=this,e={name:this.nameInput&&this.nameInput.getValue()||null,email:this.emailInput&&this.emailInput.getValue()||null,message:this.messageInput.getValue()};this.setFormState(1),Na.postJSON("/send_feedback/",e).then(function(){t.setFormState(2)},function(){t.setFormState(3)})},e}(wi.Element))||CS,kw=(TS=FS=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.height=350,e.width=250,e.headerImageDimensions=160,e.borderRadius="50%",e.bodyDescriptionPadding=20,e.footerHeight=40,e.footerSocialAccountDimensions=25,p(e,"container",LS,h(e)),p(e,"header",OS,h(e)),p(e,"circleImage",RS,h(e)),p(e,"image",NS,h(e)),p(e,"hr",IS,h(e)),p(e,"padding",kS,h(e)),p(e,"body",MS,h(e)),p(e,"description",PS,h(e)),p(e,"titleName",DS,h(e)),p(e,"titleJob",zS,h(e)),p(e,"footer",_S,h(e)),p(e,"url",BS,h(e)),p(e,"socialAccount",HS,h(e)),e}return r(e,t),e.prototype.getHeaderHeight=function(){return 10/7*this.headerImageDimensions},e}(Fi),LS=d(TS.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:this.width,border:"1px solid rgba(0,0,0,0)",display:"flex",flexDirection:"column",":hover":{border:"1px solid "+J(this.themeProperties.COLOR_ALTERNATIVE_WHITE,.1)}}}}),OS=d(TS.prototype,"header",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.getHeaderHeight(),width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}}),RS=d(TS.prototype,"circleImage",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.headerImageDimensions,width:this.headerImageDimensions,borderRadius:this.borderRadius}}}),NS=d(TS.prototype,"image",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",borderRadius:this.borderRadius}}}),IS=d(TS.prototype,"hr",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"80%",margin:"0 10%",height:"1px",backgroundColor:this.themeProperties.COLOR_ALTERNATIVE_WHITE}}}),kS=d(TS.prototype,"padding",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",paddingTop:this.bodyDescriptionPadding}}}),MS=d(TS.prototype,"body",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",flexDirection:"column",flex:"1"}}}),PS=d(TS.prototype,"description",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"0 10%",lineHeight:this.bodyDescriptionPadding,fontSize:"14px"}}}),DS=d(TS.prototype,"titleName",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProperties.COLOR_TEXT,fontSize:"16px",fontWeight:"600"}}}),zS=d(TS.prototype,"titleJob",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:J(this.themeProperties.COLOR_TEXT,.35),fontSize:"14px"}}}),_S=d(TS.prototype,"footer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.footerHeight,padding:"0 10%",width:"100%",display:"flex",flexDirection:"row"}}}),BS=d(TS.prototype,"url",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block",color:"inherit",textDecoration:"none"}}}),HS=d(TS.prototype,"socialAccount",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.footerSocialAccountDimensions,width:this.footerSocialAccountDimensions,borderRadius:this.borderRadius,backgroundColor:"#bbbbc9",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",marginRight:"12.5px",transition:".2s",":hover":{backgroundColor:J("#bbbbc9",.2),transition:".2s"}}}}),TS),Mw=(US=tt(kw))(WS=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.getImage=function(){var t=this.options.image;return wi.createElement("div",{className:this.styleSheet.circleImage},t instanceof wi.Element?t:wi.createElement(ho,{src:t,className:this.styleSheet.circleImage}))},n.render=function(){var t=this.options,e=t.image,n=t.name,i=t.job,r=t.description,o=t.socialAccounts,s=this.styleSheet;return[e&&[wi.createElement("div",{className:s.header},this.getImage()),wi.createElement("div",{className:s.hr})],wi.createElement("div",{className:s.body},wi.createElement("div",{className:s.padding}),wi.createElement("div",{className:s.description},wi.createElement("div",{className:s.titleName},n),wi.createElement("div",{className:s.titleJob},i),r&&[wi.createElement("div",{className:s.padding}),r]),wi.createElement("div",{className:s.padding}),o&&[wi.createElement("div",{className:s.hr}),wi.createElement("div",{className:s.padding}),wi.createElement("div",{className:s.footer},o.map(function(t){return wi.createElement(co,{href:t.url,className:s.url},wi.createElement("div",{className:s.socialAccount},wi.createElement(Qs,{icon:t.name})))}))])]},e}(wi.Element))||WS,Pw=(VS=YS=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"container",jS,h(e)),p(e,"teamSectionContainer",GS,h(e)),e}return r(e,t),e}(Fi),jS=d(VS.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"25px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row"}}}),GS=d(VS.prototype,"teamSectionContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12.5px"}}}),VS),Dw=(KS=tt(Pw))(XS=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.container)},n.render=function(){var t=this;return[{name:"Mihai Ciucu",image:wi.createElement(lS,{size:kw.getInstance().headerImageDimensions}),job:"Founder",description:"I don't have time for thinking about a description, I'm busy!",socialAccounts:[{name:"github",url:"https://github.com/mciucu"}]},{name:"Andra Geangu",image:"https://media.licdn.com/mpr/mpr/shrinknp_200_200/p/4/005/027/1b1/24f3e57.jpg",job:"Co-Founder"},{name:"Vlad Tarniceru",image:"https://pbs.twimg.com/profile_images/665837433217540096/r7N4Vjv0_400x400.jpg",job:"UI/UX designer, frontend engineer",description:"Listening to dark jazz",socialAccounts:[{name:"twitter",url:"https://twitter.com/vladtarniceru"},{name:"github",url:"https://github.com/saintandy"}]},{name:"Catalin Orzanescu",image:"https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAApKAAAAJDMxMjFmMmQ2LThiMzMtNGE4Ni1hM2UwLWIyNWRiNzllNTFkZg.jpg",job:"Research Collaborator"},{name:"Loredana Branzei",job:"Research Collaborator"},{name:"Anamaria Balsadiu",job:"Research Collaborator"},{name:"Mircea Pavel",image:"",job:"Research Collaborator"},{name:"Marian Iancu",job:"Research Collaborator"},{name:"Micu Adelina",job:"Research Collaborator"}].map(function(e){return wi.createElement("div",{className:t.styleSheet.teamSectionContainer},wi.createElement(Mw,e))})},e}(wi.Element))||XS,zw=(qS=$S=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"titleContainer",JS,h(e)),p(e,"messageContainer",ZS,h(e)),e}return r(e,t),e}(Fi),JS=d(qS.prototype,"titleContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"32px",fontWeight:"600",textAlign:"center",marginTop:"60px"}}}),ZS=d(qS.prototype,"messageContainer",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">p":{lineHeight:"30px",textAlign:"justify",fontSize:"18px"}}}}),qS),_w=(QS=tt(zw))(tw=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultOptions=function(){return{hasLogo:!0}},n.render=function(){var t=this.options,e=t.title,n=t.message;return[wi.createElement("div",{className:this.styleSheet.titleContainer},this.options.hasLogo?wi.createElement(lS,{size:100}):"",e),wi.createElement("div",{className:this.styleSheet.messageContainer},n)]},e}(wi.Element))||tw,Bw=(ew=ow=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"aboutPage",nw,h(e)),p(e,"container",iw,h(e)),p(e,"title",rw,h(e)),e}return r(e,t),e}(Fi),nw=d(ew.prototype,"aboutPage",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),iw=d(ew.prototype,"container",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"920px",padding:"0 15px",maxWidth:"100%",margin:"0 auto"}}}),rw=d(ew.prototype,"title",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"46px",paddingTop:"50px",textAlign:"center"}}}),ew),Hw=(sw=tt(Bw))(aw=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.aboutPage)},n.render=function(){return[wi.createElement("div",{className:this.styleSheet.container},wi.createElement("div",{className:this.styleSheet.title},wi.createElement(lS,{size:120}),wi.createElement("span",null,"Mundipedia")),wi.createElement(_w,{title:"About us",
message:[wi.createElement("p",null,"We’re a non-profit with the purpose of collecting, standardizing and visualizing information about the state of the world, currently and historically."),wi.createElement("p",null,"Mundipedia was born because there was a need for a centralized database for historical information. It’s intended not just as a historical map of the world, where you can just slide to what year you want. It’s intended to show information like historical GDP, populations, the areas where certain languages are spoken."),wi.createElement("p",null,"In short, we want to put a memorable visual representation on top of the world’s historical information while also acting as the curators of this data."),wi.createElement("p",null,"Everything that we’ll collect will be made freely available to anyone, at first through our website and later on through a standardized API."),wi.createElement("p",null,"This website is built with ",wi.createElement(co,{href:"https://stemjs.org/"},"Stem JS"),". The souce code is available ",wi.createElement(co,{href:"https://github.com/mciucu/mundipedia",newTab:!0},"on github"),".")],hasLogo:!1}),wi.createElement(_w,{title:"Aren’t there other websites that do this?",message:[wi.createElement("p",null,"There’s little information that’s not on the internet somewhere. It’s in a multitude of different formats thought: scanned maps, spreadsheets, yet untranslated cuneiform tablets, you name it. Mundipedia wants to be is a platform that gathers all that data and offers a single format for every type of data.")]}),wi.createElement(_w,{title:"We’re not a wiki (yet)",message:[wi.createElement("p",null,"We don’t accept user data right now, but we want to in the future. One of the main principles of Mundipedia is that the way information is presented can be more important than the actual information. Every single type of data that we’ll store has a different way of best presenting it, and that’s why at first we want the people that are inputing the data to be close to the decisions of how it’s displayed."),wi.createElement("p",null,"Using crowdsourcing to generate data has become a panacea for many content platforms, many forgetting how important it is to have a system in place that enforces consistency and quality. Don’t misunderstand us, openness to community efforts is critically important, it's just that at first we want to set up an infrastructure that will make sure the end-user hears only a single coherent and high quality voice. Anyone that's interested in a collaboration is welcomed to contact us using the form bellow or via email.")]}),wi.createElement(_w,{title:"How we’re funded",message:[wi.createElement("p",null,"We're not right now, and are still looking for ways to be funded, but whatever happens though, we will stand by our key principles:"),wi.createElement("p",null,wi.createElement("li",null,"All of the information will remain forever free and without copyright limitations to usage."),wi.createElement("li",null,"We will never have banners or ads of any kind on our website."),wi.createElement("li",null,"We will not compromise our content for sponsorships."))]}),wi.createElement(_w,{title:"Contact us",message:[wi.createElement("p",null,"Write to us at ",wi.createElement("strong",null,"contact@mundipedia.org")," if you’ve got any thoughts you want to send our way.")]}),wi.createElement(Iw,null),wi.createElement(_w,{title:"Our team",message:[wi.createElement(Dw,null)],hasLogo:!1}))]},e}(wi.Element))||aw,Fw=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.getAjaxUrl=function(){return Zf.options.fetchURL},i.getAjaxRequest=function(){return{chatId:this.options.chatId}},i.getDefaultOptions=function(e){return Object.assign(t.prototype.getDefaultOptions.call(this,e),{chatId:window.GLOBAL_CHAT_ID,style:{height:"100%",maxWidth:800,margin:"0 auto"}})},i.initializeShowLoadMoreButton=function(){},i.importState=function(e){t.prototype.importState.apply(this,arguments),t.prototype.initializeShowLoadMoreButton.call(this)},n(e,[{key:"messageThread",get:function(){return Zf.get(this.options.chatId).getMessageThread()}}]),e}(af(vy)),Uw=new Qo(null,Cd,[new iv,new eS,new Qo("chat",Fw),new Qo("about",Hw),new Qo(["article","%s","edit"],af(Hf))]),Ww=(lw=Rw=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.dimensions={collapseArrowWidth:"20px",navbarHeight:"50px",sidepanelElementHeight:"30px",sidepanelWidthLeft:"250px",sidepanelWidth:"330px",sidepanelHideWidth:"335px",sidepanelTransitionDuration:".15s",boxShadowWidth:"5px",backgroundTransitionDuration:".2s"},p(e,"icon",uw,h(e)),p(e,"sideIcon",cw,h(e)),p(e,"wrappedIcon",hw,h(e)),e.navElement={transition:"background-color "+e.dimensions.backgroundTransitionDuration},p(e,"navLinkElement",pw,h(e)),p(e,"navManager",dw,h(e)),p(e,"navElementHorizontal",fw,h(e)),p(e,"navElementHorizontalArrow",gw,h(e)),p(e,"navElementValueHorizontal",mw,h(e)),p(e,"navSectionHorizontal",yw,h(e)),e.sidePanel={top:"0",bottom:"0",height:"100%",backgroundColor:function(){return e.getColors().sidepanelBackground},overflow:"hidden",position:"fixed",zIndex:"3000",boxShadow:function(){return e.getColors().boxShadowSidePanel},width:function(){return e.dimensions.sidepanelWidth},transitionDuration:function(){return e.dimensions.sidepanelTransitionDuration}},p(e,"leftSidePanel",bw,h(e)),p(e,"rightSidePanel",vw,h(e)),p(e,"navElementVertical",Sw,h(e)),p(e,"navElementVerticalArrow",ww,h(e)),p(e,"navElementValueVertical",Aw,h(e)),p(e,"navSectionVertical",Ew,h(e)),p(e,"navCollapseElement",xw,h(e)),p(e,"sidePanelGroup",Cw,h(e)),p(e,"hrStyle",Tw,h(e)),p(e,"navVerticalLeftHide",Lw,h(e)),p(e,"navVerticalRightHide",Ow,h(e)),e}return r(e,t),e.prototype.getColors=function(){var t=this.themeProperties,e=t.COLOR_PRIMARY,n=t.NAV_MANAGER_COLOR_NAV_BAR||e,i=t.NAV_MANAGER_COLOR_SIDE_PANEL||J(e,.05);return this.colors={boxShadowNavManager:t.NAV_MANAGER_BOX_SHADOW_NAVBAR,boxShadowSidePanel:t.NAV_MANAGER_BOX_SHADOW_SIDE_PANEL,sidepanelBackground:t.NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR||i,sidepanelHover:t.NAV_MANAGER_SIDE_PANEL_HOVER_COLOR||J(i,.1),navbarBackground:t.NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR||n,navbarHover:t.NAV_MANAGER_NAV_BAR_HOVER_COLOR||J(n,.1),hr:t.NAV_MANAGER_HR_COLOR||J(i,.15),text:t.NAV_MANAGER_TEXT_COLOR||J(e,1)},this.colors},e}(Fi),uw=d(lw.prototype,"icon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,lineHeight:this.dimensions.navbarHeight,height:this.dimensions.navbarHeight,width:this.dimensions.navbarHeight,display:"inline-block",cursor:"pointer",textAlign:"center",":hover":{backgroundColor:this.getColors().navbarHover}}}}),cw=d(lw.prototype,"sideIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"120%"}}}),hw=d(lw.prototype,"wrappedIcon",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"100%",flex:"1"}}}),pw=d(lw.prototype,"navLinkElement",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block",color:this.getColors().text,textDecoration:"none",listStyleType:"none",":hover":{backgroundColor:this.getColors().sidepanelHover,color:this.getColors().text,textDecoration:"none"},":focus":{color:this.getColors().text,textDecoration:"none"},":active":{color:this.getColors().text,textDecoration:"none"},":visited":{color:this.getColors().text,textDecoration:"none"}}}}),dw=d(lw.prototype,"navManager",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",height:this.dimensions.navbarHeight,lineHeight:this.dimensions.navbarHeight,width:"100%",backgroundColor:this.getColors().navbarBackground,boxShadow:this.getColors().boxShadowNavManager,zIndex:"9999",position:"fixed"}}}),fw=d(lw.prototype,"navElementHorizontal",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,backgroundColor:this.getColors().navbarBackground,listStyleType:"none",cursor:"pointer",">:nth-child(2)":{position:"absolute"}}}}),gw=d(lw.prototype,"navElementHorizontalArrow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:".1em",verticalAlign:"middle"}}}),mw=d(lw.prototype,"navElementValueHorizontal",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.navElement,{padding:"0 0.7em",color:this.getColors().text,width:"100%",":hover":{backgroundColor:this.getColors().navbarHover}}]}}),yw=d(lw.prototype,"navSectionHorizontal",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",paddingLeft:"0",height:this.dimensions.navbarHeight,marginBottom:"0"}}}),bw=d(lw.prototype,"leftSidePanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.sidePanel,{overflowY:"scroll",width:this.dimensions.sidepanelWidthLeft,"-ms-overflow-style":"none",overflow:"-moz-scrollbars-none","::-webkit-scrollbar":{display:"none"}}]}}),vw=d(lw.prototype,"rightSidePanel",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sidePanel}}),Sw=d(lw.prototype,"navElementVertical",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,cursor:"pointer",listStyleType:"none",minHeight:this.dimensions.sidepanelElementHeight,overflow:"hidden",position:"relative",">*":{paddingLeft:this.dimensions.collapseArrowWidth}}}}),ww=d(lw.prototype,"navElementVerticalArrow",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:this.dimensions.collapseArrowWidth,textAlign:"center"}}}),Aw=d(lw.prototype,"navElementValueVertical",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.navElement,{color:this.getColors().text,zIndex:"1",position:"relative",width:"100%",height:this.dimensions.sidepanelElementHeight,lineHeight:this.dimensions.sidepanelElementHeight,":hover":{backgroundColor:this.getColors().sidepanelHover}}]}}),Ew=d(lw.prototype,"navSectionVertical",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"0",marginBottom:"0",width:"100%"}}}),xw=d(lw.prototype,"navCollapseElement",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,textAlign:"initial",lineHeight:this.dimensions.sidepanelElementHeight}}}),Cw=d(lw.prototype,"sidePanelGroup",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingTop:this.dimensions.navbarHeight,height:"inherit",width:this.dimensions.sidepanelWidth,position:"absolute",zIndex:"3"}}}),Tw=d(lw.prototype,"hrStyle",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return{margin:"10px 5%",borderTop:function(){return"2px solid "+t.getColors().hr}}}}),Lw=d(lw.prototype,"navVerticalLeftHide",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"-"+this.dimensions.sidepanelHideWidth,overflow:"hidden"}}}),Ow=d(lw.prototype,"navVerticalRightHide",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:"-"+this.dimensions.sidepanelHideWidth,overflow:"hidden"}}}),lw),Vw=Symbol.iterator,jw=function(t){function e(e,n){var i;return void 0===n&&(n=""),i=t.call(this)||this,i.storage=e,i.name=n,i.prefix=n+i.constructor.SEPARATOR,i}r(e,t);var n=e.prototype;return n.getPrefix=function(){return this.prefix},n.getRawKey=function(t){return this.getPrefix()+t},n.serialize=function(t){return JSON.stringify(t)},n.deserialize=function(t){return t&&JSON.parse(t)},n.set=function(t,e){try{this.storage.setItem(this.getRawKey(t),this.serialize(e))}catch(t){return!1}return!0},n.delete=function(t){this.storage.removeItem(this.getRawKey(t))},n.getRaw=function(t){return this.storage.getItem(this.getRawKey(t))},n.get=function(t,e){void 0===e&&(e=null);var n=this.getRaw(t);return null==n?e:this.deserialize(n)},n.has=function(t){return null!=this.getRaw(t)},n.keys=function(){for(var t=[],e=this.storage.length,n=this.getPrefix().length,i=0;i<e;i++){var r=this.storage.key(i);r.startsWith(this.getPrefix())&&t.push(r.substr(n))}return t},n.values=function(){var t=this;return this.keys().map(function(e){return t.get(e)})},n.entries=function(){var t=this;return this.keys().map(function(e){return[e,t.get(e)]})},n[Vw]=function(){return this.entries()},n.clear=function(){for(var t=this.keys(),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var r=i;this.delete(r)}},e}(gi);jw.SEPARATOR="-@#%-";var Gw,Yw,Kw,Xw,qw=function(t){function e(e){return void 0===e&&(e=""),t.call(this,window.sessionStorage,e)||this}return r(e,t),e}(jw),Jw=new qw("navManager"),Zw=function(t){return function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getOrientation=function(){return this.options.orientation?this.options.orientation:this.parent&&"function"==typeof this.parent.getOrientation?this.parent.getOrientation():Ci.HORIZONTAL},n(e,[{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),e}(t)},$w=Zw(wi.Element),Qw=Zw(co),tA=function(t){return function(t){function e(){var e;return e=t.apply(this,arguments)||this,e.isToggled=e.getToggledState(),e}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),this.getOrientation()===Ci.HORIZONTAL?(e.addClass(this.styleSheet.navElementHorizontal),this.parent instanceof iA?e.setStyle("float","left"):e.addClass(this.styleSheet.navCollapseElement)):e.addClass(this.styleSheet.navElementVertical)},n.getSelf=function(){var t=this.getOrientation()===Ci.HORIZONTAL?this.styleSheet.navElementValueHorizontal:this.styleSheet.navElementValueVertical,e=this.getOrientation()===Ci.VERTICAL&&f(this.render()).length?"-20px":"0";return wi.createElement($w,{className:t,style:{marginLeft:e}},this.getValue())},n.getSubElements=function(){var t=f(this.render());if(t.length){var e;return this.isToggled||(e="hidden"),wi.createElement($w,{ref:"contentArea",className:e},t)}return null},n.getValue=function(){var t;return f(this.render()).length?this.getOrientation()===Ci.VERTICAL?t=[wi.createElement(ta,{ref:"collapseIcon",collapsed:!this.isToggled,className:this.styleSheet.navElementVerticalArrow}),this.options.value]:this.getOrientation()===Ci.HORIZONTAL&&(t=[this.options.value,wi.createElement(ta,{collapsed:!1,className:this.styleSheet.navElementHorizontalArrow})]):t=this.options.value,t},n.getChildrenToRender=function(){return[this.getSelf(),this.getSubElements()]},n.showChildren=function(){this.contentArea.removeClass("hidden")},n.hideChildren=function(){this.contentArea.addClass("hidden")},n.toggleChildren=function(){f(this.render()).length&&(this.isToggled?this.hideChildren():this.showChildren(),this.collapseIcon&&this.collapseIcon.setCollapsed(this.isToggled),this.isToggled=!this.isToggled,this.saveToggledState())},n.getSessionKeyName=function(){var t=this.options.sessionKey||this.options.href;if(!t)throw Error("Persistent nav element needs a unique session key!");return t},n.getLocalToggledState=function(){return this.hasOwnProperty("isToggled")?!!this.isToggled:!!this.options.defaultToggled},n.getToggledState=function(){if(!this.options.persistent)return this.getLocalToggledState();var t=this.getSessionKeyName();return Jw.get(t,this.getLocalToggledState())},n.saveToggledState=function(){if(this.options.persistent){var t=this.getSessionKeyName();Jw.set(t,this.getLocalToggledState())}},n.onMount=function(){var e=this;t.prototype.onMount.call(this),this.addNodeListener("mouseenter",function(){e.getOrientation()===Ci.HORIZONTAL&&f(e.render()).length&&e.showChildren()}),this.addNodeListener("mouseleave",function(){e.getOrientation()===Ci.HORIZONTAL&&f(e.render()).length&&e.hideChildren()}),this.addClickListener(function(t){e.getOrientation()===Ci.VERTICAL&&(t.stopPropagation(),e.toggleChildren())})},e}(t)},eA=tA(wi.Primitive($w,"li")),nA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.navLinkElement)},n.render=function(){return this.options.children},e}(tA(Qw)),iA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.extraNodeAttributes=function(t){this.getOrientation()===Ci.HORIZONTAL?(t.addClass(this.styleSheet.navSectionHorizontal),t.setStyle("float",this.getAnchor())):t.addClass(this.styleSheet.navSectionVertical)},i.getAnchor=function(){return this.options.anchor||Ti.LEFT},i.getOrientation=function(){return this.parent.getOrientation()},n(e,[{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),e}(wi.Primitive("ul")),rA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.icon)},n.getValue=function(){return[this.getIcon(),this.getContent()]},n.getContent=function(){return null},n.getIcon=function(){return null},n.onMount=function(){this.addClickListener(function(t){t.stopPropagation()})},e}(eA),oA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.sideIcon)},n.getIcon=function(){return wi.createElement(Qs,{icon:"bars",size:Oi.LARGE})},e}(rA),sA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.sideIcon)},n.getIcon=function(){return wi.createElement(Qs,{icon:"ellipsis-v",size:Oi.LARGE})},e}(rA),aA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.extraNodeAttributes=function(e){t.prototype.extraNodeAttributes.call(this,e),e.addClass(this.styleSheet.wrappedIcon)},n.getIcon=function(){return wi.createElement(Qs,{icon:"ellipsis-h",size:Oi.LARGE})},e}(rA),lA=25,uA=60,cA=.5,hA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.extraNodeAttributes=function(t){t.addClass(this.styleSheet.sidePanelGroup),this.options.anchor===Ti.RIGHT?t.setStyle("right",0):t.setStyle("width","250px")},i.getOrientation=function(){return Ci.VERTICAL},n(e,[{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),e}(wi.Element),pA=(Gw=tt(Ww))(Yw=function(t){function e(){var e;return e=t.apply(this,arguments)||this,e.initNode(),e.applyVisibility(),e}r(e,t);var n=e.prototype;return n.initNode=function(){this.node||this.mount(document.body)},n.applyVisibility=function(){this.options.name&&(this.storageSerializer=new qw("sidePanel"+this.options.name),this.visible=this.storageSerializer.get("visible")),this.visible?this.show():this.hide()},n.extraNodeAttributes=function(t){this.options.anchor===Ti.RIGHT?(t.addClass(this.styleSheet.rightSidePanel),t.setStyle("right","0")):t.addClass(this.styleSheet.leftSidePanel)},n.setVisible=function(t){this.visible=t,this.storageSerializer&&this.storageSerializer.set("visible",t)},n.show=function(){this.options.anchor===Ti.RIGHT?this.removeClass(this.styleSheet.navVerticalRightHide):this.removeClass(this.styleSheet.navVerticalLeftHide),this.setVisible(!0)},n.hide=function(){this.options.anchor===Ti.RIGHT?this.addClass(this.styleSheet.navVerticalRightHide):this.addClass(this.styleSheet.navVerticalLeftHide),this.setVisible(!1)},n.toggle=function(){this.visible?this.hide():this.show()},n.getChildrenToRender=function(){return wi.createElement(hA,{ref:"this.wrappedPanel",anchor:this.options.anchor},this.render())},n.onMount=function(){this.addClickListener(function(t){t.stopPropagation()})},e}(wi.Element))||Yw,dA=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.hoverColor=function(){return Ww.getInstance().getColors().sidepanelHover},e.textColor=function(){return Ww.getInstance().getColors().text},e.navigatorTransitionTime=function(){return Ww.getInstance().dimensions.backgroundTransitionDuration},e}return r(e,t),e}(kc),fA=(Kw=tt(Ww))(Xw=function(t){function e(e){var n;return n=t.call(this,e)||this,n.initLeftSidePanel(),n.initRightSidePanel(),n}r(e,t);var n=e.prototype;return n.getCarouselStyleSheet=function(){return this.options.carouselStyleSheet||dA.getInstance()},n.getDefaultOptions=function(){return{persistentLeftSidePanel:!0,persistentRightSidePanel:!0}},n.initLeftSidePanel=function(){this.leftSidePanel=wi.createElement(pA,{anchor:Ti.LEFT,name:"left",persistent:this.options.persistentLeftSidePanel},wi.createElement(Pc,{ref:this.refLink("carousel"),styleSheet:this.getCarouselStyleSheet()},wi.createElement($w,{orientation:Ci.VERTICAL,ref:this.refLink("navigationPanel"),styleSheet:this.styleSheet},this.getLeftSidePanelChildren())))},n.initRightSidePanel=function(){this.rightSidePanel=wi.createElement(pA,{anchor:Ti.RIGHT,name:"right",persistent:this.options.persistentRightSidePanel},this.getRightSidePanelChildren())},n.getLeftSidePanelChildren=function(){return[]},n.getRightSidePanelChildren=function(){return[]},n.getLeftConditionedChildren=function(){return[]},n.getRightConditionedChildren=function(){return[]},n.extraNodeAttributes=function(t){t.addClass(this.styleSheet.navManager)},n.getOrientation=function(){return Ci.HORIZONTAL},n.leftSideIconAction=function(){this.wrapped?this.carousel.getActive()===this.navigationPanel?this.toggleLeftSidePanel():(this.carousel.setActive(this.navigationPanel),this.leftSidePanel.visible||this.toggleLeftSidePanel()):this.toggleLeftSidePanel()},n.getLeftSideIcon=function(){var t=this;return this.leftSidePanel?(this.leftPanelToggler||(this.leftPanelToggler=wi.createElement(oA,{onClick:function(){return t.leftSideIconAction()}})),this.leftPanelToggler):null},n.rightSideIconAction=function(){this.toggleRightSidePanel()},n.getRightSideIcon=function(){var t=this;return this.rightSidePanel?(this.rightPanelToggler||(this.rightPanelToggler=wi.createElement(sA,{onClick:function(){return t.rightSideIconAction()}})),this.rightPanelToggler):null},n.getFixedWidth=function(){for(var t=10,e=this.children,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}t+=r.getWidth()}return t-=this.getLeftConditioned().getWidth(),t-=this.getRightConditioned().getWidth()},n.wrappedIconAction=function(){this.wrapped?this.carousel.getActive()===this.wrappedPanel?this.toggleLeftSidePanel():(this.carousel.setActive(this.wrappedPanel),this.leftSidePanel.visible||this.toggleLeftSidePanel()):this.toggleLeftSidePanel()},n.getWrappedIcon=function(){var t=this;return this.wrappedToggler||(this.wrappedToggler=wi.createElement(aA,{onClick:function(){return t.wrappedIconAction()},className:this.wrapped?"":"hidden"})),this.wrappedToggler},n.getLeftFixed=function(){return[]},n.getRightFixed=function(){return[]},n.getLeftConditionedWrapper=function(){return this.leftConditionedWrapper||(this.leftConditionedWrapper=wi.createElement(iA,{anchor:Ti.LEFT},this.getLeftConditioned())),this.leftConditionedWrapper},n.getRightConditionedWrapper=function(){return this.rightConditionedWrapper||(this.rightConditionedWrapper=wi.createElement(iA,{anchor:Ti.RIGHT},this.getRightConditioned())),this.rightConditionedWrapper},n.getLeftConditioned=function(){return this.leftConditioned||(this.leftConditioned=wi.createElement(iA,null,this.getLeftConditionedChildren())),this.leftConditioned},n.getRightConditioned=function(){return this.rightConditioned||(this.rightConditioned=wi.createElement(iA,null,this.getRightConditionedChildren())),this.rightConditioned},n.toggleSidePanel=function(t,e){var n=t==this.leftSidePanel?this.rightSidePanel:this.leftSidePanel;t.toggle(),this.dispatch(e,t.visible),n&&t.visible&&n.visible&&(t.setStyle("z-index",3001),n.setStyle("z-index",3e3))},n.toggleLeftSidePanel=function(){this.toggleSidePanel(this.leftSidePanel,"toggledLeftSide")},n.toggleRightSidePanel=function(){this.toggleSidePanel(this.rightSidePanel,"toggledRightSide")},n.render=function(){return[this.getLeftSideIcon(),this.getLeftFixed(),this.getLeftConditionedWrapper(),this.getWrappedIcon(),wi.createElement(iA,{style:{marginLeft:"auto"}},this.getRightConditionedWrapper()),this.getRightFixed(),this.getRightSideIcon()]},n.bindToNode=function(){t.prototype.bindToNode.apply(this,arguments),this.onMount()},n.skipWrap=function(){this.wrapSkip=!0,this.wrapScheduled=!1},n.unskipWrap=function(){this.wrapSkip=!1,this.wrapScheduled&&this.checkForWrap()},n.checkForWrap=function(){var t=this;if(this.wrapSkip)return void(this.wrapScheduled=!0);var e=function(){t.wrapped=!1,t.getWrappedIcon().addClass("hidden"),_(t.getLeftConditioned(),t.getLeftConditionedWrapper()),_(t.getRightConditioned(),t.getRightConditionedWrapper()),t.carousel.eraseChild(t.wrappedPanel),t.getLeftConditioned().redraw(),t.getRightConditioned().redraw()};if(this.getLeftConditioned().children.length||this.getRightConditioned().children.length){if(!this.wrapped){this.unwrappedTotalWidth=10;for(var n=this.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;this.unwrappedTotalWidth+=s.getWidth()}}window.innerWidth<this.unwrappedTotalWidth&&!this.wrapped?(!function(){t.wrapped=!0,t.wrappedPanel=wi.createElement($w,{orientation:Ci.VERTICAL,styleSheet:t.styleSheet}),t.carousel.appendChild(t.wrappedPanel),_(t.getRightConditioned(),t.wrappedPanel),_(t.getLeftConditioned(),t.wrappedPanel),t.getRightConditioned().redraw(),t.getLeftConditioned().redraw(),t.getWrappedIcon().removeClass("hidden")}(),this.dispatch("wrapped",!0)):window.innerWidth>=this.unwrappedTotalWidth&&this.wrapped&&(e(),this.dispatch("wrapped",!1))}else this.wrapped&&e()},n.onMount=function(){var t=this;e.Global=this,ri(this),setTimeout(function(){return t.checkForWrap()}),window.addEventListener("resize",function(){return t.checkForWrap()}),this.addListener("maybeWrap",function(){return t.checkForWrap()}),this.addClickListener(function(t){t.stopPropagation()})},e}(wi.Primitive("nav")))||Xw,gA=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,e.leftSidePanel=null,e.rightSidePanel=null,e}r(e,t);var n=e.prototype;return n.getLeftFixed=function(){return[wi.createElement(iA,{anchor:Ti.LEFT,style:{margin:0}},wi.createElement(nA,{value:"Home",href:"/"}),wi.createElement(nA,{value:"Blog",href:"/blog"}))]},n.getUserElement=function(){return USER.isAuthenticated?wi.createElement(eA,{value:[wi.createElement(Qs,{icon:"user",style:{marginRight:"0.3rem"}}),USER.email]},wi.createElement(eA,{value:wi.T("Settings")}),wi.createElement(eA,{value:wi.T("Logout"),onClick:function(){return oi()}})):wi.createElement(eA,{value:wi.T("Login/Signup"),onClick:function(){return _m.show()}})},n.getRightFixed=function(){return[wi.createElement(iA,{anchor:Ti.RIGHT,style:{margin:0}},this.getUserElement(),wi.createElement(nA,{value:wi.T("About"),href:"/about/"}))]},e}(fA),mA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t),e.init=function(){return co.prototype.onMount=si,self.appInstance=this.create(document.body)};var n=e.prototype;return n.getRoutes=function(){return this.options.routes},n.getBeforeContainer=function(){return null},n.getRouterOptions=function(){return{style:{height:"100%"}}},n.getRouter=function(){return wi.createElement($o,i({routes:this.getRoutes(),ref:"router"},this.getRouterOptions()))},n.getContainer=function(){return wi.createElement(wc,null,this.getRouter())},n.getAfterContainer=function(){return null},n.render=function(){return[this.getBeforeContainer(),this.getContainer(),this.getAfterContainer()]},n.onMount=function(){this.router&&this.router.addListener("change",function(){document.body.click(),di.Global.dispatch("closeAllModals")})},e}(wi.Element),yA=function(t){function e(e,n,i){var r;return void 0===i&&(i={}),r=t.call(this)||this,r.websocketSubscriber=e,r.streamName=n,r.options=i,r.bytesReceived=0,r.isIndexed=!1,r.lastMessageIndex=-1,r.messageBuffer=new Map,r.missedPackets=0,r.status=r.constructor.NONE,r.tryCount=0,r}r(e,t);var n=e.prototype;return n.sendSubscribe=function(){var t=this,e=this.websocketSubscriber;this.clearResubscribeTimeout(),this.status=this.constructor.SUBSCRIBING,this.haveIndex()?e.sendResubscribe(this.streamName,this.getLastIndex()):e.sendSubscribe(this.streamName),this.subscribeTryCount++;var n=e.constructor.STREAM_SUBSCRIBE_TIMEOUT||3e3,i=e.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT||3e4,r=Math.min(n*this.subscribeTryCount,i);this.resendSubscribeTimeout=setTimeout(function(){console.log("WebsocketSubscriber: stream subscribe timeout for #"+t.streamName+" reached! Trying to resubscribe again!"),t.sendSubscribe()},r)},n.clearResubscribeTimeout=function(){this.resendSubscribeTimeout&&(clearTimeout(this.resendSubscribeTimeout),this.resendSubscribeTimeout=void 0)},n.setStatusSubscribed=function(){this.clearResubscribeTimeout(),this.status=this.constructor.SUBSCRIBED},n.getStatus=function(){return this.status},n.resetStatus=function(){this.clearResubscribeTimeout(),this.status=this.constructor.NONE,this.subscribeTryCount=0},n.processPacket=function(t){this.bytesReceived+=t.length;var e,n;if("{"===t[0])e="v",n=t;else{var i=t.indexOf(" ");if(!(i>0))return void console.error("WebsocketStreamHandler: Could not process stream packet: "+t);e=t.substr(0,i).trim(),n=t.substr(i+1).trim()}"i"===e?this.processIndexedPacket(n):"v"===e?this.processVanillaPacket(n):"n"===e?this.processMissedPacket(n):console.error("WebsocketStreamHandler: invalid packet type "+e)},n.processIndexedMessage=function(t,e){if(this.isIndexed=!0,-1==this.lastMessageIndex)this.lastMessageIndex=t,this.processVanillaPacket(e);else if(this.lastMessageIndex+1==t)for(this.lastMessageIndex=t,this.processVanillaPacket(e),++t;this.messageBuffer.has(t);)e=this.messageBuffer.get(t),this.messageBuffer.delete(t),this.lastMessageIndex=t,this.processVanillaPacket(e),++t;else this.messageBuffer.set(t,e)},n.processMissedPacket=function(t){this.processIndexedMessage(parseInt(t),e.MISSING_MESSAGE)},n.processVanillaPacket=function(t){if(t==e.MISSING_MESSAGE&&this.missedPackets++,!this.options.rawMessage)try{t=JSON.parse(t)}catch(e){if(!this.options.parseMayFail)return void console.error("WebsocketStreamHandler: Failed to parse ",t," on stream ",this.streamName," Exception:",e.message)}this.dispatch(t)},n.processIndexedPacket=function(t){var e,n,i=t.indexOf(" ");if(!(i>0))return void console.error("WebsocketStreamHandler: Could not process indexed stream packet: "+t);n=parseInt(t.substr(0,i).trim()),e=t.substr(i+1).trim(),this.processIndexedMessage(n,e)},n.haveIndex=function(){return this.isIndexed},n.getLastIndex=function(){return this.lastMessageIndex},e}(di);yA.NONE=Symbol(),yA.SUBSCRIBING=Symbol(),yA.SUBSCRIBED=Symbol(),yA.UNSUBSCRIBED=Symbol(),yA.MISSING_MESSAGE="INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW";var bA=function(t){function e(n){var i;return void 0===n&&(n=self.WEBSOCKET_URL),i=t.call(this)||this,Array.isArray(n)||(n=[n]),i.urls=n,i.streamHandlers=new Map,i.attemptedConnect=!1,i.connectionStatus=e.ConnectionStatus.NONE,i.websocket=null,i.failedReconnectAttempts=0,i.numConnectionAttempts=0,i}r(e,t);var n=e.prototype;return n.setConnectionStatus=function(t){this.connectionStatus=t,this.dispatch("connectionStatus",t)},n.getNextUrl=function(){var t=this.numConnectionAttempts++%this.urls.length;return this.urls[t]},
n.newConnection=function(t){return new WebSocket(t)},n.connect=function(){var t=this,n=this.getNextUrl();this.setConnectionStatus(e.ConnectionStatus.CONNECTING);try{console.log("WebsocketSubscriber: Connecting to "+n+" ..."),this.websocket=this.newConnection(n),this.websocket.onopen=function(){t.onWebsocketOpen()},this.websocket.onmessage=function(e){t.onWebsocketMessage(e)},this.websocket.onerror=function(e){t.onWebsocketError(e)},this.websocket.onclose=function(e){t.onWebsocketClose(e)}}catch(t){this.tryReconnect(),console.error("WebsocketSubscriber: Failed to connect to ",n,"\nError: ",t.message)}},n.tryReconnect=function(){var t=this,n=Math.min(e.CONNECT_RETRY_TIMEOUT*this.failedReconnectAttempts,e.CONNECT_RETRY_MAX_TIMEOUT);this.failedReconnectAttempts++,this.reconnectTimeout||(this.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,console.log("WebsocketSubscriber: Trying to reconnect websocket connection"),t.connect()},n))},n.getStreamStatus=function(t){var e=this.getStreamHandler(t);return e&&e.status},n.subscribe=function(t){if(console.log("WebsocketSubscriber: Subscribing to stream ",t),this.attemptedConnect||(this.connect(),this.attemptedConnect=!0),this.streamHandlers.has(t))return void console.warning("WebsocketSubscriber: Already subscribed to stream ",t);var e=new yA(this,t);return this.streamHandlers.set(t,e),this.isOpen()&&this.sendSubscribe(t),e},n.isOpen=function(){return this.websocket&&1===this.websocket.readyState},n.sendSubscribe=function(t){this.isOpen()&&this.send("s "+t)},n.sendResubscribe=function(t,e){this.isOpen(t)&&this.send("r "+e+" "+t)},n.resubscribe=function(){for(var t=this.streamHandlers.values(),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}i.sendSubscribe()}},n.onStreamSubscribe=function(t){var e=this.getStreamHandler(t);if(!e)return void console.error("WebsocketSubscriber: received subscribe success response for unrequested stream #"+t);e.setStatusSubscribed()},n.onWebsocketOpen=function(){this.previousFailedReconnectAttempts=this.failedReconnectAttempts,this.failedReconnectAttempts=0,console.log("WebsocketSubscriber: Websocket connection established!"),this.reset(),this.setConnectionStatus(e.ConnectionStatus.CONNECTED),this.resubscribe()},n.processStreamPacket=function(t){var e,n,i=t.indexOf(" ");if(!(i>0))return void console.error("WebsocketSubscriber: Could not process stream packet: "+t);e=t.substr(0,i).trim(),n=t.substr(i+1).trim();var r=this.streamHandlers.get(e);if(!r)return void console.error("WebsocketSubscriber: No handler for websocket stream ",e);r.processPacket(n)},n.fatalErrorClose=function(t){this.failedReconnectAttempts=this.previousFailedReconnectAttempts,console.error("WebsocketSubscriber: server fatal error close: ",t),this.onWebsocketError(t)},n.onWebsocketMessage=function(t){if(t.data===e.HEARTBEAT_MESSAGE);else{var n,i,r=t.data.indexOf(" ");if(r>0?(n=t.data.substr(0,r).trim(),i=t.data.substr(r+1).trim()):(n=t.data,i=""),"e"===n||"error"===n){console.error("WebsocketSubscriber: Websocket error: ",i),i=i.split(" ");if("invalidSubscription"===i[0]){var o=i[1],s=this.getStreamHandler(o);s&&s.clearResubscribeTimeout()}}else"s"===n?(console.log("WebsocketSubscriber: Successfully subscribed to stream ",i),this.onStreamSubscribe(i)):"m"===n?this.processStreamPacket(i):"c"===n?this.dispatch("serverCommand",i):"efc"==n?this.fatalErrorClose(i):console.error("WebsocketSubscriber: Can't process "+t.data)}},n.reset=function(){this.setConnectionStatus(e.ConnectionStatus.DISCONNECTED);for(var t=this.streamHandlers.values(),n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}r.resetStatus()}},n.onWebsocketError=function(t){console.error("WebsocketSubscriber: Websocket connection is broken!"),this.reset(),this.tryReconnect()},n.onWebsocketClose=function(t){console.log("WebsocketSubscriber: Connection closed!"),this.reset(),this.tryReconnect()},n.send=function(t){this.websocket.send(t)},n.getStreamHandler=function(t){var e=this.streamHandlers.get(t);return e||(e=this.subscribe(t)),e},n.addStreamListener=function(t,e){var n=this.getStreamHandler(t);n.callbackExists(e)||n.addListener(e)},n.removeStreamListener=function(t,e){var n=this.streamHandlers.get(t);n&&n.removeListener(e)},e.addListener=function(t,e){return this.Global.addStreamListener(t,e)},e}(gi);bA.ConnectionStatus={NONE:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3},bA.STREAM_SUBSCRIBE_TIMEOUT=3e3,bA.STREAM_SUBSCRIBE_MAX_TIMEOUT=3e4,bA.CONNECT_RETRY_TIMEOUT=3e3,bA.CONNECT_RETRY_MAX_TIMEOUT=3e4,bA.HEARTBEAT_MESSAGE="-hrtbt-",bA.Global=new bA;var vA,SA,wA,AA,EA,xA,CA,TA,LA,OA,RA,NA,IA,kA,MA,PA,DA,zA,_A,BA,HA=(vA=K({selector:"body"}),SA=K({selector:".hidden"}),wA=K({selector:"*"}),AA=K({selector:"a"}),EA=K({selector:"hr"}),xA=K({selector:"code, pre"}),CA=K({selector:"code"}),TA=K({selector:"pre"}),LA=K({selector:"pre code"}),OA=BA=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"body",RA,h(e)),p(e,"hidden",NA,h(e)),p(e,"everything",IA,h(e)),p(e,"a",kA,h(e)),p(e,"hr",MA,h(e)),p(e,"codeAndPre",PA,h(e)),p(e,"code",DA,h(e)),p(e,"pre",zA,h(e)),p(e,"preInCode",_A,h(e)),e}return r(e,t),e}(Fi),RA=d(OA.prototype,"body",[vA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:0,fontSize:this.themeProperties.FONT_SIZE_DEFAULT,fontFamily:this.themeProperties.FONT_FAMILY_DEFAULT}}}),NA=d(OA.prototype,"hidden",[SA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),IA=d(OA.prototype,"everything",[wA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxSizing:"border-box"}}}),kA=d(OA.prototype,"a",[AA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none",color:this.themeProperties.COLOR_LINK}}}),MA=d(OA.prototype,"hr",[EA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,marginTop:"20px",marginBottom:"20px",border:0,borderTop:"1px solid #eee",boxSizing:"content-box"}}}),PA=d(OA.prototype,"codeAndPre",[xA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProperties.FONT_FAMILY_MONOSPACE}}}),DA=d(OA.prototype,"code",[CA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"2px 4px",fontSize:"90%",color:"#345 !important",backgroundColor:"#f8f2f4 !important",borderRadius:this.themeProperties.BUTTON_BORDER_RADIUS}}}),zA=d(OA.prototype,"pre",[TA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"auto",display:"block",padding:this.themeProperties.BUTTON_BORDER_RADIUS,margin:"0 0 10px",fontSize:"13px",lineHeight:"1.42857143",color:"#333",wordBreak:"break-all",wordWrap:"break-word",backgroundColor:"#f5f5f5",border:"1px solid #ccc"}}}),_A=d(OA.prototype,"preInCode",[LA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,fontSize:"inherit",color:"inherit",whiteSpace:"pre-wrap",backgroundColor:"transparent",borderRadius:0}}}),OA),FA=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.init=function(){return this.loadPublicState(),this.addAjaxProcessors(),this.registerWebsocketStreams(),this.initializeViewportMeta(),this.configureTheme(),this.initializeGlobalStyle(),t.init.call(this)},e.loadPublicState=function(){of.importState(self.PUBLIC_STATE||{})},e.addAjaxProcessors=function(){Na.addPreprocessor(function(t){t.disableCredentials||(t.credentials=t.credentials||"include",t.headers.set("X-CSRFToken",T("csrftoken")))}),Na.addPostprocessor(function(t,e){t.state&&!e.options.disableStateImport&&of.importState(t.state)}),Na.addPostprocessor(function(t,e){var n=e.getResponseHeaders(),i=n.get("date");if(i){var r=new Kc(i).add(600);ch.set(r,!0)}}),Na.addPostprocessor(function(t){if(t.error)throw t.error}),Na.addErrorPostprocessor(function(t){return Ov.wrapError(t)}),Na.errorHandler=function(t){return Ov.showErrorAlert(t)}},e.registerWebsocketStreams=function(){of.registerStream=function(t){bA.addListener(t,of.applyEventWrapper)},of.registerStream("global-events"),self.USER&&self.USER.id&&of.registerStream("user-"+self.USER.id+"-events")},e.initializeViewportMeta=function(){return this.viewportMeta=po.create(document.head)},e.configureTheme=function(){},e.initializeGlobalStyle=function(){HA.initialize()},e}(mA);FA.MIN_VIEWPORT_META_WIDTH=375,Zo.setDefaultTitle("Mundipedia");var UA=Gi.Global.getProperties();Gi.Global.setProperties({FONT_FAMILY_SANS_SERIF:"'Mundigrotesque Light', "+UA.FONT_FAMILY_SANS_SERIF,COLOR_ALTERNATIVE_WHITE:"#e3e3e3",COLOR_PALE_BRIGHT_BLUE:"#bbbbc9",COLOR_BACKGROUND:"#f3f4f5",COLOR_TEXT:"#222",GLOBAL_YEAR_SELECT_HEIGHT:60});var WA,VA,jA,GA,YA=(WA=K({selector:"@font-face"}),VA=GA=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p(e,"mundiFontFace",jA,h(e)),e}return r(e,t),e}(HA),jA=d(VA.prototype,"mundiFontFace",[WA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:"'Mundigrotesque Light'",src:"url('/static/fonts/Mundigrotesque-Light.woff') format('woff')"}}}),VA),KA=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getBeforeContainer=function(){return wi.createElement(gA,{ref:"navManager"})},e.initializeGlobalStyle=function(){return YA.initialize()},n.getRoutes=function(){return Uw},e}(FA);return t.AppClass=KA,t.Theme=Gi,t.registerStyle=tt,t}({});
//# sourceMappingURL=bundle.js.map
